local mod = RegisterMod("eternal edition FOR REPENTANCE", 1)
local horseshoot = Isaac.GetSoundIdByName("horsemen shoot")
local isaacattack = Isaac.GetSoundIdByName("Isaac Attack")
local Sslothsoundattack1 = Isaac.GetSoundIdByName("super sloth spawn flies")
local Sslothsoundattack2 = Isaac.GetSoundIdByName("super sloth spawn spiders")
local newleechsound = Isaac.GetSoundIdByName("New Leech Sound")
local Eterepernalrng = RNG()
Eterepernalrng:SetSeed(Random(), 1)
RNG():SetSeed(Random(), 3)
EterepCheckFloor = 0
Eterepdeliriumcooldown = 0
Eterepsetvalues = 0
Eterepisaaclightbeam1 = 0
Eterepisaaclightbeam2 = 0
Eterepisaaclightbeam3 = 0
Eterepisaaclightbeam4 = 0
Eterepventricle = 0
EterepLamb = 0
EterepPoofer = 0
Eterepmothermaggotattack = 4
EterepDelirium = 0
Eterepisaacisdamagedwithlokis = 0
Etereppoofersuperheal = 0
Eterepchoosehushattack1 = Eterepernalrng:RandomInt(5)+1
Eterepchoosehushattack2 = Eterepernalrng:RandomInt(5)+1
Eterephushattack1 = Eterepernalrng:RandomInt(5)+1
Eterephushattack2 = Eterepernalrng:RandomInt(5)+1
Eterephushattack3 = Eterepernalrng:RandomInt(5)+1
Etereplaserrotation = 0
Eterepheretic = 0
Eterephereticiscreatingfires = false
Eterepdogma = false
EterepVisage = false
Eterepspecialhalfheartattack = false
EterepGideonCorpse = false
Eterepdogmaattack = 0
Eterepdogmascreamed = 0
Eterepbeastdived = 0
Eterephushlocation2 = ignore
Eterephushlocation3 = ignore
Eterepdogmaangeldied = false
EterepCountEternalMonsters = 0
EterepSistersVis = false
Eterepmrfredunleash = false
EterepHeartSpawn = false
Etereplacementernal = false
EterepCustomAngle = Eterepernalrng:RandomInt(360)+1
Eterepmegasatansixattack = 0
Eterepmegasatanattack = 0
EterepMfredAngle = Eterepernalrng:RandomInt(360)+1
EterepMausoleumheartangle = Eterepernalrng:RandomInt(360)+1
EterepGideon = false
EterepUltraGreed = false
EterepMegaSatan = false
EterepMother = false
EterepRotgut = false
EterepNotRotgut = false
Eterepoptions2pickups = 0
Etereptimingfornewwave = 0
Eterepeternalarenacanappear = 0
Eterepitemwascollected = 0
Eterepeternalwave = Eterepernalrng:RandomInt(3)+1
Eterepeternalenemiescanappear = 0
Eterepangelicitemappeared = 0
Eterepeternalarenawave = 0
Eterepickupsdisappear = 0
Eterepmenuarrowposition = 0
Eterepismenuopen = false
Eterepmenudelay = 0
Eterepmenuscreen = 0
EterepCostume = Isaac.GetCostumeIdByPath("gfx/characters/eternal.anm2")
EterepCostume_Forgotten = Isaac.GetCostumeIdByPath("gfx/characters/eternal2.anm2")
Eterepheartsforeternaltransformation = 0
Eterepeternaltransformation = 0
EterepStarterValue = 0
EterepFallenAngelRedLaser = 0

if mod:HasData() == false then
EterepRegenMonster = 1
EterepRegenBoss = 1
EterepReplaceChanceFinalBoss = 100
EterepMonstersLimit = 3
EterepReplaceMonster0 = 15
EterepReplaceMonster1 = 15
EterepReplaceMonster2 = 2
EterepReplaceMonster3 = 1
EterepReplaceMonster4 = 0
EtereplaceChanceBoss = 33
EtereplaceChanceSin = 33
EterepClassicEnemiesPatterns = 0
EterepDamageLimit = 0
EterepChallengeRoom = 12
EterepTranformation = 1
EterepBombtoTrollBomb = 0
EterepReducedArmor = 0
EterepClassicShotSpeed = 0
EterepD6Nerf = 0
EterepJokerNerf = 0
EterepLessKeys = 0
EterepMonstersreward = 20
EterepBossesreward = 50
EterepLessPickupDrops = 0
end

function mod:EterepReload(SaveData)
local modDatastring = Isaac.LoadModData(mod)
if mod:HasData() == true then
Isaac.DebugString(modDatastring)
Eterep1,Eterep2,Eterep3,Eterep4,Eterep5,Eterep6,Eterep7,Eterep8,Eterep9,Eterep10,Eterep11,Eterep12,Eterep13,Eterep14,Eterep15,Eterep16,Eterep17,Eterep18,Eterep19,Eterep20,Eterep21,Eterep22,Eterep23,Eterep24,Eterep25,Eterep26,Eterep27,Eterep28,Eterep29,Eterep30,Eterep31,Eterep32 = modDatastring:match("([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+),([^,]+)")
EterepRegenMonster = tonumber(Eterep1)
EterepRegenBoss = tonumber(Eterep2)
EterepReplaceChanceFinalBoss = tonumber(Eterep3)
EterepMonstersLimit = tonumber(Eterep4)
EterepReplaceMonster0 = tonumber(Eterep5)
EterepReplaceMonster1 = tonumber(Eterep6)
EterepReplaceMonster2 = tonumber(Eterep7)
EterepReplaceMonster3 = tonumber(Eterep8)
EterepReplaceMonster4 = tonumber(Eterep9)
EtereplaceChanceBoss = tonumber(Eterep10)
EtereplaceChanceSin = tonumber(Eterep11)
EterepClassicEnemiesPatterns = tonumber(Eterep12)
EterepDamageLimit = tonumber(Eterep13)
EterepChallengeRoom = tonumber(Eterep14)
EterepTranformation = tonumber(Eterep15)
EterepBombtoTrollBomb = tonumber(Eterep16)
EterepReducedArmor = tonumber(Eterep17)
EterepClassicShotSpeed = tonumber(Eterep18)
EterepD6Nerf = tonumber(Eterep19)
EterepJokerNerf = tonumber(Eterep20)
EterepLessKeys = tonumber(Eterep21)
EterepMonstersreward = tonumber(Eterep22)
EterepBossesreward = tonumber(Eterep23)
EterepLessPickupDrops = tonumber(Eterep24)
Eterepeternalarenacanappear = tonumber(Eterep25)
Eterepitemwascollected = tonumber(Eterep26)
Eterepangelicitemappeared = tonumber(Eterep27)
Eterepconfigsaver = tonumber(Eterep28)
Eterepeternalarenawave = tonumber(Eterep29)
Eterepeternalwave = tonumber(Eterep30)
Eterepheartsforeternaltransformation = tonumber(Eterep31)
Eterepeternaltransformation = tonumber(Eterep32)
end
if mod:HasData() == false or EterepReplaceMonster1 == nil or EterepReplaceMonster1 > 100 or Eterepsetvalues == 1 then
EterepRegenMonster = 1
EterepRegenBoss = 1
EterepReplaceChanceFinalBoss = 100
EterepMonstersLimit = 3
EterepReplaceMonster0 = 15
EterepReplaceMonster1 = 15
EterepReplaceMonster2 = 2
EterepReplaceMonster3 = 1
EterepReplaceMonster4 = 0
EtereplaceChanceBoss = 33
EtereplaceChanceSin = 33
EterepClassicEnemiesPatterns = 0
EterepDamageLimit = 0
EterepChallengeRoom = 12
EterepTranformation = 1
EterepBombtoTrollBomb = 0
EterepReducedArmor = 0
EterepClassicShotSpeed = 0
EterepD6Nerf = 0
EterepJokerNerf = 0
EterepLessKeys = 0
EterepLessPickupDrops = 0
EterepMonstersreward = 20
EterepBossesreward = 50
Eterepsetvalues = 0
end
if Eterepsetvalues == 2 then
EterepRegenMonster = Eterepernalrng:RandomInt(4)
EterepRegenBoss = Eterepernalrng:RandomInt(4)
EterepReplaceChanceFinalBoss = Eterepernalrng:RandomInt(101)
EterepMonstersLimit = Eterepernalrng:RandomInt(5)
EterepReplaceMonster0 = Eterepernalrng:RandomInt(101)
EterepReplaceMonster1 = Eterepernalrng:RandomInt(101)
EterepReplaceMonster2 = Eterepernalrng:RandomInt(101)
EterepReplaceMonster3 = Eterepernalrng:RandomInt(101)
EterepReplaceMonster4 = Eterepernalrng:RandomInt(101)
EtereplaceChanceBoss = Eterepernalrng:RandomInt(101)
EtereplaceChanceSin = Eterepernalrng:RandomInt(101)
EterepClassicEnemiesPatterns = Eterepernalrng:RandomInt(2)
EterepDamageLimit = Eterepernalrng:RandomInt(2)
EterepChallengeRoom = Eterepernalrng:RandomInt(101)
EterepTranformation = Eterepernalrng:RandomInt(2)
EterepBombtoTrollBomb = Eterepernalrng:RandomInt(101)
EterepReducedArmor = Eterepernalrng:RandomInt(2)
EterepClassicShotSpeed = Eterepernalrng:RandomInt(2)
EterepD6Nerf = Eterepernalrng:RandomInt(2)
EterepJokerNerf = Eterepernalrng:RandomInt(2)
EterepLessKeys = Eterepernalrng:RandomInt(101)
EterepLessPickupDrops = Eterepernalrng:RandomInt(101)
EterepMonstersreward = Eterepernalrng:RandomInt(101)
EterepBossesreward = Eterepernalrng:RandomInt(101)
Eterepsetvalues = 0
end
if EterepRegenMonster ~= 0 and EterepRegenMonster ~= 1 and EterepRegenMonster ~= 2 and EterepRegenMonster ~= 3 then
EterepRegenMonster = 1
end
if EterepRegenBoss ~= 0 and EterepRegenBoss ~= 1 and EterepRegenBoss ~= 2 and EterepRegenBoss ~= 3 then
EterepRegenBoss = 1
end
if EterepReplaceChanceFinalBoss == nil or EterepReplaceChanceFinalBoss < 0 or EterepReplaceChanceFinalBoss > 100 then
EterepReplaceChanceFinalBoss = 100
end
if EterepMonstersLimit < 0 or EterepMonstersLimit > 4 or EterepMonstersLimit == nil then
EterepMonstersLimit = 3
end
if EterepReplaceMonster0 == nil or EterepReplaceMonster0 < 0 or EterepReplaceMonster0 > 100 then
EterepReplaceMonster0 = 15
end
if EterepReplaceMonster1 == nil or EterepReplaceMonster1 < 0 or EterepReplaceMonster1 > 100 then
EterepReplaceMonster1 = 15
end
if EterepReplaceMonster2 == nil or EterepReplaceMonster2 < 0 or EterepReplaceMonster2 > 100 then
EterepReplaceMonster2 = 2
end
if EterepReplaceMonster3 == nil or EterepReplaceMonster3 < 0 or EterepReplaceMonster3 > 100 then
EterepReplaceMonster3 = 1
end
if EterepReplaceMonster4 == nil or EterepReplaceMonster4 < 0 or EterepReplaceMonster4 > 100 then
EterepReplaceMonster4 = 0
end
if EtereplaceChanceBoss == nil or EtereplaceChanceBoss < 0 or EtereplaceChanceBoss > 100 then
EtereplaceChanceBoss = 33
end
if EtereplaceChanceSin == nil or EtereplaceChanceSin < 0 or EtereplaceChanceSin > 100 then
EtereplaceChanceSin = 33
end
if EterepClassicEnemiesPatterns ~= 0 and EterepClassicEnemiesPatterns ~= 1 then
EterepClassicEnemiesPatterns = 0
end
if EterepDamageLimit ~= 0 and EterepDamageLimit ~= 1 then
EterepDamageLimit = 0
end
if EterepChallengeRoom == nil or EterepChallengeRoom < 0 or EterepChallengeRoom > 100 then
EterepChallengeRoom = 12
end
if EterepTranformation ~= 0 and EterepTranformation ~= 1 then
EterepTranformation = 1
end
if EterepBombtoTrollBomb == nil or EterepBombtoTrollBomb < 0 or EterepBombtoTrollBomb > 100 then
EterepBombtoTrollBomb = 0
end
if EterepReducedArmor ~= 0 and EterepReducedArmor ~= 1 then
EterepReducedArmor = 0
end
if EterepClassicShotSpeed ~= 0 and EterepClassicShotSpeed ~= 1 then
EterepClassicShotSpeed = 0
end
if EterepD6Nerf ~= 0 and EterepD6Nerf ~= 1 then
EterepD6Nerf = 0
end
if EterepJokerNerf ~= 0 and EterepJokerNerf ~= 1 then
EterepJokerNerf = 0
end
if EterepLessKeys == nil or EterepLessKeys < 0 or EterepLessKeys > 100 then
EterepLessKeys = 0
end
if EterepBossesreward == nil or EterepBossesreward < 0 or EterepBossesreward > 100 then
EterepBossesreward = 50
end
if EterepMonstersreward == nil or EterepMonstersreward < 0 or EterepMonstersreward > 100 then
EterepMonstersreward = 20
end
if EterepLessPickupDrops == nil or EterepLessPickupDrops < 0 or EterepLessPickupDrops > 100 then
EterepLessPickupDrops = 0
end
if (Game():GetLevel():GetStage() == LevelStage.STAGE1_1 or Game():GetLevel():GetStage() == LevelStage.STAGE1_GREED) and SaveData == false then
Eterepeternalenemiescanappear = 0
Eterepitemwascollected = 0
Eterepangelicitemappeared = 0
Eterepeternalarenawave = 0
Eterepeternalwave = 1
Eterepeternalarenacanappear = 0
Eterepheartsforeternaltransformation = 0
Eterepeternaltransformation = 0
end
if Eterepconfigsaver ~= 32 and Eterepconfigsaver ~= 33 then
EterepReplaceChanceFinalBoss = 100
EterepMonstersreward = 20
EterepBossesreward = 50
Eterepconfigsaver = 32
EterepChallengeRoom = 12
local modDataString = ""
modDataString = modDataString
.. tostring (EterepRegenMonster) .. "," .. "\r\n"
.. tostring (EterepRegenBoss) .. "," .. "\r\n"
.. tostring (EterepReplaceChanceFinalBoss) .. "," .. "\r\n"
.. tostring (EterepMonstersLimit) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster0) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster1) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster2) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster3) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster4) .. "," .. "\r\n"
.. tostring (EtereplaceChanceBoss) .. "," .. "\r\n"
.. tostring (EtereplaceChanceSin) .. "," .. "\r\n"
.. tostring (EterepClassicEnemiesPatterns) .. "," .. "\r\n"
.. tostring (EterepDamageLimit) .. "," .. "\r\n"
.. tostring (EterepChallengeRoom) .. "," .. "\r\n"
.. tostring (EterepTranformation) .. "," .. "\r\n"
.. tostring (EterepBombtoTrollBomb) .. "," .. "\r\n"
.. tostring (EterepReducedArmor) .. "," .. "\r\n"
.. tostring (EterepClassicShotSpeed) .. "," .. "\r\n"
.. tostring (EterepD6Nerf) .. "," .. "\r\n"
.. tostring (EterepJokerNerf) .. "," .. "\r\n"
.. tostring (EterepLessKeys) .. "," .. "\r\n"
.. tostring (EterepMonstersreward) .. "," .. "\r\n"
.. tostring (EterepBossesreward) .. "," .. "\r\n"
.. tostring (EterepLessPickupDrops) .. "," .. "\r\n"
.. tostring (Eterepeternalarenacanappear) .. "," .. "\r\n"
.. tostring (Eterepitemwascollected) .. "," .. "\r\n"
.. tostring (Eterepangelicitemappeared) .. "," .. "\r\n"
.. tostring (Eterepconfigsaver) .. "," .. "\r\n"
.. tostring (Eterepeternalarenawave) .. "," .. "\r\n"
.. tostring (Eterepeternalwave) .. "," .. "\r\n"
.. tostring (Eterepheartsforeternaltransformation) .. "," .. "\r\n"
.. tostring (Eterepeternaltransformation)
Isaac.SaveModData(mod,modDataString)
end
if Eterepconfigsaver ~= 33 then
Eterepconfigsaver = 33
EterepChallengeRoom = 12
local modDataString = ""
modDataString = modDataString
.. tostring (EterepRegenMonster) .. "," .. "\r\n"
.. tostring (EterepRegenBoss) .. "," .. "\r\n"
.. tostring (EterepReplaceChanceFinalBoss) .. "," .. "\r\n"
.. tostring (EterepMonstersLimit) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster0) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster1) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster2) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster3) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster4) .. "," .. "\r\n"
.. tostring (EtereplaceChanceBoss) .. "," .. "\r\n"
.. tostring (EtereplaceChanceSin) .. "," .. "\r\n"
.. tostring (EterepClassicEnemiesPatterns) .. "," .. "\r\n"
.. tostring (EterepDamageLimit) .. "," .. "\r\n"
.. tostring (EterepChallengeRoom) .. "," .. "\r\n"
.. tostring (EterepTranformation) .. "," .. "\r\n"
.. tostring (EterepBombtoTrollBomb) .. "," .. "\r\n"
.. tostring (EterepReducedArmor) .. "," .. "\r\n"
.. tostring (EterepClassicShotSpeed) .. "," .. "\r\n"
.. tostring (EterepD6Nerf) .. "," .. "\r\n"
.. tostring (EterepJokerNerf) .. "," .. "\r\n"
.. tostring (EterepLessKeys) .. "," .. "\r\n"
.. tostring (EterepMonstersreward) .. "," .. "\r\n"
.. tostring (EterepBossesreward) .. "," .. "\r\n"
.. tostring (EterepLessPickupDrops) .. "," .. "\r\n"
.. tostring (Eterepeternalarenacanappear) .. "," .. "\r\n"
.. tostring (Eterepitemwascollected) .. "," .. "\r\n"
.. tostring (Eterepangelicitemappeared) .. "," .. "\r\n"
.. tostring (Eterepconfigsaver) .. "," .. "\r\n"
.. tostring (Eterepeternalarenawave) .. "," .. "\r\n"
.. tostring (Eterepeternalwave) .. "," .. "\r\n"
.. tostring (Eterepheartsforeternaltransformation) .. "," .. "\r\n"
.. tostring (Eterepeternaltransformation)
Isaac.SaveModData(mod,modDataString)
end
local bosschancetoeternal1 = Eterepernalrng:RandomInt(100)+1
local bosschancetoeternal2 = Eterepernalrng:RandomInt(100)+1
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) == 0 then
Etereplacementernal = true
end
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) >= 1 then
Etereplacementernal = false
end
if bosschancetoeternal1 > EtereplaceChanceBoss then
Etereplacementernal = false
end
if bosschancetoeternal1 <= EterepReplaceChanceFinalBoss then
EterepFinalacementernal = true
end
if bosschancetoeternal1 > EterepReplaceChanceFinalBoss then
EterepFinalacementernal = false
end
end
mod:AddCallback(ModCallbacks.MC_POST_GAME_STARTED, mod.EterepReload)

function mod:EterepMorphsAndCustomFunctions(npc)
if EterepStarterValue == 1 then
if EterepDelirium == 1 and npc.FrameCount >= 200 and npc.MaxHitPoints == 11111 and npc.Type ~= 412 then
npc:Morph(412, 0, 0, -1)
npc:GetSprite().FlipX = false
end
if EterepPoofer == 1 and npc.Type >= 10 and npc.Type <= 999 and npc.Type ~= 892 and npc.FrameCount % 30 == 5 then
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position+Vector(0,20), Vector(0,0), npc)
npc.MaxHitPoints = npc.MaxHitPoints * 1.05
npc.HitPoints = npc.HitPoints * 1.05
end
if Etereppoofersuperheal == 1 and npc.Type >= 10 and npc.Type <= 999 and npc.Type ~= 892 then
npc:PlaySound(157, 1, 0, false, 1)
local effect = Isaac.Spawn(1000, 49, 0, npc.Position+Vector(0,20), Vector(0,0), npc)
effect.SpriteScale = Vector(1.5,1.5)
npc.MaxHitPoints = npc.MaxHitPoints * 2
npc.HitPoints = npc.HitPoints * 2
end
if npc.SubType >= 80 and npc.SubType <= 82 and npc.Variant <= 250 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
if npc.SubType >= 85 and npc.SubType <= 86 and npc.Variant <= 250 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
if npc.SubType == 87 and npc.Variant <= 250 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.5
end
if npc.SubType >= 88 and npc.SubType <= 89 and npc.Variant <= 250 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.15
end
if npc.SubType >= 90 and npc.SubType <= 93 and npc.Variant <= 250 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.35
end
if npc.SubType >= 100 and npc.SubType <= 106 and npc.Variant <= 250 and npc.Type ~= 24 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
if npc.SubType >= 80 and npc.SubType <= 106 and npc.Variant <= 250 and npc:IsDead() and not npc:IsBoss() then
npc.Scale = 1
end
if EterepRegenMonster >= 1 and npc.FrameCount % 51 == 40 and npc.Type ~= 27 and npc.Type ~= 204 and npc.Type ~= 859 and (npc.SubType == 84 or npc.SubType == 85 or npc.SubType == 88 or npc.SubType == 89 or npc.SubType == 90 or (npc:GetData().Etereternaliseternal ~= nil and npc:GetData().Etereternaliseternal == 1)) and npc.Type ~= 62 and npc.HitPoints < npc.MaxHitPoints * 0.9999999 and not npc:IsBoss() and not npc:HasEntityFlags(1<<29) then
npc.HitPoints = npc.HitPoints + (0.4*EterepRegenMonster) + (Game():GetLevel():GetStage()-1) * (0.4*EterepRegenMonster)
end
if EterepRegenBoss >= 1 and npc.FrameCount % 51 == 40 and (npc.SubType == 84 or npc.SubType == 85 or npc.SubType == 88 or npc.SubType == 89 or npc.SubType == 90) and npc.Type ~= 62 and npc.Type ~= 67 and npc.HitPoints < npc.MaxHitPoints * 0.9999999 and npc:IsBoss() and not npc:HasEntityFlags(1<<29) then
npc.HitPoints = npc.HitPoints + (0.4*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.4*EterepRegenBoss)
end
if EterepDelirium == 1 and npc.MaxHitPoints == 11111 and Eterepernalrng:RandomInt(2)+1 == 1 and ((npc.FrameCount % 88 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 44 == 2 and not npc:HasEntityFlags(1<<7))) and npc.SpawnerType <= 1 and Eterepdeliriumcooldown <= 0 then
local deliriumparams = Eterepernalrng:RandomInt(3)+1
local deliriumprojectilenumbers = Eterepernalrng:RandomInt(3)+1
local params = ProjectileParams()
params.Variant = 6
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(2.76,2.76,2.8,1)
params.Color = projectilenewcolor
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.07
if deliriumparams == 1 then
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
end
if deliriumparams == 2 then
params.BulletFlags = ProjectileFlags.MEGA_WIGGLE
end
if deliriumprojectilenumbers == 1 then
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(5), 0, params)
end
end
if deliriumprojectilenumbers == 2 then
for i = 1,16 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+22.5*i):Resized(5), 0, params)
end
end
if deliriumprojectilenumbers == 3 then
for i = 1,20 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+18*i):Resized(5), 0, params)
end
end
Eterepdeliriumcooldown = 10
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMorphsAndCustomFunctions)

function mod:UPDATE(player)
if EterepD6Nerf == 1 and player:ToPlayer():HasCollectible(105) then
player:ToPlayer():RemoveCollectible(105)
player:ToPlayer():AddCollectible(609, 1, false)
player:ToPlayer():SetActiveCharge(2)
end
end
mod:AddCallback(ModCallbacks.MC_POST_PLAYER_UPDATE, mod.UPDATE)

function mod:isaacdamagedinlokifight(npc)
if #Isaac.FindByType(69, -1, -1, false, true) >= 1 and npc.Type == 1 and Eterepisaacisdamagedwithlokis == 0 then
Eterepisaacisdamagedwithlokis = 1
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.isaacdamagedinlokifight);

function EterepEnemyChasePlayer(speed, npc, slide, count)
local targetisclosetowalls = (npc:GetPlayerTarget().Position.X > Game():GetRoom():GetBottomRightPos().X - 24 or npc:GetPlayerTarget().Position.Y > Game():GetRoom():GetBottomRightPos().Y - 24 or npc:GetPlayerTarget().Position.Y < Game():GetRoom():GetTopLeftPos().Y + 24 or npc:GetPlayerTarget().Position.X < Game():GetRoom():GetTopLeftPos().X + 24)
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 55 and targetisclosetowalls == true and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.Velocity = npc.Velocity * 0.9 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1.3) * speed * 0.53
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 55 and targetisclosetowalls == false and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 0, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.Velocity = npc.Velocity * 0.9 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1.3) * speed * 0.53
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) >= 55 or (npc:GetPlayerTarget().Position:Distance(npc.Position) < 55 and targetisclosetowalls == false and not Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 0, 0, false, false)) or npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11) or npc:HasEntityFlags(1<<24) then
local target = npc:GetPlayerTarget()
local d = npc:GetData()
local path = npc.Pathfinder
local dist = target.Position:Distance(npc.Position)
local gin = Game():GetRoom():GetGridIndex
(npc.Position + Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(5+npc.Size))
local gen = Game():GetRoom():GetGridEntity(gin)
local FindTarget
npc.Velocity = npc.Velocity * slide
if not d.straightA then
d.straightA = npc.FrameCount - count
end
if npc:HasEntityFlags(1<<9) then
if npc.FrameCount % 13 == 0 or npc:CollidesWithGrid() then
d.angle = Eterepernalrng:RandomInt(360)
end
else
d.angle = (target.Position - npc.Position):GetAngleDegrees()
end
if npc.State <= 2 and npc:CollidesWithGrid() then
npc:AddVelocity(Vector.FromAngle(d.angle):Resized(speed))
end
if (dist >= 700 or npc.FrameCount <= d.straightA + count
or not path:HasPathToPos(target.Position, false))
and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11)
and not npc:HasEntityFlags(1<<24) then
path:FindGridPath(target.Position, speed*1.4, 900, false)
elseif (dist < 700 and npc.FrameCount > d.straightA + count
and path:HasPathToPos(target.Position, false))
or dist < 70 or npc:HasEntityFlags(1<<11) or npc:HasEntityFlags(1<<24) then
if dist <= 450 and (npc:HasEntityFlags(1<<11) or npc:HasEntityFlags(1<<24)) then
npc:AddVelocity(Vector.FromAngle(-d.angle):Resized(speed))
else
npc:AddVelocity(Vector.FromAngle(d.angle):Resized(speed))
end
if gen then
if gen:GetType() >= 2 and gen:GetType() ~= 10 and gen:GetType() ~= 19
and gen:GetType() ~= 20 then
d.straightA = npc.FrameCount
end
end
if npc:CollidesWithGrid() then
d.straightA = npc.FrameCount
npc.Velocity = Vector(0,0)
end
end
return FindTarget
end
end

function mod:EterepPlayerTakeDamage(npc, damage, flags, damageSource, cooldown)
local damagede = Eterepernalrng:RandomInt(3)+1
if damagede == 1 and damageSource.SpawnerType == 927 and damageSource.SpawnerVariant >= 3002 and damageSource.SpawnerVariant <= 3012 then
if Isaac.GetPlayer(0):GetNumKeys() == 1 then
Isaac.GetPlayer(0):AddKeys(-1)
end
if Isaac.GetPlayer(0):GetNumKeys() >= 4 then
Isaac.GetPlayer(0):AddKeys(-2)
Isaac.Spawn(5, 30, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
Isaac.Spawn(5, 30, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
end
if Isaac.GetPlayer(0):GetNumKeys() >= 2 then
Isaac.GetPlayer(0):AddKeys(-2)
Isaac.Spawn(5, 30, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
end
end
if damagede == 2 and damageSource.SpawnerType == 927 and damageSource.SpawnerVariant >= 3002 and damageSource.SpawnerVariant <= 3012 then
if Isaac.GetPlayer(0):GetNumBombs() == 1 then
Isaac.GetPlayer(0):AddBombs(-1)
end
if Isaac.GetPlayer(0):GetNumBombs() >= 4 then
Isaac.GetPlayer(0):AddBombs(-2)
Isaac.Spawn(5, 40, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
Isaac.Spawn(5, 40, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
end
if Isaac.GetPlayer(0):GetNumBombs() >= 2 then
Isaac.GetPlayer(0):AddBombs(-2)
Isaac.Spawn(5, 40, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
end
end
if damagede == 3 and damageSource.SpawnerType == 927 and damageSource.SpawnerVariant >= 3002 and damageSource.SpawnerVariant <= 3012 then
if Isaac.GetPlayer(0):GetNumCoins() == 1 then
Isaac.GetPlayer(0):AddCoins(-1)
end
if Isaac.GetPlayer(0):GetNumCoins() >= 4 then
Isaac.GetPlayer(0):AddCoins(-2)
Isaac.Spawn(5, 20, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
Isaac.Spawn(5, 20, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
end
if Isaac.GetPlayer(0):GetNumCoins() >= 2 then
Isaac.GetPlayer(0):AddCoins(-2)
Isaac.Spawn(5, 20, 1, Isaac.GetPlayer(0).Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), Isaac.GetPlayer(0))
end
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepPlayerTakeDamage, 1)

function mod:EterepGaperDeath(npc)
if npc.SubType == 101 and npc.Variant == 3 then
npc.Velocity = npc.Velocity * 1.05
end
if npc.SubType == 102 and npc.Variant == 3 then
npc.Velocity = npc.Velocity * 1.13
end
if npc.SubType == 105 and npc.Variant == 3 then
npc.Velocity = npc.Velocity * 1.2
end
if npc.SubType == 103 and npc.Variant == 3 and npc.FrameCount % 40 == 20 and #Isaac.FindByType(853, -1, -1, false, true) <= 5 then
local maggot = Isaac.Spawn(853, 0, 0, npc.Position, Vector(0,0), npc)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(11, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(12, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(12, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
if npc:IsDead() and npc.Variant == 2 and npc.SubType == 85 then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(12, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
if npc:IsDead() and npc.Variant == 3 and npc.SubType >= 100 and npc.SubType <= 105 then
local gusher = Isaac.Spawn(11, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
gusher.MaxHitPoints = 54
gusher.HitPoints = gusher.MaxHitPoints
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepGaperDeath, 10)

function mod:EterepGusher(npc)
if npc.Variant <= 2 and npc.SubType == 85 then
npc:GetSprite():PlayOverlay("Blood", false)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if npc.Variant == 0 then
EterepEnemyChasePlayer(0.65, npc, 0.86, 75)
if npc.Variant == 0 and npc.SpawnerVariant ~= 3 and ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(12), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.Variant == 0 and npc.SpawnerType == 10 and npc.SpawnerVariant == 3 and ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+-12):Resized(12), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(13), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+12):Resized(12), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc.Variant == 1 then
EterepEnemyChasePlayer(0.42, npc, 0.86, 75)
if ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(9.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc.Variant == 2 then
EterepEnemyChasePlayer(0.65, npc, 0.86, 75)
if ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.15
params.BulletFlags = ProjectileFlags.CONTINUUM
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(12), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepGusher, 11)

function mod:EterepGusherMorph(npc)
if npc:GetData().EternalMawBody ~= nil and npc:GetData().EternalMawBody == 1 and npc.SubType == 0 then
npc:Morph(npc.Type, 1, 85, -1)
npc.Scale = 1.25
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_RENDER, mod.EterepGusherMorph, 11)

function mod:EterepHorf(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+35*i+255):Resized(9), 0, ProjectileParams())
end
npc:PlaySound(146, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHorf, 12)

function mod:EterepPooterInit(npc)
if npc.SubType == 77 and npc.SpawnerType == 63 then
npc.ProjectileCooldown = 10
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_INIT, mod.EterepPooterInit, 14)

function mod:EterepPooter(npc)
if npc.SubType == 77 and npc.FrameCount <= 14 then
if npc.SpawnerEntity ~= nil and npc.SpawnerType == 63 then
npc.Velocity = Vector.FromAngle((npc.Position - npc.SpawnerEntity.Position):GetAngleDegrees()):Resized(21-npc.FrameCount*1.5)
end
end
if npc.SubType == 77 and npc.FrameCount >= 6 and npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_ALL then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant <= 1 and npc.SubType == 0 and npc.ProjectileCooldown == 3 then
npc.ProjectileCooldown = npc.ProjectileCooldown - 1
end
if npc.SubType == 80 or npc.SubType == 85 or npc.SubType == 87 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc.Variant == 0 then
local params = ProjectileParams()
params.HeightModifier = -5
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc.Variant == 1 and npc.SubType == 85 then
local params = ProjectileParams()
params.HeightModifier = -5
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15):Resized(8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-15):Resized(8), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc.Variant == 1 and npc.SubType == 87 then
local params = ProjectileParams()
params.HeightModifier = -5
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-15):Resized(8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15):Resized(8), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc.Variant == 2 and npc.SubType == 85 then
local params = ProjectileParams()
params.HeightModifier = -5
params.Scale = 1.5
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-15):Resized(8.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.Variant == 2 and npc.Mass == 13 and npc.SubType == 85 then
npc.State = 8
npc:GetSprite():Play("Attack", true)
npc.Mass = 11
if npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
if npc.Position.X < npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = false
end
end
if npc.Variant == 2 and npc.SubType == 85 and npc:GetSprite():IsFinished("Attack") then
npc.Mass = 10
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPooter, 14)

function mod:EterepPooterTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 2 and npc.SubType == 85 and npc.Mass == 10 then
npc.Mass = 13
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepPooterTakeDamage, 14)

function mod:EterepClotty(npc)
if npc.Variant <= 4 and npc.SubType == 87 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetSprite():IsFinished("Attack") then
npc.StateFrame = Eterepernalrng:RandomInt(25)+1
end
if not npc:GetSprite():IsPlaying("Attack") then
EterepEnemyChasePlayer(0.52, npc, 0.86, 75)
npc:AnimWalkFrame("Hop","Hop",1)
end
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(25)+1
end
if npc.Variant == 3 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and npc.StateFrame >= 20 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Attack", true)
npc.StateFrame = 0
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and npc.StateFrame >= 40 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Attack", true)
npc.StateFrame = 0
end
if not npc:GetSprite():IsPlaying("Attack") and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsPlaying("Attack") then
npc.Velocity = npc.Velocity * 0.7
end
if npc.Variant == 0 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(8.5), 0, params)
end
for i = 1,4 do
params.FallingAccelModifier = 0.65
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
end
if npc.Variant == 1 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
local palvrams = ProjectileParams()
palvrams.FallingAccelModifier = 0.65
palvrams.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(8.5), 0, params)
end
for i = 1,4 do
palvrams.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, palvrams)
end
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
end
if npc.Variant == 2 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
local palvrams = ProjectileParams()
palvrams.FallingAccelModifier = 0.65
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
for i = 1,4 do
palvrams.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, palvrams)
end
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
end
if npc.Variant == 3 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local grilledclottyangle = Eterepernalrng:RandomInt(41)-20
local params = ProjectileParams()
params.HeightModifier = 10
local palvrams = ProjectileParams()
palvrams.FallingAccelModifier = 0.65
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(grilledclottyangle+90*i):Resized(8.5), 0, params)
end
for i = 1,4 do
palvrams.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, palvrams)
end
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
end
if npc.Variant == 4 then
if npc:GetSprite():IsPlaying("Attack") and  npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.Variant = 3
if Eterepernalrng:RandomInt(2)+1 == 1 then
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.CurvingStrength = 0.0055
end
if Eterepernalrng:RandomInt(3)+1 == 1 then
params.BulletFlags = ProjectileFlags.CURVE_RIGHT
params.CurvingStrength = 0.0055
end
local palvrams = ProjectileParams()
palvrams.FallingAccelModifier = 0.65
palvrams.Variant = 3
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(8.5), 0, params)
end
for i = 1,4 do
palvrams.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, palvrams)
end
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
end
return true
end
if npc.Variant == 0 and npc.SubType == 170 then
npc:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepClotty, 15)

function mod:EterepClottyCollision(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 0 and npc.SubType == 87 and flags == DamageFlag.DAMAGE_FIRE then
local spawn = Isaac.Spawn(15, 3, 87, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:Remove()
end
if npc.Variant == 3 and npc.SubType == 87 and flags == DamageFlag.DAMAGE_FIRE and damageSource.SpawnerType ~= 1 and damageSource.SpawnerType ~= 3 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepClottyCollision, 15)

function mod:EterepMulligan(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 5 then
npc.State = 1
npc:GetSprite():Stop("Explode", true)
end
if npc.FrameCount <= 22 then
npc.StateFrame = Eterepernalrng:RandomInt(35)+61
end
if npc.StateFrame >= 100 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame < 100 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) < 250 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame == 100 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligan 1.png")
npc:GetSprite():LoadGraphics()
end
if npc.StateFrame == 106 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligan 2.png")
npc:GetSprite():LoadGraphics()
end
if npc.StateFrame == 108 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(12), 0, ProjectileParams())
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 109 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligan 1.png")
npc:GetSprite():LoadGraphics()
end
if npc.StateFrame == 115 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligan.png")
npc:GetSprite():LoadGraphics()
npc.StateFrame = Eterepernalrng:RandomInt(52)+44
end
if npc:IsDead() then
for i = 1,6 do
local fly = Isaac.Spawn(18, 0, 0, npc.Position-Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.State == 5 then
npc.State = 1
npc:GetSprite():Stop("Explode", true)
end
if npc.FrameCount <= 30 then
npc.StateFrame = Eterepernalrng:RandomInt(52)+34
end
if npc.StateFrame >= 100 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame < 100 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) < 250 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame == 100 and #Isaac.FindByType(85, -1, -1, false, true) <= 3 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligoon 1.png")
npc:GetSprite():LoadGraphics()
end
if npc.StateFrame == 100 and #Isaac.FindByType(85, -1, -1, false, true) >= 4 then
npc.StateFrame = Eterepernalrng:RandomInt(52)+34
end
if npc.StateFrame == 106 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligoon 2.png")
npc:GetSprite():LoadGraphics()
end
if npc.StateFrame == 108 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
npc:PlaySound(181, 1, 0, false, 1)
end
if npc.StateFrame == 109 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligoon 1.png")
npc:GetSprite():LoadGraphics()
end
if npc.StateFrame == 115 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mulligoon.png")
npc:GetSprite():LoadGraphics()
npc.StateFrame = Eterepernalrng:RandomInt(52)+34
end
if npc:IsDead() then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10), 0, ProjectileParams())
end
Isaac.Spawn(4, 4, 0, npc.Position, Vector(0,0), npc)
return true
end
end
if npc.Variant == 2 and npc.SubType == 85 then
EterepEnemyChasePlayer(0.82, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if npc.FrameCount >= 22 and npc.I1 ~= 1 then
npc.I1 = 1
npc:GetSprite():PlayOverlay("Walk", false)
end
if ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 300 and npc.StateFrame >= 80 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("ShootIpecac", false)
npc.StateFrame = 0
end
if npc:GetSprite():IsOverlayPlaying("ShootIpecac") and npc:GetSprite():GetOverlayFrame() == 8 and npc.Mass ~= 79 then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.7
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 8
for i = 1,2 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(106)+95) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
npc.Mass = 79
end
if npc:GetSprite():IsOverlayPlaying("ShootIpecac") and npc:GetSprite():GetOverlayFrame() == 9 and npc.Mass ~= 80 then
npc.Mass = 80
end
if npc:GetSprite():IsOverlayFinished("ShootIpecac") then
npc:GetSprite():PlayOverlay("Walk", false)
npc.StateFrame = Eterepernalrng:RandomInt(21)+30
end
if npc:IsDead() then
Isaac.Explode(npc.Position, npc, 1.0)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMulligan, 16)

function mod:EterepMulliboomTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 2 and npc.SubType == 85 and damageSource.Type == 16 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepMulliboomTakeDamage, 16)

function mod:EterepAttackFly(npc)
if npc.FrameCount == 4 and npc.SpawnerType == 22 and npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_ALL then
npc.Mass = 5
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if npc.SubType == 100 and (npc.SpawnerType == 22 or npc.SpawnerType == 91) and npc.FrameCount <= 1 then
npc.MaxHitPoints = 10
npc.HitPoints = 10
npc.Scale = 1.25
end
if EterepClassicEnemiesPatterns == 1 and npc.FrameCount <= 5 and npc.SpawnerType == 80 then
npc.Velocity = npc.Velocity * 0.75
end
if npc.Variant == 0 and npc.SubType == 83 and npc.Mass == 7 and EterepClassicEnemiesPatterns == 0 then
if npc.SpawnerType ~= 55 then
local fly = Isaac.Spawn(18, 0, 0, npc.Position, Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:Remove()
end
end
if npc.Variant == 0 and npc.SubType == 83 and npc.Mass == 7 and EterepClassicEnemiesPatterns == 1 then
npc:Remove()
if npc.SpawnerType ~= 55 then
local fly = Isaac.Spawn(18, 0, 83, npc.Position, Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
if npc.Variant == 0 and npc.SubType == 0 and npc.I1 == 0 and npc.FrameCount <= 1 then
npc.Mass = 6
end
if npc.Variant == 0 and npc.SubType == 0 and npc.I1 > 0 and npc.Mass ~= 6 then
npc:Morph(18, 0, 83, -1)
npc.HitPoints = npc.MaxHitPoints
npc.Mass = 7
end
if npc.FrameCount >= 20 and npc.Variant == 0 and npc.SubType == 83 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) > 75 then
npc.Velocity = npc.Velocity * 1.075
end
if EterepClassicEnemiesPatterns == 1 and npc.FrameCount >= 20 and npc.Variant == 0 and npc.SubType == 0 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) > 90 then
npc.Velocity = npc.Velocity * 1.065
end
if EterepClassicEnemiesPatterns == 1 and npc.FrameCount >= 20 and npc.Variant == 0 and npc.SubType == 92 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) > 90 then
npc.Velocity = npc.Velocity * 1.065
end
if EterepClassicEnemiesPatterns == 1 and npc.FrameCount >= 20 and npc.Variant == 0 and npc.SubType == 272 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) > 90 then
npc.Velocity = npc.Velocity * 1.065
end
if npc.Mass == 4 and npc.FrameCount >= 7 and npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_ALL then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Mass = 5
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepAttackFly, 18)

local function EterepDetectWallCollision(pos)
local grid = Game():GetRoom():GetGridEntity(Game():GetRoom():GetGridIndex(pos))
return not grid or grid.CollisionClass == GridCollisionClass.COLLISION_NONE or grid.CollisionClass == GridCollisionClass.COLLISION_PIT or grid.CollisionClass == GridCollisionClass.COLLISION_SOLID or grid.CollisionClass == GridCollisionClass.COLLISION_OBJECT
end

function mod:EterepLarryJr(npc)
if npc.Variant == 0 and npc.SubType == 89 and npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(800)
end
if npc.SubType == 89 and npc.Parent == nil and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.Variant == 0 and npc.SubType == 89 then
if npc.StateFrame >= 1250+npc.I1*150 and npc.Parent == nil then
local newsegment = Isaac.Spawn(19, 0, 89, npc:GetLastChild().Position, Vector(0,0), npc)
newsegment:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newsegment.Parent = npc:GetLastChild()
npc:PlaySound(265, 1, 0, false, 1)
npc.StateFrame = Eterepernalrng:RandomInt(1000)
npc.I1 = npc.I1 + 1
end
if npc:IsDead() and npc.HitPoints >= 0.01 and npc:Exists() then
local newlarry = Isaac.Spawn(89, 0, 89, npc.Position, Vector(0,0), npc)
newlarry:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newlarry.HitPoints = npc.HitPoints
npc:Remove()
end
if npc.Parent == nil and npc.MaxHitPoints <= 40 then
npc.MaxHitPoints = npc.MaxHitPoints + 25
npc.HitPoints = npc.HitPoints + 25
end
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType <= 3 and npc.Parent == nil and npc.StateFrame ~= 24 and npc.MaxHitPoints <= 35 then
npc.StateFrame = 24
npc.MaxHitPoints = npc.MaxHitPoints + 22
npc.HitPoints = npc.HitPoints + 22
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 1 and npc.SubType <= 3 and npc.Parent == nil and npc.StateFrame ~= 24 and npc.MaxHitPoints <= 35 then
npc.StateFrame = 24
npc.MaxHitPoints = npc.MaxHitPoints + 22
npc.HitPoints = npc.HitPoints + 22
end
if npc.Variant == 1 and npc.SubType == 83 then
if npc.Parent ~= nil and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.75
end
if npc.Parent == nil and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.5
end
if npc.Parent == nil and npc.StateFrame ~= 24 and npc.MaxHitPoints <= 60 then
npc.StateFrame = 24
npc.MaxHitPoints = npc.MaxHitPoints + 40
npc.HitPoints = npc.HitPoints + 40
end
if npc.SpriteRotation ~= 0 then
npc.SpriteRotation = 0
end
if npc.Parent == nil and npc.FrameCount <= 3 then
npc.State = 50
npc.Velocity = Vector.FromAngle(270) * 0.1
end
if npc.Parent == nil and npc.FrameCount >= 4 then
npc.State = 50
if not EterepDetectWallCollision(npc.Position+npc.Velocity) then
if EterepDetectWallCollision(npc.Position+Vector(npc.Velocity.X*-1,npc.Velocity.Y)) then
npc.Velocity = Vector(npc.Velocity.X*-1,npc.Velocity.Y)
elseif EterepDetectWallCollision(npc.Position+Vector(npc.Velocity.X,npc.Velocity.Y*-1)) then
npc.Velocity = Vector(npc.Velocity.X,npc.Velocity.Y*-1)
else
npc.Velocity = Vector(npc.Velocity.X*-1,npc.Velocity.Y*-1)
end
end
if npc:GetLastChild().Index == npc.Index and npc.FrameCount % 5 == 1 then
Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() <= -165 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()+1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= -90 and npc.Velocity:GetAngleDegrees() <= -75 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()+1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= 0 and npc.Velocity:GetAngleDegrees() <= 15 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()+1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= 90 and npc.Velocity:GetAngleDegrees() <= 105 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()+1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= -105 and npc.Velocity:GetAngleDegrees() <= -90 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()-1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= -15 and npc.Velocity:GetAngleDegrees() <= 0 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()-1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= 75 and npc.Velocity:GetAngleDegrees() <= 90 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()-1)
end
if npc.FrameCount % 15 == 10 and npc.Velocity:GetAngleDegrees() >= 165 and npc.Velocity:GetAngleDegrees() <= 180 then
npc.Velocity = Vector.FromAngle(npc.Velocity:GetAngleDegrees()-1)
end
if npc.I1 ~= 1 then
npc.I1 = 1
npc.Velocity = Vector.FromAngle(45+90*Eterepernalrng:RandomInt(4)) * 8.4
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) >= 180 then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()) * 8.4
if npc:GetLastChild().Index == npc.Index then
npc.Velocity = npc.Velocity * 0.25
end
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 180 and not ((npc.Velocity:GetAngleDegrees() < (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() and 
npc.Velocity:GetAngleDegrees() >= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() - 90) or 
npc.Velocity:GetAngleDegrees() >= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() + 270) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()) * 8.4
if npc:GetLastChild().Index == npc.Index then
npc.Velocity = npc.Velocity * 0.25
end
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 180 and not ((npc.Velocity:GetAngleDegrees() > (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() and 
npc.Velocity:GetAngleDegrees() <= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() + 90) or 
npc.Velocity:GetAngleDegrees() <= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() - 270) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()) * 8.4
if npc:GetLastChild().Index == npc.Index then
npc.Velocity = npc.Velocity * 0.25
end
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 180 and ((npc.Velocity:GetAngleDegrees() < (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() and 
npc.Velocity:GetAngleDegrees() >= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() - 90) or 
npc.Velocity:GetAngleDegrees() >= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() + 270) then
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()+2+(1.5-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.00825)) * 8.4
end
if npc:HasEntityFlags(1<<9) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()) * 8.4
end
if npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()-2-(1.5-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.00825)) * 8.4
end
if npc:GetLastChild().Index == npc.Index then
npc.Velocity = npc.Velocity * 0.25
end
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 180 and ((npc.Velocity:GetAngleDegrees() > (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() and 
npc.Velocity:GetAngleDegrees() <= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() + 90) or 
npc.Velocity:GetAngleDegrees() <= (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() - 270) then
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()-2-(1.5-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.00825)) * 8.4
end
if npc:HasEntityFlags(1<<9) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()) * 8.4
end
if npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()+2+(1.5-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.00825)) * 8.4
end
if npc:GetLastChild().Index == npc.Index then
npc.Velocity = npc.Velocity * 0.25
end
end
if npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() < -135 then
npc:GetSprite():Play("WalkHeadHori",false)
if not npc:GetSprite().FlipX then
npc:GetSprite().FlipX = true
end
end
if npc.Velocity:GetAngleDegrees() >= -135 and npc.Velocity:GetAngleDegrees() < -45 then
npc:GetSprite():Play("WalkHeadUp",false)
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= -45 and npc.Velocity:GetAngleDegrees() < 45 then
npc:GetSprite():Play("WalkHeadHori",false)
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= 45 and npc.Velocity:GetAngleDegrees() < 135 then
npc:GetSprite():Play("WalkHeadDown",false)
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= 135 and npc.Velocity:GetAngleDegrees() <= 180 then
npc:GetSprite():Play("WalkHeadHori",false)
if not npc:GetSprite().FlipX then
npc:GetSprite().FlipX = true
end
end
end
if npc.Parent ~= nil then
if npc:GetLastChild().Index == npc.Index and npc.I2 ~= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_hollow 2.png")
npc:GetSprite():LoadGraphics()
npc.I2 = 1
end
if npc.Parent.Position:Distance(npc.Position) <= 31 then
npc.State = 50
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()) * 8.4
end
if npc.Parent.Position:Distance(npc.Position) >= 32 then
npc.State = 50
npc.Velocity = (npc.Parent.Position - npc.Position) * 0.18
end
if npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() < -135 then
npc:GetSprite():Play("WalkBodyHori",false)
if not npc:GetSprite().FlipX then
npc:GetSprite().FlipX = true
end
end
if npc.Velocity:GetAngleDegrees() >= -135 and npc.Velocity:GetAngleDegrees() < -45 then
npc:GetSprite():Play("WalkBodyUp",false)
npc:GetSprite():LoadGraphics()
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= -45 and npc.Velocity:GetAngleDegrees() < 45 then
npc:GetSprite():Play("WalkBodyHori",false)
npc:GetSprite():LoadGraphics()
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= 45 and npc.Velocity:GetAngleDegrees() < 135 then
npc:GetSprite():Play("WalkBodyDown",false)
npc:GetSprite():LoadGraphics()
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= 135 and npc.Velocity:GetAngleDegrees() <= 180 then
npc:GetSprite():Play("WalkBodyHori",false)
if not npc:GetSprite().FlipX then
npc:GetSprite().FlipX = true
end
end
end
if npc:IsDead() then
for i = 1,Eterepernalrng:RandomInt(2)+1 do
Isaac.Spawn(18, 0, 0, npc.Position+Vector(Eterepernalrng:RandomInt(51)-25,Eterepernalrng:RandomInt(51)-25), Vector(0,0), npc)
end
if Eterepernalrng:RandomInt(3) >= 1 then
Isaac.Spawn(14, Eterepernalrng:RandomInt(2), 0, npc.Position+Vector(Eterepernalrng:RandomInt(51)-25,Eterepernalrng:RandomInt(51)-25), Vector(0,0), npc)
end
end
end
if npc.Variant == 2 and npc.SubType == 89 then
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.15
end
if npc.FrameCount <= 1 and npc.Mass == 101 then
npc.StateFrame = 3
end
if npc.FrameCount <= 1 and npc.Mass == 102 then
npc.StateFrame = 3
npc.I2 = 1
end
if npc.FrameCount % 70 == 65 and npc.SpawnerType <= 1 and Eterepernalrng:RandomInt(13)-8 >= npc.StateFrame and npc.Parent == nil then
local newsegment = Isaac.Spawn(19, 2, 94, npc:GetLastChild().Position, Vector(0,0), npc)
newsegment:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newsegment.Parent = npc
npc:PlaySound(265, 1, 0, false, 1)
npc.StateFrame = npc.StateFrame + 1
end
if npc.FrameCount % 70 == 65 and npc.SpawnerType == 19 and Eterepernalrng:RandomInt(9)-8 >= npc.StateFrame and npc.Parent == nil then
local newsegment = Isaac.Spawn(19, 2, 94, npc:GetLastChild().Position, Vector(0,0), npc)
newsegment:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newsegment.Parent = npc
npc:PlaySound(265, 1, 0, false, 1)
npc.StateFrame = npc.StateFrame + 1
end
if npc:IsDead() and npc.HitPoints >= 0.01 and npc:Exists() then
local newlarry = Isaac.Spawn(89, 0, 89, npc.Position, Vector(0,0), npc)
newlarry:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newlarry.HitPoints = npc.HitPoints
newlarry:GetSprite():Load("gfx/e_one segment tuff twin meat.anm2",true)
newlarry:GetSprite():LoadGraphics()
npc:Remove()
end
end
if npc.Variant == 3 and npc.SubType == 89 then
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.15
end
if npc.FrameCount % 70 == 65 and npc.SpawnerType <= 1 and Eterepernalrng:RandomInt(13)-8 >= npc.StateFrame and npc.Parent == nil then
local newsegment = Isaac.Spawn(19, 3, 94, npc:GetLastChild().Position, Vector(0,0), npc)
newsegment:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newsegment.Parent = npc
npc:PlaySound(265, 1, 0, false, 1)
npc.StateFrame = npc.StateFrame + 1
end
if npc.FrameCount % 70 == 65 and npc.SpawnerType == 19 and Eterepernalrng:RandomInt(9)-8 >= npc.StateFrame and npc.Parent == nil then
local newsegment = Isaac.Spawn(19, 3, 94, npc:GetLastChild().Position, Vector(0,0), npc)
newsegment:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newsegment.Parent = npc
npc:PlaySound(265, 1, 0, false, 1)
npc.StateFrame = npc.StateFrame + 1
end
if npc.Parent == nil and npc:IsDead() and npc.HitPoints >= 0.01 and npc:Exists() then
local newlarry = Isaac.Spawn(979, 89, 0, npc.Position, Vector(0,0), npc)
newlarry:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:Remove()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLarryJr, 19)

function mod:EterepMonstro(npc)
if npc.Variant == 0 and npc.SubType == 77 and npc:IsDead() and npc:Exists() then
npc:Remove()
Isaac.Spawn(20, 0, 78, npc.Position-Vector(30,0), Vector(0,0), npc)
Isaac.Spawn(20, 0, 78, npc.Position-Vector(-30,0), Vector(0,0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.Variant == 0 and npc.SubType == 78 and npc.SpawnerType == 95 and npc:IsDead() then
npc:GetSprite():SetFrame("Death", 74)
end
if npc.Variant == 0 and npc.SubType == 78 then
if npc.State == 6 then
npc.State = 8
npc.StateFrame = 0
npc:GetSprite():Play("Taunt", true)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X >= npc.Position.X then
npc:GetSprite().FlipX = true
end
end
if npc.SpawnerType == 45 and npc.FrameCount <= 1 then
npc.MaxHitPoints = 50
npc.HitPoints = 50
end
if npc.SpawnerType == 95 and npc:IsDead() then
npc:Kill()
npc:PlaySound(28, 1, 0, false, 1)
end
end
if npc.Variant == 0 and npc.SubType == 88 then
if npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector(0,0)
end
if (npc:GetSprite():IsFinished("JumpDown") or npc:GetSprite():IsFinished("Appear") or npc:GetSprite():IsFinished("Walk")) and (npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11)) then
npc:GetSprite():Play("Walk", true)
end
if npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("JumpUp", true)
end
if (npc:GetSprite():IsFinished("JumpDown") or npc:GetSprite():IsFinished("Taunt")) then
local attack = Eterepernalrng:RandomInt(3)+1
if attack == 1 then
npc:GetSprite():Play("Walk", true)
end
if attack == 2 then
npc:GetSprite():Play("Taunt", true)
end
if attack == 3 then
npc:GetSprite():Play("JumpUp", true)
end
end
if npc:GetSprite():IsFinished("Walk") then
local attack = Eterepernalrng:RandomInt(5)+1
if attack <= 3 then
npc:GetSprite():Play("Walk", true)
end
if attack == 4 then
npc:GetSprite():Play("Taunt", true)
end
if attack == 5 then
npc:GetSprite():Play("JumpUp", true)
end
end
if npc:GetPlayerTarget().Position.X <= npc.Position.X and npc.FrameCount >= 20 and ((npc:HasEntityFlags(1<<11) and npc:HasEntityFlags(1<<9)) or (not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<9)) or (npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11))) then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X > npc.Position.X and npc.FrameCount >= 20 and npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<9) then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X > npc.Position.X and npc.FrameCount >= 20 and ((npc:HasEntityFlags(1<<11) and npc:HasEntityFlags(1<<9)) or (not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<9)) or (npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11))) then
npc:GetSprite().FlipX = true
end
if npc:GetPlayerTarget().Position.X <= npc.Position.X and npc.FrameCount >= 20 and npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<9) then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsPlaying("JumpUp") and npc:GetSprite():GetFrame() == 5 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(14, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("JumpUp") and (npc:GetSprite():GetFrame() == 8 or npc:GetSprite():GetFrame() == 9) then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
if npc:GetSprite():IsFinished("JumpUp") then
npc:GetSprite():Play("JumpDown", true)
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():GetFrame() == 1 then
npc.Velocity = (Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 2, false) - npc.Position):Normalized() * math.abs((npc.Position - Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 2, false)):Length()) * 0.05
npc.State = 5
end
if (npc:GetSprite():IsPlaying("Walk") or npc:GetSprite():IsPlaying("JumpDown")) and npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_ALL and npc:GetSprite():GetFrame() >= 19 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
if ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(48, 1, 0, false, 1)
end
npc.State = 0
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("NewShoot1") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1,18 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(200)+1) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Walk") and npc:GetSprite():GetFrame() == 5 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(14, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Walk") and (npc:GetSprite():GetFrame() == 7 or npc:GetSprite():GetFrame() == 8) then
npc.Velocity = (npc:GetPlayerTarget().Position - npc.Position):Normalized() * 7
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc.State = 5
end
if npc:GetSprite():IsPlaying("Taunt") and npc:GetSprite():GetFrame() == 23 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(16, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Taunt") and npc:GetSprite():IsEventTriggered("NewShoot2") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local paramams = ProjectileParams()
paramams.FallingSpeedModifier = -(Eterepernalrng:RandomInt(210)+1) * 0.1
paramams.FallingAccelModifier = 0.36
paramams.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(59)+336):Resized(9.25), 0, paramams)
end
if npc.HitPoints <= 70 and npc:Exists() then
npc:Remove()
Isaac.Spawn(20, 0, 77, npc.Position-Vector(30,0), Vector(0,0), npc)
Isaac.Spawn(20, 0, 77, npc.Position-Vector(-30,0), Vector(0,0), npc)
if EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.State ~= 5 then
npc.Velocity = npc.Velocity * 0.7
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMonstro, 20)

function mod:EterepMaggot(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
end
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(71)
end
if npc.StateFrame*1.5+npc.HitPoints*2 >= 240 and npc.Mass ~= 132 then
npc.Mass = 132
npc.StateFrame = 75
end
if npc.Mass == 132 then
npc.StateFrame = npc.StateFrame - 2
npc.Velocity = npc.Velocity * (npc.StateFrame*0.01333)
npc.State = 14
npc:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
end
if npc.Mass == 132 and npc.StateFrame <= 55 and npc:Exists() then
Isaac.Spawn(1000, 15, 0, npc.Position, Vector(0,0), npc)
local boil = Isaac.Spawn(30, 2, 87, npc.Position, Vector(0,0), npc)
boil:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
boil.Mass = 132
boil.HitPoints = 12
npc:Remove()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMaggot, 21)

function mod:EterepHive(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 6 and npc:GetSprite():GetOverlayFrame() == 4 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
local fly = Isaac.Spawn(18, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+40)*0.1), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.Mass = 6
npc.Mass = 6
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 6 and npc:GetSprite():GetOverlayFrame() == 4 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) then
local fly = Isaac.Spawn(18, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+40)*0.1), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.Mass = 6
npc.Mass = 6
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 7 and npc:GetSprite():GetOverlayFrame() == 5 then
npc.Mass = 7
end
if npc:IsDead() then
for i = 1,3 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(141)-70, npc.Position.Y+Eterepernalrng:RandomInt(141)+-70), false, 0.0)
end
for i = 1,Eterepernalrng:RandomInt(3)+1 do
local fly = Isaac.Spawn(14, 0, 0, npc.Position, Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 6 and npc:GetSprite():GetOverlayFrame() == 4 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
local charger = Isaac.Spawn(23, 1, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+40)*0.1), npc)
charger:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
charger.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
npc.Mass = 6
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 6 and npc:GetSprite():GetOverlayFrame() == 4 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) then
local charger = Isaac.Spawn(23, 1, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+40)*0.1), npc)
charger:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
charger.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
npc.Mass = 6
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 7 and npc:GetSprite():GetOverlayFrame() == 5 then
npc.Mass = 7
end
if npc:IsDead() then
for i = 1,Eterepernalrng:RandomInt(3)+1 do
local charger = Isaac.Spawn(23, 1, 0, npc.Position, Vector(0,0), npc)
charger:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
if npc.Variant == 2 and npc.SubType == 85 and npc:IsDead() then
local fly = Isaac.Spawn(38, 1, 85, npc.Position, Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly = Isaac.Spawn(38, 1, 77, npc.Position, Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 3 and npc.SubType == 85 and npc.FrameCount <= 30 then
npc.StateFrame = Eterepernalrng:RandomInt(52)+34
npc.Mass = 7
end
if npc.Variant == 3 and npc.SubType == 85 and npc.StateFrame >= 100 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.State = 8
npc.Mass = 6
npc:GetSprite():PlayOverlay("HeadAttack", false)
npc.StateFrame = Eterepernalrng:RandomInt(52)+34
end
if npc.Variant == 3 and npc.SubType == 85 and npc.V1.X >= 20 and npc.State == 4 and npc.StateFrame < 100 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) < 250 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.Variant == 3 and npc.SubType == 85 and npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() >= 4 and npc:GetSprite():GetOverlayFrame() <= 14 and npc:GetSprite():GetOverlayFrame() % 2 == 0 and npc.Mass == 6 then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = -0.03
for i = 1,8 do
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(31)-15,Eterepernalrng:RandomInt(31)-15), Vector.FromAngle(45*i):Resized(12), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.Variant == 3 and npc.SubType == 85 and npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 4 and npc.Mass == 7 then
local sucker1 = Isaac.Spawn(61, 0, 85, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+80)*0.1), npc)
sucker1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
sucker1.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
local sucker2 = Isaac.Spawn(61, 1, 85, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+80)*0.1), npc)
sucker2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
sucker2.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
local fly1 = Isaac.Spawn(18, 0, 80, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized(Eterepernalrng:RandomInt(10)+16), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly1.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly1.Mass = 4
local fly2 = Isaac.Spawn(18, 0, 80, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized(Eterepernalrng:RandomInt(10)+16), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly2.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly2.Mass = 4
local fly3 = Isaac.Spawn(18, 0, 80, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized(Eterepernalrng:RandomInt(10)+16), npc)
fly3:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly3.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly3.Mass = 4
npc.Mass = 8
end
if npc.Variant == 3 and npc.SubType == 85 and npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 16 and npc.Mass ~= 7 then
npc.Mass = 7
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHive, 22)

function mod:EterepHiveDeath(npc)
if npc:IsDead() and npc.Variant == 3 and npc.SubType == 85 then
local fly2 = Isaac.Spawn(61, 0, 85, npc.Position-Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
for i = 1,2 do
local fly3 = Isaac.Spawn(61, 0, 85, npc.Position-Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), npc)
fly3:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly4 = Isaac.Spawn(61, 1, 85, npc.Position-Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), npc)
fly4:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
for i = 1,8 do
local fly5 = Isaac.Spawn(18, 0, 80, npc.Position-Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), npc)
fly5:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepHiveDeath, 22)

function mod:EterepCharger(npc)
if npc.SubType == 77 and npc.FrameCount == 4 and npc.SpawnerType == 22 and npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_ALL then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if npc.Variant == 0 and npc.SubType == 80 and npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 30
end
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 75
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 and npc.SpawnerType <= 1 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:SetColor(Color(1,1,1,1,0.19,2.08,2.55), 99999, 0, false, false)
end
if npc:IsDead() then
local params = ProjectileParams()
params.HeightModifier = 10
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
end
end
if npc.Variant == 2 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
Isaac.Spawn(1000, 26, 0, npc.Position, Vector(0,0), npc)
end
if npc:CollidesWithGrid() and npc.Velocity:Length() >= 5 and npc.State == 8 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.05
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(8.5), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc.Variant == 3 and npc.SubType == 87 then
if npc.HitPoints <= 0 then
npc:Kill()
end
if npc.I1 <= 29 and npc.Parent == nil then
npc.I1 = npc.I1 + 1
end
if npc.I1 == 30 and npc.Parent == nil then
local heart = Isaac.Spawn(92, 0, 77, npc.Position, Vector(0,0), npc)
npc.Parent = heart
npc.I1 = 100
end
if npc.I1 == 100 and npc.Parent == nil then
npc.I1 = 0
npc.HitPoints = npc.HitPoints - 22
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCharger, 23)

function mod:EterepChargerTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 3 and npc.SubType == 87 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepChargerTakeDamage, 23)

function mod:EterepChargersReflectTears(npc, npc2)
if npc.Variant == 3 and npc.SubType == 87 and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepChargersReflectTears, 23)

function mod:EterepGlobin(npc)
if npc.FrameCount <= 1 and npc.SubType == 85 and npc.State == 3 then
npc:Morph(24, npc.Variant, 0, -1)
npc:GetSprite():Play("ReGen", true)
npc.State = 3
npc.StateFrame = 0
end
if npc.State == 3 and (npc.SubType == 77 or npc.SubType == 85) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.State == 4 and npc.StateFrame ~= 0 and (npc.SubType == 77 or npc.SubType == 85) then
npc.StateFrame = 0
end
if npc.Variant == 0 and npc.SubType == 77 then
if #Isaac.FindByType(65, -1, -1, false, true) <= 0 then
npc:Kill()
end
if npc.State == 3 and npc.StateFrame == 1 then
npc.HitPoints = npc.HitPoints - 3.5
end
end
if npc.Variant == 0 and npc.SubType == 100 and npc.State == 3 and npc:Exists() then
Isaac.Spawn(24, 0, 103, npc.Position, Vector(0,0), npc)
end
if npc.Variant == 0 and npc.SubType >= 100 and npc.SubType <= 102 and (npc.HitPoints <= npc.MaxHitPoints * 0.5 or npc.State == 3) and npc:Exists() then
local params = ProjectileParams()
params.FallingAccelModifier = 1
params.BulletFlags = ProjectileFlags.BOUNCE
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(13)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized((Eterepernalrng:RandomInt(61)+70)*0.1), 0, params)
npc:Remove()
Isaac.Spawn(24, 0, npc.SubType+1, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
if npc.Variant == 0 and npc.SubType == 103 and npc.State == 3 and npc:Exists() then
npc:Remove()
end
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.State == 3 and npc.StateFrame == 1 and npc.FrameCount >= 5 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, ProjectileParams())
end
npc.HitPoints = npc.HitPoints + 5
end
if npc.HitPoints >= 22 and npc.FrameCount % 20 == 12 and Eterepernalrng:RandomInt(7)+1 == 1 and not (npc.State == 3 or npc.State == 30) and npc.FrameCount >= 5 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, ProjectileParams())
end
npc:GetSprite():Play("ReGen2", true)
npc.HitPoints = npc.HitPoints + 5
npc.State = 30
npc:PlaySound(SoundEffect.SOUND_DEATH_BURST_SMALL, 1, 0, false, 1)
end
if npc:GetSprite():IsFinished("ReGen2") then
npc.State = 1
end
if npc.State == 3 and npc.StateFrame == 1 and npc.I1 >= 1 then
npc.HitPoints = npc.HitPoints + 3 * npc.I1
npc.I1 = npc.I1 - 1
end
if Eterepernalrng:RandomInt(4)+1 == 4 and npc.FrameCount % 15 == 12 and (npc.State == 3 or npc.State == 30) and npc.StateFrame >= 10 and npc.Variant == 1 and npc.FrameCount >= 5 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, ProjectileParams())
end
end
if npc.FrameCount <= 1 then
npc.I1 = 5
end
end
if npc.Variant == 2 and npc.SubType == 85 then
if npc.State == 3 and npc.StateFrame == 1 then
local spider1 = Isaac.Spawn(85, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
spider1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local spider2 = Isaac.Spawn(85, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
spider2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.HitPoints = npc.HitPoints + 5
end
if npc.HitPoints >= 22 and npc.FrameCount % 20 == 12 and Eterepernalrng:RandomInt(6)+1 == 1 and not (npc.State == 3 or npc.State == 30) and Isaac.CountEnemies() <= 6 then
local spider1 = Isaac.Spawn(85, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
spider1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local spider2 = Isaac.Spawn(85, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
spider2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local creep1 = Isaac.Spawn(1000, 26, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
local creep2 = Isaac.Spawn(1000, 26, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
creep2:GetSprite().Scale = Vector(1.4,1.4)
npc:GetSprite():Play("ReGen2", true)
npc.HitPoints = npc.HitPoints + 5
npc.State = 30
npc:PlaySound(SoundEffect.SOUND_DEATH_BURST_SMALL, 1, 0, false, 1)
end
if npc:GetSprite():IsFinished("ReGen2") then
npc.State = 1
end
if npc.FrameCount % 5 == 0 then
Isaac.Spawn(1000, 26, 0, npc.Position, Vector(0,0), npc)
end
if npc.State == 3 and npc.StateFrame == 1 and npc.I1 >= 1 then
npc.HitPoints = npc.HitPoints + 3 * npc.I1
npc.I1 = npc.I1 - 1
end
if npc.FrameCount <= 1 then
npc.I1 = 5
end
end
if npc.Variant == 3 and npc.SubType == 85 and npc.State == 3 and npc:Exists() then
local params = ProjectileParams()
params.FallingAccelModifier = 1
params.BulletFlags = ProjectileFlags.BOUNCE
for i = 1,2 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(13)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized((Eterepernalrng:RandomInt(61)+70)*0.1), 0, params)
end
Isaac.Spawn(24, 0, 100, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
npc:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGlobin, 24)

function mod:EterepBoomFlyDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 87 then
Game():BombDamage(npc.Position, 100, 137, false, npc, 0, 0, false)
Isaac.Spawn(1000, 1, 300, npc.Position, Vector(0,0), npc)
npc:Remove()
end
if npc:IsDead() and (npc.Variant == 1 or npc.Variant == 2) and npc.SubType == 87 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.09
for i = 1,18 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+20*i):Resized(8.8), 0, params)
end
if npc.Variant == 2 then
Isaac.Explode(npc.Position, npc, 1.0)
Isaac.Spawn(23, 1, 85, npc.Position, Vector(0,0), npc)
end
return true
end
if npc.Variant == 3 and npc.SubType == 87 and Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B and (Game():GetLevel():GetStage() == LevelStage.STAGE2_1 or Game():GetLevel():GetStage() == LevelStage.STAGE2_2) and npc.FrameCount <= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_dragon fly 1 ashpit.png")
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 3 and npc.SubType == 1 and npc.FrameCount <= 1 and ((EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1) or ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4))) then
npc:Morph(25, 3, 87, -1)
npc.HitPoints = npc.MaxHitPoints
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_dragon fly 2.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.5
if Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B and (Game():GetLevel():GetStage() == LevelStage.STAGE2_1 or Game():GetLevel():GetStage() == LevelStage.STAGE2_2) then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_dragon fly 2 ashpit.png")
npc:GetSprite():LoadGraphics()
end
npc.Mass = 8
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc:IsDead() and npc.Variant == 3 and npc.SubType == 87 and npc.Mass == 7 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.Scale = 1.75
params.Color = Color(5,3,0,1,0,0,0)
params.BulletFlags = ProjectileFlags.FIRE_WAVE
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
return true
end
if npc:IsDead() and npc.Variant == 3 and npc.SubType == 87 and npc.Mass == 8 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.Scale = 1.75
params.Color = Color(5,3,0,1,0,0,0)
params.BulletFlags = ProjectileFlags.FIRE_WAVE_X
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
return true
end
if npc:IsDead() and npc.Variant == 5 and npc.SubType == 87 then
local sickfly1 = Isaac.Spawn(25, 5, 77, npc.Position+Vector(-10,0), Vector(0,0), npc)
sickfly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local sickfly2 = Isaac.Spawn(25, 5, 77, npc.Position+Vector(10,0), Vector(0,0), npc)
sickfly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc:IsDead() and npc.Variant == 6 and npc.SubType == 87 then
npc.SubType = 44
end
if npc:GetSprite():IsPlaying("Explode") and npc:GetSprite():GetFrame() == 23 and npc.Variant == 6 and npc.SubType == 44 and npc.Mass ~= 111 then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.6
params.BulletFlags = ProjectileFlags.EXPLODE
for i = 1,8 do
params.FallingSpeedModifier = (-Eterepernalrng:RandomInt(196)-55) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
for i = 1,3 do
Isaac.Spawn(4, 3, 0, npc.Position+Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), npc)
end
npc.Mass = 111
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBoomFlyDeath, 25)

function mod:EterepMaw(npc)
if npc.Variant == 0 and (npc.SubType == 85 or npc.SubType == 91 or npc.SubType == 92) and npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = -10
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+5*i+335):Resized(7.8), 0, params)
end
npc:PlaySound(146, 1, 0, false, 1)
end
if npc.Variant == 1 and npc.SubType == 85 and npc.FrameCount % 5 == 0 then
Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
end
if npc.Variant == 2 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Scale = 1.5
params.BulletFlags = ProjectileFlags.SMART
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(9), 0, params)
end
if npc.Mass ~= 9 then
local fly = Isaac.Spawn(96, 0, 0, npc.Position, Vector(0,0), npc)
fly.Parent = npc
npc.Mass = 9
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMaw, 26)

function mod:EterepMawMorph(npc)
if npc:GetData().EternalMawHead ~= nil and npc:GetData().EternalMawHead == 1 and npc.SubType == 0 then
npc:Morph(npc.Type, npc.Variant, 85, -1)
npc.Scale = 1.25
npc:GetSprite():Play("Idle", true)
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_RENDER, mod.EterepMawMorph, 26)

function mod:EterepMawDeath(npc)
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, ProjectileParams())
end
npc:PlaySound(146, 1, 0, false, 1)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMawDeath, 26)

function mod:EterepHost(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc.Velocity = npc.Velocity * 0.7
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc:GetSprite():Play("Idle", true)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and not Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and Eterepernalrng:RandomInt(3)+1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 20 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("Shoot", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)
end
if npc.StateFrame == 10 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("FastShoot", true)
npc.StateFrame = 11
if Eterepernalrng:RandomInt(4)+1 == 2 then
npc.StateFrame = 5
end
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 10) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 10)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 33
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 52) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 18)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():IsEventTriggered("canshoot2") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("canshoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.HeightModifier = 5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+10):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-10):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(7.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
if npc.Variant == 1 and npc.SubType == 85 then
npc.Velocity = npc.Velocity * 0.7
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(15)+5
npc:GetSprite():Play("Idle", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and not Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and Eterepernalrng:RandomInt(3)+1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 20 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("Shoot", true)
npc.StateFrame = Eterepernalrng:RandomInt(15)+5
end
if npc.StateFrame == 10 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("FastShoot", true)
npc.StateFrame = 11
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 9) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 9)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 82) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 19)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():IsEventTriggered("canshoot2") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("canshoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.HeightModifier = 5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+9):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+18):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+35):Resized(6.1), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-9):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-18):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-35):Resized(6.1), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
if npc.Variant == 3 and npc.SubType == 85 then
npc.Velocity = npc.Velocity * 0.7
if npc.ProjectileCooldown <= 30 then
npc.ProjectileCooldown = 70
end
if npc.FrameCount <= 1 then
npc.ProjectileCooldown = 70
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc:GetSprite():Play("Idle", true)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and not Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and Eterepernalrng:RandomInt(3)+1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsFinished("Shoot") then
npc.State = 4
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
end
if npc.StateFrame >= 20 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("Shoot", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)
npc.State = 8
end
if npc.StateFrame == 10 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("FastShoot", true)
npc.StateFrame = 11
if Eterepernalrng:RandomInt(4)+1 == 2 then
npc.StateFrame = 5
end
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 10) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 10)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 33
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsPlaying("Shoot") and (npc:GetSprite():GetFrame() == 43 or npc:GetSprite():GetFrame() == 54) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 33
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if (npc:GetSprite():IsPlaying("Shoot") or npc:GetSprite():IsPlaying("FastShoot")) and npc:GetSprite():IsEventTriggered("Close") then
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc:PlaySound(52, 1, 0, false, 1)
Game():ShakeScreen(15,6)
local params = ProjectileParams()
params.FallingAccelModifier = 2
params.Variant = 9
for i = 1,Eterepernalrng:RandomInt(3)+3 do
params.HeightModifier = -Eterepernalrng:RandomInt(191)-350
npc:FireProjectiles(Isaac.GetRandomPosition(0), Vector(0,0), 0, params)
end
if npc:GetSprite():IsPlaying("FastShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
params.Variant = 9
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
end
if npc.State == 8 and not npc:GetSprite():IsEventTriggered("Close") then
return true
end
if npc.State ~= 8 then
return true
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepHost, 27)

function mod:EterepHostTakeDamage(npc, damage, flags, damageSource, cooldown)
if (npc.Variant == 0 or npc.Variant == 3) and npc.SubType == 85 and npc.Mass == 32 and flags ~= DamageFlag.DAMAGE_POISON_BURN then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepHostTakeDamage, 27)

function mod:EterepHostReflectTears(npc, npc2)
if (npc.Variant == 0 or npc.Variant == 3) and npc.SubType == 85 and npc.Mass == 32 and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepHostReflectTears, 27)

function mod:EterepChub(npc)
if npc.Variant <= 2 and npc.SubType == 89 then
npc.Velocity = npc.Velocity * 1.03
end
if npc.Variant == 1 and npc.SubType == 89 then
npc.Scale = 1.15
npc.Size = 24
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, params)
end
Isaac.Spawn(61, 0, 0, npc.Position, Vector(0,0), npc)
end
end
if npc.Variant == 2 and npc.SubType == 89 then
if npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(92, -1, -1, false, true) >= 2 then
local params = ProjectileParams()
params.Variant = 0
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(9), 0, params)
end
end
if npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(92, -1, -1, false, true) == 0 then
npc.HitPoints = npc.HitPoints - 30
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepChub, 28)

function mod:EterepChubReflectTears(npc, npc2)
if npc.Variant == 2 and npc.SubType == 89 and (npc.Parent == nil or npc:GetSprite():IsPlaying("WalkBody01")) and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepChubReflectTears, 28)

function mod:EterepHopper(npc)
if npc.Variant <= 3 and npc.SubType == 85 then
if npc.Variant == 3 and npc:GetPlayerTarget().Position.X > npc.Position.X and npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc:GetSprite().FlipX = false
end
if npc.Variant == 3 and npc:GetPlayerTarget().Position.X <= npc.Position.X and npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc:GetSprite().FlipX = true
end
if npc.Variant == 3 and (npc:GetSprite():IsFinished("Hop") or npc:GetSprite():IsFinished("Appear")) then
npc:GetSprite():Play("Idle", true)
end
if npc.Variant ~= 1 and npc.StateFrame <= 10 and npc.FrameCount >= 50 and not npc:GetSprite():IsPlaying("Hop") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if npc.Variant == 1 and npc.SpawnerType == 205 and npc.FrameCount == 17 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if npc.Variant == 1 and npc.FrameCount >= 50 and not npc:GetSprite():IsPlaying("Hop") and ((npc.FrameCount % 82 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 41 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if npc.StateFrame > 12 and npc.FrameCount % 30 == 25 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = 0
end
if npc.StateFrame > 10 and npc.FrameCount % 30 == 25 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 and npc.Variant <= 2 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/13 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/13
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 and npc.Variant == 3 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/10 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/10
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/10)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
if npc.Variant == 1 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
for i = 1,3 do
local creep1 = Isaac.Spawn(1000, 25, 0, npc.Position-Vector(Eterepernalrng:RandomInt(51)-25,Eterepernalrng:RandomInt(51)-25), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(2,2)
creep1:ToEffect().Timeout = 130
end
end
if npc.Variant == 0 or npc.Variant == 2 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
if npc.Variant == 2 then
local spider = Isaac.Spawn(884, 0, 0, npc.Position, Vector(0,0), npc)
spider:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
if npc.Variant == 3 then
if npc.StateFrame <= 8 then
local Eterephoppercustomangle = 0
if npc.StateFrame == 3 or npc.StateFrame == 7 then
Eterephoppercustomangle = 180
end
for i = 1,npc.StateFrame+4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterephoppercustomangle+(360/(npc.StateFrame+4))*i):Resized(10), 0, params)
end
end
if npc.StateFrame >= 9 then
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30*i):Resized(10), 0, params)
end
end
npc:PlaySound(69, 1, 0, false, 1)
if npc.StateFrame <= 10 then
npc.StateFrame = npc.StateFrame + 1
end
end
npc:PlaySound(69, 1, 0, false, 1)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 14 and npc:GetSprite():GetFrame() <= 16 and npc.Variant == 3 then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
if npc.Variant == 3 and npc:GetSprite():IsFinished("Hop") or npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Idle", true)
end
if npc.Variant == 2 and npc:IsDead() then
for i = 1,20 do
local spider = Isaac.Spawn(884, 0, 0, npc.Position, Vector(0,0), npc)
spider:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
return true
end
if npc.Variant == 1 and npc.SubType == 80 and npc.State == 4 and npc.StateFrame == 18 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(9), 0, params)
end
npc.StateFrame = npc.StateFrame + 1
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepHopper, 29)

function mod:EterepHopperTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 0 and npc.SubType == 85 and flags == DamageFlag.DAMAGE_FIRE then
local spawn = Isaac.Spawn(54, 0, 85, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepHopperTakeDamage, 29)

function mod:EterepBoil(npc)
if EterepClassicEnemiesPatterns == 1 and npc.SubType == 0 and npc.FrameCount <= 1 and npc:HasEntityFlags(1<<2) then
npc.HitPoints = Eterepernalrng:RandomInt(10)+5
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
Isaac.Spawn(1000, 15, 0, npc.Position, Vector(0,0), npc)
end
if npc.Variant <= 2 and npc.SubType == 87 and npc.FrameCount <= 1 and npc:HasEntityFlags(1<<2) and (npc.SpawnerType <= 1 or npc.SpawnerType == 36) then
npc.HitPoints = npc.MaxHitPoints + 25
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
Isaac.Spawn(1000, 15, 0, npc.Position, Vector(0,0), npc)
end
if npc.Variant <= 2 and npc.SubType == 87 and npc.FrameCount <= 20 and (npc.SpawnerType <= 1 or npc.SpawnerType == 36) then
npc.State = 3
end
if npc.Variant == 0 and npc.SubType == 87 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 1.2
for i = 1,10 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(126)+15) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
end
if npc.Variant <= 1 and npc.SubType == 87 and npc.State == 4 then
npc.State = 8
end
if npc.Variant == 1 and npc.SubType == 87 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.6
params.BulletFlags = ProjectileFlags.EXPLODE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,2 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(165)+75) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
end
if npc.Variant == 2 and npc.SubType == 87 then
if npc:GetSprite():IsEventTriggered("Shoot") and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
if npc:GetSprite():IsEventTriggered("Shoot") and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
if npc.FrameCount % 10 == 0 and npc.Mass == 132 and npc.FrameCount <= 420 then
npc.HitPoints = npc.HitPoints + 2
end
if npc.HitPoints >= 40 and npc.Mass == 132 and npc:Exists() then
local pooter = Isaac.Spawn(14, 1, 87, npc.Position, Vector(0,0), npc)
pooter.MaxHitPoints = 50
pooter.HitPoints = 50
npc:Remove()
npc:PlaySound(181, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBoil, 30)

function mod:EterepSpitty(npc)
if npc.Variant == 0 and (npc.SubType == 77 or npc.SubType == 85) then
if npc:GetSprite():IsPlaying("Attack Hori") and npc.StateFrame == 8 then
if npc:GetSprite().FlipX then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
params.Variant = 4
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(164):Resized(10), 0, params)
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(180):Resized(11), 0, params)
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(196):Resized(10), 0, params)
else
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
params.Variant = 4
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(344):Resized(10), 0, params)
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(360):Resized(11), 0, params)
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(16):Resized(10), 0, params)
end
npc.StateFrame = 10
end
if npc:GetSprite():IsPlaying("Attack Up")  and npc.StateFrame == 8 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
params.Variant = 4
npc:FireProjectiles(npc.Position-Vector(0,10), Vector.FromAngle(286):Resized(10), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,10), Vector.FromAngle(270):Resized(11), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,10), Vector.FromAngle(254):Resized(10), 0, params)
npc.StateFrame = 10
end
if npc:GetSprite():IsPlaying("Attack Down")  and npc.StateFrame == 8 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
params.Variant = 4
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(106):Resized(10), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(90):Resized(11), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(74):Resized(10), 0, params)
npc.StateFrame = 10
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Attack Hori")  and npc.StateFrame == 8 then
if npc:GetSprite().FlipX then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.03
params.Variant = 4
for i = 1,8 do
if i == 8 then
params.Scale = 1.5
end
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(164):Resized(1.85*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(180):Resized(2*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(196):Resized(1.85*i), 0, params)
end
npc.StateFrame = 10
else
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.03
params.Variant = 4
for i = 1,8 do
if i == 8 then
params.Scale = 1.5
end
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(344):Resized(1.85*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(360):Resized(2*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(16):Resized(1.85*i), 0, params)
end
npc.StateFrame = 10
end
end
if npc:GetSprite():IsPlaying("Attack Up")  and npc.StateFrame == 8 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.03
params.Variant = 4
for i = 1,8 do
if i == 8 then
params.Scale = 1.5
end
npc:FireProjectiles(npc.Position-Vector(0,10), Vector.FromAngle(286):Resized(1.85*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,10), Vector.FromAngle(270):Resized(2*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,10), Vector.FromAngle(254):Resized(1.85*i), 0, params)
end
npc.StateFrame = 10
end
if npc:GetSprite():IsPlaying("Attack Down")  and npc.StateFrame == 8 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.03
params.Variant = 4
for i = 1,8 do
if i == 8 then
params.Scale = 1.5
end
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(106):Resized(1.85*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(90):Resized(2*i), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(74):Resized(1.85*i), 0, params)
end
npc.StateFrame = 10
end
if npc.State == 4 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.6
params.Variant = 4
for i = 1,6 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(141)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
end
if npc:IsDead() then
local params = ProjectileParams()
params.Variant = 5
params.Scale = 1.5
params.FallingAccelModifier = 0.3
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,4 do
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(90*i):Resized(10), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSpitty, 31)

function mod:EterepBrain(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and npc.SpawnerType ~= 224 then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 160 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 200 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
params.Scale = 1.5
params.BulletFlags = ProjectileFlags.SMART | ProjectileFlags.ACCELERATE
params.Acceleration = 1.035
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(6), 0, params)
npc.StateFrame = Eterepernalrng:RandomInt(61)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(56)+100
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBrain, 32)

function mod:EterepLeaper(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(121)-100
end
if npc:GetSprite():IsPlaying("Hop") then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 100 and npc.StateFrame < 200 and not npc:GetSprite():IsPlaying("Hop") and not npc:GetSprite():IsPlaying("BigJumpUp") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("BigJumpUp", true)
npc.StateFrame = 300
end
if npc.FrameCount >= 50 and npc.StateFrame < 100 and not npc:GetSprite():IsPlaying("Hop") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/13 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/13
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot1") then
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
if npc.Variant == 0 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
npc.Velocity = npc.Velocity * 0
end
if npc.Variant == 1 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
local creep = Isaac.Spawn(1000, 26, 0, npc.Position, Vector(0,0), npc)
creep:GetSprite().Scale = Vector(2,2)
end
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:PlaySound(69, 1, 0, false, 1)
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("BigJumpUp") and npc:GetSprite():GetFrame() == 4 then
npc.Velocity = (Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 2, false) - npc.Position):Normalized() * math.abs((npc.Position - Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 2, false)):Length()) * 0.1138
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
if npc:GetSprite():IsPlaying("BigJumpUp") and npc:GetSprite():GetFrame() == 6 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsFinished("BigJumpUp") then
npc:GetSprite():Play("BigJumpDown", true)
end
if npc:GetSprite():IsPlaying("BigJumpDown") and npc:GetSprite():IsEventTriggered("NewShoot2") and npc.Variant == 0 then
local params = ProjectileParams()
params.HeightModifier = 10
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(11), 0, params)
end
npc:PlaySound(69, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("BigJumpDown") and (npc:GetSprite():IsEventTriggered("NewShoot1") or npc:GetSprite():IsEventTriggered("Land")) and npc.Variant == 1 then
if npc:GetSprite():GetFrame() == 20 then
npc:PlaySound(69, 1, 0, false, 1)
for i = 1,3 do
local creep = Isaac.Spawn(1000, 26, 0, npc.Position-Vector(Eterepernalrng:RandomInt(71)-35,Eterepernalrng:RandomInt(71)-35), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(2,2)
creep:ToEffect().Timeout = 160
end
end
local params = ProjectileParams()
params.FallingAccelModifier = 0.7
params.Scale = 0.8
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(131)+95) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(71)+30)*0.1), 0, params)
npc:PlaySound(185, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("BigJumpDown") and npc:GetSprite():GetFrame() == 20 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsFinished("BigJumpDown") then
npc.StateFrame = Eterepernalrng:RandomInt(202)-100
end
if (npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26) or (npc:GetSprite():IsPlaying("BigJumpDown") and npc:GetSprite():GetFrame() <= 10) then
npc.Velocity = npc.Velocity * 0.5
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepLeaper, 34)

function mod:EterepMrMaw(npc)
if (npc.Variant == 0 or npc.Variant == 2) and npc.SubType == 85 then
if npc:GetData().EternalMawBody ~= 1 then
npc:GetData().EternalMawBody = 1
end
if npc.Parent ~= nil and (npc.Parent.Variant == 1 or npc.Parent.Variant == 3) then
if npc.State == 4 and npc.V2.X ~= 0 then
npc.V2 = Vector(0,npc.V2.Y)
end
if npc.State == 8 and npc.V2.X ~= 1 then
npc.V2 = Vector(1,npc.V2.Y)
local params = ProjectileParams()
params.HeightModifier = -7
for i = 1,8 do
npc:FireProjectiles(npc.Position+Vector.FromAngle(45*i):Resized(20), Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
end
end
if (npc.Variant == 1 or npc.Variant == 3) and npc.SubType == 0 then
if npc.SpawnerType == 35 and (npc.SpawnerVariant == 0 or npc.SpawnerVariant == 2) and npc.SpawnerEntity ~= nil and npc.SpawnerEntity.SubType == 85 then
if npc.Variant == 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_maw.png")
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 3 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_red maw.png")
npc:GetSprite():LoadGraphics()
end
npc.Scale = 1.25
npc.SubType = 85
npc.MaxHitPoints = 46
npc.HitPoints = npc.MaxHitPoints
if npc:GetData().EternalMawHead ~= 1 then
npc:GetData().EternalMawHead = 1
end
end
end
if (npc.Variant == 1 or npc.Variant == 3) and npc.SubType == 85 then
if npc:GetData().EternalMawHead ~= 1 then
npc:GetData().EternalMawHead = 1
end
end
if npc.Variant == 10 and npc.SpawnerEntity ~= nil and npc.SpawnerEntity.SubType == 85 and npc.I2 ~= 1 then
npc.I2 = 1
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_maw.png")
npc:GetSprite():LoadGraphics()
end
if npc:IsDead() and npc.Variant == 3 and npc.SubType == 85 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, ProjectileParams())
end
npc:PlaySound(146, 1, 0, false, 1)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMrMaw, 35)

function mod:EterepGurdy(npc)
if npc:GetSprite():IsPlaying("Attack1") and npc:GetSprite():IsEventTriggered("Shoot") and Isaac.CountEnemies() <= 4 then
Isaac.Spawn(18, 0, 0, npc.Position-Vector(60,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position-Vector(-60,20), Vector(0,0), npc)
end
if npc.Variant == 0 and npc.SubType == 83 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.Variant = 4
if npc:GetSprite():IsPlaying("Attack6") and npc:GetSprite():GetFrame() == 1 and #Isaac.FindByType(30, 0, 87, false, true) >= 1 then
npc.I1 = 1
npc:GetSprite():Play("Attack1", true)
end
if npc:GetSprite():IsPlaying("Attack2") and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,17 do
npc:FireProjectiles(npc.Position+Vector(0,1), Vector.FromAngle(6*i+36):Resized(9.05), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack5") and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,17 do
npc:FireProjectiles(npc.Position+Vector(0,1), Vector.FromAngle(6*i+319):Resized(9.05), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack4") and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,17 do
npc:FireProjectiles(npc.Position+Vector(0,1), Vector.FromAngle(6*i+115):Resized(9.05), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack1") and npc:GetSprite():IsEventTriggered("Shoot") then
Isaac.Spawn(18, 0, 0, npc.Position-Vector(40,30), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position-Vector(-40,30), Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGurdy, 36)

function mod:EterepBaby(npc)
if npc.Variant == 0 and npc.SubType >= 80 and npc.SubType <= 82 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local attack = Eterepernalrng:RandomInt(2)+1
if attack == 1 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, ProjectileParams())
end
end
if attack == 2 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, ProjectileParams())
end
end
npc:PlaySound(44, 2, 0, false, 1)
end
end
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.Size == 18 then
npc.V1 = Vector(npc.V1.X+1.5,npc.V1.Y)
end
if npc.Variant == 0 and npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.06
params.HeightModifier = -10
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9.9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+18):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-18):Resized(9), 0, params)
npc:PlaySound(44, 1, 0, false, 1)
end
if npc.Variant == 1 and npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.06
params.HeightModifier = -10
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-10):Resized(9.75), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+10):Resized(9.75), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(9.25), 0, params)
npc:PlaySound(44, 1, 0, false, 1)
end
if npc.Variant == 0 and npc:GetSprite():IsPlaying("Vanish") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Variant = 4
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(9), 0, params)
end
npc.Size = 17
end
if npc.Variant == 1 and npc:GetSprite():IsPlaying("Vanish") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, params)
end
npc.Size = 17
end
end
if npc.Variant == 1 and npc.SubType == 81 and npc.FrameCount <= 1 and (Game():GetLevel():GetStage() >= LevelStage.STAGE5 or Game():GetLevel():GetStage() >= LevelStage.STAGE5_GREED) then
npc.MaxHitPoints = 35
npc.HitPoints = 35
end
if npc.Variant == 2 and npc.SubType == 90 then
local params = ProjectileParams()
params.HeightModifier = -17
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+math.sin(npc:GetSprite():GetFrame()*0.6)*13):Resized(15), 0, params)
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 5 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(horseshoot, 2, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Vanish") and npc:GetSprite():IsEventTriggered("Jump") then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.SMART
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(9), 0, params)
end
if #Isaac.FindByType(46, 2, -1, false, true) == 0 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(9), 0, params)
end
end
end
end
if npc.Variant == 3 and npc.SubType == 85 then
if npc.HitPoints <= npc.MaxHitPoints * 0.45 then
npc.I1 = 1
npc.CollisionDamage = 0
end
if npc.I1 == 1 and npc.State == 7 then
npc.State = 8
npc.CollisionDamage = 1
npc:GetSprite():Play("Attack2", true)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.025
params.HeightModifier = -5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-10):Resized(9.75), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+10):Resized(9.75), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(9.25), 0, params)
end
if npc.I1 == 0 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 25 then
npc.State = 7
npc:GetSprite():Play("DashStart", true)
end
end
if npc.I1 == 1 then
if npc.State == 8 or npc.State == 12 or npc.State == 13 then
npc.Velocity = Vector(0,0)
end
if (npc:GetSprite():IsPlaying("Attack") or npc:GetSprite():IsPlaying("Attack2")) and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8), 0, params)
end
npc.State = 12
npc.CollisionDamage = 0
npc:GetSprite():Play("Vanish", true)
end
if npc:GetSprite():IsEventTriggered("Jump") then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsEventTriggered("Land") then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsFinished("Vanish") then
npc.Position = npc:GetPlayerTarget().Position + Vector(Eterepernalrng:RandomInt(301)-150,Eterepernalrng:RandomInt(301)-150)
npc.State = 13
npc:GetSprite():Play("Vanish2", true)
end
if npc:GetSprite():IsFinished("Vanish2") then
npc.State = 8
npc.CollisionDamage = 1
npc:GetSprite():Play("Attack2", true)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBaby, 38)

function mod:EterepBabyTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant <= 1 and npc.SubType == 85 then
npc.Size = 18
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepBabyTakeDamage, 38)

function mod:EterepVis(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("CreepUp") then
for i = 0,19 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,54*i), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc:GetSprite():IsEventTriggered("CreepDown") then
for i = 0,19 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,-54*i), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc:GetSprite():IsEventTriggered("CreepHori") then
if npc:GetSprite().FlipX then
for i = 0,19 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(i*54,0), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
else
for i = 0,19 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(-54*i,0), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("CreepHori") then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,-54*i), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
local creep2 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,54*i), Vector(0,0), npc)
creep2:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc:GetSprite():IsEventTriggered("CreepVert") then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(-54*i,0), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
local creep2 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(54*i,0), Vector(0,0), npc)
creep2:GetSprite().Scale = Vector(1.4,1.4)
end
end
end
if npc.Variant == 3 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Creep") then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(-54*i,0), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
local creep2 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(54*i,0), Vector(0,0), npc)
creep2:GetSprite().Scale = Vector(1.4,1.4)
local creep3 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,-54*i), Vector(0,0), npc)
creep3:GetSprite().Scale = Vector(1.4,1.4)
local creep4 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,54*i), Vector(0,0), npc)
creep4:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc.Variant == 22 and npc.SubType == 85 and npc.FrameCount % 2 == 1 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 130
creep:GetSprite().Scale = Vector(1.5,1.5)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepVis, 39)

function mod:EterepGuts(npc)
if npc.Variant <= 1 and npc.SubType == 85 and ((npc.FrameCount % 146 == 144 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 74 == 73 and not npc:HasEntityFlags(1<<7))) and npc.SpawnerType <= 1 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, ProjectileParams())
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.Variant == 2 and npc.SubType == 85 then
npc:GetSprite().FlipX = false
if npc:GetSprite():IsOverlayPlaying("ChargeLoop") and ((npc.FrameCount % 12 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 6 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-110):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+110):Resized(7.4), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if ((npc.FrameCount % 146 == 144 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 74 == 73 and not npc:HasEntityFlags(1<<7))) and npc.SpawnerType <= 1 and not npc:GetSprite():IsOverlayPlaying("ChargeLoop") then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.FrameCount % 3 == 0 then
Isaac.Spawn(1000, 26, 0, npc.Position, Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGuts, 40)

function mod:EterepKnight(npc)
if (npc.Variant <= 2 or npc.Variant == 4) and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.I2 = 90
end
if npc.FrameCount % 5 == 4 and npc.Mass == 11 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 200
end
if npc.Mass == 11 then
npc.I1 = npc.I1 + 1
end
if npc.Mass ~= 10 and npc.I1 >= 30 then
npc.Mass = 10
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("Hori") and npc:GetSprite().FlipX == false and npc.I2 ~= 0 then
npc.I2 = 0
end
if npc:GetSprite():IsPlaying("Down") and npc.I2 ~= 90 then
npc.I2 = 90
end
if npc:GetSprite():IsPlaying("Hori") and npc:GetSprite().FlipX == true and npc.I2 ~= 180 then
npc.I2 = 180
end
if npc:GetSprite():IsPlaying("Up") and npc.I2 ~= 270 then
npc.I2 = -90
end
end
if npc.Variant == 3 and npc.Mass == 54 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
if npc.Variant == 3 and npc.SubType == 85 and npc.Parent ~= nil and npc.Parent.SubType ~= 85 then
npc.Parent:GetSprite():Load("gfx/e_pon.anm2",true)
npc.Parent:GetSprite():LoadGraphics()
npc.Parent.SubType = 85
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepKnight, 41)

function mod:EterepKnightReflectTears(npc, npc2)
if npc.Variant <= 2 and npc.SubType == 85 and npc.FrameCount >= 20 and npc2.Type == 2 and ((npc.I2 ~= 180 and (npc2.Position - npc.Position):GetAngleDegrees() >= -80+npc.I2 and (npc2.Position - npc.Position):GetAngleDegrees() <= 80+npc.I2) or (npc.I2 == 180 and (((npc2.Position - npc.Position):GetAngleDegrees() >= 100 and (npc2.Position - npc.Position):GetAngleDegrees() <= 180) or ((npc2.Position - npc.Position):GetAngleDegrees() >= -180 and (npc2.Position - npc.Position):GetAngleDegrees() <= -100)))) and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
if npc.Variant == 3 and (npc.SubType == 85 or (npc.Parent ~= nil and npc.Parent.SubType == 85)) and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
if npc.Variant == 4 and npc.SubType == 85 and npc.FrameCount >= 20 and npc2.Type == 2 and ((npc.I2 ~= 180 and (npc2.Position - npc.Position):GetAngleDegrees() >= -80+npc.I2 and (npc2.Position - npc.Position):GetAngleDegrees() <= 80+npc.I2) or (npc.I2 == 180 and (((npc2.Position - npc.Position):GetAngleDegrees() >= 100 and (npc2.Position - npc.Position):GetAngleDegrees() <= 180) or ((npc2.Position - npc.Position):GetAngleDegrees() >= -180 and (npc2.Position - npc.Position):GetAngleDegrees() <= -100)))) and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile1 = Isaac.Spawn(9, 0, 673, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+168):Resized(npc2.Velocity:Length()), npc)
projectile1:ToProjectile().Scale = npc2.Size/5.6
if projectile1:ToProjectile().Scale > 1 then
projectile1.CollisionDamage = 2
end
local projectile2 = Isaac.Spawn(9, 0, 673, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile2:ToProjectile().Scale = npc2.Size/5.6
if projectile2:ToProjectile().Scale > 1 then
projectile2.CollisionDamage = 2
end
local projectile3 = Isaac.Spawn(9, 0, 673, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+192):Resized(npc2.Velocity:Length()), npc)
projectile3:ToProjectile().Scale = npc2.Size/5.6
if projectile3:ToProjectile().Scale > 1 then
projectile3.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepKnightReflectTears, 41)

function mod:EterepKnightTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant <= 2 and npc.SubType == 85 then
npc.Mass = 11
end
if npc.Variant == 4 and npc.SubType == 85 then
npc.Mass = 11
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepKnightTakeDamage, 41)

function mod:EterepKnightTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc:IsDead() and npc.Variant == 2 and npc.SubType == 85 then
local body = Isaac.Spawn(41, 3, 85, npc.Position, Vector(0,0), npc)
body:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
body.Mass = 54
body:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_body1.png")
body:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_loose knight.png")
body:GetSprite():LoadGraphics()
local brain = Isaac.Spawn(840, 0, 84, npc.Position, Vector(0,0), npc)
brain:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
brain:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_pon.png")
brain:GetSprite():LoadGraphics()
body.Parent = brain
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepKnightTakeDamage, 41)

function mod:EterepMonstroII(npc)
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType == 0 and npc.FrameCount <= 1 then
npc:GetSprite():Load("gfx/Reworked monstro 2.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear", true)
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType == 0 and npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.Scale = 1.5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(12), 0, params)
end
if npc.I1 == 1 and Isaac.CountEnemies() <= 6 then
Isaac.Spawn(61, 0, 0, npc.Position-Vector(0,-20), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(0,20), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(-20,0), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(20,0), Vector(0,0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType == 1 and npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.Scale = 1.5
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(13), 0, params)
end
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType <= 1 and npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():GetFrame() == 61 and npc.I1 == 1 and (npc:GetPlayerTarget().Position.Y > npc.Position.Y + 30 or npc:GetPlayerTarget().Position.Y < npc.Position.Y - 30) and Eterepernalrng:RandomInt(2) == 1 then
npc:GetSprite():Play("JumpUp", true)
npc.State = 6
npc.StateFrame = 0
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType == 1 and npc:GetSprite():IsPlaying("Walk") then
npc.Velocity = npc.Velocity * 1.1
end
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.Scale = 1.5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(12), 0, params)
end
if npc.I1 == 1 and Isaac.CountEnemies() <= 6 then
Isaac.Spawn(61, 0, 0, npc.Position-Vector(0,-20), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(0,20), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(-20,0), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(20,0), Vector(0,0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
end
if npc:GetSprite():IsEventTriggered("Land") and npc.State == 4 then
local params = ProjectileParams()
params.Scale = 1.5
for i = 1,4 do
npc:FireProjectiles(npc.Position+Vector.FromAngle(90*i):Resized(30), Vector.FromAngle(90*i):Resized(11), 0, params)
end
end
if (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("Creep")) and npc.State == 8 and npc:GetSprite().FlipX then
for i = 0,22 do
local m2crep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(-48*i,0), Vector(0,0), npc)
m2crep:GetSprite().Scale = Vector(1.4,1.4)
m2crep:ToEffect().Timeout = 300
end
end
if (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("Creep")) and npc.State == 8 and not npc:GetSprite().FlipX then
for i = 0,22 do
local m2crep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(48*i,0), Vector(0,0), npc)
m2crep:GetSprite().Scale = Vector(1.4,1.4)
m2crep:ToEffect().Timeout = 300
end
end
end
if npc.Variant == 1 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("Land") then
local gcreep = Isaac.Spawn(1000, 26, 0, npc.Position, Vector(0,0), npc)
gcreep:GetSprite().Scale = Vector(3,3)
gcreep:ToEffect().Timeout = 9975
if Isaac.CountEnemies() <= 3 then
local gishspawn = Eterepernalrng:RandomInt(2)+1
if gishspawn == 1 then
Isaac.Spawn(15, 1, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
if gishspawn == 2 then
Isaac.Spawn(15, 1, 77, npc.Position-Vector(30,0), Vector(0,0), npc)
Isaac.Spawn(15, 1, 77, npc.Position-Vector(-30,0), Vector(0,0), npc)
end
npc:PlaySound(265, 1, 0, false, 1)
end
end
if npc.State == 7 and npc.StateFrame == 28 then
npc.StateFrame = 30
end
if npc:GetSprite():IsPlaying("Taunt") and npc:GetSprite():IsEventTriggered("NewShoot") then
npc:PlaySound(SoundEffect.SOUND_BOSS_SPIT_BLOB_BARF, 1, 0, false, 1)
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.8
params.BulletFlags = ProjectileFlags.GOO | ProjectileFlags.EXPLODE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,3 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(281)+60) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized(7), 0, params)
end
npc.StateFrame = 30
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMonstroII, 43)

function mod:EterepMom(npc)
if npc.Variant == 10 and npc.FrameCount <= 1 and (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) and EterepFinalacementernal == true then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mom.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 73
npc.MaxHitPoints = 750
npc.HitPoints = 750
end
if npc.Variant == 0 and npc.FrameCount <= 1 and (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) and EterepFinalacementernal == true then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mom.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_mom.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_mom.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 73
npc.MaxHitPoints = 750
npc.HitPoints = 750
end
if npc.Variant == 0 and npc.FrameCount <= 1 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 0 and (npc.SubType == 83 or npc.Mass == 73) and npc:GetSprite():IsPlaying("ArmOpen") and npc:GetSprite():IsEventTriggered("Appear") then
local params = ProjectileParams()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc.Variant == 10 and (npc.SubType == 83 or npc.Mass == 73) and (npc.State == 7 or (npc.State == 6 and npc.I2 >= 1)) and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc.Variant == 10 and (npc.SubType == 83 or npc.Mass == 73) and npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMom, 45)

function mod:EterepSloth(npc)
if npc.Variant == 0 and npc.SubType == 90 then
if npc.State == 9 and npc.StateFrame == 5 then
npc.StateFrame = 7
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.97
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 27
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(61)+180) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(35)+343)):Resized((Eterepernalrng:RandomInt(101)+20)*0.1), 0, params)
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
npc.State = 6
npc:GetSprite():Play("ProjectileAttack", true)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
if npc.State == 6 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.97
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 27
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(61)+180) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(35)+343)):Resized((Eterepernalrng:RandomInt(101)+20)*0.1), 0, params)
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
if npc.State == 6 and npc:GetSprite():IsFinished("ProjectileAttack") then
npc.State = 1
end
end
if npc.Variant == 1 and npc.SubType == 90 then
if npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
local Sslothattack = Eterepernalrng:RandomInt(4)+1
if npc.State == 14 and npc:GetSprite():IsEventTriggered("NewShoot") and #Isaac.FindByType(274, -1, -1, false, true) <= 0 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.14
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+11*i+321.5):Resized(9), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
end
if npc.State == 14 and npc:GetSprite():IsEventTriggered("NewShoot") and #Isaac.FindByType(274, -1, -1, false, true) >= 1 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.14
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+16.5*i+318.75):Resized(9), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
end
if npc.State == 15 and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetSprite().FlipX then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(111)-160, npc.Position.Y+Eterepernalrng:RandomInt(221)-110), false, 0.0)
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(111)-160, npc.Position.Y+Eterepernalrng:RandomInt(221)-110), false, 0.0)
npc:PlaySound(159,1,0,false,1)
end
if npc.State == 15 and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:GetSprite().FlipX then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(111)+50, npc.Position.Y+Eterepernalrng:RandomInt(221)-110), false, 0.0)
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(111)+50, npc.Position.Y+Eterepernalrng:RandomInt(221)-110), false, 0.0)
npc:PlaySound(159,1,0,false,1)
end
if npc.State == 16 and npc:GetSprite():IsEventTriggered("NewShoot") then
for i = 1,3 do
local fly = Isaac.Spawn(18, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized(Eterepernalrng:RandomInt(10)+16), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.Mass = 4
end
npc:PlaySound(Sslothsoundattack1,2,0,false,1)
end
if Sslothattack <= 2 and (npc.State == 8 or npc.State == 9) and npc.StateFrame == 1 then
npc.State = 14
npc:GetSprite():Play("Attack1", true)
end
if Sslothattack >= 3 and (npc.State == 8 or npc.State == 9) and npc.StateFrame == 1 and Isaac.CountEnemies() >= 5 then
npc.State = 14
npc:GetSprite():Play("Attack1", true)
end
if Sslothattack == 3 and (npc.State == 8 or npc.State == 9) and npc.StateFrame == 1 and Isaac.CountEnemies() <= 4 then
npc.State = 15
npc:GetSprite():Play("Attack2", true)
end
if Sslothattack == 4 and (npc.State == 8 or npc.State == 9) and npc.StateFrame == 1 and Isaac.CountEnemies() <= 4 then
npc.State = 16
npc:GetSprite():Play("Attack3", true)
end
if (npc:GetSprite():IsFinished("Attack1") or npc:GetSprite():IsFinished("Attack2") or npc:GetSprite():IsFinished("Attack3")) then
npc.State = 1
end
end
if npc.Variant == 2 and npc.SubType == 90 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.14
params.BulletFlags = ProjectileFlags.SMART
if npc.StateFrame == 5 and npc.State == 8 then
for i = 1,3 do
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(46)+60)*0.1), 0, params)
end
if #Isaac.FindByType(38, 2, -1, false, true) <= 0 and #Isaac.FindByType(46, 2, -1, false, true) <= 1 then
for i = 1,2 do
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(46)+60)*0.1), 0, params)
end
end
npc.StateFrame = 7
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSloth, 46)

function mod:EterepLust(npc)
if npc.Variant == 0 and npc.SubType == 90 then
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.Mass ~= 59 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_lust body bloody.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/nope.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 59
local lusthead = Isaac.Spawn(26, 0, 91, npc.Position, Vector(0,0), npc)
npc:PlaySound(SoundEffect.SOUND_DEATH_BURST_SMALL, 1, 0, false, 1)
npc:GetSprite():PlayOverlay("Blood", false)
end
if npc.Mass == 59 and npc.FrameCount % 43 == 16 then
local params = ProjectileParams()
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(21)+30) * 0.1
params.FallingAccelModifier = 0.3
params.HeightModifier = -4
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc.Variant == 1 and npc.SubType == 90 then
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.Mass ~= 59 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_super lust boody bloody.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/nope.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 59
local lusthead = Isaac.Spawn(26, 0, 92, npc.Position, Vector(0,0), npc)
npc:PlaySound(SoundEffect.SOUND_DEATH_BURST_SMALL, 1, 0, false, 1)
npc:GetSprite():PlayOverlay("Blood", false)
end
if npc.Mass == 59 and npc.FrameCount % 43 == 16 then
local params = ProjectileParams()
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(21)+30) * 0.1
params.FallingAccelModifier = 0.3
params.HeightModifier = -7
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if ((npc.FrameCount % 74 == 68 and npc.Mass ~= 59) or (npc.FrameCount % 148 == 68 and npc.Mass == 59)) and #Isaac.FindByType(18, -1, -1, false, true) <= 4 then
for i = 1,Eterepernalrng:RandomInt(2)+1 do
local fly = Isaac.Spawn(18, 0, 0, npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(Eterepernalrng:RandomInt(6)+4), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
npc:PlaySound(Sslothsoundattack1,2,0,false,1)
end
end
if npc.SubType == 90 then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if math.abs((npc.Position - grid.Position):Length()) < 40 and (grid:GetType() == GridEntityType.GRID_ROCK or grid:GetType() == GridEntityType.GRID_ROCKB or grid:GetType() == GridEntityType.GRID_ROCKT or grid:GetType() == GridEntityType.GRID_ROCK_BOMB or grid:GetType() == GridEntityType.GRID_ROCK_ALT) then
grid:Destroy(true)
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLust, 47)

function mod:EterepWrath(npc)
if npc.Variant == 0 and npc.SubType == 90 then
if npc.State >= 14 and npc.State <= 16 then
npc.StateFrame = npc.StateFrame + 1
end
local wrathattack = Eterepernalrng:RandomInt(3)+1
if npc.State == 8 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 4
end
if npc.State == 9 and npc.StateFrame == 1 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= -45 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() <= 45 then
npc.Size = 15
end
if npc.State == 9 and npc.StateFrame == 1 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= 45 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() <= 135 then
npc.Size = 16
end
if npc.State == 9 and npc.StateFrame == 1 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= 135 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() <= 180 then
npc.Size = 17
end
if npc.State == 9 and npc.StateFrame == 1 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= -180 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() <= -135 then
npc.Size = 17
end
if npc.State == 9 and npc.StateFrame == 1 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= -135 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() <= -45 then
npc.Size = 18
end
if wrathattack == 1 and npc.State == 9 and npc.StateFrame == 2 then
npc.State = 14
npc:GetSprite():Play("Attack2", true)
end
if wrathattack == 2 and npc.State == 9 and npc.StateFrame == 2 then
npc.State = 15
npc:GetSprite():Play("Attack3", true)
end
if wrathattack == 3 and npc.State == 9 and npc.StateFrame == 2 then
npc.State = 16
npc:GetSprite():Play("Attack4", true)
end
if npc.State >= 14 and npc.State <= 16 and npc:GetSprite():IsEventTriggered("NewShoot") then
local bomb = Isaac.Spawn(4, 0, 19431, npc.Position, Vector.FromAngle((npc.Size-15)*90):Resized(15), npc)
bomb:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
bomb.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
if npc:GetSprite():IsFinished("Attack2") or npc:GetSprite():IsFinished("Attack3") or npc:GetSprite():IsFinished("Attack4") then
npc.State = 4
npc.StateFrame = 0
end
end
if npc.Variant == 1 and npc.SubType == 90 and npc.FrameCount >= 18 then
EterepEnemyChasePlayer(0.7, npc, 0.86, 30)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame - 1
end
if npc.FrameCount >= 22 and npc.I1 ~= 1 then
npc.I1 = 1
npc:GetSprite():PlayOverlay("Head", false)
end
if ((npc.FrameCount % 22 == 8 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 11 == 4 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(4)+1 <= 2 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local bomb = Isaac.Spawn(4, 0, 19431, npc.Position, Vector(0,0), npc)
bomb:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
bomb.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
if npc.FrameCount >= 31 and npc.StateFrame <= 0 and ((npc:GetPlayerTarget().Position.Y >= npc.Position.Y - 30 and npc:GetPlayerTarget().Position.Y <= npc.Position.Y + 30) or (npc:GetPlayerTarget().Position.X >= npc.Position.X - 30 and npc:GetPlayerTarget().Position.X <= npc.Position.X + 30)) and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc:GetSprite():PlayOverlay("Attack", true)
npc.StateFrame = 12
end
if npc.StateFrame == 10 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15):Resized(9.8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-15):Resized(9.8), 0, params)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepWrath, 48)

function mod:EterepGluttony(npc)
if npc.Variant <= 1 and npc.SubType == 90 then
if npc.State ~= 6 and npc.State ~= 9 then
npc.State = 9
npc.StateFrame = Eterepernalrng:RandomInt(53)+8
end
if npc.State == 9 and npc.FrameCount >= 22 then
EterepEnemyChasePlayer(0.52, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
npc.StateFrame = npc.StateFrame + 1
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 250 and npc.StateFrame >= 77 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 6
npc:GetSprite():Play("FatAttack", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 380 and npc.FrameCount % 14 == 5 and npc.State == 9 and Eterepernalrng:RandomInt(5)+1 == 1 and (npc:GetPlayerTarget().Position.Y >= npc.Position.Y - 30) and (npc:GetPlayerTarget().Position.Y <= npc.Position.Y + 30) and (npc:GetPlayerTarget().Position.X >= npc.Position.X) and #Isaac.FindByType(274, -1, -1, false, true) <= 0 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 6
npc:GetSprite():Play("Attack01Right", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 380 and npc.FrameCount % 14 == 6 and npc.State == 9 and Eterepernalrng:RandomInt(5)+1 == 1 and (npc:GetPlayerTarget().Position.Y >= npc.Position.Y - 30) and (npc:GetPlayerTarget().Position.Y <= npc.Position.Y + 30) and (npc:GetPlayerTarget().Position.X <= npc.Position.X) and #Isaac.FindByType(274, -1, -1, false, true) <= 0 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 6
npc:GetSprite():Play("Attack01Left", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 380 and npc.FrameCount % 14 == 7 and npc.State == 9 and Eterepernalrng:RandomInt(5)+1 == 1 and (npc:GetPlayerTarget().Position.X >= npc.Position.X - 30) and (npc:GetPlayerTarget().Position.X <= npc.Position.X + 30) and (npc:GetPlayerTarget().Position.Y >= npc.Position.Y) and #Isaac.FindByType(274, -1, -1, false, true) <= 0 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 6
npc:GetSprite():Play("Attack01Down", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 380 and npc.FrameCount % 14 == 8 and npc.State == 9 and Eterepernalrng:RandomInt(5)+1 == 1 and (npc:GetPlayerTarget().Position.X >= npc.Position.X - 30) and (npc:GetPlayerTarget().Position.X <= npc.Position.X + 30) and (npc:GetPlayerTarget().Position.Y <= npc.Position.Y) and #Isaac.FindByType(274, -1, -1, false, true) <= 0 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 6
npc:GetSprite():Play("Attack01Up", true)
end
end
if npc.State == 6 then
npc.Velocity = npc.Velocity * 0.7
end
if npc:GetSprite():IsPlaying("Attack01Up") and npc:GetSprite():GetFrame() == 28 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,-3), 270, 31, Vector(0,-18), npc)
if npc.Variant == 1 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 90, 31, Vector(0,-18), npc)
end
end
if npc:GetSprite():IsPlaying("Attack01Down") and npc:GetSprite():GetFrame() == 28 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 90, 31, Vector(0,-18), npc)
if npc.Variant == 1 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,-3), 270, 31, Vector(0,-18), npc)
end
end
if npc:GetSprite():IsPlaying("Attack01Left") and npc:GetSprite():GetFrame() == 28 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 180, 31, Vector(-4,-18), npc)
if npc.Variant == 1 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,-3), 0, 31, Vector(4,-18), npc)
end
end
if npc:GetSprite():IsPlaying("Attack01Right") and npc:GetSprite():GetFrame() == 28 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 0, 31, Vector(4,-18), npc)
if npc.Variant == 1 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,-3), 180, 31, Vector(-4,-18), npc)
end
end
if npc:GetSprite():IsPlaying("Attack01Left") and (npc:GetSprite():GetFrame() == 30 or npc:GetSprite():GetFrame() == 43 or npc:GetSprite():GetFrame() == 56) then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(54*i,0), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
if npc.Variant == 1 then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(-54*i,0), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
end
end
if npc:GetSprite():IsPlaying("Attack01Right") and (npc:GetSprite():GetFrame() == 30 or npc:GetSprite():GetFrame() == 43 or npc:GetSprite():GetFrame() == 56) then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(i*-54,0), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
if npc.Variant == 1 then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(54*i,0), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
end
end
if npc:GetSprite():IsPlaying("Attack01Up") and (npc:GetSprite():GetFrame() == 30 or npc:GetSprite():GetFrame() == 43 or npc:GetSprite():GetFrame() == 56) then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,54*i), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
if npc.Variant == 1 then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,-54*i), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
end
end
if npc:GetSprite():IsPlaying("Attack01Down") and (npc:GetSprite():GetFrame() == 30 or npc:GetSprite():GetFrame() == 43 or npc:GetSprite():GetFrame() == 56) then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,-54*i), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
if npc.Variant == 1 then
for i = 0,19 do
local creep1 = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,54*i), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(1.4,1.4)
creep1:ToEffect().Timeout = 333
end
end
end
if npc:GetSprite():IsPlaying("FatAttack") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+5*i+335):Resized(8.65), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
if npc.Variant == 1 then
for i = 1, 12 do
params.FallingAccelModifier = 0.42
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(133)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)+330):Resized((Eterepernalrng:RandomInt(51)+73) * 0.1), 0, params)
end
end
end
if npc:GetSprite():IsFinished("FatAttack") then
npc.State = 9
npc.StateFrame = Eterepernalrng:RandomInt(53)+8
end
if npc:GetSprite():IsPlaying("Attack01Right") then
npc:GetSprite().FlipX = false
end
if npc:GetSprite():IsPlaying("Attack01Left") or npc:GetSprite():IsPlaying("Attack01Down") or npc:GetSprite():IsPlaying("Attack01Up") then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsFinished("Attack01Right") or npc:GetSprite():IsFinished("Attack01Down") or npc:GetSprite():IsFinished("Attack01Left") or npc:GetSprite():IsFinished("Attack01Up") then
npc.State = 9
npc.StateFrame = Eterepernalrng:RandomInt(53)+8
end
if npc:GetSprite():IsPlaying("FatAttack") and npc:GetSprite():GetFrame() == 1 and (npc:GetPlayerTarget().Position.X <= npc.Position.X) then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsPlaying("FatAttack") and npc:GetSprite():GetFrame() == 1 and (npc:GetPlayerTarget().Position.X >= npc.Position.X) then
npc:GetSprite().FlipX = false
end
if npc.State == 9 and npc.Velocity:Length() >= 0.5 and npc.Velocity:GetAngleDegrees() >= -90 and npc.Velocity:GetAngleDegrees() <= 90 then
npc:GetSprite().FlipX = false
end
if npc.State == 9 and npc.Velocity:Length() >= 0.5 and ((npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() < -90) or (npc.Velocity:GetAngleDegrees() <= 180 and npc.Velocity:GetAngleDegrees() > 90)) then
npc:GetSprite().FlipX = true
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepGluttony, 49)

function mod:EterepGreed(npc)
if npc.Variant == 0 and npc.SubType == 90 then
if npc.StateFrame == 4 and npc.State == 8 then
npc.StateFrame = 6
end
if npc:GetSprite():IsEventTriggered("ShootHori") then
if npc:GetSprite().FlipX then
local spawn = Isaac.Spawn(927, 3002, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
if not npc:GetSprite().FlipX then
local spawn = Isaac.Spawn(927, 3003, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
end
if npc:GetSprite():IsEventTriggered("ShootUp") then
local spawn = Isaac.Spawn(927, 3004, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
if npc:GetSprite():IsEventTriggered("ShootDown") then
local spawn = Isaac.Spawn(927, 3005, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
end
if npc.Variant == 1 and npc.SubType == 90 then
if npc.StateFrame == 4 and npc.State == 8 then
npc.StateFrame = 6
end
if npc:GetSprite():IsEventTriggered("ShootHori") then
if npc:GetSprite().FlipX then
local spawn = Isaac.Spawn(927, 3006, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
if not npc:GetSprite().FlipX then
local spawn = Isaac.Spawn(927, 3007, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
end
if npc:GetSprite():IsEventTriggered("ShootUp") then
local spawn = Isaac.Spawn(927, 3008, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
if npc:GetSprite():IsEventTriggered("ShootDown") then
local spawn = Isaac.Spawn(927, 3009, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGreed, 50)

function mod:EterepEnvy(npc)
if EterepClassicEnemiesPatterns == 1 and (npc.Variant == 30 or npc.Variant == 31) then
npc.Velocity = npc.Velocity * 1.04
end
if npc.Variant <= 1 and npc.SubType == 90 and npc.FrameCount <= 1 then
npc.Mass = 30
end
if npc.Variant == 0 then
if npc.SubType == 90 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.SubType == 90 and ((npc.FrameCount % 8 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 2 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*6.75):Resized(9), 0, params)
end
if npc.SubType == 90 and (npc.StateFrame >= 0 and npc.StateFrame <= 13) or (npc.StateFrame >= 41 and npc.StateFrame <= 66) or (npc.StateFrame >= 94 and npc.StateFrame <= 120) or (npc.StateFrame >= 147) then
npc:GetSprite().FlipX = false
end
if npc.SubType == 90 and (npc.StateFrame >= 14 and npc.StateFrame <= 40) or (npc.StateFrame >= 67 and npc.StateFrame <= 93) or (npc.StateFrame >= 121 and npc.StateFrame <= 146) then
npc:GetSprite().FlipX = true
end
if npc.SubType == 90 and npc.StateFrame >= 160 then
npc.StateFrame = 0
end
if npc.SubType == 90 and npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(160)+1
end
end
if npc.Variant == 1 then
if npc.SubType == 84 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.15
end
if (npc.SubType == 84 or npc.SubType == 90) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if (npc.SubType == 84 or npc.SubType == 90) and ((npc.FrameCount % 8 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 2 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.12
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*6.75):Resized(9), 0, params)
end
if (npc.SubType == 84 or npc.SubType == 90) and (npc.StateFrame >= 0 and npc.StateFrame <= 13) or (npc.StateFrame >= 41 and npc.StateFrame <= 66) or (npc.StateFrame >= 94 and npc.StateFrame <= 120) or (npc.StateFrame >= 147) then
npc:GetSprite().FlipX = false
end
if (npc.SubType == 84 or npc.SubType == 90) and (npc.StateFrame >= 14 and npc.StateFrame <= 40) or (npc.StateFrame >= 67 and npc.StateFrame <= 93) or (npc.StateFrame >= 121 and npc.StateFrame <= 146) then
npc:GetSprite().FlipX = true
end
if (npc.SubType == 84 or npc.SubType == 90) and npc.StateFrame >= 160 then
npc.StateFrame = 0
end
if (npc.SubType == 84 or npc.SubType == 90) and npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(160)+1
end
end
if npc.Variant <= 1 and (npc.SubType == 84 or (npc.SubType >= 90 and npc.SubType <= 93)) and npc:HasEntityFlags(1<<51) then
npc:ClearEntityFlags(1<<51)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepEnvy, 51)

function mod:EterepEnvyFusionFunction(npc, npc2)
if npc.FrameCount >= 30 and npc.Variant == 0 and npc.SubType >= 91 and npc.SubType <= 93 and npc2.Variant == npc.Variant and npc2.SubType == npc.SubType then
if npc.SubType == 91 then
npc.MaxHitPoints = npc.MaxHitPoints * 1.1262 + npc2.MaxHitPoints * 1.1262
end
if npc.SubType == 92 then
npc.MaxHitPoints = npc.MaxHitPoints * 0.5 + npc2.MaxHitPoints * 0.5
end
if npc.SubType == 93 then
npc.MaxHitPoints = npc.MaxHitPoints * 0.46875 + npc2.MaxHitPoints * 0.46875
end
local eterepnvy = npc.Mass * 0.5 + 94-npc.SubType + npc2.Mass * 0.5
npc.HitPoints = npc.MaxHitPoints
npc2:Remove()
npc:Morph(51, 0, npc.SubType-1, -1)
npc.Mass = eterepnvy
npc.MaxHitPoints = npc.HitPoints
if npc.Mass >= 40 then
npc.MaxHitPoints = npc.HitPoints * 1.33334
end
npc.Scale = 1.15
npc.HitPoints = npc.MaxHitPoints
npc.Velocity = npc.Velocity * 0.4
npc:GetSprite():Play("Walk0", true)
end
if npc.FrameCount >= 30 and npc.Variant == 1 and npc.SubType == 91 and npc2.Variant == npc.Variant and npc2.SubType == npc.SubType then
npc.MaxHitPoints = npc.MaxHitPoints * 1.1262 + npc2.MaxHitPoints * 1.1262
local eterepnvy = npc.Mass * 0.5 + 94-npc.SubType + npc2.Mass * 0.5
npc.HitPoints = npc.MaxHitPoints
npc2:Remove()
npc:Morph(51, 1, 84, -1)
npc.Mass = eterepnvy
npc.MaxHitPoints = npc.HitPoints
if npc.Mass >= 40 then
npc.MaxHitPoints = npc.HitPoints * 1.33334
end
npc.Scale = 1.15
npc.HitPoints = npc.MaxHitPoints
npc.Velocity = npc.Velocity * 0.4
npc:GetSprite():Play("Walk0", true)
end
if npc.FrameCount >= 80 and npc.Variant == 1 and (npc.SubType == 92 or npc.SubType == 93) and npc2.Variant == npc.Variant and npc2.SubType == npc.SubType then
if npc.SubType == 92 then
npc.MaxHitPoints = npc.MaxHitPoints * 0.5 + npc2.MaxHitPoints * 0.5
end
if npc.SubType == 93 then
npc.MaxHitPoints = npc.MaxHitPoints * 0.46875 + npc2.MaxHitPoints * 0.46875
end
local eterepnvy = npc.Mass * 0.5 + 94-npc.SubType + npc2.Mass * 0.5
npc.HitPoints = npc.MaxHitPoints
npc2:Remove()
npc:Morph(51, 1, npc.SubType-1, -1)
npc.Mass = eterepnvy
npc.MaxHitPoints = npc.HitPoints
if npc.Mass >= 40 then
npc.MaxHitPoints = npc.HitPoints * 1.33334
end
npc.Scale = 1.15
npc.HitPoints = npc.MaxHitPoints
npc.Velocity = npc.Velocity * 0.4
npc:GetSprite():Play("Walk0", true)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepEnvyFusionFunction, 51)

function mod:EterepEnvyDeath(npc)
if npc.Variant == 0 then
if npc.SubType >= 90 and npc.SubType <= 92 and npc:IsDead() then
local params = ProjectileParams()
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(12), 0, params)
end
if npc.SubType == 90 then
for i = 1, 2 do
local envy = Isaac.Spawn(51, 0, 91, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.333
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
if npc.SubType == 91 then
for i = 1, 2 do
local envy = Isaac.Spawn(51, 0, 92, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.75
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
if npc.SubType == 92 then
for i = 1, 2 do
local envy = Isaac.Spawn(51, 0, 93, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.8
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
return true
end
if npc:IsDead() and npc.SubType == 93 then
return true
end
end
if npc.Variant == 1 then
if npc.SubType >= 84 and npc.SubType <= 92 and npc:IsDead() then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
for i = 1, 8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10), 0, params)
end
if npc.SubType == 84 then
for i = 1, 2 do
local envy = Isaac.Spawn(51, 1, 91, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.333
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
if npc.SubType == 90 then
for i = 1, 3 do
local envy = Isaac.Spawn(51, 1, 91, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.333
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
if npc.SubType == 91 then
for i = 1, 2 do
local envy = Isaac.Spawn(51, 1, 92, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.75
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
if npc.SubType == 92 then
for i = 1, 2 do
local envy = Isaac.Spawn(51, 1, 93, npc.Position, Vector(0,0), npc)
envy:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
envy.MaxHitPoints = npc.MaxHitPoints * 0.8
envy.HitPoints = envy.MaxHitPoints
envy.Mass = npc.Mass
end
end
return true
end
if npc:IsDead() and npc.SubType == 93 then
return true
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepEnvyDeath, 51)

function mod:EterepPride(npc)
if npc.Variant <= 1 and npc.SubType == 90 and npc.State == 8 then
local params = ProjectileParams()
if npc.I2 < npc.StateFrame then
npc.I2 = npc.I2 + 1
end
if npc.StateFrame < npc.I2 then
npc.I2 = npc.StateFrame
end
if npc.Variant == 0 and npc.I2 == 12 then
local Eterepridepossibleattack = Eterepernalrng:RandomInt(4)+1
npc.Mass = 28 + Eterepridepossibleattack
end
if npc.Variant == 0 and npc.I2 >= 16 and npc.I2 <= 34 and #Isaac.FindByType(274, -1, -1, false, true) <= 0 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(35*npc.Mass+28*npc.I2):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(35*npc.Mass+28*npc.I2+180):Resized(9), 0, params)
end
if npc.Variant == 1 and npc.I2 == 12 then
local Eterepridepossibleattack = Eterepernalrng:RandomInt(4)+1
npc.Mass = 28 + Eterepridepossibleattack
end
if npc.Variant == 1 and npc.I2 >= 16 and npc.I2 <= 34 and #Isaac.FindByType(274, -1, -1, false, true) <= 0 then
params.Variant = 4
params.FallingAccelModifier = -0.08
npc:FireProjectiles(npc.Position, Vector.FromAngle(35*npc.Mass+28*npc.I2):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(35*npc.Mass+28*npc.I2+180):Resized(11), 0, params)
end
if npc.Variant <= 1 and npc.StateFrame == 11 then
npc.StateFrame = 13
end
if npc.Variant <= 1 and npc.StateFrame == 19 then
npc.StateFrame = 21
for i = 1,4 do
local laser = EntityLaser.ShootAngle(4, npc.Position+Vector(0,-35), 45+90*i, 20, Vector(0,0), npc)
laser.Color = Color(3,3,3,1,0,0,0)
end
end
if npc.StateFrame == 15 then
npc:PlaySound(horseshoot, 2, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPride, 52)

function mod:EterepDopleInit(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
npc.CollisionDamage = 0
npc.Visible = false
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_INIT, mod.EterepDopleInit, 53)

function mod:EterepTwin(npc)
if npc.Variant <= 1 and npc.SubType == 85 and npc.FrameCount <= 1 then
npc.Position = Game():GetRoom():GetCenterPos()+Vector.FromAngle((Isaac.GetPlayer(0).Position - Game():GetRoom():GetCenterPos()):GetAngleDegrees()+180):Resized(Isaac.GetPlayer(0).Position:Distance(Game():GetRoom():GetCenterPos()))
npc.CollisionDamage = 1
npc.Visible = true
end
if npc.Variant == 0 and npc.SubType == 85 then
EterepEnemyChasePlayer(0.61, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame - 1
end
if (npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11) or npc:HasEntityFlags(1<<24)) and npc.StateFrame ~= 8 then
npc.StateFrame = 8
end
if npc.FrameCount <= 1 then
npc:GetSprite():PlayOverlay("IdleLookingDown", false)
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.StateFrame = 8
end
if npc.StateFrame == 13 or npc.StateFrame == 23 or npc.StateFrame == 33 or npc.StateFrame == 43 or npc.StateFrame == 53 then
npc.StateFrame = 3
end
if Isaac.GetPlayer(0):GetFireDirection() == 0 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == true and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadRight", true)
npc.StateFrame = 12
end
if Isaac.GetPlayer(0):GetFireDirection() == 0 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == false and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc.StateFrame = 22
end
if Isaac.GetPlayer(0):GetFireDirection() == 2 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == false and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadRight", true)
npc.StateFrame = 32
end
if Isaac.GetPlayer(0):GetFireDirection() == 2 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == true and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc.StateFrame = 42
end
if Isaac.GetPlayer(0):GetFireDirection() == 3 and npc.StateFrame <= 3 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadUp", true)
npc.StateFrame = 52
end
if Isaac.GetPlayer(0):GetFireDirection() == 1 and npc.StateFrame <= 3 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadDown", true)
npc.StateFrame = 62
end
if npc.StateFrame == 10 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(0):Resized(Isaac.GetPlayer(0).ShotSpeed*11), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 20 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(0):Resized(Isaac.GetPlayer(0).ShotSpeed*11), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 30 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(180):Resized(Isaac.GetPlayer(0).ShotSpeed*11), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 40 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(180):Resized(Isaac.GetPlayer(0).ShotSpeed*11), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 50 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(270):Resized(Isaac.GetPlayer(0).ShotSpeed*11), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 60 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(90):Resized(Isaac.GetPlayer(0).ShotSpeed*11), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 8 or npc.StateFrame == 18 or npc.StateFrame == 28 or npc.StateFrame == 38 or npc.StateFrame == 48 or npc.StateFrame == 58 then
npc:GetSprite():PlayOverlay("IdleLookingDown", false)
end
return true
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc:GetPlayerTarget().Position:Distance(npc.Position) >= 20 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.Velocity = (npc:GetPlayerTarget().Position - npc.Position):Normalized() * 4.5
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) >= 20 and (npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11) or npc:HasEntityFlags(1<<24)) then
EterepEnemyChasePlayer(0.45, npc, 0.86, 75)
end
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame - 1
end
if npc.FrameCount <= 1 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc:GetSprite():PlayOverlay("HeadDown", false)
npc.StateFrame = 12
end
if Isaac.GetPlayer(0):GetFireDirection() == 0 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == true and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadRight", true)
npc.StateFrame = 32
end
if Isaac.GetPlayer(0):GetFireDirection() == 0 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == false and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc.StateFrame = 62
end
if Isaac.GetPlayer(0):GetFireDirection() == 2 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == false and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadRight", true)
npc.StateFrame = 92
end
if Isaac.GetPlayer(0):GetFireDirection() == 2 and npc.StateFrame <= 3 and npc:GetSprite().FlipX == true and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc.StateFrame = 122
end
if Isaac.GetPlayer(0):GetFireDirection() == 3 and npc.StateFrame <= 3 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadUp", true)
npc.StateFrame = 152
end
if Isaac.GetPlayer(0):GetFireDirection() == 1 and npc.StateFrame <= 3 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():PlayOverlay("HeadDown", true)
npc.StateFrame = 182
end
if npc.StateFrame == 30 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(15):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(0):Resized(Isaac.GetPlayer(0).ShotSpeed*13), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(-15):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 60 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(15):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(0):Resized(Isaac.GetPlayer(0).ShotSpeed*13), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(-15):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 90 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(195):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(180):Resized(Isaac.GetPlayer(0).ShotSpeed*13), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(165):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 120 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(195):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(180):Resized(Isaac.GetPlayer(0).ShotSpeed*13), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(165):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 150 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(255):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(270):Resized(Isaac.GetPlayer(0).ShotSpeed*13), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(285):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 180 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(105):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(90):Resized(Isaac.GetPlayer(0).ShotSpeed*13), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle(75):Resized(Isaac.GetPlayer(0).ShotSpeed*12), 0, ProjectileParams())
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame == 58 or npc.StateFrame == 88 or npc.StateFrame == 118 or npc.StateFrame == 148 or npc.StateFrame == 178 then
npc.StateFrame = 27
end
if npc.StateFrame <= 27 and npc.Velocity:GetAngleDegrees() >= -135 and npc.Velocity:GetAngleDegrees() < -45 then
npc:GetSprite():Play("WalkUp",false)
npc:GetSprite():PlayOverlay("HeadUp", true)
end
if npc.StateFrame <= 27 and npc.Velocity:GetAngleDegrees() >= -45 and npc.Velocity:GetAngleDegrees() < 45 then
npc:GetSprite():Play("WalkHori",false)
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc:GetSprite().FlipX = false
end
if npc.StateFrame <= 27 and npc.Velocity:GetAngleDegrees() >= 45 and npc.Velocity:GetAngleDegrees() < 135 then
npc:GetSprite():Play("WalkDown",false)
npc:GetSprite():PlayOverlay("HeadDown", true)
end
if npc.StateFrame <= 27 and npc.Velocity:GetAngleDegrees() >= 135 and npc.Velocity:GetAngleDegrees() <= 180 then
npc:GetSprite():Play("WalkHori",false)
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc:GetSprite().FlipX = true
end
if npc.StateFrame <= 27 and npc.Velocity:GetAngleDegrees() > -180 and npc.Velocity:GetAngleDegrees() < -135 then
npc:GetSprite():Play("WalkHori",false)
npc:GetSprite():PlayOverlay("HeadLeft", true)
npc:GetSprite().FlipX = true
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepTwin, 53)

function mod:EterepFlamingHopper(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Idle", true)
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc.FrameCount >= 50 and not npc:GetSprite():IsPlaying("Hop") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/13 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/13
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
npc:PlaySound(69, 1, 0, false, 1)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFlamingHopper, 54)

function mod:EterepFlamingHopperTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 0 and npc.SubType == 85 and flags == DamageFlag.DAMAGE_FIRE and damageSource.SpawnerType ~= 1 and damageSource.SpawnerType ~= 3 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepFlamingHopperTakeDamage, 54)

function mod:EterepLeech1(npc)
if EterepClassicEnemiesPatterns == 2222222 and #Isaac.FindByType(911, -1, -1, false, true) == 0 and not Game():IsPaused() then -- recreate leech here
if SFXManager():IsPlaying(221) then
SFXManager():Stop(221)
end
if npc.Variant <= 2 and npc.SubType == 0 and npc.FrameCount <= 1 and not npc:IsChampion() then
npc.MaxHitPoints = 32
npc.HitPoints = 32
end
if npc.State == 8 and npc.StateFrame <= 5 and npc.Velocity:Length() <= 8 and npc:GetPlayerTarget().Position:Distance(npc.Position) >= 250 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 500 then
npc.State = 4
end
if npc.State == 8 and npc.StateFrame == 1 then
npc:PlaySound(newleechsound,1,0,false,1)
npc.StateFrame = npc.StateFrame + 1
end
if npc.State == 8 and npc.Mass ~= 58 then
npc.Mass = 58
end
if npc.State == 4 and npc.Mass ~= 35 then
npc.Mass = 35
end
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_RENDER, mod.EterepLeech1, 55)

function mod:EterepLeech2(npc)
if npc.FrameCount <= 1 and npc.SpawnerType ~= 911 then
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
if npc.Variant <= 2 and npc.SubType == 87 then
if ((npc.FrameCount % 32 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 16 == 3 and not npc:HasEntityFlags(1<<7))) and (npc.Velocity):GetAngleDegrees() > 45 and (npc.Velocity):GetAngleDegrees() <= 135 and npc.Velocity:Length() <= 9 and npc.SpawnerType ~= 225 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if ((npc.FrameCount % 32 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 16 == 3 and not npc:HasEntityFlags(1<<7))) and (npc.Velocity):GetAngleDegrees() < -45 and (npc.Velocity):GetAngleDegrees() >= -135 and npc.Velocity:Length() <= 9 and npc.SpawnerType ~= 225 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if ((npc.FrameCount % 24 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 12 == 3 and not npc:HasEntityFlags(1<<7))) and (npc.Velocity):GetAngleDegrees() >= -45 and (npc.Velocity):GetAngleDegrees() <= 45 and npc.Velocity:Length() <= 9 and npc.SpawnerType ~= 225 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if ((npc.FrameCount % 24 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 12 == 3 and not npc:HasEntityFlags(1<<7))) and (npc.Velocity):GetAngleDegrees() < -135 and (npc.Velocity):GetAngleDegrees() >= -180 and npc.Velocity:Length() <= 9 and npc.SpawnerType ~= 225 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if ((npc.FrameCount % 24 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 12 == 3 and not npc:HasEntityFlags(1<<7))) and (npc.Velocity):GetAngleDegrees() > 135 and (npc.Velocity):GetAngleDegrees() <= 180 and npc.Velocity:Length() <= 9 and npc.SpawnerType ~= 225 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if ((npc.FrameCount % 8 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 3 and not npc:HasEntityFlags(1<<7))) and npc.Velocity:Length() > 9 and npc.SpawnerType ~= 225 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.I1 ~= 11 and npc.Variant == 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_kamikaze leech without eye.png")
npc:GetSprite():LoadGraphics()
npc.I1 = 11
npc:PlaySound(SoundEffect.SOUND_PLOP, 1, 0, false, 1)
local eye = Isaac.Spawn(229, 0, 80, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, false), Vector(0,0), npc)
eye:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.I1 ~= 11 and npc.Variant == 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_holy leech without eye.png")
npc:GetSprite():LoadGraphics()
npc.I1 = 11
npc:PlaySound(SoundEffect.SOUND_PLOP, 1, 0, false, 1)
local eye = Isaac.Spawn(229, 0, 80, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, false), Vector(0,0), npc)
eye:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc:IsDead() then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, ProjectileParams())
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLeech2, 55)

function mod:EterepLumpReworkedFoes(npc)
if npc.Variant == 0 and npc.SubType == 85 and ReworkedFoes then
npc:GetSprite():Load("gfx/e_lump reworked foes.anm2",true)
npc:GetSprite():LoadGraphics()
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_INIT, mod.EterepLumpReworkedFoes, 56)

function mod:EterepLump(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+345):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.2), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+375):Resized(9.5), 0, params)
npc:PlaySound(226, 1, 0, false, 1)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
end
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_lump.png")
npc:GetSprite():LoadGraphics()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLump, 56)

function mod:EterepMemBrain(npc)
if npc.Variant <= 2 and npc.SubType == 85 and npc.StateFrame == 26 then
npc.StateFrame = 28
end
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.BulletFlags = ProjectileFlags.SMART
params.Scale = 1.55
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(11), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
end
if npc.Variant == 1 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.Scale = 1.55
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(10), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
end
if npc.Variant == 2 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.HeightModifier = 13
params.Variant = 4
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMemBrain, 57)

function mod:EterepMemBrainDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
Isaac.Spawn(32, 0, 85, npc.Position-Vector(0,25), Vector(0,0), npc)
Isaac.Spawn(32, 0, 85, npc.Position-Vector(0,-25), Vector(0,0), npc)
Isaac.Spawn(32, 0, 85, npc.Position-Vector(25,0), Vector(0,0), npc)
Isaac.Spawn(32, 0, 85, npc.Position-Vector(-25,0), Vector(0,0), npc)
return true
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
local clotty = Isaac.Spawn(15, 0, 87, npc.Position-Vector(0,12), Vector(0,0), npc)
clotty.MaxHitPoints = clotty.MaxHitPoints * 1.8
clotty.HitPoints = clotty.MaxHitPoints
Isaac.Spawn(40, 0, 85, npc.Position-Vector(0,25), Vector(0,0), npc)
Isaac.Spawn(40, 0, 85, npc.Position-Vector(0,-25), Vector(0,0), npc)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMemBrainDeath, 57)

function mod:EterepParabyte(npc)
if npc.Variant == 0 and npc.SubType == 77 and npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_parabyte.png")
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 1 and npc.SubType == 77 and npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_scarred parabyte.png")
npc:GetSprite():LoadGraphics()
end
if npc.Variant <= 1 and npc.SubType == 87 then
npc.Velocity = npc.Velocity * 0.7
if npc.I1 == 0 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
npc:AnimWalkFrame("Walk","Walk",0)
end
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(51)
end
if (npc:GetPlayerTarget().Position.X <= npc.Position.X) and (npc.FrameCount >= 20) then
npc:GetSprite().FlipX = true
end
if (npc:GetPlayerTarget().Position.X >= npc.Position.X) and (npc.FrameCount >= 20) then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 200 and npc.FrameCount >= 30 and npc.I1 == 0 and npc.StateFrame <= 99 and Isaac.CountEnemies() <= 4 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 0, 0, false, false) then
npc.StateFrame = 200
end
if npc.Variant == 0 and (npc.StateFrame == 210 or npc.StateFrame == 220 or npc.StateFrame == 230) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:PlaySound(265, 1, 0, false, 1)
local parabyte = Isaac.Spawn(58, 0, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 12, false), Vector(0,0), npc)
parabyte:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
if npc:HasEntityFlags(1<<7) then
npc.StateFrame = npc.StateFrame + 1
end
end
if npc.Variant == 1 and (npc.StateFrame == 210 or npc.StateFrame == 220 or npc.StateFrame == 230) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:PlaySound(265, 1, 0, false, 1)
local parabyte = Isaac.Spawn(58, 1, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 12, false), Vector(0,0), npc)
parabyte:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
if npc:HasEntityFlags(1<<7) then
npc.StateFrame = npc.StateFrame + 1
end
end
if npc.StateFrame >= 100 and npc.StateFrame < 200 then
npc.I1 = 1
npc:GetSprite():Play("DigIn", true)
npc.StateFrame = 1000
end
if npc:GetSprite():IsFinished("DigIn", true) then
npc:GetSprite():Play("DigOut", true)
end
if npc:GetSprite():IsFinished("DigOut", true) then
npc.I1 = 0
npc.StateFrame = Eterepernalrng:RandomInt(64)+35
end
if npc.StateFrame >= 245 then
npc.StateFrame = Eterepernalrng:RandomInt(46)+50
end
if npc:GetSprite():IsPlaying("DigIn") and npc:GetSprite():GetFrame() == 5 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(72, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("DigIn") and npc:GetSprite():GetFrame() == 10 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsPlaying("DigOut") and npc:GetSprite():GetFrame() == 2 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(72, 1, 0, false, 1)
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if npc:GetSprite():IsPlaying("DigIn") and npc:GetSprite():GetFrame() == 12 then
npc.Position = Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false)
end
if ((npc.FrameCount % 50 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 10 and not npc:HasEntityFlags(1<<7))) and npc.Variant == 1 then
local params = ProjectileParams()
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(180)+1) * 0.1
params.FallingAccelModifier = 0.6
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(6), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepParabyte, 58)

function mod:EterepFred(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_fred.png")
npc:GetSprite():LoadGraphics()
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 8 then
local params = ProjectileParams()
params.Scale = 3
params.FallingSpeedModifier = -24
params.BulletFlags = ProjectileFlags.EXPLODE | ProjectileFlags.ACID_RED | ProjectileFlags.SMART
params.HomingStrength = 0
params.FallingAccelModifier = 0.25
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
end
if npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.HeightModifier = 10
params.Variant = 5
params.FallingAccelModifier = -0.02
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(i*45):Resized(8.5), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFred, 59)

function mod:EterepEye(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.Mass <= 100 then
if npc.Variant == 0 and npc.State == 8 then
npc:GetSprite():Play("Eye Opened", false)
npc.State = 4
end
if npc.Variant == 1 and npc:GetSprite():IsOverlayPlaying("ShootOverlay") then
npc:GetSprite():RemoveOverlay()
npc.State = 4
end
end
if npc.FrameCount % 18 == 14 and npc.Mass <= 150 then
npc.Mass = npc.Mass + 1
end
if npc.State == 4 and npc.State == 4 and npc.FrameCount % 18 == 13 and npc.Mass <= 150 and Eterepernalrng:RandomInt(15)+101 <= npc.Mass and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.Mass = 200
npc.I1 = 1
npc.V1 = Vector(npc.V1.X,npc.V1.X)
end
if npc.FrameCount % 18 == 15 and npc.I1 == 1 then
if npc.V1.Y <= npc.V1.X then
npc.I1 = 5001
end
if npc.V1.Y >= npc.V1.X then
npc.I1 = 5000
end
npc.V1 = Vector(npc.V1.X,npc.V1.X)
npc.I2 = 4
end
if npc.I1 >= 4701 and npc.I1 <= 5300 then
npc.State = 4
if npc.Variant == 0 then
npc:GetSprite():Play("Eye Opened", false)
end
if npc.Variant == 1 and npc:GetSprite():IsOverlayPlaying("ShootOverlay") then
npc:GetSprite():RemoveOverlay()
end
if npc.I1 >= 4601 and npc.I1 <= 5000 then
npc.I1 = npc.I1 - 1
end
if npc.I1 >= 5001 and npc.I1 <= 5400 then
npc.I1 = npc.I1 + 1
end
if npc.I1 >= 4601 and npc.I1 <= 5000 then
npc.V1 = Vector(npc.V1.Y,npc.V1.Y-(npc.I2*0.95))
end
if npc.I1 >= 5001 and npc.I1 <= 5400 then
npc.V1 = Vector(npc.V1.Y,npc.V1.Y+(npc.I2*0.95))
end
if npc.I1 >= 4910 and npc.I1 <= 4999 and npc.I1 % 7 == 5 then
npc.I2 = npc.I2 + 1
end
if npc.I1 >= 4710 and npc.I1 <= 4800 and npc.I1 % 6 == 5 then
npc.I2 = npc.I2 - 1
end
if npc.I1 >= 5010 and npc.I1 <= 5100 and npc.I1 % 7 == 5 then
npc.I2 = npc.I2 + 1
end
if npc.I1 >= 5210 and npc.I1 <= 5300 and npc.I1 % 6 == 5 then
npc.I2 = npc.I2 - 1
end
if npc.Variant == 0 and npc.FrameCount % 3 == 1 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE | ProjectileFlags.CHANGE_FLAGS_AFTER_TIMEOUT
params.ChangeTimeout = 2
npc:FireProjectiles(npc.Position+Vector.FromAngle(npc.V1.X):Resized(5)+Vector(0,25), Vector.FromAngle(npc.V1.X):Resized(9.5), 0, params)
end
if npc.Variant == 1 and npc.FrameCount % 6 == 1 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE | ProjectileFlags.CHANGE_FLAGS_AFTER_TIMEOUT
params.ChangeTimeout = 2
params.DepthOffset = -30
npc:FireProjectiles(npc.Position+Vector.FromAngle(npc.V1.X):Resized(12), Vector.FromAngle(npc.V1.X):Resized(9.5), 0, params)
end
if npc.Variant == 1 and npc.FrameCount % 6 == 4 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE | ProjectileFlags.CHANGE_FLAGS_AFTER_TIMEOUT
params.ChangeTimeout = 2
params.DepthOffset = -30
npc:FireProjectiles(npc.Position+Vector.FromAngle(npc.V1.X-15):Resized(12), Vector.FromAngle(npc.V1.X-15):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position+Vector.FromAngle(npc.V1.X+15):Resized(12), Vector.FromAngle(npc.V1.X+15):Resized(9.5), 0, params)
end
end
if (npc.I1 == 4700 or npc.I1 == 5301) then
npc.I1 = 0
npc.I2 = 0
npc.V1.Y = 0
npc.Mass = 99
end
end
if npc.Variant == 2 and npc.SubType == 85 then
if npc.State == 8 and npc.I1 == 4 then
npc.I1 = 0
end
if npc:GetSprite():IsEventTriggered("Shoot1") then
for i = 1,4 do
local laser = EntityLaser.ShootAngle(5, npc.Position+Vector(0,-30), 90*i, 3, Vector(0,0), npc)
laser.DepthOffset = 34
end
end
if npc:GetSprite():IsEventTriggered("Shoot2") then
for i = 1,4 do
local laser = EntityLaser.ShootAngle(5, npc.Position+Vector(0,-30), 45+90*i, 3, Vector(0,0), npc)
laser.DepthOffset = 34
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepEye, 60)

function mod:EterepSucker(npc)
if npc.Variant == 0 and npc.SubType == 85 and ((npc.FrameCount % 48 == 40 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 24 == 20 and not npc:HasEntityFlags(1<<7))) then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(8.5), 0, ProjectileParams())
end
end
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount == 18 and npc.SpawnerType == 22 and npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_ALL then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if npc.Variant == 1 and npc.SubType == 85 and ((npc.FrameCount % 48 == 40 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 24 == 20 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(8.5), 0, params)
end
end
if npc.Variant == 2 and npc.SubType == 85 and ((npc.FrameCount % 96 == 88 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 48 == 44 and not npc:HasEntityFlags(1<<7))) then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(60*i):Resized(8.5), 0, ProjectileParams())
end
end
if npc.Variant == 2 and npc.SubType == 85 and ((npc.FrameCount % 96 == 40 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 48 == 20 and not npc:HasEntityFlags(1<<7))) then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+60*i):Resized(8.5), 0, ProjectileParams())
end
end
if npc.Variant == 3 and npc.SubType == 85 and ((npc.FrameCount % 96 == 40 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 48 == 20 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(8.5), 0, params)
end
end
if npc.Variant == 3 and npc.SubType == 85 and ((npc.FrameCount % 96 == 88 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 48 == 44 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(8.5), 0, params)
end
end
if npc.Variant == 4 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local spawn = Isaac.Spawn(861, 0, 85, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:PlaySound(72, 1, 0, false, 1)
end
end
if npc:IsDead() and npc.Variant == 4 and npc.SubType == 85 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
params.BulletFlags = ProjectileFlags.BOUNCE
for i = 1, Eterepernalrng:RandomInt(4)+12 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(140)+1)*0.1), 0, params)
end
end
if npc:IsDead() and npc.Variant == 5 and npc.SubType == 85 and npc.Mass == 7 then
for i = 1,8 do
local laser = EntityLaser.ShootAngle(2, npc.Position+Vector(0,-1), 45*i, 2, Vector(0,-18), npc)
laser:SetColor(Color(15,15,0,1,15,15,0), 5, 0, false, false)
end
end
if npc.Variant == 6 and npc.SubType == 85 and ((npc.FrameCount % 48 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 24 == 10 and not npc:HasEntityFlags(1<<7))) then
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+120*i):Resized(8.5), 0, ProjectileParams())
end
end
if npc.Variant == 6 and npc.SubType == 85 and ((npc.FrameCount % 48 == 44 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 24 == 20 and not npc:HasEntityFlags(1<<7))) then
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90+120*i):Resized(8.5), 0, ProjectileParams())
end
end
if npc.Variant == 7 and npc.SubType == 85 and ((npc.FrameCount % 24 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 12 == 10 and not npc:HasEntityFlags(1<<7))) then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.FrameCount*2+90*i):Resized(8.5), 0, ProjectileParams())
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSucker, 61)

function mod:EterepSuckerDeath(npc)
if npc:IsDead() and (npc.Variant == 0 or npc.Variant == 6) and npc.SubType == 85 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, ProjectileParams())
end
return true
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.6
params.BulletFlags = ProjectileFlags.EXPLODE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,3 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(86)+55) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(5), 0, params)
return true
end
if npc:IsDead() and npc.Variant == 2 and npc.SubType == 85 then
local brimstoneball = Isaac.Spawn(979, 90, 0, npc.Position+Vector(0,-30), Vector(0,0), npc)
brimstoneball:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
brimstoneball.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
return true
end
if npc:IsDead() and npc.Variant == 3 and npc.SubType == 85 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(5.5), 0, params)
end
for i = 1,3 do
local creep1 = Isaac.Spawn(1000, 26, 0, npc.Position-Vector(Eterepernalrng:RandomInt(71)-35,Eterepernalrng:RandomInt(71)-35), Vector(0,0), npc)
creep1:GetSprite().Scale = Vector(3,3)
end
return true
end
if npc:IsDead() and npc.Variant == 7 and npc.SubType == 85 then
for i = 1,6 do
local projectile = Isaac.Spawn(9, 0, 714, npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(6), npc)
projectile.HitPoints = Eterepernalrng:RandomInt(360)+1
if npc:HasEntityFlags(1<<7) then
projectile:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepSuckerDeath, 61)

function mod:EterepBulbCollideWithPlayer(npc, npc2)
if npc.Variant == 5 and npc.SubType == 85 then
if npc2.Type == 1 and (npc2:ToPlayer():GetActiveCharge(0) > 0 or npc2:ToPlayer():GetActiveCharge(1) > 0 or npc2:ToPlayer():GetActiveCharge(3) > 0 or npc2:ToPlayer():GetActiveCharge(2) > 0 or npc2:ToPlayer():GetActiveCharge(4) > 0) then
npc.Mass = 7
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepBulbCollideWithPlayer, 61)

function mod:EterepPin(npc)
if npc.Variant == 1 and npc.SubType <= 1 and npc.FrameCount <= 1 and EterepClassicEnemiesPatterns == 1 and npc.Parent ~= nil then
npc.MaxHitPoints = 150
npc.HitPoints = 150
npc.Parent.MaxHitPoints = 150
npc.Parent.HitPoints = 150
end
if EterepRegenBoss >= 1 and npc.Variant <= 2 and npc.SubType == 88 and npc.Parent ~= nil and npc.FrameCount % 51 == 0 and npc.HitPoints < npc.MaxHitPoints * 0.9999999 then
npc.HitPoints = npc.HitPoints + (0.25*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.25*EterepRegenBoss)
npc.Parent.HitPoints = npc.Parent.HitPoints + (0.25*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.25*EterepRegenBoss)
end
if EterepRegenBoss >= 1 and npc.Variant == 3 and npc.SubType <= 8 and npc.Mass == 33 and npc.Parent ~= nil and npc.FrameCount % 51 == 0 and npc.HitPoints < npc.MaxHitPoints * 0.9999999 then
npc.HitPoints = npc.HitPoints + (0.25*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.25*EterepRegenBoss)
npc.Parent.HitPoints = npc.Parent.HitPoints + (0.25*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.25*EterepRegenBoss)
end
if EterepClassicEnemiesPatterns == 1 and npc.State == 8 and npc.StateFrame == 14 and npc.Variant == 0 and npc.SubType <= 1 then
npc.StateFrame = 38
end
if EterepClassicEnemiesPatterns == 1 and npc.State == 8 and npc.StateFrame == 50 and npc.Variant == 0 and npc.SubType <= 1 then
npc.StateFrame = 60
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType <= 2 and npc.FrameCount <= 1 then
npc:GetSprite():Load("gfx/Reworked pin.anm2",true)
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 0 and npc.SubType <= 2 and npc.FrameCount >= 10 and npc.Parent ~= nil and npc.Parent.SubType == 88 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_pin.png")
npc:GetSprite():LoadGraphics()
npc.SubType = 88
end
if npc.Variant == 1 and npc.SubType <= 2 and npc.FrameCount >= 10 and npc.Parent ~= nil and npc.Parent.SubType == 88 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_scolex.png")
npc:GetSprite():LoadGraphics()
npc.SubType = 88
end
if npc.Variant == 2 and npc.SubType <= 2 and npc.FrameCount >= 10 and npc.Parent ~= nil and npc.Parent.SubType == 88 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_frail.png")
npc:GetSprite():LoadGraphics()
npc.SubType = 88
end
if npc.Variant == 0 and npc.SubType == 88 then
local params = ProjectileParams()
params.Scale = 1.5
params.Variant = 4
params.FallingAccelModifier = 0.7
if npc.SpawnerType <= 1 and npc.State == 4 and ((npc.FrameCount % 14 == 8 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 7 == 4 and not npc:HasEntityFlags(1<<7))) and npc:IsVisible() then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-100):Resized(7), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+100):Resized(7), 0, params)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("NewShoot") then
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(316)+55) * 0.1
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 8 | 1 << 27
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle):Resized((Eterepernalrng:RandomInt(51)+30)*0.1), 0, params)
npc:PlaySound(SoundEffect.SOUND_CUTE_GRUNT, 1, 0, false, 1)
end
if npc.State == 8 and npc.StateFrame == 46 then
npc.StateFrame = 48
end
if npc.Size == 17 and npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_pin.png")
npc:GetSprite():LoadGraphics()
end
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 1 and npc.SubType <= 1 then
if npc.State == 8 and npc.StateFrame == 45 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.25
for i = 1,19 do
params.Scale = (Eterepernalrng:RandomInt(51)+100) * 0.01
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(201)+25) * 0.1
npc:FireProjectiles(npc.Position+Vector(0,1), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)+330):Resized((Eterepernalrng:RandomInt(66)+50)*0.1), 0, params)
end
npc.StateFrame = 49
npc:PlaySound(13, 1, 0, false, 1)
end
if npc.State == 9 and npc.StateFrame == 19 then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.7
params.BulletFlags = 1 << 1 | 1 << 7
for i = 1,3 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(316)+55) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(46)+20)*0.1), 0, params)
end
npc.StateFrame = 21
npc:PlaySound(117, 1, 0, false, 1)
end
end
if npc.Variant == 1 and npc.SubType == 88 then
if npc.FrameCount <= 31 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_scolex.png")
npc:GetSprite():LoadGraphics()
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1,24 do
params.Scale = (Eterepernalrng:RandomInt(51)+100) * 0.01
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(201)+25) * 0.1
npc:FireProjectiles(npc.Position+Vector(0,1), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)+330):Resized((Eterepernalrng:RandomInt(51)+70)*0.1), 0, params)
end
npc:PlaySound(13, 1, 0, false, 1)
end
if npc.State == 8 and npc.StateFrame == 45 then
npc.StateFrame = 49
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.5
params.FallingAccelModifier = 0.7
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 27
for i = 1,4 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(316)+55) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(46)+20)*0.1), 0, params)
end
npc:PlaySound(117, 1, 0, false, 1)
end
if npc.State == 9 and npc.StateFrame == 19 then
npc.StateFrame = 21
end
end
if npc.Variant == 2 and npc.SubType == 88 then
local params = ProjectileParams()
params.Scale = 1.5
params.Variant = 4
params.FallingAccelModifier = 0.7
if npc.State == 4 and ((npc.FrameCount % 14 == 8 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 7 == 4 and not npc:HasEntityFlags(1<<7))) and npc:IsVisible() then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-100):Resized(7), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+100):Resized(7), 0, params)
end
if npc.State == 4 and ((npc.FrameCount % 64 == 16 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 32 == 8 and not npc:HasEntityFlags(1<<7))) and npc.I2 == 1 and npc:IsVisible() then
local params = ProjectileParams()
params.Variant = 5
params.Scale = 1.95
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-60):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+130):Resized(6), 0, params)
end
if npc.State == 4 and ((npc.FrameCount % 64 == 16 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 32 == 8 and not npc:HasEntityFlags(1<<7))) and npc.I2 == 1 and npc:IsVisible() then
local params = ProjectileParams()
params.Variant = 6
params.Scale = 1.95
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+60):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-130):Resized(6), 0, params)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("NewShoot") then
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(316)+55) * 0.1
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 8 | 1 << 27
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle):Resized((Eterepernalrng:RandomInt(51)+30)*0.1), 0, params)
npc:PlaySound(13, 1, 0, false, 1)
end
if npc.State == 8 and npc.StateFrame == 46 then
npc.StateFrame = 48
end
if npc.State == 9 and npc.StateFrame == 47 then
local params = ProjectileParams()
params.FallingAccelModifier = 1.1
params.Color = Color(0.8,0.8,0.8,2,125,125,125)
params.Variant = 3
for i = 1,24 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(316)+55) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(101)+10)*0.1), 0, params)
end
end
if npc.I2 == 1 and npc.Size ~= 18 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_frail2.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_frail2.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_frail2.png")
npc:GetSprite():ReplaceSpritesheet(3, "gfx/Sprites/e_frail2.png")
npc:GetSprite():ReplaceSpritesheet(4, "gfx/Sprites/e_frail2.png")
npc:GetSprite():ReplaceSpritesheet(5, "gfx/Sprites/e_frail earth.png")
npc:GetSprite():LoadGraphics()
npc.Size = 18
end
end
if npc.Variant == 3 and npc.SubType <= 6 and npc.Mass ~= 33 and Etereplacementernal == true then
npc:GetSprite():Load("gfx/e_wormwood.anm2",true)
npc:GetSprite():LoadGraphics()
npc.MaxHitPoints = 250
npc.HitPoints = 250
npc.Mass = 33
if Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 and npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_wormwood_dross.png")
npc:GetSprite():LoadGraphics()
end
end
if npc.Variant == 3 and npc.Mass == 33 and npc.Parent == nil then
if Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 and npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_wormwood_dross.png")
npc:GetSprite():LoadGraphics()
end
if npc.State == 8 and npc.Size ~= 16 then
npc.Size = 16
end
if npc.State ~= 8 and npc.Size ~= 15 then
npc.Size = 15
end
if npc.State == 6 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-3.5+45*i):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(3.5+45*i):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8), 0, params)
end
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
for i = 1, Eterepernalrng:RandomInt(7)+8 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(80)+12) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(50)+40)*0.1), 0, params)
end
end
if npc.State == 6 and npc.StateFrame == 1 and npc.ProjectileCooldown == 1 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
for i = 1,Eterepernalrng:RandomInt(15)+8 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(80)+12) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+Eterepernalrng:RandomInt(160)-80):Resized((Eterepernalrng:RandomInt(50)+50)*0.1), 0, params)
end
for i = 1,Eterepernalrng:RandomInt(9)+5 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(80)+12) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+Eterepernalrng:RandomInt(80)-40):Resized((Eterepernalrng:RandomInt(50)+50)*0.1), 0, params)
end
npc.ProjectileCooldown = 0
end
if npc.State == 16 and npc.StateFrame == 1 and npc.ProjectileCooldown ~= 1 then
npc.ProjectileCooldown = 1
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPin, 62)

function mod:EterepScolexReflectTears(npc, npc2)
if npc.Variant == 1 and npc.SubType == 88 and npc:IsVisible() and (npc:GetSprite():IsPlaying("HeadWiggle") or npc:GetSprite():IsPlaying("Body1Wiggle") or npc:GetSprite():IsPlaying("Body2Wiggle") or npc:GetSprite():IsPlaying("Attack2")) and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepScolexReflectTears, 62)

function mod:EterepScolexTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 1 and npc.SubType <= 1 and EterepClassicEnemiesPatterns == 1 and npc:GetSprite():IsPlaying("Attack1") then
npc.HitPoints = npc.HitPoints + damage * 0.75
end
if npc.Variant == 1 and npc.SubType == 88 and npc:GetSprite():IsPlaying("Attack1") then
npc.HitPoints = npc.HitPoints + damage * 0.75
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepScolexTakeDamage, 62)

function mod:EterepFamine(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 9 and npc:GetSprite():IsEventTriggered("ChangeFamineI") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+9):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()-9):Resized(10), 0, params)
end
if npc.State == 9 and npc.I1 == 1 then
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("Attack1") and npc:GetSprite():IsEventTriggered("NewShoot") and Isaac.CountEnemies() >= 6 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.05
params.HeightModifier = -7
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+120*i+-120):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+120*i+-95):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+120*i+-70):Resized(10), 0, params)
end
npc:PlaySound(114, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack1") and npc:GetSprite():IsEventTriggered("NewShoot") and Isaac.CountEnemies() <= 5 then
local amountofenemies = Isaac.CountEnemies()
local angle = Eterepernalrng:RandomInt(360)
for i = 1,(5-Isaac.CountEnemies()) do
local spawn = Isaac.Spawn(14, Eterepernalrng:RandomInt(2), 77, npc.Position+Vector.FromAngle(angle+(360/(5-amountofenemies))*i):Resized(10), Vector.FromAngle(angle+(360/(5-amountofenemies))*i):Resized(20), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
npc:PlaySound(265, 1, 0, false, 1)
end
if (npc:GetSprite():IsPlaying("Attack2") or npc:GetSprite():IsPlaying("Attack3")) and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.05
params.HeightModifier = -7
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame+120*i):Resized(10), 0, params)
end
npc.StateFrame = npc.StateFrame + 24
npc:PlaySound(114, 1, 0, false, 1)
end
if npc.State == 14 or npc.State == 15 then
npc.StateFrame = npc.StateFrame + 1
end
if Eterepernalrng:RandomInt(4)+1 == 1 and npc.FrameCount % 9 == 8 and Isaac.CountEnemies() >= 3 and npc.State == 4 and npc.MaxHitPoints <= 8000 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 14
npc.StateFrame = Eterepernalrng:RandomInt(360)
npc:GetSprite():Play("Attack2", true)
end
if npc.State == 8 and npc.I1 == 1 and npc.Position.X < Game():GetRoom():GetTopLeftPos().X + 148 and npc:GetSprite().FlipX and npc.MaxHitPoints <= 8000 then
npc.State = 15
npc.StateFrame = Eterepernalrng:RandomInt(360)
npc.I1 = 0
npc:GetSprite():Play("Attack3", true)
end
if npc.State == 8 and npc.I1 == 1 and npc.Position.X > Game():GetRoom():GetBottomRightPos().X - 148 and not npc:GetSprite().FlipX and npc.MaxHitPoints <= 8000 then
npc.State = 15
npc.StateFrame = Eterepernalrng:RandomInt(360)
npc.I1 = 0
npc:GetSprite():Play("Attack3", true)
end
if npc:GetSprite():IsEventTriggered("ChangeFamineI") and npc.State ~= 9 then
npc.I1 = 1
end
if npc:GetSprite():IsFinished("Attack2") or npc:GetSprite():IsFinished("Attack3") then
npc.State = 1
npc.StateFrame = 0
end
end
if EterepClassicEnemiesPatterns == 1 and npc.State == 8 and npc.I1 == 1 and npc.SubType == 0 and npc.MaxHitPoints <= 8000 then
if npc:GetSprite().FlipX then
npc.Velocity = Vector(-25, 0)
end
if not npc:GetSprite().FlipX then
npc.Velocity = Vector(25, 0)
end
if npc:GetSprite().FlipX and (npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 88 or npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 64) then
npc.Position = npc.Position + Vector(-101, 0)
end
if not npc:GetSprite().FlipX and (npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 88 or npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 64) then
npc.Position = npc.Position + Vector(101, 0)
end
end
if npc.State == 8 and npc.I1 == 1 and (npc:GetPlayerTarget().Position.Y >= npc.Position.Y or npc:GetPlayerTarget().Position.Y == npc.Position.Y) and ((npc.SubType == 1 or EterepClassicEnemiesPatterns == 1) or npc.SubType == 88) and npc.MaxHitPoints <= 8000 then
if npc:GetSprite().FlipX then
npc.Velocity = Vector(-25, 2)
end
if not npc:GetSprite().FlipX then
npc.Velocity = Vector(25, 2)
end
if npc:GetSprite().FlipX and (npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 88 or npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 64) then
npc.Position = npc.Position + Vector(-101, 0)
end
if not npc:GetSprite().FlipX and (npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 88 or npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 64) then
npc.Position = npc.Position + Vector(101, 0)
end
end
if npc.State == 8 and npc.I1 == 1 and (npc:GetPlayerTarget().Position.Y <= npc.Position.Y or npc:GetPlayerTarget().Position.Y == npc.Position.Y) and ((npc.SubType == 1 or EterepClassicEnemiesPatterns == 1) or npc.SubType == 88) and npc.MaxHitPoints <= 8000 then
if npc:GetSprite().FlipX then
npc.Velocity = Vector(-25, -2)
end
if not npc:GetSprite().FlipX then
npc.Velocity = Vector(25, -2)
end
if npc:GetSprite().FlipX and (npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 88 or npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 64) then
npc.Position = npc.Position + Vector(-101, 0)
end
if not npc:GetSprite().FlipX and (npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 88 or npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 64) then
npc.Position = npc.Position + Vector(101, 0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFamine, 63)

function mod:EterepPestilence(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 8 and npc.MaxHitPoints <= 8000 and npc.I1 == 0 and npc.Size ~= 31 then
npc.State = 14
npc:GetSprite():Play("IpecacAttack", true)
end
if npc.State == 14 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.State and npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.State == 14 then
npc.State = 4
npc.StateFrame = 0
npc:GetSprite():Stop("IpecacAttack", true)
npc:GetSprite():Play("Walk", true)
end
if npc:GetSprite():IsFinished("IpecacAttack") then
npc.State = 4
npc.StateFrame = 0
end
if ((npc.State == 14 and npc.StateFrame >= 15 and npc.StateFrame % 16 == 2 and npc.StateFrame <= 88) or (npc.State == 8 and npc:GetSprite():IsEventTriggered("NewShoot"))) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(236)+45) * 0.1
params.FallingAccelModifier = 0.6
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 2 | 1 << 27
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
params.HeightModifier = -10
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(5), 0, params)
npc:PlaySound(104, 1, 0, false, 1)
if npc.StateFrame == 8 then
npc.StateFrame = 10
end
end
if npc.State == 8 and npc.StateFrame == 8 then
npc.StateFrame = 10
end
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.Size ~= 31 then
Isaac.Spawn(83, 0, 89, npc.Position, Vector(0,0), npc)
npc.Size = 31
end
if npc.State == 13 and npc.StateFrame == 24 and npc.I1 == 0 then
Isaac.Spawn(31, 0, 0, npc.Position+Vector(-30,0), Vector(0,0), npc)
Isaac.Spawn(31, 0, 0, npc.Position+Vector(30,0), Vector(0,0), npc)
npc.StateFrame = 26
npc:PlaySound(114, 1, 0, false, 1)
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.State == 13 and npc.StateFrame == 21 and npc.I1 == 1 then
local fly1 = Isaac.Spawn(18, 0, 0, npc.Position+Vector(30,0), Vector(0,0), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly2 = Isaac.Spawn(18, 0, 0, npc.Position+Vector(-30,0), Vector(0,0), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:PlaySound(158, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPestilence, 64)

function mod:EterepWar(npc)
if (npc.SubType <= 2 and EterepClassicEnemiesPatterns == 1) or npc.SubType == 88 then
if npc:GetSprite():IsPlaying("Dash") and npc:GetSprite().FlipX and npc.MaxHitPoints <= 8000 then
npc.Velocity = Vector(-25, 0)
end
if npc:GetSprite():IsPlaying("Dash") and not npc:GetSprite().FlipX and npc.MaxHitPoints <= 8000 then
npc.Velocity = Vector(25, 0)
end
if npc:GetSprite():IsPlaying("Dash") and npc:GetSprite().FlipX and npc.MaxHitPoints <= 8000 and (npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 88 or npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 64) then
npc.Position = npc.Position + Vector(-101, 0)
end
if npc:GetSprite():IsPlaying("Dash") and not npc:GetSprite().FlipX and npc.MaxHitPoints <= 8000 and (npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 88 or npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 64) then
npc.Position = npc.Position + Vector(101, 0)
end
end
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 9 and npc.StateFrame < 3 and ((npc.FrameCount % 30 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 15 == 10 and not npc:HasEntityFlags(1<<7))) and Isaac.CountEnemies() <= 6 and #Isaac.FindByType(274, -1, -1, false, true) <= 0 and npc:GetSprite().FlipX then
Isaac.Spawn(24, 0, 77, npc.Position+Vector(-15,0), Vector(0,0), npc)
end
if npc.State == 9 and npc.StateFrame < 3 and ((npc.FrameCount % 30 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 15 == 10 and not npc:HasEntityFlags(1<<7))) and Isaac.CountEnemies() <= 6 and #Isaac.FindByType(274, -1, -1, false, true) <= 0 and not npc:GetSprite().FlipX then
Isaac.Spawn(24, 0, 77, npc.Position+Vector(15,0), Vector(0,0), npc)
end
if npc.State == 9 and npc.StateFrame < 3 and ((npc.FrameCount % 30 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 15 == 10 and not npc:HasEntityFlags(1<<7))) and Isaac.CountEnemies() <= 9 and #Isaac.FindByType(274, -1, -1, false, true) >= 1 and npc:GetSprite().FlipX then
Isaac.Spawn(24, 0, 77, npc.Position+Vector(-15,0), Vector(0,0), npc)
end
if npc.State == 9 and npc.StateFrame < 3 and ((npc.FrameCount % 30 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 15 == 10 and not npc:HasEntityFlags(1<<7))) and Isaac.CountEnemies() <= 9 and #Isaac.FindByType(274, -1, -1, false, true) >= 1 and not npc:GetSprite().FlipX then
Isaac.Spawn(24, 0, 77, npc.Position+Vector(15,0), Vector(0,0), npc)
end
if npc.State == 6 and (npc.StateFrame == 30 or npc.StateFrame == 36 or npc.StateFrame == 42 or npc.StateFrame == 48 or npc.StateFrame == 54) then
Isaac.Spawn(4, 3, 0, Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false), Vector(0,0), npc)
end
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 1 and npc.SubType == 0 and npc.FrameCount <= 1 then
npc.MaxHitPoints = 600
npc.HitPoints = 600
end
if npc.Variant == 1 and npc.SubType == 88 then
if npc.State == 6 and npc.StateFrame == 100 and npc.Mass ~= 31 then
npc.StateFrame = 41
npc.Mass = 31
end
if npc.State == 6 and npc.StateFrame == 101 and npc.Mass ~= 30 then
npc.Mass = 30
end
if npc.State == 8 and npc.StateFrame == 4 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
params.Scale = 1.5
params.BulletFlags = ProjectileFlags.SMART
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+-6):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+0):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+6):Resized(11), 0, params)
end
npc.StateFrame = 6
npc:PlaySound(112, 1, 0, false, 1)
end
end
if npc.Variant == 10 and npc.SubType == 88 and npc.State == 8 and npc.StateFrame == 1 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10), 0, ProjectileParams())
end
if npc.Mass ~= 31 then
npc.Mass = 31
npc.Scale = 1.15
end
npc:PlaySound(112, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepWar, 65)

function mod:EterepWarCollision(npc, npc2)
if npc.Variant == 0 and npc.SubType == 88 and npc.State == 9 and npc2.Type == 24 and npc2.SubType == 77 and npc2.FrameCount >= 10 and (npc2.Position - npc.Position):GetAngleDegrees() >= -105 and (npc2.Position - npc.Position):GetAngleDegrees() <= 105 and not npc:GetSprite().FlipX then
npc2:Kill()
end
if npc.Variant == 0 and npc.SubType == 88 and npc.State == 9 and npc2.Type == 24 and npc2.SubType == 77 and npc2.FrameCount >= 10 and (npc2.Position - npc.Position):GetAngleDegrees() >= 75 and (npc2.Position - npc.Position):GetAngleDegrees() <= 285 and npc:GetSprite().FlipX then
npc2:Kill()
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepWarCollision, 65)

function mod:EterepConquestTakeDamage(npc, damage, flags, damageSource, cooldown)
if (EterepClassicEnemiesPatterns == 1 or npc.SubType == 89) and npc.Variant == 1 and npc.SpawnerType == 65 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepConquestTakeDamage, 65)

function mod:EterepDeath(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc.StateFrame == 20 then
if npc.State == 14 and #Isaac.FindByType(260, 10, -1, false, true) <= 2 then
local scythespawn = Eterepernalrng:RandomInt(2)
for i = 1,4 do
local scythe = Isaac.Spawn(922, 357, 0, npc.Position, Vector.FromAngle(EterepCustomAngle+90*i):Resized(10), npc)
scythe:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
scythe.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
scythe.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
end
if npc.State == 13 or (npc.State == 14 and #Isaac.FindByType(260, 10, -1, false, true) > 2) then
local deathattack = Eterepernalrng:RandomInt(4)+1
if deathattack == 1 then
local scythe1 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe1.Mass = 200
end
if deathattack == 2 then
local scythe1 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe1.Mass = 200
end
if deathattack == 3 then
local scythe1 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe1.Mass = 200
end
if deathattack == 4 then
local scythe1 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe1.Mass = 200
end
if deathattack == 2 then
local scythe2 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe2.Mass = 182
end
if deathattack == 1 then
local scythe2 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe2.Mass = 182
end
if deathattack == 4 then
local scythe2 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe2.Mass = 182
end
if deathattack == 3 then
local scythe2 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe2.Mass = 182
end
if deathattack == 3 then
local scythe3 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe3.Mass = 164
end
if deathattack == 4 then
local scythe3 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe3.Mass = 164
end
if deathattack == 1 then
local scythe3 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe3.Mass = 164
end
if deathattack == 2 then
local scythe3 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe3.Mass = 164
end
if deathattack == 4 then
local scythe4 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe4.Mass = 146
end
if deathattack == 3 then
local scythe4 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
scythe4.Mass = 146
end
if deathattack == 2 then
local scythe4 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe4.Mass = 146
end
if deathattack == 1 then
local scythe4 = Isaac.Spawn(922, 354, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
scythe4.Mass = 146
end
Isaac.Spawn(1000, 15, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
Isaac.Spawn(1000, 15, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetTopLeftPos().Y+20), Vector(0,0), npc)
Isaac.Spawn(1000, 15, 0, Vector(Game():GetRoom():GetTopLeftPos().X+20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
Isaac.Spawn(1000, 15, 0, Vector(Game():GetRoom():GetBottomRightPos().X-20,Game():GetRoom():GetBottomRightPos().Y-20), Vector(0,0), npc)
end
end
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 10 and npc.SubType == 0 and npc.FrameCount <= 1 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
Isaac.Spawn(1000, 15, 0, npc.Position, Vector(0,0), npc)
npc.Scale = 1.3
npc.Size = 16
end
if npc.Variant == 20 and ((npc.SubType == 0 and EterepClassicEnemiesPatterns == 1) or npc.SubType == 88) and npc.MaxHitPoints <= 8000 then
if npc.SubType == 0 and npc.FrameCount <= 1 then
npc.MaxHitPoints = 200
npc.HitPoints = 200
end
if npc:GetSprite().FlipX then
npc.Velocity = Vector(-25, 0)
end
if not npc:GetSprite().FlipX then
npc.Velocity = Vector(25, 0)
end
if npc:GetSprite().FlipX and (npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 88 or npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 64) then
npc.Position = npc.Position + Vector(-101, 0)
end
if not npc:GetSprite().FlipX and (npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 88 or npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 64) then
npc.Position = npc.Position + Vector(101, 0)
end
end
if npc.Variant == 30 and npc.SubType == 88 and npc.State == 13 and npc.StateFrame == 17 then
local mobilehost = Isaac.Spawn(204, 0, 77, npc.Position-Vector(-20,0), Vector(0,0), npc)
local mobilehost = Isaac.Spawn(204, 0, 77, npc.Position-Vector(20,0), Vector(0,0), npc)
end
if npc.Variant == 30 and npc.Mass ~= 31 and npc:GetSprite():IsPlaying("Appear") and npc:GetSprite():GetFrame() == 1 then
npc.Mass = 31
npc.Scale = 1.15
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDeath, 66)

function mod:EterepDukeofFlies(npc)
if npc.Variant == 0 and npc.SubType == 89 then
if npc.FrameCount <= 1 and npc.Size ~= 42 then
for i = 1,3 do
local fly = Isaac.Spawn(927, 8899, 0, npc.Position, Vector(0,0), npc)
fly.Mass = 120*i
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
fly.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
fly:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
fly:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
fly.Parent = npc
end
npc.Size = 42
end
if npc.State == 14 and npc.StateFrame == 18 then
local fly = Isaac.Spawn(18, 0, 0, npc.Position+Vector(0,20), Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.State == 8 and npc.StateFrame == 15 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(9), 0, params)
end
end
end
if npc.Variant == 1 and npc.SubType == 89 then
if npc.State == 14 and npc.StateFrame == 17 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
for i = 1,12 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(101)+30) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(51)+50)*0.1), 0, params)
end
end
if npc.FrameCount <= 1 and npc.Size ~= 42 then
for i = 1,3 do
local fly = Isaac.Spawn(927, 8899, 0, npc.Position, Vector(0,0), npc)
fly.Mass = 120*i
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
fly.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
fly:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
fly:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
fly.Parent = npc
end
for i = 1,3 do
local fly = Isaac.Spawn(927, 8899, 0, npc.Position, Vector(0,0), npc)
fly.Mass = 120*i+20
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
fly.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
fly:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
fly:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
fly.Parent = npc
end
npc.Size = 42
end
if npc:IsDead() then
Isaac.Spawn(14, 1, 0, npc.Position-Vector(Eterepernalrng:RandomInt(101)-50,Eterepernalrng:RandomInt(101)-50), Vector(0,0), npc)
Isaac.Spawn(14, 1, 0, npc.Position-Vector(Eterepernalrng:RandomInt(101)-50,Eterepernalrng:RandomInt(101)-50), Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDukeofFlies, 67)

function mod:EterepDukeofFliesDeath(npc)
if EterepClassicEnemiesPatterns == 1 and npc:IsDead() and npc.Variant == 1 and npc.SubType == 2 then
Isaac.Spawn(25, 1, 0, npc.Position-Vector(-30,0), Vector(0,0), npc)
Isaac.Spawn(25, 1, 0, npc.Position-Vector(-15,-15), Vector(0,0), npc)
Isaac.Spawn(25, 1, 0, npc.Position-Vector(-15,15), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(0,-30), Vector(0,0), npc)
Isaac.Spawn(61, 0, 0, npc.Position-Vector(0,30), Vector(0,0), npc)
return true
end
if npc.Variant <= 1 and npc.SubType == 89 and npc:IsDead() then
Isaac.Spawn(80, 0, 0, npc.Position+Vector(-20,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(0,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(20,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(-20,0), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(0,0), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(20,0), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(-20,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(0,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(20,20), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(-10,-10), Vector(0,0), npc)
Isaac.Spawn(80, 0, 0, npc.Position+Vector(10,-10), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(-10,10), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(10,10), Vector(0,0), npc)
Isaac.Spawn(14, 0, 0, npc.Position-Vector(10,0), Vector(0,0), npc)
Isaac.Spawn(14, 1, 0, npc.Position-Vector(-10,0), Vector(0,0), npc)
if npc.Variant == 1 then
Isaac.Spawn(18, 0, 0, npc.Position+Vector(-15,-15), Vector(0,0), npc)
Isaac.Spawn(80, 0, 0, npc.Position+Vector(15,15), Vector(0,0), npc)
Isaac.Spawn(80, 0, 0, npc.Position+Vector(5,-5), Vector(0,0), npc)
Isaac.Spawn(18, 0, 0, npc.Position+Vector(-5,5), Vector(0,0), npc)
Isaac.Spawn(14, 0, 0, npc.Position-Vector(-20,0), Vector(0,0), npc)
Isaac.Spawn(14, 1, 0, npc.Position-Vector(20,0), Vector(0,0), npc)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepDukeofFliesDeath, 67)

function mod:EterepPeep(npc)
if npc.Variant == 10 or npc.Variant == 11 and npc.FrameCount <= 31 then
npc.Size = 13
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 0 and npc.SubType == 88 then
if npc.HitPoints <= npc.MaxHitPoints * 0.889 and npc.Mass == 40 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_peep five.png")
npc:GetSprite():LoadGraphics()
npc:PlaySound(237, 1, 0, false, 1)
npc.Mass = npc.Mass + 1
Isaac.Spawn(229, 0, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
if npc.HitPoints <= npc.MaxHitPoints * 0.778 and npc.Mass == 41 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_peep four.png")
npc:GetSprite():LoadGraphics()
npc:PlaySound(237, 1, 0, false, 1)
npc.Mass = npc.Mass + 1
Isaac.Spawn(229, 0, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
if npc.HitPoints <= npc.MaxHitPoints * 0.666666 and npc.Mass == 42 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_peep three.png")
npc:GetSprite():LoadGraphics()
npc.Mass = npc.Mass + 1
end
if npc.HitPoints <= npc.MaxHitPoints * 0.555 and npc.Mass == 43 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_peep two.png")
npc:GetSprite():LoadGraphics()
npc:PlaySound(237, 1, 0, false, 1)
npc.Mass = npc.Mass + 1
Isaac.Spawn(229, 0, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
if npc.HitPoints <= npc.MaxHitPoints * 0.444 and npc.Mass == 44 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_peep one.png")
npc:GetSprite():LoadGraphics()
npc:PlaySound(237, 1, 0, false, 1)
npc.Mass = npc.Mass + 1
Isaac.Spawn(229, 0, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
if npc.HitPoints <= npc.MaxHitPoints * 0.333333 and npc.Mass == 45 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_peep zero.png")
npc:GetSprite():LoadGraphics()
npc.Mass = npc.Mass + 1
end
end
if npc.Variant == 1 and npc.SubType == 88 then
if npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(229, 0, 79, false, true) <= 5 then
npc:PlaySound(SoundEffect.SOUND_PLOP, 1, 0, false, 1)
local eye = Isaac.Spawn(229, 0, 79, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
eye:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.5
params.FallingAccelModifier = 0.7
params.BulletFlags = 1 << 1 | 1 << 7
for i = 1,2 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(171)+70) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(6), 0, params)
end
end
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.5
params.FallingAccelModifier = 0.7
params.BulletFlags = 1 << 1 | 1 << 7
for i = 1,3 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(171)+70) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(6), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPeep, 68)

function mod:EterepLoki(npc)
if npc.Variant == 1 and npc.SubType == 1 and npc.FrameCount <= 5 then
npc:GetSprite().FlipX = false
end
if npc.Variant <= 2 and npc.SubType == 88 then
if npc.FrameCount <= 1 then
npc.I1 = 0
end
local params = ProjectileParams()
params.Variant = 4
if (Eterepisaacisdamagedwithlokis == 1 or Eterepisaacisdamagedwithlokis == 2) and npc.HitPoints < npc.MaxHitPoints * 0.99 then
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position, Vector(0,0), npc)
npc.HitPoints = npc.HitPoints + 70
end
if npc.Variant == 2 and npc.FrameCount <= 5 then
npc:GetSprite().FlipX = false
end
if npc:GetSprite():IsEventTriggered("Jump") then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10.5), 0, params)
end
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("Shoot") then
params.Scale = 1.5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(14), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_CUTE_GRUNT, 1, 0, false, 1)
end
if npc.State == 10 and npc:GetSprite():IsEventTriggered("Shoot") then
if npc.I1 % 2 == 0 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(11), 0, params)
end
end
if npc.I1 % 2 == 1 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(11), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_CUTE_GRUNT, 1, 0, false, 1)
end
if npc.I1 == 4 then
npc:PlaySound(SoundEffect.SOUND_CUTE_GRUNT, 1, 0, false, 1)
end
npc.I1 = npc.I1 + 1
if npc.I1 > 5 then
npc.I1 = 0
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLoki, 69)

function mod:EterepFistulaBig(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 88 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 88 then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), true, 0.0)
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), true, 0.0)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFistulaBig, 71)

function mod:EterepFistulaMedium(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 83 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 83 then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFistulaMedium, 72)

function mod:EterepFistulaSmall(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 83 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 83 then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
Isaac.Spawn(94, 0, 0, npc.Position, Vector(0,0), npc)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFistulaSmall, 73)

function mod:EterepBlastocystBig(npc)
if npc.Variant == 0 and npc.SubType == 90 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.35
params.Variant = 4
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Land") then
for i = 1,24 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(166)+5) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7.5), 0, params)
end
npc.StateFrame = 24
end
if npc.State == 4 and npc:GetSprite():IsEventTriggered("Land") then
for i = 1,8 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(166)+5) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7.5), 0, params)
end
end
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Land") then
params.Scale = 1.5
params.FallingAccelModifier = -0.04
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(13), 0, params)
end
npc.StateFrame = 25
end
if npc.State == 16 and npc:GetSprite():IsEventTriggered("Land") then
local blastocyst = Isaac.Spawn(75, 0, 0, npc.Position, Vector(0,0), npc)
blastocyst:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.State == 8 then
npc.Velocity = npc.Velocity * 1.15
end
if npc.State == 4 then
npc.Velocity = npc.Velocity * 1.1
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlastocystBig, 74)

function mod:EterepBlastocystMedium(npc)
if npc.Variant == 0 and npc.SubType == 89 then
if npc.FrameCount <= 3 then
npc.Velocity = Vector(0,0)
end
if npc.State == 4 then
npc.Velocity = npc.Velocity * 1.1
end
if npc.State == 8 then
npc.Velocity = npc.Velocity * 1.15
end
if npc:IsDead() and npc.SubType == 89 then
local blastocyst = Isaac.Spawn(76, 0, 83, npc.Position, Vector(0,0), npc)
blastocyst:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlastocystMedium, 75)

function mod:EterepBlastocystSmall(npc)
if npc.Variant == 0 and (npc.SubType == 0 or npc.SubType == 83) then
if npc.FrameCount <= 3 then
npc.Velocity = Vector(0,0)
end
if npc.State == 4 then
npc.Velocity = npc.Velocity * 1.1
end
if npc.State == 8 then
npc.Velocity = npc.Velocity * 1.15
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlastocystSmall, 76)

function mod:EterepEmbryo(npc)
if npc.FrameCount <= 1 and npc.Variant == 0 and npc.SubType == 0 and npc.SpawnerType <= 1 and #Isaac.FindByType(77, 0, 94, false, true) == 0 and EterepCountEternalMonsters == 0 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(500)+1 <= EterepReplaceMonster0) or (EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(500)+1 <= EterepReplaceMonster1)) and Game().Difficulty <= 1 then
npc:Morph(77, 0, 94, -1)
npc.HitPoints = npc.MaxHitPoints
end
if (npc.SubType == 94 or npc.SubType == 95) and npc:CollidesWithGrid() then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if math.abs((npc.Position - grid.Position):Length()) < 70 then
grid:Destroy(true)
end
end
end
end
if npc.SubType >= 94 and npc.SubType <= 97 and npc.StateFrame > 23 then
npc.StateFrame = 0
end
if npc.SubType >= 94 and npc.SubType <= 95 and npc.State == 3 and npc.StateFrame == 19 then
npc:PlaySound(48, 1, 0, false, 1)
end
if npc.SubType == 94 and npc.State == 3 and npc:GetSprite():IsEventTriggered("Landed") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
for i = 1,14 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+25.7142857143*i):Resized(9), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
SFXManager():Stop(205)
end
if npc.SubType == 95 and npc.State == 3 and npc:GetSprite():IsEventTriggered("Landed") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(8), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
SFXManager():Stop(205)
end
if npc.SubType == 96 and npc.State == 3 and npc:GetSprite():IsEventTriggered("Landed") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.01
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(7), 0, params)
end
end
if npc.SubType == 97 and npc.State == 3 and npc:GetSprite():IsEventTriggered("Landed") then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+90*i):Resized(6), 0, ProjectileParams())
end
end
if npc:IsDead() and npc.SubType >= 94 and npc.SubType <= 98 and npc:Exists() then
local embryo1 = Isaac.Spawn(77, 0, npc.SubType+1, npc.Position-Vector(-npc.Size*0.5,0), Vector(0,0), npc)
embryo1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local embryo2 = Isaac.Spawn(77, 0, npc.SubType+1, npc.Position-Vector(npc.Size*0.5,0), Vector(0,0), npc)
embryo2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc:IsDead() and npc.SubType == 94 and npc:Exists() and EterepMonstersreward >= 1 then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(225):Resized(8.5), npc)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepEmbryo, 77)

function mod:EterepMomHeart(npc)
if npc.Variant == 0 and (npc.SubType == 0 or npc.SubType == 1) and npc.FrameCount <= 1 and EterepFinalacementernal == true then
npc:Morph(78, 0, 84, -1)
npc.HitPoints = npc.MaxHitPoints
npc.Size = 37
end
local repentancefloor = (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B)
if npc.Variant <= 1 and (npc.Size == 37 or npc.SubType == 84) and repentancefloor and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.4
params.FallingAccelModifier = -0.15
if npc.State == 3 and npc.I1 == 5 and npc.StateFrame % 21 == 1 and npc.StateFrame >= 20 then
params.BulletFlags = ProjectileFlags.HIT_ENEMIES
for i = 1,10 do
npc:FireProjectiles(npc.Position-Vector(0,110), Vector.FromAngle(EterepCustomAngle+36*i):Resized(7.5), 0, params)
end
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 24 == 3 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 24
params.Variant = 5
params.Scale = 1.75
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+i*120):Resized(10), 0, params)
end
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 8 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 8
params.BulletFlags = ProjectileFlags.SAWTOOTH_WIGGLE
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+90):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+180):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+270):Resized(9.25), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 24 == 3 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(5.5), 0, params)
end
params.Variant = 6
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(5.85), 0, params)
end
end
if npc.Mass == 96 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 5 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 6
local params = ProjectileParams()
params.Variant = 2
params.Scale = 1.4
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.ACCELERATE
params.CurvingStrength = -0.0375
params.Acceleration = 1.02
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+72):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+144):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+216):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+288):Resized(5.5), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 8 == 5 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 8
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.Variant = 3
params.CurvingStrength = 0.012
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+45):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+135):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+225):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+315):Resized(7.5), 0, params)
end
if npc.Mass == 94 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 8 == 5 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 8
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_RIGHT
params.Variant = 3
params.CurvingStrength = 0.012
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+45):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+135):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+225):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+315):Resized(7.5), 0, params)
end
if npc.Mass == 93 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 5 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle - 6
local params = ProjectileParams()
params.Variant = 2
params.Scale = 1.4
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.ACCELERATE
params.CurvingStrength = 0.0375
params.Acceleration = 1.02
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+72):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+144):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+216):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+288):Resized(5.5), 0, params)
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 16 == 1 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 19.2
params.Variant = 5
params.Scale = 1.75
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+i*120):Resized(10), 0, params)
end
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 6 == 1 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 9
params.BulletFlags = ProjectileFlags.SAWTOOTH_WIGGLE
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+90):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+180):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+270):Resized(9.25), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 22 == 4 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(5.5), 0, params)
end
params.Variant = 6
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(5.85), 0, params)
end
end
if npc.Mass == 96 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 4 == 1 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 7.5
local params = ProjectileParams()
params.Variant = 2
params.Scale = 1.4
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.ACCELERATE
params.CurvingStrength = -0.0375
params.Acceleration = 1.02
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+72):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+144):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+216):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+288):Resized(5.5), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 5 == 4 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 7.5
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.Variant = 3
params.CurvingStrength = 0.012
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+45):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+135):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+225):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+315):Resized(7.5), 0, params)
end
if npc.Mass == 94 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 5 == 4 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 7.5
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_RIGHT
params.Variant = 3
params.CurvingStrength = 0.012
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+45):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+135):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+225):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+315):Resized(7.5), 0, params)
end
if npc.Mass == 93 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 4 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle - 7.5
local params = ProjectileParams()
params.Variant = 2
params.Scale = 1.4
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.ACCELERATE
params.CurvingStrength = 0.0375
params.Acceleration = 1.02
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+72):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+144):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+216):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+288):Resized(5.5), 0, params)
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 10 == 1 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 14
params.Variant = 5
params.Scale = 1.75
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+i*120):Resized(10), 0, params)
end
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 6 == 1 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 10.8
params.BulletFlags = ProjectileFlags.SAWTOOTH_WIGGLE
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+90):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+180):Resized(9.25), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+270):Resized(9.25), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 16 == 4 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(5.5), 0, params)
end
params.Variant = 6
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(5.85), 0, params)
end
end
if npc.Mass == 96 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 3 == 1 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 7
local params = ProjectileParams()
params.Variant = 2
params.Scale = 1.4
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.ACCELERATE
params.CurvingStrength = -0.0375
params.Acceleration = 1.02
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+72):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+144):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+216):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+288):Resized(5.5), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 4 == 3 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 9.33
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.Variant = 3
params.CurvingStrength = 0.012
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+45):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+135):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+225):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+315):Resized(7.5), 0, params)
end
if npc.Mass == 94 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 4 == 3 and npc.StateFrame >= 3 and npc.StateFrame + (npc.I1 * 30) <= 250 then
EterepMausoleumheartangle = EterepMausoleumheartangle + 9.33
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_RIGHT
params.Variant = 3
params.CurvingStrength = 0.012
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+45):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+135):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+225):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(-EterepMausoleumheartangle+315):Resized(7.5), 0, params)
end
if npc.Mass == 93 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 3 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
EterepMausoleumheartangle = EterepMausoleumheartangle - 7
local params = ProjectileParams()
params.Variant = 2
params.Scale = 1.4
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.ACCELERATE
params.CurvingStrength = 0.0375
params.Acceleration = 1.02
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+72):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+144):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+216):Resized(5.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepMausoleumheartangle+288):Resized(5.5), 0, params)
end
if npc.Mass == 101 and npc.State == 8 and npc.StateFrame == 3 then
local brim1 = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-15), 90, 200000, Vector(0,0), npc)
brim1.MaxHitPoints = 1
brim1:SetActiveRotation(10, 99999, -2.2)
local brim2 = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-15), 90, 200000, Vector(0,0), npc)
brim2.MaxHitPoints = 1
brim2:SetActiveRotation(10, 99999, 2.2)
local brim3 = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-15), 270, 200000, Vector(0,0), npc)
brim3.MaxHitPoints = 1
brim3:SetActiveRotation(10, 99999, -2.2)
local brim4 = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-15), 270, 200000, Vector(0,0), npc)
brim4.MaxHitPoints = 1
brim4:SetActiveRotation(10, 99999, 2.2)
npc.Mass = 105
end
if npc.Mass == 105 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 30 == 10 and npc.StateFrame >= 25 then
Etereplaserrotation = Eterepernalrng:RandomInt(2) * 40
end
if npc.Mass == 105 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 30 == 20 and npc.StateFrame >= 45 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25) - npc.Position):GetAngleDegrees()+60*i):Resized(7), 0, params)
end
end
if npc.HitPoints > npc.MaxHitPoints * 0.20 and npc.StateFrame == 2 then
npc.Mass = 94 + Eterepernalrng:RandomInt(5)+1
EterepMausoleumheartangle = Eterepernalrng:RandomInt(360)+1
if npc.Mass == 95 then
EterepMausoleumheartangle = -10
end
if npc.Mass == 95 and Eterepernalrng:RandomInt(2)+1 == 1 then
npc.Mass = 94
end
if npc.Mass == 96 and Eterepernalrng:RandomInt(2)+1 == 1 then
npc.Mass = 93
end
end
if npc.HitPoints <= npc.MaxHitPoints * 0.20 and npc.StateFrame == 2 and npc.Mass ~= 105 then
npc.Mass = 101
EterepMausoleumheartangle = Eterepernalrng:RandomInt(360)+1
end
if npc.Mass == 105 and npc.StateFrame >= 90 then
npc.StateFrame = 30
end
if npc.Mass == 105 and npc.StateFrame <= 2 then
npc.StateFrame = 30
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
if EterepRegenBoss >= 1 and npc.SubType ~= 84 and npc.FrameCount % 51 == 40 and npc.HitPoints < npc.MaxHitPoints * 0.9999999 and not npc:HasEntityFlags(1<<79) then
npc.HitPoints = npc.HitPoints + (0.4*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.4*EterepRegenBoss)
end
end
if npc.Variant <= 1 and (npc.Size == 37 or npc.SubType == 84) and not repentancefloor and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.4
params.FallingAccelModifier = -0.08
if npc.State == 3 and npc.I1 == 5 and npc.StateFrame % 21 == 1 and npc.StateFrame >= 20 then
params.BulletFlags = ProjectileFlags.HIT_ENEMIES
for i = 1,10 do
npc:FireProjectiles(npc.Position-Vector(0,110), Vector.FromAngle(EterepCustomAngle+36*i):Resized(7.5), 0, params)
end
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 24 == 1 then
customliveangle = Eterepernalrng:RandomInt(90)+1
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 1 and (npc.StateFrame % 24 == 4 or npc.StateFrame % 24 == 6 or npc.StateFrame % 24 == 8 or npc.StateFrame % 24 == 10) and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*7+customliveangle-60*i):Resized(7.3), 0, params)
end
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(10.2*npc.StateFrame+Eterepernalrng:RandomInt(5)-2):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(10.2*npc.StateFrame+180+Eterepernalrng:RandomInt(5)-2):Resized(7.5), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 30 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8+(npc.StateFrame*0.18)), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 31 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(13.76), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 48 == 7 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+60*i):Resized(7), 0, params)
end
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 48 == 31 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(60*i):Resized(7), 0, params)
end
end
if npc.Mass == 96 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 24 == 6 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(6.5), 0, params)
end
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame % 24 == 6 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(7.1), 0, params)
end
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame >= 81 and npc.StateFrame <= 89 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(14), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 1 and npc.StateFrame >= 171 and npc.StateFrame <= 179 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(14), 0, params)
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 18 == 2 then
customliveangle = Eterepernalrng:RandomInt(90)+1
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 2 and (npc.StateFrame % 18 == 4 or npc.StateFrame % 18 == 6 or npc.StateFrame % 18 == 8 or npc.StateFrame % 18 == 10) and npc.StateFrame >= 3 and npc.StateFrame <= 184 then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*8+customliveangle-72*i):Resized(7.3), 0, params)
end
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(10.2*npc.StateFrame+Eterepernalrng:RandomInt(15)-7):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(10.2*npc.StateFrame+180+Eterepernalrng:RandomInt(15)-7):Resized(7.5), 0, params)
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 35 == 4 and npc.StateFrame >= 3 and npc.StateFrame <= 184 then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+72*i):Resized(8), 0, params)
end
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 30 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8+(npc.StateFrame*0.25)), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 31 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(16), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 40 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+60*i):Resized(7.5), 0, params)
end
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 40 == 21 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(60*i):Resized(7.5), 0, params)
end
end
if npc.Mass == 96 and npc.State == 8 and npc.I1 == 2 and npc.FrameCount % 3 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
npc:FireProjectiles(npc.Position, Vector.FromAngle(270+npc.StateFrame*8.1):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(180+npc.StateFrame*8.1):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90+npc.StateFrame*8.1):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*8.1):Resized(6), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame % 15 == 9 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7.1), 0, params)
end
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame >= 81 and npc.StateFrame <= 91 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(15.5), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 2 and npc.StateFrame >= 171 and npc.StateFrame <= 181 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(15.5), 0, params)
end
if npc.Mass == 99 and npc.State == 8 and npc.I1 == 3 and npc.FrameCount % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(240+npc.StateFrame*16.5):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(120+npc.StateFrame*16.5):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*16.5):Resized(9), 0, params)
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(11.2*npc.StateFrame+Eterepernalrng:RandomInt(25)-12):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(11.2*npc.StateFrame+180+Eterepernalrng:RandomInt(25)-12):Resized(7.5), 0, params)
end
if npc.Mass == 98 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 25 == 4 and npc.StateFrame >= 3 and npc.StateFrame <= 184 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(8), 0, params)
end
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 30 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8+(npc.StateFrame*0.3)), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 2 == 1 and npc.StateFrame >= 31 and npc.StateFrame <= 190 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(17.6), 0, params)
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 32 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+60*i):Resized(8), 0, params)
end
end
if npc.Mass == 97 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 32 == 17 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(60*i):Resized(8), 0, params)
end
end
if npc.Mass == 96 and npc.State == 8 and npc.I1 == 3 and npc.FrameCount % 3 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
npc:FireProjectiles(npc.Position, Vector.FromAngle(270+npc.StateFrame*8.15):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(180+npc.StateFrame*8.15):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90+npc.StateFrame*8.15):Resized(6), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*8.15):Resized(6), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 3 and npc.FrameCount % 12 == 1 and npc.StateFrame >= 3 and npc.StateFrame <= 190 then
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7.1), 0, params)
end
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame >= 81 and npc.StateFrame <= 91 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(16.5), 0, params)
end
if npc.Mass == 95 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame >= 171 and npc.StateFrame <= 181 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(16.5), 0, params)
end
if npc.Mass == 101 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame % 30 == 22 and npc.StateFrame >= 45 then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(7), 0, params)
end
end
if npc.State == 3 and npc.StateFrame == 3 then
npc.Mass = 94 + Eterepernalrng:RandomInt(5)+1
end
if npc.HitPoints > npc.MaxHitPoints * 0.2 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame <= 2 then
npc.Mass = 94 + Eterepernalrng:RandomInt(5)+1
end
if npc.HitPoints <= npc.MaxHitPoints * 0.2 and npc.State == 8 and npc.I1 == 3 and npc.StateFrame <= 2 then
npc.Mass = 101
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
if EterepRegenBoss >= 1 and npc.SubType ~= 84 and npc.FrameCount % 51 == 40 and npc.HitPoints < npc.MaxHitPoints * 0.9999999 and not npc:HasEntityFlags(1<<29) then
npc.HitPoints = npc.HitPoints + (0.4*EterepRegenBoss) + (Game():GetLevel():GetStage()-1) * (0.4*EterepRegenBoss)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMomHeart, 78)

function mod:EterepMomHeartRender(npc)
if npc.Variant <= 1 and (npc.Size == 37 or npc.SubType == 84) and npc:GetSprite():IsPlaying("Death") and npc:GetSprite():GetFrame() == 25 and npc:GetData().itlivesdeath ~= npc:GetSprite():GetFrame() then
local params = ProjectileParams()
params.Scale = 1.4
params.Variant = 4
params.FallingAccelModifier = -0.15
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(8), 0, params)
end
npc:GetData().itlivesdeath = npc:GetSprite():GetFrame()
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_RENDER, mod.EterepMomHeartRender, 78)

function mod:EterepGemini(npc)
if (npc.Variant == 10 or npc.Variant == 11 or npc.Variant == 12 or npc.Variant == 20) and npc.SubType <= 10 and npc.Parent ~= nil and npc.Parent.Type == 79 and npc.Parent.Variant <= 2 and npc.Parent.SubType == 88 then
npc:Morph(15, 0, 170, -1)
end
if EterepClassicEnemiesPatterns == 1 and npc.SubType == 0 and npc.ProjectileCooldown >= 5 then
npc.ProjectileCooldown = 4
end
if npc.Variant == 0 and npc.SubType == 88 and npc.Mass ~= 51 and npc.Parent == nil and npc.SpawnerType ~= 79 and npc.FrameCount <= 3 then
local spawn2 = Isaac.Spawn(79, 10, 81, npc.Position+Vector(35,0), Vector(0,0), npc)
spawn2.SpriteOffset = Vector(0,6)
npc.Mass = 51
npc:Remove()
end
if npc.Variant == 10 and npc.SubType == 81 and npc.Mass ~= 21 and npc.Parent == nil and npc.SpawnerType == 79 and npc.FrameCount <= 3 then
local spawn2 = Isaac.Spawn(79, 0, 88, npc.Position+Vector(-35,0), Vector(0,0), npc)
npc.Parent = spawn2
npc.Mass = 21
for i = 1,10 do
local cord1 = Isaac.Spawn(927, 3000, 0, npc.Position, Vector(0,0), npc)
cord1.Size = 1*i
cord1.Parent = npc
cord1.SpriteOffset = Vector(0,(math.sin((cord1.Size+1)*0.36)*5)-10)
cord1.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
cord1.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
end
if npc.Variant == 0 and npc.SubType == 88 and npc.Mass ~= 51 and npc.Parent == nil and npc.SpawnerType == 79 and npc.SpawnerVariant == 10 and npc.FrameCount <= 3 then
npc:Morph(79, 0, 88, -1)
npc.Mass = 51
local spawn1 = Isaac.Spawn(79, 10, 80, npc.Position+Vector(-35,0), Vector(0,0), npc)
spawn1.Parent = npc
spawn1.SpriteOffset = Vector(0,6)
end
if npc.Variant == 1 and npc.SubType == 88 and npc.Mass ~= 51 and npc.Parent == nil and npc.SpawnerType ~= 79 and npc.FrameCount <= 3 then
local spawn2 = Isaac.Spawn(79, 11, 80, npc.Position+Vector(15,0), Vector(0,0), npc)
npc.Mass = 51
npc:Remove()
end
if npc.Variant == 11 and npc.SubType == 80 and npc.Mass ~= 21 and npc.Parent == nil and npc.SpawnerType == 79 and npc.FrameCount <= 3 then
local spawn2 = Isaac.Spawn(79, 1, 88, npc.Position+Vector(-15,0), Vector(0,0), npc)
npc.Parent = spawn2
npc.Mass = 21
end
if npc.Variant == 1 and npc.SubType == 88 and npc.Mass ~= 51 and npc.Parent == nil and npc.SpawnerType == 79 and npc.SpawnerVariant == 11 and npc.FrameCount <= 3 then
npc:Morph(79, 1, 88, -1)
npc.Mass = 51
local spawn1 = Isaac.Spawn(79, 10, 82, npc.Position+Vector(-15,0), Vector(0,0), npc)
spawn1.Parent = npc
end
if npc.Variant == 2 and npc.SubType == 88 and npc.Mass ~= 51 and npc.Parent == nil and npc.SpawnerType ~= 79 and npc.FrameCount <= 3 then
Isaac.Spawn(79, 12, 12, npc.Position+Vector(35,0), Vector(0,0), npc)
npc.Mass = 51
npc:Remove()
end
if npc.Variant == 12 and npc.SubType == 12 and npc.Mass ~= 21 and npc.Parent == nil and npc.SpawnerType == 79 and npc.FrameCount <= 3 then
local spawn2 = Isaac.Spawn(79, 2, 88, npc.Position+Vector(-35,0), Vector(0,0), npc)
npc.Parent = spawn2
npc.Mass = 21
end
if npc.Variant == 2 and npc.SubType == 88 and npc.Mass ~= 51 and npc.Parent == nil and npc.SpawnerType == 79 and npc.SpawnerVariant == 12 and npc.FrameCount <= 3 then
npc:Morph(79, 2, 88, -1)
npc.Mass = 51
local spawn1 = Isaac.Spawn(79, 12, 12, npc.Position+Vector(-35,0), Vector(0,0), npc)
spawn1.Parent = npc
spawn1.Mass = 21
end
if npc.Variant == 2 and npc.SubType == 88 then
npc.Velocity = npc.Velocity * 0.95
end
if npc.Variant == 10 and (npc.SubType == 80 or npc.SubType == 81) then
if npc.Parent ~= nil and npc.Parent.Type == 79 and npc.Parent.Position:Distance(npc.Position) > 100 then
npc.Velocity = npc.Velocity + (npc.Parent.Position - npc.Position):Resized((npc.Parent.Position:Distance(npc.Position)-97)*0.05)
end
if npc.Parent ~= nil and npc.SubType == 80 and npc.SpawnerEntity.SpawnerEntity ~= nil and npc.SpawnerEntity.SpawnerEntity.Position:Distance(npc.Position) <= 100 then
npc:AddVelocity((npc.SpawnerEntity.SpawnerEntity.Position - npc.Position):Normalized()*-0.4)
npc.SpawnerEntity.SpawnerEntity:AddVelocity((npc.Position - npc.SpawnerEntity.SpawnerEntity.Position):Normalized()*-0.5)
end
if npc.FrameCount <= 1 and npc.Mass ~= 21 then
for i = 1,10 do
local cord1 = Isaac.Spawn(927, 3000, 0, npc.Position, Vector(0,0), npc)
cord1.Size = 1*i
cord1.Parent = npc
cord1.SpriteOffset = Vector(0,(math.sin((cord1.Size+1)*0.36)*5)-10)
cord1.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
cord1.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
npc.Mass = 21
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.HeightModifier = -5
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+345):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+375):Resized(9), 0, params)
npc:PlaySound(318, 1, 0, false, 1)
end
if npc.ProjectileCooldown >= 5 then
npc.ProjectileCooldown = 4
end
end
if ((npc.Variant == 10 and npc.SubType == 82) or (npc.Variant == 11 and npc.SubType == 80)) then
if npc.Parent ~= nil and npc.Parent.Type == 79 and npc.Parent.Position:Distance(npc.Position) >= 32 then
npc.Velocity = npc.Velocity + (npc.Parent.Position - npc.Position):Resized((npc.Parent.Position:Distance(npc.Position)-30)*0.15)
end
if npc.Parent ~= nil and npc.SubType == 82 and npc.SpawnerEntity.SpawnerEntity ~= nil and npc.SpawnerEntity.SpawnerEntity.Position:Distance(npc.Position) <= 65 and not (npc:GetSprite():IsPlaying("Walk02") or npc.SpawnerEntity.SpawnerEntity:GetSprite():IsPlaying("Walk02")) then
npc:AddVelocity((npc.SpawnerEntity.SpawnerEntity.Position - npc.Position):Normalized()*-1.3)
npc.SpawnerEntity.SpawnerEntity:AddVelocity((npc.Position - npc.SpawnerEntity.SpawnerEntity.Position):Normalized()*-1.3)
end
if npc.Parent ~= nil and npc.Parent:GetSprite():IsPlaying("Pant") then
npc.SpriteOffset = Vector(0,math.sin(npc.FrameCount*0.4)*1)
if npc.Parent.Position:Distance(npc.Position) <= 38 then
npc.Velocity = npc.Velocity * 0.7
end
end
if npc.ProjectileCooldown >= 5 then
npc.ProjectileCooldown = 4
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.035
params.HeightModifier = -10
params.Variant = 4
params.BulletFlags = ProjectileFlags.SMART
params.HomingStrength = 0.5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:PlaySound(318, 1, 0, false, 1)
end
end
if npc.Variant == 12 and npc.SubType == 12 then
if npc.StateFrame <= 200 and Eterepernalrng:RandomInt(200) == 50 then
npc.StateFrame = 201
end
end
if npc.SubType == 88 then
if npc.Variant <= 2 and npc:CollidesWithGrid() then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if math.abs((npc.Position - grid.Position):Length()) < 46 and (grid:GetType() == GridEntityType.GRID_ROCK or grid:GetType() == GridEntityType.GRID_ROCKB or grid:GetType() == GridEntityType.GRID_ROCKT or grid:GetType() == GridEntityType.GRID_ROCK_BOMB or grid:GetType() == GridEntityType.GRID_ROCK_ALT) then
grid:Destroy(true)
end
end
end
end
end
if npc:IsDead() and npc.Variant == 10 and npc.SubType == 82 then
local params = ProjectileParams()
params.Variant = 12
params.FallingAccelModifier = -0.05
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(13), 0, params)
end
end
if npc.Variant == 12 and npc.SubType == 12 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
if npc:IsDead() and ((EterepClassicEnemiesPatterns == 1 and npc.Variant == 2 and npc.SubType == 0) or (npc.Variant == 2 and npc.SubType == 88) or (EterepClassicEnemiesPatterns == 1 and npc.Variant == 12 and npc.SubType == 0) or (npc.Variant == 12 and npc.SubType == 12)) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(13), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGemini, 79)

function mod:EterepMoterDeath(npc)
if EterepClassicEnemiesPatterns == 1 and npc.FrameCount >= 20 and math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) > 90 then
npc.Velocity = npc.Velocity * 1.075
end
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local fly1 = Isaac.Spawn(18, 0, 77, npc.Position-Vector(0,20), Vector(0,0), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly2 = Isaac.Spawn(18, 0, 77, npc.Position-Vector(0,-20), Vector(0,0), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly3 = Isaac.Spawn(18, 0, 77, npc.Position-Vector(20,0), Vector(0,0), npc)
fly3:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly4 = Isaac.Spawn(18, 0, 77, npc.Position-Vector(-20,0), Vector(0,0), npc)
fly4:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMoterDeath, 80)

function mod:EterepFallen(npc)
if npc.SubType == 88 then
if (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("Shoot2")) and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("Shoot2")) and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
if npc.Variant == 0 and npc.SubType == 77 then
if npc.State == 9 and npc.SpawnerType == 84 then
npc.State = 8
npc.StateFrame = 0
SFXManager():Stop(122)
end
if npc.State == 9 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 160 and Eterepernalrng:RandomInt(95)+1 == 1 then
npc.State = 8
npc.StateFrame = 0
end
if npc.State == 13 then
npc:Kill()
end
end
if (EterepClassicEnemiesPatterns == 1 and npc.Variant == 1 and npc.SubType == 0) or (npc.Variant == 1 and npc.SubType == 88) then
if npc.SubType == 0 and npc.FrameCount <= 1 then
npc:GetSprite():Load("gfx/Reworked krampus.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear", true)
end
if npc.State == 11 then
npc.State = 10
npc:GetSprite():Play("Attack2", true)
end
if npc:GetSprite():IsFinished("Attack2") then
npc.State = 1
end
if npc.State == 10 and npc:GetSprite():IsEventTriggered("NewShoot") then
for i = 1,4 do
EntityLaser.ShootAngle(1, npc.Position+Vector(0,-3), 90*i, 27, Vector(0,-18), npc)
end
end
end
if npc.State == 13 and npc.StateFrame == 24 and npc.Variant == 0 and npc.SubType == 88 and npc:Exists() then
local fallen1 = Isaac.Spawn(81, 0, 77, npc.Position-Vector(0,10), Vector(0,0), npc)
fallen1.HitPoints = fallen1.MaxHitPoints * 0.7
local fallen2 = Isaac.Spawn(81, 0, 77, npc.Position-Vector(-10,0), Vector(0,0), npc)
fallen2.HitPoints = fallen2.MaxHitPoints * 0.7
local fallen3 = Isaac.Spawn(81, 0, 77, npc.Position-Vector(10,0), Vector(0,0), npc)
fallen3.HitPoints = fallen3.MaxHitPoints * 0.7
npc:PlaySound(265, 1, 0, false, 1)
npc:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFallen, 81)

function mod:EterepHeadlessHorseman(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc.State == 8 and npc.StateFrame == 8 then
local params = ProjectileParams()
params.HeightModifier = -8
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(10), 0, params)
end
npc.StateFrame = 10
npc:PlaySound(SoundEffect.SOUND_HEARTOUT, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHeadlessHorseman, 82)

function mod:EterepHeadlessHorsemanHead(npc)
if npc.Variant == 0 and npc.SubType == 83 and npc.MaxHitPoints <= 8000 then
if npc.Position.Y <= 120 then
npc.Velocity = npc.Velocity + Vector(0,1)
end
if npc.Position.Y >= 350 then
npc.Velocity = npc.Velocity + Vector(0,-1)
end
if npc:GetSprite():IsFinished("Attack") then
npc.State = 4
end
if npc.State == 9 and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc.State == 9 and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.33
params.FallingSpeedModifier = -25
params.BulletFlags = ProjectileFlags.ACCELERATE
params.Acceleration = 0.985
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,17 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(0):Resized(15.76+-1.75*i), 0, params)
end
npc:PlaySound(666, 1, 0, false, 1)
end
if npc.State == 9 and npc.StateFrame == 12 then
npc.StateFrame = 0
end
if npc.State == 8 then
npc:GetSprite():Play("Attack", true)
npc.State = 9
npc.StateFrame = 0
SFXManager():Stop(119)
end
end
if npc.Variant == 0 and npc.SubType == 88 and npc.MaxHitPoints <= 8000 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
if npc.State == 9 and npc.StateFrame >= 12 and npc.StateFrame <= 28 and npc:GetPlayerTarget().Position:Distance(npc.Position) >= 250 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(15), 0, params)
end
if npc.State == 9 and npc.StateFrame >= 12 and npc.StateFrame <= 28 and npc:GetPlayerTarget().Position:Distance(npc.Position) < 250 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*(25-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.1),npc:GetPlayerTarget().Velocity.Y*(25-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.1)) - npc.Position):GetAngleDegrees()):Resized(15), 0, params)
end
if npc.State == 9 and npc.StateFrame == 12 then
npc:PlaySound(horseshoot, 1, 0, false, 1)
npc.StateFrame = 14
end
if npc.FrameCount % 6 == 0 and npc.HitPoints < npc.MaxHitPoints * 0.5 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 39
end
if npc.FrameCount % 2 == 0 and npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.State == 8 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 39
end
end
if npc.Variant == 0 and npc.SubType == 89 then
if npc.FrameCount % 2 == 0 and npc.State == 8 and Eterepernalrng:RandomInt(2)+1 == 1 then
local creep = Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 105
end
if npc.FrameCount % 6 == 0 then
local creep = Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 105
end
if npc:GetSprite():IsEventTriggered("ChangeHeadI") then
npc.StateFrame = 3
end
if npc:GetSprite():IsEventTriggered("ChangeHeadI") then
npc.I1 = 1
end
if npc.State ~= 8 and npc.I1 ~= 0 then
npc.I1 = 0
end
end
if npc.Variant == 0 and ((npc.SubType == 0 and EterepClassicEnemiesPatterns == 1) or npc.SubType == 83 or npc.SubType == 88 or npc.SubType == 89) and npc:GetSprite():IsPlaying("Charge Shake") and npc.MaxHitPoints <= 8000 then
if npc:GetSprite().FlipX then
npc.Velocity = Vector(-25, 0)
end
if not npc:GetSprite().FlipX then
npc.Velocity = Vector(25, 0)
end
if npc:GetSprite().FlipX and (npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 88 or npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 64) then
npc.Position = npc.Position + Vector(-101, 0)
end
if not npc:GetSprite().FlipX and (npc.Position.X < Game():GetRoom():GetTopLeftPos().X - 88 or npc.Position.X > Game():GetRoom():GetBottomRightPos().X + 64) then
npc.Position = npc.Position + Vector(101, 0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHeadlessHorsemanHead, 83)

function mod:EterepSatan(npc)
if npc.SubType == 88 then
if npc.Variant == 0 then
local params = ProjectileParams()
params.Scale = 1.4
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():GetFrame() == 55 then
npc.State = 4
npc:GetSprite():Play("Walk", true)
end
if (npc:GetSprite():IsPlaying("Attack01") or npc:GetSprite():IsPlaying("Attack03")) and npc.State ~= 10 and Game():GetRoom():GetBottomRightPos().X - npc:GetPlayerTarget().Position.X >= 150 and npc:GetPlayerTarget().Position.X - Game():GetRoom():GetTopLeftPos().X >= 150 then
npc.Velocity = npc.Velocity * 1 + (npc:GetPlayerTarget().Position - npc.Position):Resized(0.65)
npc.TargetPosition = npc.Position
end
if (npc:GetSprite():IsPlaying("Attack01") or npc:GetSprite():IsPlaying("Attack03")) and npc.State ~= 10 and Game():GetRoom():GetBottomRightPos().X - npc:GetPlayerTarget().Position.X <= 150 then
npc.Velocity = npc.Velocity * 1 + (Vector(Game():GetRoom():GetBottomRightPos().X-128,npc:GetPlayerTarget().Position.Y) - npc.Position):Resized(0.65)
npc.TargetPosition = npc.Position
end
if (npc:GetSprite():IsPlaying("Attack01") or npc:GetSprite():IsPlaying("Attack03")) and npc.State ~= 10 and npc:GetPlayerTarget().Position.X - Game():GetRoom():GetTopLeftPos().X <= 150 then
npc.Velocity = npc.Velocity * 1 + (Vector(Game():GetRoom():GetTopLeftPos().X+128,npc:GetPlayerTarget().Position.Y) - npc.Position):Resized(0.65)
npc.TargetPosition = npc.Position
end
if npc.TargetPosition:Distance(npc.Position) > 100 then
npc.TargetPosition = npc.Position
end
if npc:GetSprite():IsPlaying("Attack02") and npc:GetSprite():IsEventTriggered("NewShoot") then
local brim = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-18), 90, 15, Vector(0,-72), npc)
brim:GetSprite().Scale = Vector(0,0)
brim:SetActiveRotation(0, 99999, 2)
brim.DepthOffset = 30
local brim = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-18), 90, 15, Vector(0,-72), npc)
brim:GetSprite().Scale = Vector(0,0)
brim:SetActiveRotation(0, 99999, -2)
brim.DepthOffset = 30
SFXManager():Stop(5)
npc:PlaySound(211, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack03") and npc:GetSprite():GetFrame() == 17 and npc.State == 10 then
local brim = EntityLaser.ShootAngle(1, npc.Position+Vector(-110,-30), 140, 15, Vector(0,-72), npc)
brim:GetSprite().Scale = Vector(0,0)
brim:SetActiveRotation(0, 99999, -2)
brim.DepthOffset = 50
local brim = EntityLaser.ShootAngle(1, npc.Position+Vector(110,-30), 40, 15, Vector(0,-72), npc)
brim:GetSprite().Scale = Vector(0,0)
brim:SetActiveRotation(0, 99999, 2)
brim.DepthOffset = 50
npc:PlaySound(211, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack03") and npc:GetSprite():IsEventTriggered("NewShoot") and npc.State == 11 then
local satanangle = Eterepernalrng:RandomInt(21)-20
params.FallingAccelModifier = -0.05
params.DepthOffset = 50
for i = 1,8 do
npc:FireProjectiles(npc.Position+Vector(105,-43), Vector.FromAngle(30*i+240+satanangle):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position+Vector(-105,-43), Vector.FromAngle(30*i+40+-satanangle):Resized(8.5), 0, params)
end
npc:PlaySound(245, 1, 0, false, 1)
end
end
if npc.Variant == 10 then
if npc:GetSprite():IsEventTriggered("Stomp") then
local params = ProjectileParams()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc.FrameCount % 482 == 161 and #Isaac.FindByType(81, 0, 77, false, true) == 0 then
Isaac.Spawn(81, 0, 77, Vector(Eterepernalrng:RandomInt(401)+150,Eterepernalrng:RandomInt(211)+150), Vector(0,0), npc)
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSatan, 84)

function mod:EterepKeeper(npc)
if npc.Variant == 0 and npc.SubType == 0 and npc.Size ~= 14 and npc.FrameCount <= 1 and #Isaac.FindByType(50, 0, 80, false, true) <= 0 and EterepUltraGreed == true then
local morphintogreed = Eterepernalrng:RandomInt(4)+1
if morphintogreed == 1 then
npc:Remove()
Isaac.Spawn(50, 0, 80, npc.Position, Vector(0,0), npc)
end
npc.Size = 14
end
if npc.Variant == 0 and npc.SubType == 0 and npc.Size ~= 14 and npc.FrameCount <= 1 and #Isaac.FindByType(86, 0, 85, false, true) <= 0 and EterepUltraGreed == true then
local morphintoeternalkeeper = Eterepernalrng:RandomInt(4)+1
if morphintoeternalkeeper == 1 then
npc:Remove()
Isaac.Spawn(86, 0, 85, npc.Position, Vector(0,0), npc)
end
npc.Size = 14
end
if npc.Variant == 0 and npc.SubType == 85 then
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local keeperattack = Eterepernalrng:RandomInt(3)+1
if npc.FrameCount == 49 then
npc:GetSprite():Play("JumpDown", true)
end
if npc.FrameCount >= 50 and not npc:GetSprite():IsPlaying("ShootDown") and not npc:GetSprite():IsPlaying("JumpDown") and not npc:GetSprite():IsFinished("JumpDown") and not npc:GetSprite():IsFinished("ShootDown") then
npc:GetSprite():Play("JumpDown", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) >= 190 and npc:GetSprite():IsFinished("JumpDown") then
npc:GetSprite():Play("JumpDown", true)
end
if keeperattack <= 2 and npc:GetPlayerTarget().Position:Distance(npc.Position) < 190 and (npc:GetSprite():IsFinished("JumpDown") or npc:GetSprite():IsFinished("ShootDown")) then
npc:GetSprite():Play("ShootDown", true)
end
if keeperattack == 3 and npc:GetPlayerTarget().Position:Distance(npc.Position) < 190 and (npc:GetSprite():IsFinished("JumpDown") or npc:GetSprite():IsFinished("ShootDown")) then
npc:GetSprite():Play("JumpDown", true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) >= 190 and npc:GetSprite():IsFinished("ShootDown") then
npc:GetSprite():Play("JumpDown", true)
end
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():GetFrame() == 4 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():GetFrame() == 17 then
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
if (npc:GetSprite():IsPlaying("JumpDown") or npc:GetSprite():IsPlaying("ShootDown")) and npc:GetSprite():IsEventTriggered("NewShoot1") then
local spawn = Isaac.Spawn(927, 3010, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:PlaySound(178, 1, 0, false, 1)
if npc:GetSprite():IsPlaying("JumpDown") then
npc:PlaySound(69, 1, 0, false, 1)
end
end
if npc:GetSprite():IsPlaying("ShootDown") and npc:GetSprite():IsEventTriggered("NewShoot2") then
local spawn = Isaac.Spawn(927, 3011, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepKeeper, 86)

function mod:EterepGurgle(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 65
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Scale = 3
params.FallingSpeedModifier = -24
params.BulletFlags = ProjectileFlags.EXPLODE | ProjectileFlags.ACID_GREEN | ProjectileFlags.SMART
params.HomingStrength = 0
params.FallingAccelModifier = 0.25
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.FrameCount % 25 == 0 and #Isaac.FindByType(33, 10, -1, false, true) <= 12 then
Isaac.Spawn(33, 10, 0, npc.Position, Vector(0,0), npc)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Scale = 3
params.FallingSpeedModifier = -24
params.BulletFlags = ProjectileFlags.SMART | ProjectileFlags.FIRE_WAVE | ProjectileFlags.FIRE_WAVE_X
params.HomingStrength = 0
params.Variant = 4
params.FallingAccelModifier = 0.25
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
end
end
if npc.State ~= 8 and npc.FrameCount == 40 and #Isaac.FindByType(906, 0, 84, false, true) >= 1 then
npc.State = 8
npc:GetSprite():Play("Attack", true)
if npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
if npc.Position.X < npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGurgle, 87)

function mod:EterepGurgleDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local splasher = Isaac.Spawn(238, 0, 85, npc.Position, Vector(0,0), npc)
splasher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepGurgleDeath, 87)

function mod:EterepWalkingBoil(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 1.2
for i = 1,10 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(126)+15) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
end
if npc.Variant == 1 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.6
params.BulletFlags = ProjectileFlags.EXPLODE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
for i = 1,2 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(165)+75) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
end
if npc.Variant == 2 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Shoot") and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
if npc:GetSprite():IsEventTriggered("Shoot") and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepWalkingBoil, 88)

function mod:EterepButtlicker(npc)
if npc.Variant == 0 and npc.Parent ~= nil and npc.Parent.Parent == nil and npc.FrameCount >= 23 and npc.Parent.SubType == 85 then
npc.Parent = nil
end
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 and npc.I2 ~= 10 then
npc.MaxHitPoints = npc.MaxHitPoints + #Isaac.FindByType(89, -1, -1, false, true) * 8 - 8
npc.HitPoints = npc.MaxHitPoints
npc.I2 = 10
end
if npc.Parent == nil and npc.FrameCount >= 25 then
npc.State = 50
EterepEnemyChasePlayer(0.88, npc, 0.86, 75)
if npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() < -135 then
npc:GetSprite():Play("WalkHori",false)
if not npc:GetSprite().FlipX then
npc:GetSprite().FlipX = true
end
end
if npc.Velocity:GetAngleDegrees() >= -135 and npc.Velocity:GetAngleDegrees() < -45 then
npc:GetSprite():Play("WalkUp",false)
npc:GetSprite():LoadGraphics()
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= -45 and npc.Velocity:GetAngleDegrees() < 45 then
npc:GetSprite():Play("WalkHori",false)
npc:GetSprite():LoadGraphics()
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= 45 and npc.Velocity:GetAngleDegrees() < 135 then
npc:GetSprite():Play("WalkDown",false)
npc:GetSprite():LoadGraphics()
if npc:GetSprite().FlipX then
npc:GetSprite().FlipX = false
end
end
if npc.Velocity:GetAngleDegrees() >= 135 and npc.Velocity:GetAngleDegrees() <= 180 then
npc:GetSprite():Play("WalkHori",false)
if not npc:GetSprite().FlipX then
npc:GetSprite().FlipX = true
end
end
end
end
if npc.Variant == 0 and (npc.SubType == 81 or npc.SubType == 85 or npc.SubType == 89) and npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 66
end
if npc.Variant == 0 and (npc.SubType == 81 or npc.SubType == 89) then
npc.Velocity = npc.Velocity * 0.91
npc.StateFrame = npc.StateFrame + 1
if npc.FrameCount <= 3 then
npc.StateFrame = Eterepernalrng:RandomInt(301)
end
if npc.FrameCount <= 30 then
npc.Parent = nil
npc.Size = 19
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.SubType == 89 and npc.SpawnerVariant == 2 and ((npc.FrameCount % 70 == 64 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 35 == 32 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(3)+1 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.6
for i = 1, 3 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(61)+40)*0.1), 0, params)
end
end
if npc.SubType == 89 and npc.StateFrame >= 800 and npc.SpawnerVariant == 0 and npc:Exists() and #Isaac.FindByType(19, 0, -1, false, true) <= 2 then
local larry1 = Isaac.Spawn(19, 0, 89, npc.Position, Vector(0,0), npc)
larry1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local larry2 = Isaac.Spawn(19, 0, 89, npc.Position, Vector(0,0), npc)
larry2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:Remove()
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.SubType == 89 and npc.StateFrame >= 800 and npc.SpawnerVariant == 2 and npc:Exists() and #Isaac.FindByType(19, 2, -1, false, true) <= 2 then
local larry1 = Isaac.Spawn(19, 2, 89, npc.Position, Vector(0,0), npc)
larry1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
larry1.Mass = 102
local larry2 = Isaac.Spawn(19, 2, 89, npc.Position, Vector(0,0), npc)
larry2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
larry2.Mass = 102
npc:Remove()
npc:PlaySound(265, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepButtlicker, 89)

function mod:EterepHanger(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local spawn = Isaac.Spawn(927, 3012, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:PlaySound(178, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHanger, 90)

function mod:EterepSwarmer(npc)
if EterepClassicEnemiesPatterns == 1 and npc.Variant == 0 and npc.SubType == 0 and npc.FrameCount % 22 == 11 and Eterepernalrng:RandomInt(12)+1 == 1 and #Isaac.FindByType(18, -1, -1, false, true) <= 5 then
local fly = Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount % 22 == 11 and Eterepernalrng:RandomInt(4)+1 == 1 and #Isaac.FindByType(18, -1, -1, false, true) <= 5 then
local fly = Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSwarmer, 91)

function mod:EterepSwarmerDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
for i = 1,3 do
local swarmer = Isaac.Spawn(91, 0, 77, npc.Position-Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector(0,0), npc)
swarmer:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepSwarmerDeath, 91)

function mod:EterepHeart(npc)
if npc.Variant == 0 and npc.SubType == 77 or npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
return true
end
if npc:IsDead() then
local params = ProjectileParams()
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
end
end
if npc.Variant == 1 and npc.SubType == 1 and npc.FrameCount <= 1 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4)) then
npc:Morph(npc.Type, npc.Variant, npc.SubType, -1)
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mask and half heart.png")
npc:GetSprite():LoadGraphics()
npc.MaxHitPoints = 80
npc.HitPoints = 80
npc.Mass = 50
npc.Scale = 1.25
npc.Size = 17
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 1 and npc.SubType == 0 and npc.Parent ~= nil and npc.Parent.Size == 17 and npc.Size ~= 17 then
npc:Morph(npc.Type, npc.Variant, npc.SubType, -1)
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mask and half heart.png")
npc:GetSprite():LoadGraphics()
npc.MaxHitPoints = 80
npc.HitPoints = 80
npc.Mass = 50
npc.Scale = 1.25
npc.Size = 17
end
if npc.Variant == 1 and (npc.Mass == 50 or npc.Mass == 51) then
if npc:GetData().Etereternaliseternal ~= 1 then
npc:GetData().Etereternaliseternal = 1
end
if npc:IsDead() and npc.Parent ~= nil then
npc.Parent:Remove()
end
if npc.State == 8 then
npc:Kill()
end
if npc.Parent ~= nil and npc.FrameCount % 75 == 70 then
npc.Mass = 51
npc.Parent.Mass = 51
end
if npc.Mass == 51 and npc.State == 4 then
npc.State = 9
npc:GetSprite():Play("HeartAttack", true)
end
if npc:GetSprite():IsPlaying("HeartAttack") and npc:GetSprite():GetFrame() == 2 then
npc.Mass = 51
end
if npc:GetSprite():IsPlaying("HeartAttack") and npc:GetSprite():GetFrame() == 13 then
Eterepspecialhalfheartattack = true
end
if npc:GetSprite():IsPlaying("HeartAttack") and npc:GetSprite():GetFrame() == 15 then
Eterepspecialhalfheartattack = false
end
if npc:GetSprite():IsPlaying("HeartAttack") and npc:GetSprite():GetFrame() == 20 then
npc.State = 4
npc:GetSprite():Play("Idle", true)
npc.Mass = 50
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepHeart, 92)

function mod:EterepMask(npc)
if npc.Variant == 0 and npc.Parent ~= nil and npc.Parent.Type == 92 and npc.Parent.SubType == 85 then
if npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_heart.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.25
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
if (npc.Parent.MaxHitPoints == 80 and npc.Parent.HitPoints <= 60) or (npc.Parent.MaxHitPoints == 81 and npc.Parent.HitPoints <= 40) or (npc.Parent.MaxHitPoints == 82 and npc.Parent.HitPoints <= 20) then
npc.Position = npc.Parent.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Parent.Position):GetAngleDegrees()):Resized(40)
npc.I1 = 0
npc.Parent.MaxHitPoints = npc.Parent.MaxHitPoints + 1
npc:PlaySound(215, 1, 0, false, 1)
end
end
if npc.Variant == 1 and npc.Parent ~= nil and npc.Parent.Type == 92 and npc.Parent.Mass == 50 and npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mask and half heart.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.25
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMask, 93)

function mod:EterepMaskReflectTears(npc, npc2)
if npc.Variant <= 1 and npc.Parent ~= nil and npc.Parent.Type == 92 and (npc.Parent.SubType == 85 or (npc.Parent.Mass == 50 or npc.Parent.Mass == 51)) and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepMaskReflectTears, 93)

function mod:EterepBigSpider(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 87 then
for i = 1,8 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBigSpider, 94)

function mod:EterepMaskofInfamy(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 4 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 170 and npc.State ~= 8 and npc.FrameCount >= 15 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.State = 8
npc:GetSprite():Play("HeartAttack", true)
end
if npc:GetSprite():IsEventTriggered("Shoot") then
local heartcanattack = Eterepernalrng:RandomInt(7)+1
if heartcanattack >= 1 and heartcanattack <= 2 then
local params = ProjectileParams()
params.Variant = 4
params.BulletFlags = ProjectileFlags.RED_CREEP
params.Scale = 1.8
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(12), 0, params)
end
end
if heartcanattack >= 3 and heartcanattack <= 5 then
local params = ProjectileParams()
params.Variant = 4
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(11), 0, params)
end
end
if heartcanattack == 6 then
Isaac.Spawn(24, 0, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
if heartcanattack == 7 then
Isaac.Spawn(24, 1, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:IsDead() then
Isaac.Spawn(92, 0, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
Isaac.Spawn(92, 0, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMaskofInfamy, 98)

function mod:EterepGurdyJr(npc)
if npc.Variant == 0 and npc.SubType == 90 then
if npc:CollidesWithGrid() then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if math.abs((npc.Position - grid.Position):Length()) < 75 and (grid:GetType() == GridEntityType.GRID_ROCK or grid:GetType() == GridEntityType.GRID_ROCKB or grid:GetType() == GridEntityType.GRID_ROCKT or grid:GetType() == GridEntityType.GRID_ROCK_BOMB or grid:GetType() == GridEntityType.GRID_ROCK_ALT) then
grid:Destroy(true)
end
end
end
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 10 then
Isaac.Spawn(14, 0, 85, npc.Position+Vector(-25,-40), Vector(0,0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 9 then
local params = ProjectileParams()
params.Variant = 4
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(12), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
end
if npc.State == 8 and npc.I1 >= 1 and npc.StateFrame >= 244 then
npc.Velocity = npc.Velocity + (npc:GetPlayerTarget().Position - npc.Position):Resized(0.6)
npc.Velocity = npc.Velocity:Resized(6)
end
if npc.State == 8 and npc.I1 >= 1 and npc.StateFrame <= 243 and npc.StateFrame >= 205 then
npc.Velocity = npc.Velocity + (npc:GetPlayerTarget().Position - npc.Position):Resized(0.6)
npc.Velocity = npc.Velocity:Resized((-npc.StateFrame+268)*0.25)
npc.StateFrame = npc.StateFrame + 1
end
if npc.State == 8 and npc.I1 and npc.StateFrame <= 200 then
npc.StateFrame = 205
end
if npc.State == 6 then
npc.State = 9
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGurdyJr, 99)

function mod:Eterepinkwidow(npc)
if npc.Variant == 0 and npc.SubType == 2 and npc.FrameCount <= 1 and EterepClassicEnemiesPatterns == 1 and Etereplacementernal == false then
npc:GetSprite():Load("gfx/e_pink widow.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear", true)
npc.Mass = 1011
end
if npc.Variant == 0 and npc.SubType == 2 and npc.Mass == 1011 then
local giantspiderattack = Eterepernalrng:RandomInt(4)+1
if npc.FrameCount <= 1 then
npc.Scale = 0.8
end
if npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Jump", true)
end
if npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector(0,0)
end
if (npc:GetSprite():IsFinished("Jump") or npc:GetSprite():IsFinished("Attack01") or npc:GetSprite():IsFinished("Attack02") or npc:GetSprite():IsFinished("Idle") or npc:GetSprite():IsFinished("Appear")) and (npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11)) then
npc:GetSprite():Play("Jump", true)
end
if npc:GetSprite():IsFinished("Idle") or npc:GetSprite():IsFinished("Jump") or npc:GetSprite():IsFinished("Attack02") or npc:GetSprite():IsFinished("Attack01") then
if giantspiderattack == 1 then
npc:GetSprite():Play("Jump", true)
end
if giantspiderattack == 2 then
npc:GetSprite():Play("Attack01", true)
end
if giantspiderattack == 3 and #Isaac.FindByType(18, -1, -1, false, true) <= 2 then
npc:GetSprite():Play("Attack02", true)
end
if giantspiderattack == 3 and #Isaac.FindByType(18, -1, -1, false, true) >= 3 then
npc:GetSprite():Play("Jump", true)
end
if giantspiderattack == 4 then
npc:GetSprite():Play("Idle", true)
end
end
if npc:GetSprite():IsPlaying("Jump") and (npc:GetSprite():GetFrame() <= 5 or npc:GetSprite():GetFrame() >= 14) then
npc.Velocity = npc.Velocity * 0.6
end
if not npc:GetSprite():IsPlaying("Jump") then
npc.Velocity = npc.Velocity * 0.6
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 6 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(14, 1, 0, false, 1)
npc.Velocity = (npc:GetPlayerTarget().Position - npc.Position):Normalized() * 13
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 13 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
Game():BombDamage(npc.Position, 25, 32, false, npc, 0, 0, false)
npc:PlaySound(48, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():IsEventTriggered("NewShoot") and #Isaac.FindByType(30, -1, -1, false, true) <= 1 then
local boil = Isaac.Spawn(30, 0, 0, npc.Position-Vector(0,-15), Vector(0,0), npc)
boil:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():IsEventTriggered("NewShoot") then
for i = 1,3 do
local creep = Isaac.Spawn(1000, 25, 0, npc.Position-Vector(Eterepernalrng:RandomInt(71)-35,Eterepernalrng:RandomInt(71)-35), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(3,3)
creep:ToEffect().Timeout = 160
end
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():GetFrame() >= 11 and npc:GetSprite():GetFrame() <= 19 then
npc:PlaySound(185, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack02") and npc:GetSprite():IsEventTriggered("NewShoot") then
local fly1 = Isaac.Spawn(18, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(4), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
if Isaac.CountEnemies() <= 5 then
for i = 1,Eterepernalrng:RandomInt(2)+1 do
local fly2 = Isaac.Spawn(18, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(4), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
npc:PlaySound(158, 1, 0, false, 1)
end
return true
end
if npc.Variant <= 1 and npc.SubType == 88 then
local giantspiderattack = Eterepernalrng:RandomInt(3)+1
if npc.FrameCount <= 1 then
npc.StateFrame = 0
end
if npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Jump", true)
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 8 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
if ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(14, 1, 0, false, 1)
end
if not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.Velocity = (npc:GetPlayerTarget().Position - npc.Position):Normalized() * 20
end
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 19 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
Game():BombDamage(npc.Position, 25, 45, false, npc, 0, 0, false)
npc:PlaySound(48, 1, 0, false, 1)
end
if npc.StateFrame <= 3 and npc:GetPlayerTarget().Position:Distance(npc.Position) >= 105 and npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 21 then
npc:GetSprite():Play("Jump", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsPlaying("Jump") and (npc:GetSprite():GetFrame() <= 8 or npc:GetSprite():GetFrame() >= 19) then
npc.Velocity = npc.Velocity * 0.6
end
if npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11) then
npc.Velocity = Vector(0,0)
end
if not npc:GetSprite():IsPlaying("Jump") then
npc.Velocity = npc.Velocity * 0.6
end
if (npc:GetSprite():IsFinished("Jump") or npc:GetSprite():IsFinished("Appear") or npc:GetSprite():IsFinished("Attack01") or npc:GetSprite():IsFinished("Attack02")) and (npc:HasEntityFlags(1<<9) or npc:HasEntityFlags(1<<11)) then
npc:GetSprite():Play("Jump", true)
end
if npc:GetSprite():IsFinished("Jump") or npc:GetSprite():IsFinished("Attack02") or npc:GetSprite():IsFinished("Attack01") then
npc.StateFrame = 0
if giantspiderattack == 1 then
npc:GetSprite():Play("Jump", true)
end
if giantspiderattack == 2 then
npc:GetSprite():Play("Attack01", true)
end
if giantspiderattack == 3 then
npc:GetSprite():Play("Attack02", true)
end
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():GetFrame() >= 15 and npc:GetSprite():GetFrame() <= 22 then
npc:PlaySound(185, 1, 0, false, 1)
end
if npc.Variant == 0 then
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
for i = 1,4 do
params.FallingAccelModifier = 0.08
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(11), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(30, 2, -1, false, true) <= 1 then
local boil = Isaac.Spawn(30, 2, 0, npc.Position-Vector(0,-15), Vector(0,0), npc)
boil:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():GetFrame() == 15 then
for i = 1,3 do
local creep = Isaac.Spawn(1000, 25, 0, npc.Position-Vector(Eterepernalrng:RandomInt(71)-35,Eterepernalrng:RandomInt(71)-35), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(3,3)
creep:ToEffect().Timeout = 160
end
end
if npc:GetSprite():IsPlaying("Attack02") and npc:GetSprite():IsEventTriggered("Shoot") then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
if Isaac.CountEnemies() <= 5 then
for i = 1,2 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
npc:PlaySound(158, 1, 0, false, 1)
end
if npc:IsDead() then
for i = 1,4 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
if npc.Variant == 1 then
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
for i = 1,8 do
params.FallingAccelModifier = 0.08
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(11), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack01") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Scale = 1.5
params.Color = Color(0.8,0.8,0.8,1,125,125,125)
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(14), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack02") and npc:GetSprite():IsEventTriggered("Shoot") then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
if Isaac.CountEnemies() <= 6 then
for i = 1,2 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
npc:PlaySound(158, 1, 0, false, 1)
end
if npc:IsDead() then
for i = 1,8 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.Eterepinkwidow, 100)

function mod:EterepDaddyLongLegs(npc)
if npc.Variant == 0 and npc.SubType == 80 and npc.State == 7 and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(7), 0, params)
end
end
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 4 and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.08
for i = 1,16 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(22.5*i):Resized(10), 0, params)
end
end
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(11), 0, params)
end
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,3 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Land") and npc.Variant == 1 and npc.SubType == 80 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
params.Variant = 3
params.Color = Color(0.8,0.8,0.8,2,125,125,125)
params.Scale = 1.3
for i = 1, 4 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(55)+20)*0.1), 0, params)
end
if Eterepernalrng:RandomInt(2)+1 == 1 and #Isaac.FindByType(30, -1, -1, false, true) <= 2 then
local boil = Isaac.Spawn(30, 2, 0, npc.Position, Vector(0,0), npc)
boil:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
boil.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
end
if npc.Variant == 1 and npc.SubType == 88 then
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Land") and npc.Variant == 1 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
params.Variant = 3
params.Color = Color(0.8,0.8,0.8,2,125,125,125)
params.Scale = 1.3
for i = 1, 8 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(70)+20)*0.1), 0, params)
end
if Eterepernalrng:RandomInt(2)+1 == 1 and #Isaac.FindByType(30, -1, -1, false, true) <= 2 then
local boil = Isaac.Spawn(30, 2, 0, npc.Position, Vector(0,0), npc)
boil:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
boil.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
end
if npc.State == 4 and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.08
params.Color = Color(0.8,0.8,0.8,2,125,125,125)
params.Scale = 1.75
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(14), 0, params)
end
end
if npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_triachnid.png")
npc:GetSprite():LoadGraphics()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDaddyLongLegs, 101)

function mod:EterepIsaac(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc.Mass == 1013 then
local params = ProjectileParams()
params.HeightModifier = -5
params.FallingAccelModifier = -0.05
if npc.State == 8 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
if npc.I1 ~= 27 then
npc.I1 = 27
end
end
if npc.State == 3 and npc.StateFrame ~= 0 then
npc.StateFrame = 0
end
if npc.State == 8 and npc.StateFrame % 6 == 4 and npc.StateFrame >= 27 and npc.StateFrame < 68 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(36)+1+EterepCustomAngle+36*i):Resized(10), 0, params)
end
end
if npc.FrameCount % 21 == 1 and npc.State == 3 then
for i = 1,Eterepernalrng:RandomInt(5)+6 do
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(110)+1) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(45)+343):Resized((Eterepernalrng:RandomInt(54)+57)*0.1), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Start") then
npc.CollisionDamage = 2
end
if npc:GetSprite():IsEventTriggered("Finish") then
npc.CollisionDamage = 1
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepIsaac, 102)

function mod:EterepIsaacTakeDamage(npc, damage, flags, damageSource, cooldown)
if (npc.Variant == 1 or npc.Variant == 2) and npc.SubType == 88 and npc.MaxHitPoints * 0.685 <= npc.HitPoints then
npc.CollisionDamage = 2
end
if (npc.Variant == 1 or npc.Variant == 2) and npc.SubType == 88 and npc.MaxHitPoints * 0.37 <= npc.HitPoints and npc.HitPoints < npc.MaxHitPoints * 0.685 and Eterepernalrng:RandomInt(2) == 1 then
npc.CollisionDamage = 2
end
if npc.Variant == 0 and npc.SubType == 88 and npc.MaxHitPoints * 0.745 <= npc.HitPoints then
npc.CollisionDamage = 2
end
if npc.Variant == 0 and npc.SubType == 88 and npc.MaxHitPoints * 0.49 <= npc.HitPoints and npc.HitPoints < npc.MaxHitPoints * 0.745 and Eterepernalrng:RandomInt(2) == 1 then
npc.CollisionDamage = 2
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepIsaacTakeDamage, 102)

function mod:EterepIsaacRework(npc)
if npc.Variant <= 2 and npc.SubType == 88 and npc.Mass ~= 1013 then
npc.StateFrame = npc.StateFrame + 1
npc.I1 = npc.I1 + 1
npc.I2 = npc.I2 + 1
npc:GetSprite().FlipX = false
npc.Velocity = Vector(0,0)
if npc.FrameCount <= 1 then
npc.State = 10
end
if npc.State == 10 then
npc:AnimWalkFrame("1Idle","1Idle",0)
end
if npc.State == 12 then
npc:AnimWalkFrame("2Idle","2Idle",0)
end
if npc.State == 15 then
npc:AnimWalkFrame("3Idle","3Idle",0)
end
if npc.Variant == 2 then
if (npc.State == 15 or npc.State == 25) and (npc.I1 == 190 or npc.I1 == 192 or npc.I1 == 194 or npc.I1 == 196 or npc.I1 == 198 or npc.I1 == 200 or npc.I1 >= 202) then
Isaac.Spawn(1000, 19, 0, Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false), Vector(0,0), npc)
if npc.I1 >= 202 then
npc.I1 = Eterepernalrng:RandomInt(140)
end
end
if (npc.State == 15 or npc.State == 25) and npc.I2 >= 220 then
if #Isaac.FindByType(297, 0, 0, false, true) <= 6 then
Isaac.Spawn(1000, 15, 0, npc.Position-Vector(-40,0), Vector(0,0), npc)
Isaac.Spawn(1000, 15, 0, npc.Position-Vector(40,0), Vector(0,0), npc)
Isaac.Spawn(1000, 15, 0, npc.Position-Vector(0,-40), Vector(0,0), npc)
Isaac.Spawn(1000, 15, 0, npc.Position-Vector(0,40), Vector(0,0), npc)
local baby1 = Isaac.Spawn(297, 0, 0, npc.Position-Vector(-40,0), Vector(0,0), npc)
baby1:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Hush Gaper Body.png")
baby1:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_Hush Gaper.png")
baby1:GetSprite():LoadGraphics()
local baby2 = Isaac.Spawn(297, 0, 0, npc.Position-Vector(40,0), Vector(0,0), npc)
baby2:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Hush Gaper Body.png")
baby2:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_Hush Gaper.png")
baby2:GetSprite():LoadGraphics()
local baby3 = Isaac.Spawn(297, 0, 0, npc.Position-Vector(0,-40), Vector(0,0), npc)
baby3:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Hush Gaper Body.png")
baby3:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_Hush Gaper.png")
baby3:GetSprite():LoadGraphics()
local baby4 = Isaac.Spawn(297, 0, 0, npc.Position-Vector(0,40), Vector(0,0), npc)
baby4:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Hush Gaper Body.png")
baby4:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_Hush Gaper.png")
baby4:GetSprite():LoadGraphics()
end
npc.I2 = Eterepernalrng:RandomInt(160)
end
if npc.State == 10 and ((npc.FrameCount % 38 == 24 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 19 == 12 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local Eterepisaacustomangle1 = Eterepernalrng:RandomInt(31)-15
local params = ProjectileParams()
params.Variant = 6
params.FallingAccelModifier = -0.09
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+18+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+36+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+54+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+72+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-18+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-36+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-54+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-72+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:PlaySound(267, 1, 0, false, 1)
end
if npc.State == 12 and npc.FrameCount % 19 == 12 and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 22
npc:GetSprite():Play("2Attack", false)
end
if npc:GetSprite():IsPlaying("2Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
params.Scale = 1.5
params.CurvingStrength = -0.02
if Eterepernalrng:RandomInt(2) == 1 then
params.CurvingStrength = 0.02
end
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1, 15 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+24*i):Resized(9), 0, params)
end
npc:PlaySound(268, 1, 0, false, 1)
end
if npc.State == 15 and npc.FrameCount % 19 == 12 and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 25
npc:GetSprite():Play("3Attack", false)
end
if npc:GetSprite():IsPlaying("3Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
params.Scale = 1.5
params.CurvingStrength = -0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
local paramsa = ProjectileParams()
paramsa.FallingAccelModifier = -0.1
paramsa.Variant = 4
paramsa.Scale = 1.5
paramsa.CurvingStrength = 0.02
paramsa.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1, 12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), 0, paramsa)
end
npc:PlaySound(isaacattack,2,0,false,1)
end
if npc.HitPoints < npc.MaxHitPoints * 0.685 and npc.State == 10 then
npc:GetSprite():Play("1StandUp", false)
npc.State = 11
end
if npc.HitPoints < npc.MaxHitPoints * 0.37 and npc.State == 12 then
npc:GetSprite():Play("2Evolve", false)
npc.State = 13
end
if npc:GetSprite():IsFinished("2Evolve") and npc.State == 13 then
npc:GetSprite():Play("3Appear", false)
npc.State = 14
npc.I1 = 0
npc.I2 = 0
end
if npc:GetSprite():IsFinished("3Appear") and npc.State == 14 then
npc.State = 15
end
if npc.MaxHitPoints * 0.37 <= npc.HitPoints and (npc.CollisionDamage == 2 or (npc.FrameCount % 34 == 20 and Eterepernalrng:RandomInt(2)+1) or (npc.FrameCount % 42 == 24 and Eterepernalrng:RandomInt(2)+1)) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
params.Variant = 6
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(85)+24) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(35)+343):Resized((Eterepernalrng:RandomInt(50)+55)*0.1), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
npc.CollisionDamage = 1
end
end
if npc.Variant == 1 then
if (npc.State == 15 or npc.State == 25) and (npc.I1 == 190 or npc.I1 == 194 or npc.I1 == 198 or npc.I1 >= 202) then
Isaac.Spawn(1000, 19, 0, Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false), Vector(0,0), npc)
if npc.I1 >= 202 then
npc.I1 = Eterepernalrng:RandomInt(140)
end
end
if (npc.State == 15 or npc.State == 25) and npc.I2 >= 220 then
if #Isaac.FindByType(38, 1, 77, false, true) <= 2 then
local baby1 = Isaac.Spawn(38, 1, 77, npc.Position-Vector(-40,0), Vector(1,0), npc)
baby1:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Bangelic baby.png")
baby1:GetSprite():LoadGraphics()
local baby2 = Isaac.Spawn(38, 1, 77, npc.Position-Vector(40,0), Vector(1,0), npc)
baby2:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Bangelic baby.png")
baby2:GetSprite():LoadGraphics()
end
npc.I2 = Eterepernalrng:RandomInt(160)
end
if npc.State == 10 and ((npc.FrameCount % 38 == 24 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 19 == 12 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local Eterepisaacustomangle1 = Eterepernalrng:RandomInt(31)-15
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.09
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+11+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+28+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+45+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+64+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-11+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-28+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-45+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-64+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
npc:PlaySound(267, 1, 0, false, 1)
end
if npc.State == 12 and npc.FrameCount % 19 == 12 and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 22
npc:GetSprite():Play("2Attack", false)
end
if npc:GetSprite():IsPlaying("2Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local Eterepisaacustomangle2 = Eterepernalrng:RandomInt(51)-25
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Scale = 1.5
params.BulletFlags = ProjectileFlags.SMART
params.HomingStrength = 0.65
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+21+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+41+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+59+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-21+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-41+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-59+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:PlaySound(268, 1, 0, false, 1)
end
if npc.State == 15 and npc.FrameCount % 19 == 12 and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 25
npc:GetSprite():Play("3Attack", false)
end
if npc:GetSprite():IsPlaying("3Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local Eterepisaacustomangle2 = Eterepernalrng:RandomInt(51)-25
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Scale = 1.5
params.BulletFlags = ProjectileFlags.SMART
params.HomingStrength = 0.65
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+9+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+27+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+45+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+63+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+81+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+99+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-9+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-27+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-45+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-63+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-81+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-99+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11.5), 0, params)
npc:PlaySound(isaacattack,2,0,false,1)
end
if npc.HitPoints < npc.MaxHitPoints * 0.685 and npc.State == 10 then
npc:GetSprite():Play("1StandUp", false)
npc.State = 11
end
if npc.HitPoints < npc.MaxHitPoints * 0.37 and npc.State == 12 then
npc:GetSprite():Play("2Evolve", false)
npc.State = 13
end
if npc:GetSprite():IsFinished("2Evolve") and npc.State == 13 then
npc:GetSprite():Play("3Appear", false)
npc.State = 14
npc.I1 = 0
npc.I2 = 0
end
if npc:GetSprite():IsFinished("3Appear") and npc.State == 14 then
npc.State = 15
end
if (npc.FrameCount % 29 == 24 or npc.FrameCount % 37 == 35) and Eterepernalrng:RandomInt(4) == 1 then
local fly = Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.FrameCount % 99 == 55 and npc.MaxHitPoints * 0.37 <= npc.HitPoints then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(41)+120) * 0.1
params.BulletFlags = ProjectileFlags.SMART
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(35)+343):Resized((Eterepernalrng:RandomInt(21)+67)*0.1), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.MaxHitPoints * 0.37 <= npc.HitPoints and (npc.CollisionDamage == 2 or (npc.FrameCount % 34 == 20 and Eterepernalrng:RandomInt(2)+1) or (npc.FrameCount % 42 == 24 and Eterepernalrng:RandomInt(2)+1)) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(85)+24) * 0.1
params.Variant = 4
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(35)+343):Resized((Eterepernalrng:RandomInt(31)+57)*0.1), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
npc.CollisionDamage = 1
end
end
if npc.Variant == 0 then
if (npc.State == 12 or npc.State == 22) and (npc.I1 == 190 or npc.I1 == 194 or npc.I1 == 198 or npc.I1 >= 202) then
Isaac.Spawn(1000, 19, 0, Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false), Vector(0,0), npc)
if npc.I1 >= 202 then
npc.I1 = Eterepernalrng:RandomInt(100)
end
end
if (npc.State == 12 or npc.State == 22) and npc.I2 >= 220 then
if #Isaac.FindByType(38, 1, 77, false, true) <= 2 then
Isaac.Spawn(38, 1, 77, npc.Position-Vector(-40,0), Vector(1,0), npc)
Isaac.Spawn(38, 1, 77, npc.Position-Vector(40,0), Vector(1,0), npc)
end
npc.I2 = Eterepernalrng:RandomInt(130)
end
if npc.State == 10 and ((npc.FrameCount % 48 == 24 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 24 == 12 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local Eterepisaacustomangle1 = Eterepernalrng:RandomInt(31)-15
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+30+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+60+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+90+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-30+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-60+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle1+-90+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10.5), 0, params)
npc:PlaySound(267, 1, 0, false, 1)
end
if npc.State == 12 and ((npc.FrameCount % 38 == 24 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 19 == 12 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(4)+1 == 1 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
npc.State = 22
npc:GetSprite():Play("2Attack", false)
end
if npc:GetSprite():IsPlaying("2Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local Eterepisaacustomangle2 = Eterepernalrng:RandomInt(51)-25
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.08
params.Scale = 1.5
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+37.5+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+12.5+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-12.5+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepisaacustomangle2+-37.5+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:PlaySound(268, 1, 0, false, 1)
end
if npc.HitPoints < npc.MaxHitPoints * 0.745 and npc.State == 10 then
npc:GetSprite():Play("1StandUp", false)
npc.State = 11
npc.I1 = 0
npc.I2 = 0
end
if npc.HitPoints < npc.MaxHitPoints * 0.49 and npc.State == 12 then
npc.I1 = 0
npc.I2 = 0
npc:Morph(102, 0, 88, -1)
npc.Scale = 1.25
npc.Mass = 1013
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:GetSprite():Load("gfx/e_isaacnormal.anm2",true)
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_isaac.png")
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("2Evolve", true)
end
if npc.CollisionDamage == 2 or (npc.FrameCount % 41 == 20 and Eterepernalrng:RandomInt(3)+1) or (npc.FrameCount % 56 == 44 and Eterepernalrng:RandomInt(2)+1) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(85)+24) * 0.1
params.Variant = 4
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(35)+343):Resized((Eterepernalrng:RandomInt(31)+57)*0.1), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
npc.CollisionDamage = 1
end
end
if npc:GetSprite():IsFinished("1StandUp") and npc.State == 11 then
npc.State = 12
end
if npc:GetSprite():IsFinished("2Attack") then
npc.State = 12
end
if npc:GetSprite():IsFinished("3Attack") then
npc.State = 15
end
if npc.StateFrame >= 130 then
if npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_NONE then
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false)
end
if npc.EntityCollisionClass == EntityCollisionClass.ENTCOLL_NONE then
Isaac.Spawn(1000, 15, 0, npc.Position, Vector(0,0), npc)
npc.Position = npc.TargetPosition
npc:PlaySound(215, 1, 0, false, 1)
npc.StateFrame = Eterepernalrng:RandomInt(50)+31
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if npc.TargetPosition:Distance(npc.Position) >= 100 and npc:GetPlayerTarget().Position:Distance(npc.TargetPosition) >= 215 and npc:GetPlayerTarget().Position:Distance(npc.TargetPosition) <= 425 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
end
if npc.FrameCount % 97 == 47 and npc.State == 10 then
npc:PlaySound(143, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("1StandUp") and npc:GetSprite():GetFrame() == 9 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(54, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("3Appear") and npc:GetSprite():GetFrame() == 1 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(266, 1, 0, false, 1)
end
if npc:IsDead() and npc:Exists() then
if npc.Variant == 2 then
npc:AddEntityFlags(EntityFlag.FLAG_DONT_COUNT_BOSS_HP)
local hush = Isaac.Spawn(407, 0, 83, Game():GetRoom():GetCenterPos()+Vector(0,-120), Vector(0,0), npc)
hush:GetSprite():Play("Appear", true)
hush.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYERONLY
npc.Variant = 0
MusicManager():Play(27, 0.1)
MusicManager():UpdateVolume()
end
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepIsaacRework, 102)

function mod:EterepMobileHost(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc:GetSprite():Play("Idle", true)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
EterepEnemyChasePlayer(0.42, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
end
if (npc:GetSprite():IsPlaying("Shoot") or npc:GetSprite():IsPlaying("FastShoot")) then
npc.Velocity = npc.Velocity * 0.7
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 20 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("Shoot", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)
end
if npc.StateFrame == 10 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("FastShoot", true)
npc.StateFrame = 11
if Eterepernalrng:RandomInt(4)+1 == 2 then
npc.StateFrame = 5
end
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 10) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 10)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 33
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 52) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 18)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():IsEventTriggered("canshoot2") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():IsEventTriggered("Close") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
params.Variant = 9
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("canshoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.HeightModifier = 5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+10):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-10):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(7.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMobileHost, 204)

function mod:EterepMobileHostTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 0 and npc.SubType == 85 and npc.Mass == 32 and flags ~= DamageFlag.DAMAGE_POISON_BURN then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepMobileHostTakeDamage, 204)

function mod:EterepMobileHostDeath(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc.Mass == 32 and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepMobileHostDeath, 204)

function mod:EterepNest(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 6 and npc:GetSprite():GetOverlayFrame() == 4 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
local fly = Isaac.Spawn(85, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+40)*0.1), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.Mass = 6
npc.Mass = 6
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 6 and npc:GetSprite():GetOverlayFrame() == 4 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) then
local fly = Isaac.Spawn(85, 0, 0, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(41)+40)*0.1), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.Mass = 6
npc.Mass = 6
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc.Mass ~= 7 then
npc.Mass = 7
end
if npc:IsDead() then
local spider = Isaac.Spawn(29, 1, 85, npc.Position, Vector(0,0), npc)
spider.MaxHitPoints = 25
spider.HitPoints = 25
spider:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepNest, 205)

function mod:EterepBabyLongLegs(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Lay") and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
Isaac.Spawn(85, 0, 0, npc.Position, Vector(0,0), npc)
end
if npc:GetSprite():IsEventTriggered("Lay") and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) then
Isaac.Spawn(85, 0, 0, npc.Position, Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBabyLongLegs, 206)

function mod:EterepCrazyLongLegs(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1, 19 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(106)+7) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.Variant == 1 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1, 10 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(106)+7) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCrazyLongLegs, 207)

function mod:EterepFatty(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,3 do
Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
end
if npc.Variant == 1 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.06
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), 0, params)
end
end
if npc.Variant == 1 and npc.SubType == 85 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 300 and npc.StateFrame <= 90 and npc.State == 4 then
npc.StateFrame = 100
end
if npc.Variant == 2 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,3 do
Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFatty, 208)

function mod:EterepFattyDeath(npc)
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
local blubber = Isaac.Spawn(210, 0, 85, npc.Position, Vector(0,0), npc)
blubber:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFattyDeath, 208)

function mod:EterepFatSack(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Splash") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.06
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(11.7), 0, params)
end
end
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local blubber = Isaac.Spawn(210, 0, 85, npc.Position, Vector(0,0), npc)
blubber:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFatSack, 209)

function mod:EterepBlubber(npc)
if npc.Variant == 0 and npc.SubType == 85 then
EterepEnemyChasePlayer(0.38, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if ((npc.FrameCount % 132 == 80 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 68 == 40 and not npc:HasEntityFlags(1<<7))) then
npc:PlaySound(3, 1, 0, false, 1)
end
if ((npc.FrameCount % 72 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 36 == 10 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.HeightModifier = -10
params.FallingAccelModifier = 1
for i = 1, Eterepernalrng:RandomInt(7)+8 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(126)+15) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(61)+40)*0.1), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:IsDead() then
local fat = Isaac.Spawn(211, 0, 85, npc.Position, Vector(0,0), npc)
fat:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBlubber, 210)

function mod:EterepHalfSack(npc)
if npc.Variant == 0 and npc.SubType == 85 then
EterepEnemyChasePlayer(0.38, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if ((npc.FrameCount % 132 == 80 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 68 == 40 and not npc:HasEntityFlags(1<<7))) then
npc:PlaySound(3, 1, 0, false, 1)
end
if npc.FrameCount % 6 == 3 then
Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepHalfSack, 211)

function mod:EterepDeathHead(npc)
if npc.Variant == 0 and npc.SubType == 86 and npc.FrameCount % 334 == 160 then
Isaac.Spawn(260, 10, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
Isaac.Spawn(1000, 26, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
end
if npc.FrameCount % 334 == 160 then
EntityNPC.ThrowSpider(npc.Position, npc, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), true, 0.0)
npc:PlaySound(265, 1, 0, false, 1)
end
end
if npc.Variant == 2 and npc.SubType == 86 and npc.FrameCount % 500 == 160 then
Isaac.Spawn(260, 10, 85, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.Variant == 4 and npc.SubType == 86 then
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 160 and npc.State == 4 then
npc.State = 8
npc:GetSprite():Play("Attack", true)
end

if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 25 and npc.FrameCount >= 48 then
for i = 1,12 do
local spawn = Isaac.Spawn(1000, 147, 0, npc.Position+Vector.FromAngle(30*i):Resized(120), Vector(0,0), npc)
if not Game():GetRoom():IsPositionInRoom(spawn.Position, 0) then
spawn.Visible = false
spawn.CollisionDamage = 0
end
end
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 31 and npc.FrameCount >= 54 then
for i = 1,16 do
local spawn = Isaac.Spawn(1000, 147, 0, npc.Position+Vector.FromAngle(22.5*i):Resized(160), Vector(0,0), npc)
if not Game():GetRoom():IsPositionInRoom(spawn.Position, 0) then
spawn.Visible = false
spawn.CollisionDamage = 0
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDeathHead, 212)

function mod:EterepMomHand(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Land") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1,Eterepernalrng:RandomInt(7)+12 do
params.FallingSpeedModifier = -Eterepernalrng:RandomInt(11)-2
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7.2), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMomHand, 213)

function mod:EterepLvl2Fly(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount % 90 == 80 then
Isaac.Spawn(18, 0, 0, npc.Position, Vector(0,0), npc)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLvl2Fly, 214)

function mod:EterepLvl2Spider(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 40 then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Walk") then
EterepEnemyChasePlayer(1.25, npc, 0.86, 75)
end
if npc.FrameCount >= 41 and npc.StateFrame <= 8 and not npc:GetSprite():IsPlaying("Jump") and not npc:GetSprite():IsPlaying("Walk") then
npc:GetSprite():Play("Walk", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc.FrameCount >= 41 and npc.StateFrame >= 9 and not npc:GetSprite():IsPlaying("Jump") and not npc:GetSprite():IsPlaying("Walk") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Jump", true)
npc.StateFrame = 0
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 7 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/11 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/11
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/11)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Jump") and (npc:GetSprite():GetFrame() <= 6 or npc:GetSprite():GetFrame() >= 18) then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
npc:PlaySound(69, 1, 0, false, 1)
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepLvl2Spider, 215)

function mod:EterepSwinger(npc)
if npc.Variant == 1 and npc.SubType == 85 then
npc:GetSprite():Stop("Body", true)
if npc.FrameCount <= 1 then
npc.SpriteOffset = Vector(0,3)
end
if npc.FrameCount >= 18 and npc.Mass <= 570 then
npc.Mass = npc.Mass + 1
end
if npc.Parent ~= nil and npc.Parent.Type == 216 and npc.Parent.Variant == 0 then
npc:GetSprite():Stop("Body", true)
npc:GetSprite():PlayOverlay("Head", false)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
npc.Velocity = ((npc.Parent.Position+Vector(math.sin(math.rad(npc.FrameCount*-8))*(npc.Mass-500),math.cos(math.rad(npc.FrameCount*-8))*(npc.Mass-500)))-npc.Position)
if npc.Parent:IsDead() and npc:Exists() then
Isaac.Spawn(26, 0, 85, npc.Position, Vector(0,0), npc)
npc:Kill()
end
end
if npc.Parent == nil and npc.FrameCount >= 2 then
Isaac.Spawn(26, 0, 85, npc.Position, Vector(0,0), npc)
npc:Kill()
end
return true
end
if npc.Variant == 10 and npc.Parent ~= nil and npc.Parent.SubType == 85 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_swinger.png")
npc:GetSprite():LoadGraphics()
end
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10), 0, ProjectileParams())
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepSwinger, 216)

function mod:EterepSwingerTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 1 and npc.SubType == 85 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepSwingerTakeDamage, 216)

function mod:EterepSwingerReflectTears(npc, npc2)
if npc.Variant == 1 and npc.SubType == 85 and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepSwingerReflectTears, 216)

function mod:EterepDip(npc)
if (npc.SubType == 80 or npc.SubType == 85) and npc.FrameCount % 7 == 0 then
local creep = Isaac.Spawn(1000, 94, 0, npc.Position, Vector(0,0), npc)
creep:GetSprite().Scale = Vector(0,0)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDip, 217)

function mod:EterepDip(npc)
if npc:IsDead() and npc.Variant == 3 and npc.SubType == 85 then
local params = ProjectileParams()
params.Variant = 5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(10), 0, params)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepDip, 217)

function mod:EterepSquirt(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 94, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 220
creep:GetSprite().Scale = Vector(0,0)
end
if npc.Velocity:Length() >= 4 and npc:CollidesWithGrid() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.Variant = 3
for i = 1,Eterepernalrng:RandomInt(7)+8 do
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(201)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(66)+10)*0.1), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.Velocity:Length() >= 4 and npc:CollidesWithGrid() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,Eterepernalrng:RandomInt(7)+8 do
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(201)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(66)+10)*0.1), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.Velocity:Length() >= 5 and npc:CollidesWithGrid() and Isaac.CountEnemies() <= 4 then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSquirt, 220)

function mod:EterepCodWorm(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 6 and ((npc.FrameCount % 16 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 8 == 0 and not npc:HasEntityFlags(1<<7))) and npc.Size == 20 then
local params = ProjectileParams()
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(180)+1) * 0.1
params.FallingAccelModifier = 0.6
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle):Resized(6), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Dig") and npc.Size == 19 and npc.StateFrame > 0 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.25
for i = 1, 15 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(7)+106) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(50)+40)*0.1), 0, params)
end
npc.Size = 20
end
if npc:GetSprite():IsEventTriggered("Dig") and npc.Size == 20 and npc.StateFrame == 0 then
npc.Size = 19
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCodWorm, 221)

function mod:EterepCodWormReflectTears(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc.Size == 19 and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepCodWormReflectTears, 221)

function mod:EterepDinga(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 8 == 0 then
local creepbrown = Isaac.Spawn(1000, 94, 0, npc.Position, Vector(0,0), npc)
creepbrown:GetSprite().Scale = Vector(0,0)
end
if npc.State == 8 and npc.StateFrame >= 20 then
npc.StateFrame = 0
end
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.Variant = 4
params.Scale = 1.55
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(10), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(217, 0, 85, false, true) <= 3 then
local dip = Isaac.Spawn(217, 0, 85, npc.Position-Vector(40,0), Vector(0,0), npc)
dip:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDinga, 223)

function mod:EterepOob(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if (npc.State == 8 or npc.State == 9) and npc.FrameCount % 2 == 0 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.32,1.32)
end
if (npc.State == 8 or npc.State == 9) and ((npc.FrameCount % 6 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 0 and not npc:HasEntityFlags(1<<7))) and npc.Velocity:Length() > 9 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if npc.FrameCount % 8 == 0 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.32,1.32)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepOob, 224)

function mod:EterepBlackMaw(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if (npc.State == 8 or npc.State == 9) and npc.FrameCount % 2 == 0 then
local creep = Isaac.Spawn(1000, 26, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.32,1.32)
end
if (npc.State == 8 or npc.State == 9) and ((npc.FrameCount % 6 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 0 and not npc:HasEntityFlags(1<<7))) and npc.Velocity:Length() > 9 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if npc.FrameCount % 8 == 0 then
local creep = Isaac.Spawn(1000, 26, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.32,1.32)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlackMaw, 225)

function mod:EterepSkinny(npc)
if npc.SubType == 85 and npc.FrameCount <= 1 then
npc:GetSprite():PlayOverlay("Head", true)
end
if npc.Variant <= 1 and npc.SubType == 85 and npc.FrameCount % 5 == 0 then
Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
end
if npc.Variant == 2 and npc.SubType == 85 and npc.FrameCount % 25 == 0 then
Isaac.Spawn(33, 10, 1, npc.Position, Vector(0,0), npc)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSkinny, 226)

function mod:EterepSkinnyDeath(npc)
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
local bony = Isaac.Spawn(227, 0, 85, npc.Position, Vector(0,0), npc)
bony:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:PlaySound(115, 1, 0, false, 1)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepSkinnyDeath, 226)

function mod:EterepBoney(npc)
if npc.FrameCount <= 1  and #Isaac.FindByType(906, 0, 84, false, true) >= 1 then
npc:Morph(820, 0, 0, -1)
npc.HitPoints = npc.MaxHitPoints
if (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster0) or (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster1) then
npc:Morph(820, 0, 85, -1)
npc.HitPoints = npc.MaxHitPoints
npc.Scale = 1.25
end
end
if npc.FrameCount <= 1 and #Isaac.FindByType(906, 0, 0, false, true) >= 1 then
npc:Morph(820, 0, 0, -1)
npc.HitPoints = npc.MaxHitPoints
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBoney, 227)

function mod:EterepHomunculus(npc)
if Eterepmrfredunleash == true and npc.State == 4 and npc.Variant == 0 then
npc.I1 = 750
end
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc:GetSprite():SetFrame("Awaken", 1)
npc:GetSprite():SetFrame("WalkVert", 0)
end
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_homunculus.png")
npc:GetSprite():LoadGraphics()
end
if npc.FrameCount == 20 then
npc:GetSprite():PlayOverlay("Awaken", true)
end
if npc.FrameCount % 4 == 0 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 59
end
if npc.HitPoints <= npc.MaxHitPoints * 0.5 and npc.State == 4 then
npc.I1 = 750
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHomunculus, 228)

function mod:EterepHomunculusCollideWithPlayer(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc2.Type == 1 and npc2:ToPlayer():GetDamageCooldown() == 0 then
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position, Vector(0,0), npc)
npc.HitPoints = npc.HitPoints + 30
npc.ProjectileCooldown = 0
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepHomunculusCollideWithPlayer, 228)

function mod:EterepCustomEyes(npc)
if npc.SubType == 80 or npc.SubType == 77 or npc.SubType == 78 or npc.SubType == 79 then
npc:GetSprite().FlipX = false
if npc.Velocity:Length() <= 9 then
npc.Velocity = npc.Velocity * 1.25
end
if npc.SubType == 79 and #Isaac.FindByType(68, 1, 88, false, true) == 0 then
npc:Kill()
end
if npc.SubType ~= 80 and npc.SubType ~= 79 and #Isaac.FindByType(68, 0, 88, false, true) == 0 then
npc:Kill()
end
if npc.SubType == 80 and npc.SpawnerType == 835 and npc.MaxHitPoints ~= 75 then
npc.MaxHitPoints = 75
npc.HitPoints = 75
end
if npc.SubType == 80 and npc.SpawnerType == 835 and #Isaac.FindByType(835, 0, 85, false, true) == 0 then
npc:Kill()
end
if npc.SubType ~= 80 and npc:IsDead() then
local params = ProjectileParams()
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(8.5), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCustomEyes, 229)

function mod:EterepCustomEyesTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.SubType == 79 and flags ~= DamageFlag.DAMAGE_EXPLOSION and damageSource.Type == 68 then
npc.HitPoints = npc.HitPoints + damage * 0.9
end
if npc.SubType == 79 and flags == DamageFlag.DAMAGE_EXPLOSION and damageSource.Type == 68 then
npc.HitPoints = npc.HitPoints + damage * 0.65
end
if npc.SpawnerType == 835 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepCustomEyesTakeDamage, 229)

function mod:EterepCamilloJr(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20*i+310):Resized(11), 0, ProjectileParams())
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCamilloJr, 230)

function mod:EterepNerveEnding(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
npc.Velocity = Vector(0,0)
if npc.FrameCount <= 1 then
npc:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
npc:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
end
if npc.FrameCount >= 22 and (npc.State == 0 or npc.State == 1) then
npc:GetSprite():Play("Idle", false)
npc.State = 2
npc.StateFrame = 0
end
if npc.Mass == 101 then
npc.Mass = 102
npc:GetSprite():Play("Defense Mode", false)
npc.StateFrame = 0
end
if npc:GetSprite():IsPlaying("Defense Mode") and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
if npc.StateFrame % 19 == 15 and npc.Variant == 0 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i+EterepCustomAngle):Resized(10), 0, params)
end
npc.HitPoints = npc.HitPoints + 4
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame % 19 == 15 and npc.Variant == 1 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(36*i+EterepCustomAngle):Resized(10), 0, params)
end
npc.HitPoints = npc.HitPoints + 4
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame >= 86 then
npc:GetSprite():Play("Idle", false)
npc.State = 2
npc.StateFrame = 0
npc.Mass = 100
end
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepNerveEnding, 231)

function mod:EterepNerveEndingTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant <= 1 and npc.SubType == 85 and npc.Mass == 100 and npc.FrameCount >= 23 then
npc.Mass = 101
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepNerveEndingTakeDamage, 231)

function mod:EterepOneTooth(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 8 and npc.StateFrame == 19 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.8), 0, ProjectileParams())
end
npc.StateFrame = npc.StateFrame - 1
end
if npc.StateFrame <= 70 and npc.State == 4 then
npc.StateFrame = 80
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepOneTooth, 234)

function mod:EterepGurgling(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.06
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(36*i):Resized(10), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
local fly1 = Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(1,0), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly2 = Isaac.Spawn(18, 0, 0, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(1,0), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 1 and npc.SubType == 88 then
if npc:GetSprite():IsEventTriggered("Shoot") then
local attack = Eterepernalrng:RandomInt(6)+1
if attack <= 2 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(9), 0, ProjectileParams())
end
npc:PlaySound(178, 1, 0, false, 1)
end
if attack == 3 or attack == 4 then
local fly1 = Isaac.Spawn(18, 0, 1690, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(1,0), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly2 = Isaac.Spawn(18, 0, 1690, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(-1,0), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if attack == 5 then
local fly1 = Isaac.Spawn(18, 0, 1690, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(1,0), npc)
fly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly2 = Isaac.Spawn(18, 0, 1690, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(-1,0), npc)
fly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fly3 = Isaac.Spawn(18, 0, 1690, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(0,1), npc)
fly3:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if attack == 6 then
local fly = Isaac.Spawn(18, 0, 1690, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, true), Vector(1,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
if npc.State == 8 and npc.FrameCount % 3 == 2 then
Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
end
end
if npc.Variant == 2 and npc.SubType == 88 and npc.FrameCount % 6 == 3 then
local creep = Isaac.Spawn(1000, 94, 0, npc.Position, Vector(0,0), npc)
creep:GetSprite().Scale = Vector(0,0)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGurgling, 237)

function mod:EterepSplasher(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc:GetSprite():PlayOverlay("Blood", false)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
EterepEnemyChasePlayer(0.42, npc, 0.86, 75)
if ((npc.FrameCount % 68 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 34 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.EXPLODE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
params.BulletFlags = 1 << 1 | 1 << 7
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(10), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepSplasher, 238)

function mod:EterepSplasherTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 0 and npc.SubType == 85 and flags == DamageFlag.DAMAGE_EXPLOSION and damageSource.SpawnerType ~= 1 and damageSource.SpawnerType ~= 3 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepSplasherTakeDamage, 238)

function mod:EterepGrub(npc)
if npc.Variant == 0 and npc.Parent ~= nil and npc.FrameCount <= 1 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 0 and npc.Parent ~= nil and npc.FrameCount <= 20 and npc.SpawnerType ~= 239 then
npc.Velocity = Vector(0,0)
end
if npc.Variant == 0 and npc.SubType == 0 and npc.FrameCount <= 1 and npc.Parent == nil and ((EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1) or ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4))) then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_grub.png")
npc:GetSprite():LoadGraphics()
npc.Size = 17
npc.SubType = 85
npc.MaxHitPoints = npc.MaxHitPoints * 1.75
npc.HitPoints = npc.MaxHitPoints
end
if npc.Variant == 0 and npc.SubType == 0 and npc.Parent ~= nil and npc.Parent.SubType == 85 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_grub.png")
npc:GetSprite():LoadGraphics()
npc.Size = 17
npc.SubType = 85
npc.MaxHitPoints = npc.MaxHitPoints * 1.75
npc.HitPoints = npc.MaxHitPoints
end
if npc.Variant == 0 and npc.SubType == 85 then
if npc.StateFrame == 21 then
npc.StateFrame = 50
end
if npc.FrameCount % 7 == 1 and npc.Parent == nil and npc:GetLastChild().Position:Distance(npc.Position) >= 10 then
Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
Isaac.Spawn(1000, 23, 0, npc:GetLastChild().Position, Vector(0,0), npc)
end
if npc.FrameCount % 4 == 1 and npc.Parent == nil and npc:GetLastChild().Position:Distance(npc.Position) <= 9 then
Isaac.Spawn(1000, 23, 0, npc:GetLastChild().Position, Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGrub, 239)

function mod:EterepGrubDeath(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:IsDead() then
local eternalgrubdeath = Eterepernalrng:RandomInt(3)+1
if eternalgrubdeath == 1 then
local maggot = Isaac.Spawn(23, 0, 85, npc.Position, Vector(0,0), npc)
maggot.HitPoints = maggot.HitPoints * 0.75
end
if eternalgrubdeath == 2 then
local maggot = Isaac.Spawn(21, 0, 85, npc.Position, Vector(0,0), npc)
maggot.HitPoints = maggot.HitPoints * 0.75
end
if eternalgrubdeath == 3 then
local maggot = Isaac.Spawn(31, 0, 85, npc.Position, Vector(0,0), npc)
maggot.HitPoints = maggot.HitPoints * 0.75
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepGrubDeath, 239)

function mod:EterepWallCreep(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsPlaying("Attack") and (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("Sound")) then
local params = ProjectileParams()
params.Variant = 4
params.HeightModifier = 10
params.FallingAccelModifier = -0.09
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(13), 0, params)
end
if (npc.Variant == 1 or npc.Variant == 3) and npc.SubType == 85 and (npc.FrameCount % 4 == 1 or (npc.FrameCount % 4 == 3 and not npc:HasEntityFlags(1<<7))) and ((npc:GetSprite():IsPlaying("AttackStart") and npc:GetSprite():GetFrame() >= 10) or (npc:GetSprite():IsPlaying("AttackLoop"))) then
local test = math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) * 0.0375
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.06
params.Scale = 0.35
local projectilenewcolor = Color(1,1,1,1,0.86,0.77,0.59)
projectilenewcolor:SetColorize(2.57,2.58,2.42,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position+Vector(0,-5+npc.Variant*5), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(test), 0, params)
end
if npc.Variant == 3 and npc.SubType == 85 and ((npc.FrameCount % 24 == 20 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 12 == 10 and not npc:HasEntityFlags(1<<7))) and ((npc:GetSprite():IsPlaying("AttackStart") and npc:GetSprite():GetFrame() >= 10) or (npc:GetSprite():IsPlaying("AttackLoop"))) then
local test = math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) * 0.045
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.05
params.Scale = 0.35
local projectilenewcolor = Color(1,1,1,1,0.86,0.77,0.59)
projectilenewcolor:SetColorize(2.57,2.58,2.42,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position+Vector(0,-5+npc.Variant*5), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+25):Resized(test), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-5+npc.Variant*5), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-25):Resized(test), 0, params)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepWallCreep, 240)

function mod:EterepRageCreep(npc)
if npc.SubType == 85 then
npc.Velocity = npc.Velocity * 1.8
if npc:GetSprite():IsEventTriggered("Shoot") and npc.SpriteRotation == 0 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 90, 19, Vector(0,0), npc)
npc:PlaySound(317, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.SpriteRotation == 90 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 180, 19, Vector(0,0), npc)
npc:PlaySound(317, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.SpriteRotation == 180 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 270, 19, Vector(0,0), npc)
npc:PlaySound(317, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.SpriteRotation == -90 then
EntityLaser.ShootAngle(1, npc.Position+Vector(0,1), 0, 19, Vector(0,0), npc)
npc:PlaySound(317, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("StateChange") then
npc.State = 33
end
if npc:GetSprite():IsEventTriggered("Shoot") then
npc.State = 8
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRageCreep, 241)

function mod:EterepBlindCreep(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.HeightModifier = 10
params.FallingAccelModifier = -0.09
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+326):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+343):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+377):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+394):Resized(9), 0, params)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlindCreep, 242)

function mod:EterepConjoinedSpitty(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 9 and npc.StateFrame == 8 then
npc.StateFrame = 10
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.I1 == 0 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
params.Variant = 4
for i = 1,3 do
npc:FireProjectiles(npc.Position-Vector(-20,-4), Vector.FromAngle(16*i+328):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position-Vector(20,-4), Vector.FromAngle(16*i+148):Resized(10.5), 0, params)
end
npc:PlaySound(319, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and (npc.I1 == 1 or npc.I1 == 2) then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
params.Variant = 4
for i = 1,3 do
npc:FireProjectiles(npc.Position-Vector(0,20), Vector.FromAngle(16*i+238):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position-Vector(0,-20), Vector.FromAngle(16*i+58):Resized(10.5), 0, params)
end
npc:PlaySound(319, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepConjoinedSpitty, 243)

function mod:EterepRoundWorm(npc)
if npc.Variant == 0 and (npc.SubType == 80 or npc.SubType == 85) then
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_round worm.png")
npc:GetSprite():LoadGraphics()
end
if npc:GetSprite():IsEventTriggered("Shooot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+25*i+285):Resized(10), 0, ProjectileParams())
end
npc:PlaySound(318, 1, 0, false, 1)
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.StateFrame == 1 and ((npc.FrameCount % 4 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 0 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = 1.2
for i = 1,6 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(211)+450) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(61)+10)*0.1), 0, params)
end
npc.StateFrame = 2
end
if npc.StateFrame == 2 and npc.FrameCount % 2 == 1 then
npc.StateFrame = 1
end
if npc:GetSprite():IsEventTriggered("StartShoot") and npc.StateFrame == 0 then
npc.StateFrame = 1
npc:PlaySound(318, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("StopShoot") and npc.StateFrame ~= 0 then
npc.StateFrame = 0
end
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_tube worm.png")
npc:GetSprite():LoadGraphics()
end
end
if npc.Variant == 2 and npc.SubType == 0 and npc.FrameCount <= 1 and ((#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster0) or (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster1) or (EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1) or (((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4)) and npc.SpawnerType <= 1)) then
npc:GetSprite():Load("gfx/e_tainted round worm.anm2",true)
npc:GetSprite():LoadGraphics()
npc.Scale = 1.25
npc.Size = npc.Size * 1.25
npc.MaxHitPoints = 140
npc.HitPoints = npc.MaxHitPoints
npc.Mass = 111
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 2 and npc.SubType == 1 and npc.Parent ~= nil and npc.Parent.Mass == 111 and npc.Mass ~= 111 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_tainted round worm.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.25
npc.Size = npc.Size * 1.25
npc.MaxHitPoints = 140
npc.Mass = 111
end
if npc.Variant == 3 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("DigOut") and npc:GetSprite():GetFrame() >= 58 and npc:GetSprite():GetFrame() <= 75 and npc.Mass ~= 75 and npc:GetSprite():GetFrame() % 2 == 0 then
local params = ProjectileParams()
params.Scale = 1.5
params.Variant = 4
params.FallingSpeedModifier = -npc:GetSprite():GetFrame() * 3 + 149
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
params.BulletFlags = ProjectileFlags.EXPLODE
params.FallingAccelModifier = 0.9
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
npc.Mass = 75
end
if npc:GetSprite():IsPlaying("DigOut") and npc:GetSprite():GetFrame() >= 58 and npc:GetSprite():GetFrame() <= 75 and npc:GetSprite():GetFrame() % 2 == 1 then
npc.Mass = 76
end
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_tainted tube worm.png")
npc:GetSprite():LoadGraphics()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRoundWorm, 244)

function mod:EterepRagling(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and npc.FrameCount >= 25 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc.StateFrame % 53 == 38 then
npc:GetSprite():Play("Hop", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame % 53 == 19 then
npc:GetSprite():Play("Appear", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsFinished("Hop") or npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
npc:PlaySound(69, 1, 0, false, 1)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc.FrameCount >= 20 and npc:GetSprite():IsPlaying("Appear") and npc:GetSprite():IsEventTriggered("NewShoot") then
local attack = Eterepernalrng:RandomInt(2)+1
if attack == 1 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.007
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(9), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if attack == 2 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_RIGHT | ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.007
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(9), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Appear") then
npc.Velocity = npc.Velocity * 0.5
end
return true
end
if npc.Variant == 1 and npc.SubType == 0 then
if npc.Mass == 13 and npc:GetSprite():IsEventTriggered("Shoot") then
npc:PlaySound(178, 1, 0, false, 1)
end
if (#Isaac.FindByType(405, 0, 88, false, true) >= 1 or #Isaac.FindByType(409, 0, 89, false, true) >= 1) and npc.Mass ~= 13 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_rag man ragling.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 13
end
if npc.Mass == 13 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
if npc:GetData().Etereternaliseternal ~= 1 then
npc:GetData().Etereternaliseternal = 1
end
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepRagling, 246)

function mod:EterepFleshMobileHost(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc:GetSprite():Play("Idle", true)
npc.Mass = 32
end
if (npc:GetSprite():IsPlaying("Shoot") or npc:GetSprite():IsPlaying("FastShoot")) then
npc.Velocity = npc.Velocity * 0.7
end
if not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
EterepEnemyChasePlayer(0.42, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 20 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("Shoot", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)
end
if npc.StateFrame == 10 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("FastShoot", true)
npc.StateFrame = 11
if Eterepernalrng:RandomInt(4)+1 == 2 then
npc.StateFrame = 5
end
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 10) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 10)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 33
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 82) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 18)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 32
end
if npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():IsEventTriggered("canshoot2") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("canshoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.HeightModifier = 5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+9):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+18):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+35):Resized(6.1), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-9):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-18):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-35):Resized(6.1), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFleshMobileHost, 247)

function mod:EterepPsyHorf(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.SMART
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(9), 0, params)
npc:PlaySound(146, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPsyHorf, 248)

function mod:EterepFullFly(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.09
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(10), 0, params)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFullFly, 249)

function mod:EterepTickingSpider(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Walk") then
EterepEnemyChasePlayer(1.25, npc, 0.86, 75)
end
if npc.FrameCount <= 40 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.FrameCount >= 41 and npc.StateFrame <= 8 and not npc:GetSprite():IsPlaying("Jump") and not npc:GetSprite():IsPlaying("Walk") then
npc:GetSprite():Play("Walk", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc.FrameCount >= 41 and npc.StateFrame >= 9 and not npc:GetSprite():IsPlaying("Jump") and not npc:GetSprite():IsPlaying("Walk") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Jump", true)
npc.StateFrame = 0
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 7 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/11 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/11
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/11)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Jump") and (npc:GetSprite():GetFrame() <= 6 or npc:GetSprite():GetFrame() >= 18) then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
npc:PlaySound(69, 1, 0, false, 1)
end
if npc:IsDead() then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.6
params.BulletFlags = ProjectileFlags.EXPLODE
for i = 1, 4 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(165)+75) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
Isaac.Explode(npc.Position, npc, 1.0)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepTickingSpider, 250)

function mod:EterepBegotten(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc:GetSprite():SetFrame("Awaken", 1)
npc.V1 = Vector(100,0)
end
if npc.FrameCount <= 2 then
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_begotten.png")
npc:GetSprite():LoadGraphics()
end
if npc.FrameCount == 20 then
npc:GetSprite():PlayOverlay("Awaken", true)
end
if npc.HitPoints <= npc.MaxHitPoints * 0.5 and npc.State == 4 then
npc.I2 = 750
end
if npc.State == 8 then
npc.I1 = npc.I1 + 1
end
if npc.State == 8 and npc.I1 >= npc.V1.X then
local spawn = Isaac.Spawn(951, 3, 0, npc.Position, Vector(0,0), npc)
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
npc.I1 = 0
npc:PlaySound(265, 1, 0, false, 1)
npc.V1 = Vector(Eterepernalrng:RandomInt(80)+80,0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBegotten, 251)

function mod:EterepBegottenCollideWithPlayer(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc2.Type == 1 and npc2:ToPlayer():GetDamageCooldown() == 0 then
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position, Vector(0,0), npc)
npc.HitPoints = npc.HitPoints + 30
npc.ProjectileCooldown = 0
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepBegottenCollideWithPlayer, 251)

function mod:EterepNull(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.Mass <= 5 or npc.Mass >= 8 then
npc.Mass = 6
end
if npc.Mass == 6 and not npc:IsVisible() then
npc.Mass = 7
npc.StateFrame = 0
end
if npc.Mass == 7 and not npc:IsVisible() then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 45 and npc.Mass == 7 and not npc:IsVisible() then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(10), 0, ProjectileParams())
end
npc.StateFrame = 0
npc.Mass = 8
end
if npc.Mass == 8 and npc:IsVisible() then
npc.Mass = 6
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepNull, 252)

function mod:EterepFloatingKnight(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.I2 = 90
end
if npc.FrameCount % 5 == 4 and npc.Mass == 11 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 200
end
if npc.Mass == 11 then
npc.I1 = npc.I1 + 1
end
if npc.Mass ~= 10 and npc.I1 >= 30 then
npc.Mass = 10
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("Hori") and npc:GetSprite().FlipX == false and npc.I2 ~= 0 then
npc.I2 = 0
end
if npc:GetSprite():IsPlaying("Down") and npc.I2 ~= 90 then
npc.I2 = 90
end
if npc:GetSprite():IsPlaying("Hori") and npc:GetSprite().FlipX == true and npc.I2 ~= 180 then
npc.I2 = 180
end
if npc:GetSprite():IsPlaying("Up") and npc.I2 ~= 270 then
npc.I2 = -90
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFloatingKnight, 254)

function mod:EterepFloatingKnightReflectTears(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount >= 20 and npc2.Type == 2 and ((npc.I2 ~= 180 and (npc2.Position - npc.Position):GetAngleDegrees() >= -80+npc.I2 and (npc2.Position - npc.Position):GetAngleDegrees() <= 80+npc.I2) or (npc.I2 == 180 and (((npc2.Position - npc.Position):GetAngleDegrees() >= 100 and (npc2.Position - npc.Position):GetAngleDegrees() <= 180) or ((npc2.Position - npc.Position):GetAngleDegrees() >= -180 and (npc2.Position - npc.Position):GetAngleDegrees() <= -100)))) and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepFloatingKnightReflectTears, 254)

function mod:EterepFloatingKnightTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 0 and npc.SubType == 85 then
npc.Mass = 11
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepFloatingKnightTakeDamage, 254)

function mod:EterepNightCrawler(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shooot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_RIGHT | ProjectileFlags.NO_WALL_COLLIDE
params.FallingAccelModifier = -0.13
params.CurvingStrength = 0.007
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+90*i):Resized(12), 0, params)
end
npc:PlaySound(318, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepNightCrawler, 255)

function mod:EterepConjoinedFatty(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount % 4 == 0 then
Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
end
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.Variant == 1 and npc.State == 4 then
npc.V1 = Vector(npc.V1.X+1,0)
end
if npc.Variant == 0 and npc.State == 4 and npc.FrameCount % 15 == 11 and Eterepernalrng:RandomInt(4)+1 == 1 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 150 then
if npc:GetSprite():IsPlaying("WalkHori") then
npc:GetSprite():Play("AttackHori", true)
end
if npc:GetSprite():IsPlaying("WalkVert") then
npc:GetSprite():Play("AttackVert", true)
end
npc.State = 8
npc.StateFrame = 0
npc:PlaySound(167, 1, 0, false, 1)
end
if npc.Variant == 1 and npc.State == 4 and npc.FrameCount % 15 == 11 and Eterepernalrng:RandomInt(4)+1 == 1 and npc.V1.X >= 60 then
if npc:GetSprite():IsPlaying("WalkHori") then
npc:GetSprite():Play("AttackHori", true)
end
if npc:GetSprite():IsPlaying("WalkVert") then
npc:GetSprite():Play("AttackVert", true)
end
npc.State = 8
npc.StateFrame = 0
npc.V1 = Vector(0,0)
npc:PlaySound(167, 1, 0, false, 1)
end
if npc.Variant == 1 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.155
params.BulletFlags = ProjectileFlags.CONTINUUM
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(8), 0, params)
end
end
if npc.Variant == 1 and npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:SetColor(Color(1,1,1,1,0.19,2.08,2.55), 99999, 0, false, false)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepConjoinedFatty, 257)

function mod:EterepConjoinedFattyDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local fatty = Isaac.Spawn(208, 0, 85, npc.Position, Vector(0,0), npc)
fatty:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepConjoinedFattyDeath, 257)

function mod:EterepFatBat(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Shoot") and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+340):Resized(9.2), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+350):Resized(9.6), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+370):Resized(9.6), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+380):Resized(9.2), 0, ProjectileParams())
end
if npc.StateFrame % 25 == 20 and Eterepernalrng:RandomInt(4)+1 == 1 and npc.State == 4 then
npc.StateFrame = 0
npc.State = 8
end
if npc:IsDead() then
for i = 1,3 do
local onetooth = Isaac.Spawn(234, 0, 77, npc.Position, Vector(0,0), npc)
onetooth:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFatBat, 258)

function mod:EterepImp(npc)
if npc.Variant == 0 and (npc.SubType == 80 or npc.SubType == 85) then
if npc:GetSprite():IsEventTriggered("Shoot") then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+22):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-22):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsEventTriggered("Teleport") then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(8), 0, ProjectileParams())
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepImp, 259)

function mod:EterepTheHaunt(npc)
if npc.Variant == 10 and npc.SpawnerType == 922 and npc.State == 8 and npc.FrameCount <= 200 then
npc.State = 4
npc.StateFrame = 24
end
if npc.Variant == 0 and npc.SubType == 88 and npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.04
params.HeightModifier = -15
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(12.5*i+27.5):Resized(11), 0, params)
end
npc:PlaySound(306, 1, 0, false, 1)
end
if npc.Variant == 10 and npc.SubType == 85 and npc.State == 8 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.07
params.Variant = 4
params.BulletFlags = ProjectileFlags.SMART
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(12), 0, params)
npc.StateFrame = 24
npc.State = 4
npc.Velocity = npc.Velocity * 0.6
npc:PlaySound(318, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheHaunt, 260)

function mod:EterepDingle(npc)
if npc.Variant == 0 and npc.SubType == 89 then
if npc.State == 8 and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc.State == 8 and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.HeightModifier = -5
params.Variant = 3
for i = 1,7 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15*i+300):Resized(12), 0, params)
end
npc:PlaySound(303, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Spawn") then
Isaac.Spawn(217, 0, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 2, true), Vector.FromAngle(45):Resized(8.5), npc)
Isaac.Spawn(217, 0, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 2, true), Vector.FromAngle(45):Resized(8.5), npc)
end
if ((npc.FrameCount % 10 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 5 == 3 and not npc:HasEntityFlags(1<<7))) and npc.State == 4 and npc.StateFrame == 0 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
params.Variant = 3
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-115):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+115):Resized(9), 0, params)
end
end
if npc.Variant == 1 and npc.SubType == 89 then
if npc.State == 8 and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc.State == 8 and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.Variant = 5
params.Scale = 0.85
params.HeightModifier = -5
for i = 1,7 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15*i+300):Resized(12), 0, params)
end
npc:PlaySound(303, 1, 0, false, 1)
end
if ((npc.FrameCount % 10 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 5 == 3 and not npc:HasEntityFlags(1<<7))) and npc.State == 4 and npc.StateFrame == 0 then
local params = ProjectileParams()
params.Variant = 5
params.Scale = 0.85
params.FallingAccelModifier = -0.02
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-115):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+115):Resized(9), 0, params)
end
if npc:GetSprite():IsEventTriggered("Spawn") then
local dangledip1 = Isaac.Spawn(217, 2, 80, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(24), npc)
dangledip1.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
dangledip1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local dangledip2 = Isaac.Spawn(217, 2, 80, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(27), npc)
dangledip2.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
dangledip2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDingle, 261)

function mod:EterepMegaMaw(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.Mass == 101 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.HeightModifier = -15
for i = 1,2 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(61)+40) * 0.1
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(15)+1,8), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(45)+338):Resized((Eterepernalrng:RandomInt(66)+55)*0.1), 0, params)
end
end
if npc:GetSprite():IsEventTriggered("StartSpit") then
npc:PlaySound(114, 1, 0, false, 1)
npc.Mass = 101
end
if npc:GetSprite():IsEventTriggered("StopSpit") then
npc.Mass = 100
end
if npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.Variant = 2
params.FallingAccelModifier = -0.12
local attack = Eterepernalrng:RandomInt(5)+1
if attack == 1 then
params.Variant = 3
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(10), 0, params)
end
end
if attack == 2 then
params.Variant = 3
params.BulletFlags = ProjectileFlags.SMART | ProjectileFlags.NO_WALL_COLLIDE
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(10), 0, params)
end
end
if attack == 3 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(7), 0, params)
end
params.CurvingStrength = -0.02
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(7), 0, params)
end
end
if attack == 4 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(7), 0, params)
end
end
if attack == 5 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = -0.02
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(7), 0, params)
end
end
npc:PlaySound(304, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMegaMaw, 262)

function mod:EterepTheGate(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 8 and Isaac.CountEnemies() <= 3 then
npc.State = 9
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 9 then
local params = ProjectileParams()
params.Variant = 5 
params.FallingAccelModifier = -0.12
params.Scale = 1.8
local attack = Eterepernalrng:RandomInt(5)+1
if attack == 1 then
params.Variant = 4
params.BulletFlags = ProjectileFlags.SMART | ProjectileFlags.NO_WALL_COLLIDE
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(10.5), 0, params)
end
end
if attack == 2 then
params.Variant = 4
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(10.5), 0, params)
end
end
if attack == 3 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(7), 0, params)
end
end
if attack == 4 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = -0.02
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(7), 0, params)
end
end
if attack == 5 then
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
for i = 1,7 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+51.4285714286*i):Resized(7), 0, params)
end
params.CurvingStrength = -0.02
for i = 1,7 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+51.4285714286*i):Resized(7), 0, params)
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheGate, 263)

function mod:EterepMegaFatty(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc:GetSprite():IsEventTriggered("Landed") then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(11), 0, ProjectileParams())
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMegaFatty, 264)

function mod:EterepTheCage(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("RollLoop") and npc:CollidesWithGrid() then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if math.abs((npc.Position - grid.Position):Length()) < 75 and (grid:GetType() == GridEntityType.GRID_ROCK or grid:GetType() == GridEntityType.GRID_ROCKB or grid:GetType() == GridEntityType.GRID_ROCKT or grid:GetType() == GridEntityType.GRID_ROCK_BOMB or grid:GetType() == GridEntityType.GRID_ROCK_ALT) then
grid:Destroy(true)
end
end
end
end
if npc:GetSprite():IsPlaying("Jumping") and npc:GetSprite():GetFrame() == 1 and Eterepernalrng:RandomInt(2)+1 == 1 then
npc.State = 2
npc:GetSprite():Play("JumpingTwice", true)
end
if npc:GetSprite():IsEventTriggered("JumpTwice") then
npc:PlaySound(303, 1, 0, false, 1)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsEventTriggered("Travel") then
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
local test = math.abs((npc.Position - Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 2, true)):Length()) * 0.7
npc.Velocity = (npc:GetPlayerTarget().Position - npc.Position):Normalized() * test
end
if npc:GetSprite():IsEventTriggered("LandTwice") then
npc:PlaySound(303, 1, 0, false, 1)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
npc:PlaySound(48, 1, 0, false, 1)
Game():ShakeScreen(15)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
for i = 1,4 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position, Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = EterepCustomAngle+90*i
end
end
if npc:GetSprite():IsFinished("JumpingTwice") then
npc.State = 3
npc.StateFrame = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheCage, 265)

function mod:EterepMamaGurdy(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.I1 == 1 then
npc.I1 = 0
npc.I2 = 1
npc.StateFrame = 0
npc.State = 9
npc:GetSprite():Play("Attack1", true)
end
if (npc.State == 8 or npc.State == 10) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.State == 10 and npc.StateFrame >= 44 and npc.StateFrame <= 67 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(0.5,0.5,0.5,1,0.6509,0.4078,0.1607)
params.Scale = 1.75
for i = 1,2 do
params.FallingAccelModifier = (Eterepernalrng:RandomInt(60)+21) * 0.01
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(100)+1) * 0.1
npc:FireProjectiles(npc.Position-Vector(-10,0), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(41)+340):Resized((Eterepernalrng:RandomInt(111)+50)*0.1), 0, params)
end
end
if npc.State == 8 and (npc.StateFrame == 32 or npc.StateFrame == 36 or npc.StateFrame == 40 or npc.StateFrame == 44) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local shootattack = Eterepernalrng:RandomInt(2)+1
if shootattack == 1 then
local params = ProjectileParams()
params.Variant = 5
params.FallingAccelModifier = -0.1
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+16*i+312):Resized(10.5), 0, params)
end
elseif shootattack == 2 then
local params = ProjectileParams()
params.Variant = 5
params.FallingAccelModifier = -0.1
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+16*i+320):Resized(10.5), 0, params)
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMamaGurdy, 266)

function mod:EterepDarkOne(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsFinished("Darkness") then
Game():Darken(1,700)
end
if npc:GetSprite():IsEventTriggered("Charge") and npc.MaxHitPoints <= 8000 then
npc.Mass = 76
end
if npc.State == 10 and npc.Mass == 76 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 111 and npc.Position.X < Game():GetRoom():GetBottomRightPos().X and npc.Position.X > Game():GetRoom():GetTopLeftPos().X and npc.MaxHitPoints <= 8000 then
npc.State = 8
npc.Mass = 75
end
if npc:IsDead() and #Isaac.FindByType(267, -1, -1, false, true) == 1 and #Isaac.FindByType(268, -1, -1, false, true) == 0 then
Game():Darken(1,1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDarkOne, 267)

function mod:EterepTheAdversary1(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsFinished("Scream") then
Game():Darken(1,700)
end
if npc:GetSprite():IsEventTriggered("Land") then
for i = 1,4 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position-Vector(0,-40), Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = 90*i
end
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 13 then
for i = 1,3 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
if npc.State == 8 and npc.StateFrame == 4 and npc.V2.X ~= 0 then
npc.V2 = Vector(0,0)
end
if npc.V2.Y == 0 and (npc:GetSprite():IsFinished("Attack2Left fake") or npc:GetSprite():IsFinished("Attack2Up fake") or npc:GetSprite():IsFinished("Attack2Right fake") or npc:GetSprite():IsFinished("Attack2Down fake")) then
npc.State = 8
npc.StateFrame = 2
npc.I1 = 0
npc:PlaySound(118, 1, 0, false, 1)
npc:GetSprite():Play("Attack2Left", true)
npc.V2 = Vector(0,0)
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25)) - npc.Position):GetAngleDegrees() <= -45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25)) - npc.Position):GetAngleDegrees() >= -135 then
npc.I1 = 1
npc:GetSprite():Play("Attack2Up", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25)) - npc.Position):GetAngleDegrees() <= 45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25)) - npc.Position):GetAngleDegrees() >= -45 then
npc.I1 = 2
npc:GetSprite():Play("Attack2Right", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25)) - npc.Position):GetAngleDegrees() <= 135 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*25,npc:GetPlayerTarget().Velocity.Y*25)) - npc.Position):GetAngleDegrees() >= 45 then
npc.I1 = 3
npc:GetSprite():Play("Attack2Down", true)
end
end
if npc.State == 4 and npc.StateFrame == 1 and Eterepernalrng:RandomInt(3) == 1 then
npc.State = 8
npc.StateFrame = 0
npc.I1 = 0
npc:PlaySound(118, 1, 0, false, 1)
npc:GetSprite():Play("Attack2Left", true)
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= -45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= -135 then
npc.I1 = 1
npc:GetSprite():Play("Attack2Up", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= 45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= -45 then
npc.I1 = 2
npc:GetSprite():Play("Attack2Right", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= 135 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= 45 then
npc.I1 = 3
npc:GetSprite():Play("Attack2Down", true)
end
end
if npc.V2.Y >= 1 and (npc:GetSprite():IsFinished("Attack2Left fake") or npc:GetSprite():IsFinished("Attack2Up fake") or npc:GetSprite():IsFinished("Attack2Right fake") or npc:GetSprite():IsFinished("Attack2Down fake")) then
npc.I1 = 0
npc:PlaySound(118, 1, 0, false, 1)
npc:GetSprite():Play("Attack2Left fake", true)
npc.V2 = Vector(1,npc.V2.Y-1)
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= -45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= -135 then
npc.I1 = 1
npc:GetSprite():Play("Attack2Up fake", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= 45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= -45 then
npc.I1 = 2
npc:GetSprite():Play("Attack2Right fake", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= 135 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= 45 then
npc.I1 = 3
npc:GetSprite():Play("Attack2Down fake", true)
end
end
if npc:IsDead() and (#Isaac.FindByType(267, -1, -1, false, true) == 0 and #Isaac.FindByType(268, -1, -1, false, true) == 1) then
Game():Darken(1,1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheAdversary1, 268)

function mod:EterepTheAdversary2(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 8 and npc.StateFrame == 1 and npc.V2.X ~= 1 then
npc.V2 = Vector(1,Eterepernalrng:RandomInt(2))
if npc.V2.Y == 0 then
npc:GetSprite():Play("Attack2Left", true)
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= -45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= -135 then
npc.I1 = 1
npc:GetSprite():Play("Attack2Up", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= 45 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= -45 then
npc.I1 = 2
npc:GetSprite():Play("Attack2Right", true)
end
if ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() <= 135 and ((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*40,npc:GetPlayerTarget().Velocity.Y*40)) - npc.Position):GetAngleDegrees() >= 45 then
npc.I1 = 3
npc:GetSprite():Play("Attack2Down", true)
end
end
if npc.V2.Y >= 1 then
npc.State = 50
npc.V2 = Vector(npc.V2.X,npc.V2.Y-1)
if not SFXManager():IsPlaying(118) then
npc:PlaySound(118, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Attack2Left") then
npc:GetSprite():Play("Attack2Left fake", true)
end
if npc:GetSprite():IsPlaying("Attack2Right") then
npc:GetSprite():Play("Attack2Right fake", true)
end
if npc:GetSprite():IsPlaying("Attack2Up") then
npc:GetSprite():Play("Attack2Up fake", true)
end
if npc:GetSprite():IsPlaying("Attack2Down") then
npc:GetSprite():Play("Attack2Down fake", true)
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_RENDER, mod.EterepTheAdversary2, 268)

function mod:EterepPolycephalus(npc)
if npc.Variant == 0 and npc.SubType == 84 then
if npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Polycephalus.png")
npc:GetSprite():LoadGraphics()
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("Shoot") then
npc.Mass = 76
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("StopShooting") then
npc.Mass = 75
end
if npc.Mass == 76 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.Variant = 4
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(141)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(51)+335):Resized((Eterepernalrng:RandomInt(70)+56)*0.1), 0, params)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local attack = Eterepernalrng:RandomInt(2)+1
local params = ProjectileParams()
params.Variant = 4
if attack == 1 then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(11), 0, params)
end
elseif attack == 2 then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+18*i+306):Resized(12.5), 0, params)
end
end
end
end
if npc.Variant == 1 and npc.SubType == 84 then
if npc.State == 6 then
npc.Velocity = Vector(0,0)
end
if npc:GetSprite():IsPlaying("ChargeEnd") and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.FallingAccelModifier = 2
params.Variant = 9
params.Scale = (Eterepernalrng:RandomInt(23)+16)*0.05
params.HeightModifier = -Eterepernalrng:RandomInt(561)-380
npc:FireProjectiles(Isaac.GetRandomPosition(0), Vector(0,0), 0, params)
end
if npc.State == 13 and npc:GetSprite():IsEventTriggered("Shoot") then
Isaac.Spawn(227, 0, 85, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 6, false), Vector(0,0), npc)
end
if npc.State == 14 and ((npc.FrameCount % 6 == 1 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) then
Isaac.Spawn(1000, 55, 0, Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false), Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPolycephalus, 269)

function mod:EterepMrFred(npc)
if npc.Variant == 0 and npc.SubType == 88 then
npc.Velocity = Vector(0,0)
if npc:GetSprite():IsFinished("Appear") and npc.StateFrame >= 20 then
if #Isaac.FindByType(9, 0, 664, false, true) <= 0 and #Isaac.FindByType(9, 0, 662, false, true) <= 0 then
npc:GetSprite():Play("SquirtLong", true)
end
if #Isaac.FindByType(9, 0, 664, false, true) >= 1 or #Isaac.FindByType(9, 0, 662, false, true) >= 1 or Isaac.CountEnemies() >= 3 then
npc:GetSprite():Play("SquirtShort", true)
end
end
if npc:GetSprite():IsFinished("Appear") and npc.StateFrame == 0 then
npc:GetSprite():Play("Idle", false)
npc:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
npc:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
npc.StateFrame = 20
end
if (npc:GetSprite():IsFinished("Appear2") or npc:GetSprite():IsFinished("Appear") or npc:GetSprite():IsFinished("SquirtLong") or npc:GetSprite():IsFinished("SquirtShort") or npc:GetSprite():IsFinished("Barf")) and npc:HasEntityFlags(1<<11) then
nnpc:GetSprite():Play("Dissapear2", true)
end
if (npc:GetSprite():IsFinished("Appear2") or npc:GetSprite():IsFinished("Appear") or npc:GetSprite():IsFinished("SquirtLong") or npc:GetSprite():IsFinished("SquirtShort") or npc:GetSprite():IsFinished("Barf") or npc:GetSprite():IsFinished("Idle")) and npc:HasEntityFlags(1<<9) then
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsFinished("Appear2") then
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsFinished("SquirtLong") or npc:GetSprite():IsFinished("SquirtShort") or npc:GetSprite():IsFinished("Barf") then
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsFinished("Idle") then
local MfredAttack1 = Eterepernalrng:RandomInt(4)+1
if npc.StateFrame == 34 or npc.StateFrame == 35 then
npc:GetSprite():Play("Idle", true)
npc.StateFrame = npc.StateFrame + 1
MfredAttack1 = 0
end
if npc.StateFrame == 20 then
if #Isaac.FindByType(228, -1, -1, false, true) >= 1 then
npc:GetSprite():Play("Cord", true)
npc:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
npc:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
npc.StateFrame = 34
end
if #Isaac.FindByType(228, -1, -1, false, true) == 0 then
npc.StateFrame = 36
end
MfredAttack1 = 0
end
if MfredAttack1 == 1 and #Isaac.FindByType(9, 0, 664, false, true) <= 0 and #Isaac.FindByType(9, 0, 662, false, true) <= 0 then
npc:GetSprite():Play("SquirtLong", true)
end
if MfredAttack1 == 1 and (#Isaac.FindByType(9, 0, 664, false, true) >= 1 or #Isaac.FindByType(9, 0, 662, false, true) >= 1 or Isaac.CountEnemies() >= 3) then
npc:GetSprite():Play("SquirtShort", true)
end
if MfredAttack1 == 2 then
npc:GetSprite():Play("Dissapear1", true)
end
if MfredAttack1 == 3 then
npc:GetSprite():Play("Dissapear2", true)
end
if MfredAttack1 >= 4 and #Isaac.FindByType(9, 0, 664, false, true) <= 0 and #Isaac.FindByType(9, 0, 662, false, true) <= 0 then
npc:GetSprite():Play("Barf", true)
end
if MfredAttack1 >= 4 and (#Isaac.FindByType(9, 0, 664, false, true) >= 1 or #Isaac.FindByType(9, 0, 662, false, true) >= 1 or Isaac.CountEnemies() >= 3) then
npc:GetSprite():Play("SquirtShort", true)
end
end
if npc:GetSprite():IsPlaying("Cord") and npc:GetSprite():GetFrame() == 3 then
npc:PlaySound(115, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Cord") and npc:GetSprite():GetFrame() == 15 then
Eterepmrfredunleash = true
npc:PlaySound(72, 1, 0, false, 1)
npc:PlaySound(72, 1, 0, false, 1)
npc:PlaySound(72, 1, 0, false, 1)
npc:PlaySound(72, 1, 0, false, 1)
end
if npc:GetSprite():IsFinished("Cord") then
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsPlaying("Dissapear1") and npc:GetSprite():GetFrame() == 18 then
npc.Position = Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 44, true)
end
if npc:GetSprite():IsFinished("Dissapear1") then
npc:GetSprite():Play("Appear", true)
end
if npc:GetSprite():IsPlaying("Dissapear2") and npc:GetSprite():GetFrame() == 41 and Eterepernalrng:RandomInt(3)+1 == 1 and not npc:HasEntityFlags(1<<11) then
npc.Position = Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 44, true)
npc.I1 = 1
end
if npc:GetSprite():IsFinished("Dissapear2") and npc.I1 == 0 then
npc:GetSprite():Play("Appear2", true)
end
if npc:GetSprite():IsFinished("Dissapear2") and npc.I1 == 1 then
npc:GetSprite():Play("Appear", true)
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("Appear2") and npc:GetSprite():IsEventTriggered("NewShoot1") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.15
params.DepthOffset = -14
for i = 1,15 do
npc:FireProjectiles(npc.Position+Vector(0,14), Vector.FromAngle(EterepCustomAngle+24*i):Resized(12), 0, params)
end
end
if npc:GetSprite():IsPlaying("SquirtShort") and npc:GetSprite():IsEventTriggered("NewShoot1") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.15
params.DepthOffset = -14
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(0,14), Vector.FromAngle((npc:GetPlayerTarget().Position+Vector(0,14) - npc.Position):GetAngleDegrees()+20*i+280):Resized(12), 0, params)
end
npc:PlaySound(14, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("SquirtLong") and npc:GetSprite():IsEventTriggered("NewShoot1") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.15
params.DepthOffset = -14
for i = 1,45 do
npc:FireProjectiles(npc.Position+Vector(0,14), Vector.FromAngle(EterepMfredAngle+8*i):Resized(11), 0, params)
end
end
if npc:GetSprite():IsPlaying("SquirtLong") and (npc:GetSprite():IsEventTriggered("NewShoot1") or npc:GetSprite():IsEventTriggered("NewShoot3")) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.15
params.DepthOffset = -14
params.Scale = 0.5
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,14), Vector.FromAngle(EterepMfredAngle+72*i):Resized(11), 0, params)
end
EterepMfredAngle = EterepMfredAngle + 8
npc:PlaySound(185, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Barf") and npc:GetSprite():GetFrame() == 7 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(16, 1, 0, false, 1)
npc.I2 = Eterepernalrng:RandomInt(2)+1
end
if npc.I2 == 1 and npc:GetSprite():IsPlaying("Barf") and npc:GetSprite():IsEventTriggered("NewShoot2") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.Variant = 1
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.DepthOffset = 22
npc:FireProjectiles(npc.Position+Vector(-10,-20), Vector.FromAngle(Eterepernalrng:RandomInt(71)+145):Resized(9), 0, params)
npc:FireProjectiles(npc.Position+Vector(-10,-20), Vector.FromAngle(Eterepernalrng:RandomInt(71)+145):Resized(9), 0, params)
end
if npc.I2 == 2 and npc:GetSprite():IsPlaying("Barf") and npc:GetSprite():IsEventTriggered("NewShoot2") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.Variant = 2
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.DepthOffset = 22
npc:FireProjectiles(npc.Position+Vector(-10,-20), Vector.FromAngle(Eterepernalrng:RandomInt(71)+145):Resized(9), 0, params)
npc:FireProjectiles(npc.Position+Vector(-10,-20), Vector.FromAngle(Eterepernalrng:RandomInt(71)+145):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("SquirtLong") and npc:GetSprite():GetFrame() == 3 then
EterepMfredAngle = Eterepernalrng:RandomInt(360)+1
end
if npc:GetSprite():IsPlaying("SquirtLong") and npc:GetSprite():GetFrame() == 29 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(185, 1, 0, false, 1)
end
if (npc:GetSprite():IsPlaying("SquirtShort") or npc:GetSprite():IsPlaying("SquirtLong")) and npc:GetSprite():GetFrame() == 3 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(108, 1, 0, false, 1)
end
if (npc:GetSprite():IsPlaying("Appear") or npc:GetSprite():IsPlaying("Appear2") or npc:GetSprite():IsPlaying("Dissapear1") or npc:GetSprite():IsPlaying("Dissapear2")) and npc:GetSprite():GetFrame() == 3 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(226, 1, 0, false, 1)
end
if (npc:GetSprite():IsPlaying("Dissapear1") or npc:GetSprite():IsPlaying("Dissapear2")) and npc:GetSprite():GetFrame() == 7 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if (npc:GetSprite():IsPlaying("Appear") or npc:GetSprite():IsPlaying("Appear2")) and npc:GetSprite():GetFrame() == 3 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:IsDead() then
Eterepmrfredunleash = false
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMrFred, 270)

function mod:EterepUriel(npc)
if npc.Variant <= 1 and npc.SubType == 88 then
if (npc.State == 9 or npc.State == 10) and npc.StateFrame == 1 and npc.I1 == 1 and npc.I2 == 0 and npc.MaxHitPoints <= 8000 then
npc.State = 14
npc.I1 = 0
npc.I2 = 1
end
if npc.I2 == 1 then
npc.TargetPosition = npc.Position + Vector(0,20)
end
if npc.I2 >= 1 and not npc:HasEntityFlags(1<<7) then
npc.I2 = npc.I2 + 1
end
if npc.I2 >= 1 and npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7) then
npc.I2 = npc.I2 + 1
end
if npc.I2 % 6 == 5 then
npc.TargetPosition = npc.TargetPosition+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.TargetPosition):GetAngleDegrees()):Resized(32)
local lightbeam = Isaac.Spawn(1000, 19, 0, npc.TargetPosition, Vector(0,0), npc)
if npc.Variant == 1 and EterepFallenAngelRedLaser == 1 then
lightbeam:SetColor(Color(1,0,0,1,0,0,0),255,1,false,false)
end
if npc:HasEntityFlags(1<<7) then
npc.I2 = npc.I2 + 1
end
end
if npc.I2 >= 400 then
npc.I2 = 0
end
if npc:GetSprite():IsFinished("LaserShot") and npc.State == 14 then
npc.State = 4
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepUriel, 271)

function mod:EterepUrielTakeDamage(npc, damage, flags, damageSource, cooldown)
if damageSource.SpawnerType == 271 or damageSource.Type == 271 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepUrielTakeDamage, 271)

function mod:EterepGabriel(npc)
if npc.Variant <= 1 and npc.SubType == 88 then
if (npc.State == 9 or npc.State == 10) and npc.StateFrame == 1 and npc.I1 == 1 and npc.I2 == 0 and npc.MaxHitPoints <= 8000 then
npc.State = 14
npc.I1 = 0
npc.I2 = 1
end
if npc.I2 == 1 then
npc.TargetPosition = npc.Position + Vector(0,20)
end
if npc.I2 >= 1 and not npc:HasEntityFlags(1<<7) then
npc.I2 = npc.I2 + 1
end
if npc.I2 >= 1 and npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7) then
npc.I2 = npc.I2 + 1
end
if npc.I2 % 6 == 5 then
npc.TargetPosition = npc.TargetPosition+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.TargetPosition):GetAngleDegrees()):Resized(32)
local lightbeam = Isaac.Spawn(1000, 19, 0, npc.TargetPosition, Vector(0,0), npc)
if npc.Variant == 1 and EterepFallenAngelRedLaser == 1 then
lightbeam:SetColor(Color(1,0,0,1,0,0,0),255,1,false,false)
end
if npc:HasEntityFlags(1<<7) then
npc.I2 = npc.I2 + 1
end
end
if npc.I2 >= 400 then
npc.I2 = 0
end
if npc:GetSprite():IsFinished("LaserShot") and npc.State == 14 then
npc.State = 4
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGabriel, 272)

function mod:EterepGabrielTakeDamage(npc, damage, flags, damageSource, cooldown)
if damageSource.SpawnerType == 272 or damageSource.Type == 272 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepGabrielTakeDamage, 272)

function mod:EterepTheLamb(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 10 and npc.StateFrame == 1 then
local Eterelambpossibleattack = Eterepernalrng:RandomInt(6)+1
npc.Mass = 50 + Eterelambpossibleattack
end
if npc.MaxHitPoints <= 8000 and npc.State == 4 and npc.StateFrame == 1 and Eterepernalrng:RandomInt(2)+1 == 1 and #Isaac.FindByType(273, 10, -1, false, true) >= 1 then
npc.State = 10
npc.StateFrame = 0
npc:GetSprite():Play("HeadCharge", true)
end
if npc.MaxHitPoints <= 8000 and npc.State == 4 and npc.StateFrame == 1 and Eterepernalrng:RandomInt(2)+1 == 1 and #Isaac.FindByType(273, 10, -1, false, true) == 0 then
npc.State = 10
npc.StateFrame = 0
npc:GetSprite():Play("Charge", true)
end
if npc.MaxHitPoints <= 8000 and npc.State == 4 and npc.StateFrame >= 51 then
npc.StateFrame = Eterepernalrng:RandomInt(21)+30
end
if npc.MaxHitPoints <= 8000 and npc.State == 4 then
npc.Velocity = npc.Velocity * 1.25
end
if npc.State == 8 and npc.StateFrame >= 28 and npc.StateFrame <= 52 and ((npc.FrameCount % 4 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
params.BulletFlags = 1 << 1 | 1 << 7 | 1 << 27
params.Scale = 1.8
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.Variant = 4
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(41)+71) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(Eterepernalrng:RandomInt(10)+3), 0, params)
end
if npc.State == 8 then
npc.StateFrame = npc.StateFrame + 1
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.StateFrame < 100 then
npc.StateFrame = 100
end
end
if npc.State == 8 and npc.StateFrame == 128 then
local params = ProjectileParams()
params.Variant = 6
params.FallingAccelModifier = 0.05
params.Scale = 2.7
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.HeightModifier = -10
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(4), 0, params)
end
if npc.Mass == 51 and npc.State == 10 and npc.StateFrame % 14 == 2 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.Scale = 1.5
params.FallingAccelModifier = -0.12
for i = 1,15 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(25)+12+EterepCustomAngle+24*i):Resized((Eterepernalrng:RandomInt(51)+65)*0.1), 0, params)
end
end
if npc.Mass == 52 and npc.State == 10 and npc.StateFrame % 42 == 2 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.Variant = 5
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.FallingAccelModifier = -0.15
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.Scale = 1.5
params.CurvingStrength = 0.02
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
end
if npc.Mass == 52 and npc.State == 10 and npc.StateFrame % 42 == 23 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.Variant = 5
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.FallingAccelModifier = -0.15
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.Scale = 1.5
params.CurvingStrength = -0.02
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
end
if npc.Mass == 53 and npc.State == 10 and npc.StateFrame % 14 == 2 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.Scale = 1.5
params.FallingAccelModifier = -0.12
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(24+EterepCustomAngle+72*i):Resized(10), 0, params)
end
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(48+EterepCustomAngle+72*i):Resized(7.5), 0, params)
end
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(72+EterepCustomAngle+72*i):Resized(5), 0, params)
end
end
if npc.Mass == 54 and npc.State == 10 and npc.StateFrame <= 120 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.FallingAccelModifier = -0.12
params.Scale = 1.5
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*212.5):Resized(9.5), 0, params)
end
if npc.Mass == 54 and npc.State == 10 and npc.StateFrame % 25 == 18 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.FallingAccelModifier = -0.12
params.Scale = 1.5
params.CurvingStrength = -0.003
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
end
if npc.Mass == 55 and npc.State == 10 and npc.StateFrame % 13 == 2 and npc.StateFrame >= 1 then
local lambcustomangle = Eterepernalrng:RandomInt(41)-20
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.12
params.Scale = 1.5
params.BulletFlags = ProjectileFlags.SMART
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+lambcustomangle+-60):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+lambcustomangle+-20):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+lambcustomangle+20):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+lambcustomangle+60):Resized(10), 0, params)
end
if npc.Mass == 56 and npc.State == 10 and npc.StateFrame % 4 == 3 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.NO_WALL_COLLIDE
params.Variant = 4
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.FallingAccelModifier = -0.12
params.Scale = 1.5
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, params)
end
if npc.Mass == 56 and npc.State == 10 and npc.StateFrame % 4 == 1 and npc.StateFrame >= 1 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_RIGHT | ProjectileFlags.NO_WALL_COLLIDE
params.Variant = 4
params.Color = Color(0.11,1.5,2,1,0,0,0)
params.FallingAccelModifier = -0.12
params.Scale = 1.5
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, params)
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheLamb, 273)

function mod:EterepMegaSatanFormOne(npc)
if npc.Variant == 0 and npc.SubType == 84 then
if npc.State == 8 then
npc.StateFrame = npc.StateFrame + 1
end
if npc.State == 8 and npc.StateFrame == 19 then
Eterepmegasatanattack = Eterepernalrng:RandomInt(4)
end
if npc.State == 8 and npc.StateFrame >= 22 and npc.StateFrame <= 42 and npc.StateFrame % 4 == 2 and Eterepmegasatanattack <= 1 then
local brimstoneball = Isaac.Spawn(979, 90, 0, Vector((npc.StateFrame+12)*28-890-Eterepmegasatanattack*56,300), Vector(0,0), npc)
brimstoneball:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
brimstoneball.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
brimstoneball.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
if npc.State == 8 and npc.StateFrame >= 22 and npc.StateFrame <= 42 and npc.StateFrame % 4 == 2 and Eterepmegasatanattack >= 2 then
local brimstoneball = Isaac.Spawn(979, 90, 0, Vector((-npc.StateFrame-12)*28+1405+Eterepmegasatanattack*56,300), Vector(0,0), npc)
brimstoneball:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
brimstoneball.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
brimstoneball.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
if npc.State == 8 and npc.StateFrame == 33 then
npc:PlaySound(241, 1, 0, false, 1)
end
if npc.State == 8 and npc.StateFrame >= 54 and npc.StateFrame <= 74 and npc.StateFrame % 4 == 2 and Eterepmegasatanattack <= 1 then
local brimstoneball = Isaac.Spawn(979, 90, 0, Vector((npc.StateFrame+12)*28-1840+Eterepmegasatanattack*56,300), Vector(0,0), npc)
brimstoneball:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
brimstoneball.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
brimstoneball.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
if npc.State == 8 and npc.StateFrame >= 54 and npc.StateFrame <= 74 and npc.StateFrame % 4 == 2 and Eterepmegasatanattack >= 2 then
local brimstoneball = Isaac.Spawn(979, 90, 0, Vector((-npc.StateFrame-12)*28+2580-Eterepmegasatanattack*56,300), Vector(0,0), npc)
brimstoneball:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
brimstoneball.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
brimstoneball:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
brimstoneball.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
if npc:GetSprite():IsEventTriggered("Smash") then
local params = ProjectileParams()
params.Scale = 1.5
params.Variant = 5
params.FallingAccelModifier = -0.1
for i = 1,20 do
npc:FireProjectiles(npc.Position+Vector(0,1), Vector.FromAngle(EterepCustomAngle+18*i):Resized(11), 0, params)
end
end
if Eterepmegasatanattack == 1 and npc.State == 9 and npc.StateFrame >= 1 and npc.StateFrame % 9 == 1 then
local paramsa = ProjectileParams()
paramsa.BulletFlags = ProjectileFlags.CURVE_LEFT
paramsa.Scale = 1.8
paramsa.Variant = 5
paramsa.FallingAccelModifier = -0.12
paramsa.DepthOffset = 30
paramsa.CurvingStrength = 0.003
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(60)+130):Resized(10), 0, paramsa)
local paramsb = ProjectileParams()
paramsb.BulletFlags = ProjectileFlags.CURVE_RIGHT
paramsb.Scale = 1.8
paramsb.Variant = 5
paramsb.FallingAccelModifier = -0.12
paramsb.DepthOffset = 30
paramsb.CurvingStrength = 0.003
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(60)-9):Resized(10), 0, paramsb)
local paramsd = ProjectileParams()
paramsd.Scale = 1.8
paramsd.Variant = 5
paramsd.FallingAccelModifier = -0.12
paramsd.DepthOffset = 30
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(131)+50):Resized(10), 0, paramsd)
local paramsc = ProjectileParams()
paramsc.Scale = 1.8
paramsc.Variant = 5
paramsc.FallingAccelModifier = -0.12
paramsc.DepthOffset = 30
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(131)+50):Resized(10), 0, paramsc)
end
if Eterepmegasatanattack == 2 and npc.State == 9 and npc.StateFrame >= 1 and npc.FrameCount % 12 == 11 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.92,0.43,0,1)
params.Color = projectilenewcolor
params.Scale = 2.5
params.Variant = 6
params.DepthOffset = 30
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(131)+25):Resized(Eterepernalrng:RandomInt(9)+6), 0, params)
end
if Eterepmegasatanattack == 3 and npc.State == 9 and npc.StateFrame >= 1 and npc.StateFrame % 4 == 3 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.MEGA_WIGGLE
params.Scale = 2
params.Variant = 5
params.FallingAccelModifier = -0.075
params.DepthOffset = 30
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(161)+10):Resized(13), 0, params)
end
if Eterepmegasatanattack == 4 and npc.State == 9 and npc.StateFrame >= 1 and npc.FrameCount % 20 == 3 then
local params = ProjectileParams()
params.Scale = 1.8
params.FallingAccelModifier = -0.11
params.Variant = 5
params.DepthOffset = 30
for i = 1,11 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(15*i):Resized(10), 0, params)
end
end
if Eterepmegasatanattack == 4 and npc.State == 9 and npc.StateFrame >= 1 and npc.FrameCount % 20 == 13 then
local params = ProjectileParams()
params.Scale = 1.8
params.FallingAccelModifier = -0.11
params.Variant = 5
params.DepthOffset = 30
for i = 1,11 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(15*i+7.5):Resized(10), 0, params)
end
end
if Eterepmegasatanattack == 5 and npc.State == 9 and npc.StateFrame >= 1 and npc.StateFrame % 3 == 1 then
local params = ProjectileParams()
params.Scale = 1.8
params.FallingAccelModifier = -0.075
params.Variant = 5
params.DepthOffset = 30
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(90+Eterepmegasatansixattack):Resized(13), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(90+-Eterepmegasatansixattack):Resized(13), 0, params)
Eterepmegasatansixattack = Eterepmegasatansixattack + 11
end
if Eterepmegasatanattack == 6 and npc.State == 9 and npc.StateFrame >= 1 and npc.FrameCount % 48 == 15 then
local params = ProjectileParams()
local test = math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) * 0.038
params.Scale = 1.5
params.FallingAccelModifier = 0.97
params.Variant = 5
params.DepthOffset = 30
params.BulletFlags = ProjectileFlags.EXPLODE | ProjectileFlags.ACID_RED
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(51)+140) * 0.1
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(test), 0, params)
end
if Eterepmegasatanattack == 6 and npc.State == 9 and npc.StateFrame >= 1 and npc.FrameCount % 20 == 9 then
local params = ProjectileParams()
local megasatanangle = Eterepernalrng:RandomInt(21)+350
params.Scale = 1.8
params.FallingAccelModifier = -0.12
params.Variant = 5
params.DepthOffset = 30
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(megasatanangle+25*i-10):Resized(9), 0, params)
end
end
if Eterepmegasatanattack == 7 and npc.State == 9 and npc.StateFrame >= 1 and npc.FrameCount % 18 == 1 then
local params = ProjectileParams()
params.Variant = 5
params.FallingAccelModifier = -0.12
params.DepthOffset = 30
params.Scale = 1.8
for i = 1,4 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(45)-22+36*i-15):Resized(13), 0, params)
end
for i = 1,4 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(45)-22+36*i):Resized(11), 0, params)
end
for i = 1,4 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle(Eterepernalrng:RandomInt(45)-22+36*i+15):Resized(9), 0, params)
end
end
if Eterepmegasatansixattack >= 70 then
Eterepmegasatansixattack = Eterepmegasatansixattack - 140
end
if npc:GetSprite():IsEventTriggered("ShootStart") then
Eterepmegasatanattack = Eterepernalrng:RandomInt(7)+1
end
if npc:GetSprite():IsEventTriggered("ShootStop") then
Eterepmegasatanattack = 0
end
end
if npc.Variant == 1 or npc.Variant == 2 and npc.SubType == 84 then
if npc.State == 8 and npc.StateFrame == 31 then
for i = 1,3 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position-Vector(0,-40), Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = EterepCustomAngle+120*i
end
npc.StateFrame = npc.StateFrame + 1
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMegaSatanFormOne, 274)

function mod:EterepMegaSatanFormOneTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.SubType == 84 and damageSource.Type == 979 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepMegaSatanFormOneTakeDamage, 274)

function mod:EterepMegaSatanFormTwo(npc)
if npc.Variant == 0 and npc.SubType == 0 and EterepMegaSatan == true then
npc:GetSprite():Load("gfx/e_mega satan 2.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear", true)
npc.MaxHitPoints = 2000
npc.HitPoints = npc.MaxHitPoints
npc.SubType = 84
Eterepmegasatanattack = Eterepernalrng:RandomInt(7)+1
end
if npc.Variant == 0 and npc.SubType == 84 then
if Eterepmegasatanattack == 1 and (npc.StateFrame % 9 == 8 or npc.StateFrame % 9 == 3) and npc.State == 9 then
local paramsa = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(math.sin(30+Game():GetFrameCount()*0.2)*0.5+1.5,math.sin(60+Game():GetFrameCount()*0.2)+1,0,1)
paramsa.Color = projectilenewcolor
paramsa.BulletFlags = ProjectileFlags.CURVE_LEFT
paramsa.Scale = 1.8
paramsa.Variant = 7
paramsa.FallingAccelModifier = -0.12
paramsa.DepthOffset = 20
paramsa.CurvingStrength = 0.003
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(100)+90):Resized(10), 0, paramsa)
local paramsb = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(math.sin(30+Game():GetFrameCount()*0.2)*0.5+1.5,math.sin(60+Game():GetFrameCount()*0.2)+1,0,1)
paramsb.Color = projectilenewcolor
paramsb.BulletFlags = ProjectileFlags.CURVE_RIGHT
paramsb.Scale = 1.8
paramsb.Variant = 7
paramsb.FallingAccelModifier = -0.12
paramsb.DepthOffset = 20
paramsb.CurvingStrength = 0.003
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(100)-9):Resized(10), 0, paramsb)
end
if Eterepmegasatanattack == 2 and npc.FrameCount % 9 == 8 and npc.State == 9 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.92,0.43,0,1)
params.Color = projectilenewcolor
params.Scale = 2.5
params.Variant = 6
params.DepthOffset = 20
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(131)+25):Resized(Eterepernalrng:RandomInt(9)+6), 0, params)
end
if Eterepmegasatanattack == 3 and npc.StateFrame % 2 == 1 and Eterepernalrng:RandomInt(5)+1 <= 4 and npc.State == 9 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(2.76,2.76,2.8,1)
params.Color = projectilenewcolor
params.BulletFlags = ProjectileFlags.MEGA_WIGGLE
params.Scale = 2
params.Variant = 5
params.FallingAccelModifier = -0.075
params.DepthOffset = 20
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(161)+10):Resized(13), 0, params)
end
if Eterepmegasatanattack == 4 and npc.FrameCount % 10 == 3 and npc.State == 9 then
local muchbulletsangle = Eterepernalrng:RandomInt(21)-10
local params = ProjectileParams()
params.Scale = 1.8
params.FallingAccelModifier = -0.08
params.Variant = 5
params.DepthOffset = 20
for i = 1,13 do
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(muchbulletsangle+12.5*i+2.5):Resized(12), 0, params)
end
end
if Eterepmegasatanattack == 5 and npc.StateFrame % 3 == 1 and npc.State == 9 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(math.sin(30+Game():GetFrameCount()*0.2)*0.5+1.5,math.sin(60+Game():GetFrameCount()*0.2)+1,0,1)
params.Color = projectilenewcolor
params.FallingAccelModifier = -0.075
params.Variant = 7
params.DepthOffset = 20
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(90+Eterepmegasatansixattack):Resized(13), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(90+-Eterepmegasatansixattack):Resized(13), 0, params)
Eterepmegasatansixattack = Eterepmegasatansixattack + 17
end
if Eterepmegasatanattack == 6 and npc.FrameCount % 36 == 15 and npc.State == 9 then
local params = ProjectileParams()
local test = math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) * 0.035
params.Scale = 1.5
params.FallingAccelModifier = 0.97
params.Variant = 5
params.DepthOffset = 20
params.BulletFlags = ProjectileFlags.EXPLODE | ProjectileFlags.ACID_RED
params.FallingSpeedModifier = -20
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(test), 0, params)
end
if Eterepmegasatanattack == 6 and npc.FrameCount % 15 == 9 and npc.State == 9 then
local params = ProjectileParams()
local megasatanangle = Eterepernalrng:RandomInt(21)+350
params.Scale = 1.8
params.FallingAccelModifier = -0.12
params.Variant = 5
params.DepthOffset = 20
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(megasatanangle+25*i-10):Resized(9), 0, params)
end
end
if Eterepmegasatanattack == 7 and npc.State == 9 and npc.FrameCount % 14 == 1 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(2.76,2.76,2.8,1)
params.Color = projectilenewcolor
params.Variant = 5
params.FallingAccelModifier = -0.12
params.DepthOffset = 20
params.Scale = 1.8
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(37)-18+30*i-15):Resized(13), 0, params)
end
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(37)-18+30*i):Resized(11), 0, params)
end
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,9), Vector.FromAngle(Eterepernalrng:RandomInt(37)-18+30*i+15):Resized(9), 0, params)
end
end
if Eterepmegasatansixattack >= 70 then
Eterepmegasatansixattack = Eterepmegasatansixattack - 140
end
if npc:GetSprite():IsEventTriggered("ShootStart") then
Eterepmegasatanattack = Eterepernalrng:RandomInt(7)+1
end
if npc:GetSprite():IsEventTriggered("ShootStop") then
Eterepmegasatanattack = 0
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMegaSatanFormTwo, 275)

function mod:EterepRoundy(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("DigOut") and npc:GetSprite():IsEventTriggered("Crackwave") and npc.Mass ~= 101 and npc:GetPlayerTarget().Position:Distance(npc.Position) >= 280 then
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position, Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()
npc.Mass = 101
end
if npc:GetSprite():IsPlaying("DigOut") and npc:GetSprite():IsEventTriggered("Crackwave") and npc.Mass ~= 101 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 279 then
local shockwave = Isaac.Spawn(1000, 61, 1, npc.Position, Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
npc.Mass = 101
end
if npc:GetSprite():IsPlaying("DigOut") and npc:GetSprite():GetFrame() == 5 and npc.Mass ~= 100 then
npc.Mass = 100
end
if npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.Scale = 1.5
params.FallingAccelModifier = 0.83
params.BulletFlags = 1 << 1 | 1 << 2 | 1 << 7
params.FallingSpeedModifier = -30
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) * 0.025), 0, params)
npc:PlaySound(318, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRoundy, 276)

function mod:EterepRoundyTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 0 and npc.SubType == 85 and damageSource.Type == 276 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepRoundyTakeDamage, 276)

function mod:EterepBlackGlobinDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
Isaac.Spawn(279, 0, 85, npc.Position+Vector(8,0), Vector(0,0), npc)
Isaac.Spawn(280, 0, 85, npc.Position+Vector(-8,0), Vector(0,0), npc)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBlackGlobinDeath, 278)

function mod:EterepBlackGlobinTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 0 and npc.SubType == 85 and Eterepernalrng:RandomInt(3)+1 == 1 and #Isaac.FindByType(85, -1, -1, false, true) <= 12 then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepBlackGlobinTakeDamage, 278)

function mod:EterepBlackGlobinHeadTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 0 and npc.SubType == 85 and Eterepernalrng:RandomInt(2)+2 == 2 and #Isaac.FindByType(85, -1, -1, false, true) <= 12 then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepBlackGlobinHeadTakeDamage, 279)

function mod:EterepBlackGlobinBody(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc:GetSprite():PlayOverlay("Blood", false)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
EterepEnemyChasePlayer(0.42, npc, 0.86, 75)
if ((npc.FrameCount % 110 == 98 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 55 == 49 and not npc:HasEntityFlags(1<<7))) and Isaac.CountEnemies() <= 6 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 250 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
EntityNPC.ThrowSpider(npc.Position, npc, npc:GetPlayerTarget().Position, false, 0.0)
npc:PlaySound(181, 1, 0, false, 1)
end
if ((npc.FrameCount % 110 == 98 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 55 == 49 and not npc:HasEntityFlags(1<<7))) and Isaac.CountEnemies() <= 6 and npc:GetPlayerTarget().Position:Distance(npc.Position) > 250 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
npc:PlaySound(181, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBlackGlobinBody, 280)

function mod:EterepMegaClotty(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.Scale = 1.55
for i = 1,12 do
npc:FireProjectiles(npc.Position-Vector(0,-10), Vector.FromAngle(EterepCustomAngle+30*i):Resized(11), 0, params)
end
npc:PlaySound(48, 1, 0, false, 1)
if Eterepernalrng:RandomInt(4)+1 == 1 and #Isaac.FindByType(15, 0, -1, false, true) == 0 then
local clotty = Isaac.Spawn(15, 0, 87, npc.Position-Vector(40,0), Vector(0,0), npc)
clotty:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMegaClotty, 282)

function mod:EterepMegaClottyDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
Isaac.Spawn(15, 0, 87, npc.Position+Vector(8,0), Vector(0,0), npc)
Isaac.Spawn(15, 0, 87, npc.Position+Vector(-8,0), Vector(0,0), npc)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMegaClottyDeath, 282)

function mod:EterepBoneKnight(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.I2 = 90
end
if npc.FrameCount % 5 == 4 and npc.Mass == 11 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 200
end
if npc.Mass == 11 then
npc.I1 = npc.I1 + 1
end
if npc.Mass ~= 10 and npc.I1 >= 30 then
npc.Mass = 10
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("Hori") and npc:GetSprite().FlipX == false and npc.I2 ~= 0 then
npc.I2 = 0
end
if npc:GetSprite():IsPlaying("Down") and npc.I2 ~= 90 then
npc.I2 = 90
end
if npc:GetSprite():IsPlaying("Hori") and npc:GetSprite().FlipX == true and npc.I2 ~= 180 then
npc.I2 = 180
end
if npc:GetSprite():IsPlaying("Up") and npc.I2 ~= 270 then
npc.I2 = -90
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBoneKnight, 283)

function mod:EterepBoneKnightReflectTears(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount >= 20 and npc2.Type == 2 and ((npc.I2 ~= 180 and (npc2.Position - npc.Position):GetAngleDegrees() >= -80+npc.I2 and (npc2.Position - npc.Position):GetAngleDegrees() <= 80+npc.I2) or (npc.I2 == 180 and (((npc2.Position - npc.Position):GetAngleDegrees() >= 100 and (npc2.Position - npc.Position):GetAngleDegrees() <= 180) or ((npc2.Position - npc.Position):GetAngleDegrees() >= -180 and (npc2.Position - npc.Position):GetAngleDegrees() <= -100)))) and not npc2:ToTear():HasTearFlags(1<<1) then
local projectile = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
projectile:ToProjectile().Scale = npc2.Size/5.6
if projectile:ToProjectile().Scale < 1.5 then
projectile.CollisionDamage = 1
end
if projectile:ToProjectile().Scale >= 1.5 then
projectile.CollisionDamage = 2
end
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepBoneKnightReflectTears, 283)

function mod:EterepBoneKnightTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 0 and npc.SubType == 85 then
npc.Mass = 11
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepBoneKnightTakeDamage, 283)

function mod:EterepCyclopia(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local gusher = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCyclopia, 284)

function mod:EterepRedGhost(npc)
if npc.Variant == 0 and npc.SubType == 85 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
if npc:IsVisible() and npc.FrameCount >= 40 then
npc.StateFrame = npc.StateFrame + 1
if npc.StateFrame == 1 then
npc.I2 = npc.I1 +1
end
if npc:GetSprite():IsPlaying("ShootDown") and (npc:GetSprite():GetFrame() == 15 or npc:GetSprite():GetFrame() == 27 or npc:GetSprite():GetFrame() == 39) then
for i = 1,29 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,-35*i), Vector.FromAngle(0):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc:GetSprite():IsPlaying("ShootRight") and (npc:GetSprite():GetFrame() == 15 or npc:GetSprite():GetFrame() == 27 or npc:GetSprite():GetFrame() == 39) then
for i = 1,29 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(-35*i,0), Vector.FromAngle(0):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc:GetSprite():IsPlaying("ShootLeft") and (npc:GetSprite():GetFrame() == 15 or npc:GetSprite():GetFrame() == 27 or npc:GetSprite():GetFrame() == 39) then
for i = 1,29 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(35*i,0), Vector.FromAngle(0):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
if npc:GetSprite():IsPlaying("ShootUp") and (npc:GetSprite():GetFrame() == 15 or npc:GetSprite():GetFrame() == 27 or npc:GetSprite():GetFrame() == 39) then
for i = 1,29 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Position-Vector(0,35*i), Vector.FromAngle(0):Resized(0), npc)
creep:GetSprite().Scale = Vector(1.4,1.4)
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRedGhost, 285)

function mod:EterepFleshDeathHead(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 66
end
if npc.FrameCount % 255 == 125 then
bullet = Isaac.Spawn(61, 0, 0, npc.Position, Vector.FromAngle(22.5):Resized(0), npc)
npc:PlaySound(265, 1, 0, false, 1)
end
if npc.FrameCount >= 2 and (npc:IsDead() or Isaac.CountEnemies() == 0) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9.25), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFleshDeathHead, 286)

function mod:EterepMomDeadHand(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
for i = 1,3 do
EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMomDeadHand, 287)

function mod:EterepDukie(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") and Isaac.CountEnemies() <= 3 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) and Eterepernalrng:RandomInt(4) ~= 2 then
local spawn = Isaac.Spawn(256, 0, 0, npc.Position+Vector(0,15), Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") and Isaac.CountEnemies() <= 3 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 0 or Game().Difficulty == 1) and Eterepernalrng:RandomInt(4) ~= 2 then
local spawn = Isaac.Spawn(256, 0, 0, npc.Position+Vector(0,15), Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDukie, 288)

function mod:EterepUlcer(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shooot") then
if Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 and (Game().Difficulty == 0 or Game().Difficulty == 1) and Eterepernalrng:RandomInt(4) ~= 2 then
local spawn = Isaac.Spawn(256, 0, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if Game():GetLevel():GetStage() >= LevelStage.STAGE2_GREED and (Game().Difficulty == 2 or Game().Difficulty == 3) and Eterepernalrng:RandomInt(4) ~= 2 then
local spawn = Isaac.Spawn(256, 0, 0, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) then
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+25*i+310):Resized(9), 0, ProjectileParams())
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepUlcer, 289)

function mod:EterepMeatBall(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 8 and npc.StateFrame >= 5 and npc.StateFrame <= 26 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.65
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(81)+80) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, params)
end
if npc.State == 8 then
npc.StateFrame = npc.StateFrame + 1
end
if npc.State == 16 and npc:GetPlayerTarget().Position:Distance(npc.Position) >= 130 then
npc.Mass = 13
end
if npc.State == 9 and npc.Mass == 13 then
npc.State = 8
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMeatBall, 290)

function mod:EterepMeatBallDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local host = Isaac.Spawn(27, 0, 85, npc.Position, Vector(0,0), npc)
host:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMeatBallDeath, 290)

function mod:EterepGiantCoin(npc)
if npc.SpawnerType == 406 and npc.SpawnerVariant == 1 then
if npc.FrameCount <= 2 then
npc.Scale = 0
end
if npc.FrameCount == 3 then
npc.Scale = 1
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGiantCoin, 293)

function mod:EterepHushFly(npc)
if #Isaac.FindByType(407, 0, 83, false, true) >= 1 and npc.FrameCount <= 1 then
local morph = Eterepernalrng:RandomInt(3)+1
if morph == 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_hush fly1.png")
npc:GetSprite():LoadGraphics()
end
if morph == 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_hush fly2.png")
npc:GetSprite():LoadGraphics()
end
if morph == 3 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_hush fly3.png")
npc:GetSprite():LoadGraphics()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHushFly, 296)

function mod:EterepBlueGaperonhush(npc)
if #Isaac.FindByType(407, 0, 83, false, true) >= 1 and npc.FrameCount <= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Hush Gaper Body.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_Hush Gaper.png")
npc:GetSprite():LoadGraphics()
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlueGaperonhush, 297)

function mod:EtereppreBlueGaperrework(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local gusher = Isaac.Spawn(11, 2, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EtereppreBlueGaperrework, 297)

function mod:EterepBlueBoilonhush(npc)
if #Isaac.FindByType(407, 0, 83, false, true) >= 1 and npc.FrameCount <= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Hush Boil.png")
npc:GetSprite():LoadGraphics()
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlueBoilonhush, 298)

function mod:EterepBlueBoileternal(npc)
if npc.Variant == 0 and npc.SubType == 87 then
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.155
params.BulletFlags = ProjectileFlags.CONTINUUM
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20*i+320):Resized(10.5), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBlueBoileternal, 298)

function mod:EterepGreedGaperDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local gusher = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepGreedGaperDeath, 299)

function mod:EterepMushroom(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shooot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1, 20 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(61)+40)*0.1), 0, params)
end
npc:PlaySound(72, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMushroom, 300)

function mod:EterepPoisonMind(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 100 == 35 and npc.Mass ~= 4 then
npc.Mass = 4
end
if npc.Mass == 4 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 200 then
local params = ProjectileParams()
params.Scale = 1.75
params.FallingSpeedModifier = -18
params.FallingAccelModifier = 0.9
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
params.BulletFlags = ProjectileFlags.ACID_GREEN
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(math.abs((npc.Position - npc:GetPlayerTarget().Position):Length()) * 0.04), 0, params)
npc.Mass = 5
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPoisonMind, 301)

function mod:EterepBlister(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 and npc.SpawnerType == 205 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
npc.MaxHitPoints = 25
npc.HitPoints = 25
end
if ((npc.FrameCount % 112 == 38 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 56 == 19 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if ((npc.FrameCount % 112 == 94 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 56 == 47 and not npc:HasEntityFlags(1<<7))) and #Isaac.FindByType(404, -1, -1, false, true) <= 0 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Attack", true)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
npc:PlaySound(69, 1, 0, false, 1)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local darkball = Isaac.Spawn(404, 1, 0, npc.Position-Vector(0,-10), Vector.FromAngle(90):Resized(6), npc)
darkball:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:PlaySound(414, 1, 0, false, 1)
end
if npc:IsDead() then
local boil = Isaac.Spawn(30, 2, 87, npc.Position, Vector(0,0), npc)
boil:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBlister, 303)

function mod:EterepTheThing(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.HeightModifier = 15
params.FallingAccelModifier = 0.34
for i = 1,8 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(123)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(71)+325):Resized((Eterepernalrng:RandomInt(51)+50)*0.1), 0, params)
end
end
if npc.I2 == 2 and ((npc.FrameCount % 6 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.HeightModifier = 15
params.FallingAccelModifier = 0.34
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(123)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(71)+325):Resized((Eterepernalrng:RandomInt(51)+50)*0.1), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheThing, 304)

function mod:EterepMinistro(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and npc.FrameCount >= 25 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame % 53 == 40 then
npc:GetSprite():Play("Hop", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame % 53 == 13 then
npc:GetSprite():Play("Attack", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetPlayerTarget().Position.X <= npc.Position.X and npc.FrameCount >= 50 then
npc:GetSprite().FlipX = true
end
if npc:GetPlayerTarget().Position.X >= npc.Position.X and npc.FrameCount >= 50 then
npc:GetSprite().FlipX = false
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 5 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/12 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/12
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/12)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
npc:PlaySound(69, 1, 0, false, 1)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.99
params.Scale = 0.47
for i = 1, Eterepernalrng:RandomInt(6)+5 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(131)+95) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(71)+30)*0.1), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMinistro, 305)

function mod:EterepPortal(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc.State = 50
if npc.Mass < 120 then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 115 and npc:GetSprite():IsPlaying("Idle") then
local portalspawn = Eterepernalrng:RandomInt(5)+1
if npc.I1 == 5 then
if portalspawn == 1 then
Isaac.Spawn(10, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 2 then
Isaac.Spawn(15, 0, 87, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 3 then
Isaac.Spawn(16, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 4 then
Isaac.Spawn(305, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 5 then
Isaac.Spawn(61, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
end
if npc.I1 == 4 then
if portalspawn == 1 then
Isaac.Spawn(24, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 2 then
Isaac.Spawn(208, 1, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 3 then
Isaac.Spawn(25, 1, 87, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 4 then
Isaac.Spawn(31, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 5 then
Isaac.Spawn(26, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
end
if npc.I1 == 3 then
if portalspawn == 1 then
Isaac.Spawn(41, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 2 then
Isaac.Spawn(32, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 3 then
Isaac.Spawn(209, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 4 then
Isaac.Spawn(237, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 5 then
Isaac.Spawn(38, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
end
if npc.I1 == 2 then
if portalspawn == 1 then
Isaac.Spawn(247, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 2 then
Isaac.Spawn(59, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 3 then
Isaac.Spawn(290, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 4 then
Isaac.Spawn(53, 0, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 5 then
Isaac.Spawn(57, 1, 85, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
end
if npc.I1 == 1 then
if portalspawn == 1 then
Isaac.Spawn(79, 0, 88, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 2 then
Isaac.Spawn(69, 0, 88, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 3 then
Isaac.Spawn(405, 0, 88, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 4 then
Isaac.Spawn(20, 0, 88, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
if portalspawn == 5 then
Isaac.Spawn(267, 0, 88, npc.Position+Vector(0,-5), Vector(0,0), npc)
end
npc:GetSprite():Play("Death", true)
npc.Mass = 125
end
npc.I1 = npc.I1 - 1
npc:PlaySound(28, 1, 0, false, 1)
npc.StateFrame = 0
end
if npc.Mass >= 102 and npc.Mass <= 116 then
npc.Mass = npc.Mass + 1
end
if npc.Mass == 117 then
npc.Mass = 120
npc:GetSprite():Play("Death", true)
end
if npc:GetSprite():IsPlaying("Death") and npc:GetSprite():GetFrame() == 8 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsFinished("Death") then
if npc.Mass == 125 then
npc:Remove()
end
npc:GetSprite():Play("Appear2", true)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false)
npc.Position = npc.TargetPosition
end
if npc:GetSprite():IsPlaying("Appear2") and npc:GetSprite():GetFrame() == 4 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsFinished("Appear") then
npc.StateFrame = 75
npc.I1 = 5
end
if npc:GetSprite():IsFinished("Appear") or npc:GetSprite():IsFinished("Appear2") then
npc:GetSprite():Play("Idle", true)
npc.Mass = 100
npc.StateFrame = npc.StateFrame + 20
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPortal, 306)

function mod:EterepPortalTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 0 and npc.SubType == 85 and npc.Mass == 100 then
npc.Mass = 102
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepPortalTakeDamage, 306)

function mod:EterepTarBoy(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.01
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,0.5,0.5,1)
params.Color = projectilenewcolor
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(8), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTarBoy, 307)

function mod:EterepFistuloid(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.SpawnerType == 413 then
npc.HitPoints = npc.MaxHitPoints * 0.65
npc.SubType = 0
end
npc.SubType = 0
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFistuloid, 308)

function mod:EterepGush(npc)
if npc.Variant == 0 and npc.SubType == 85 and ((npc.FrameCount % 168 == 144 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 84 == 72 and not npc:HasEntityFlags(1<<7))) and #Isaac.FindByType(309, -1, -1, false, true) <= 8 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.97
params.Scale = 2
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(46)+200) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(math.abs((npc.Position - Game():GetRoom():FindFreePickupSpawnPosition(npc:GetPlayerTarget().Position, 2, false)):Length()) * 0.035), 0, params)
npc:PlaySound(181, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGush, 309)

function mod:EterepFleshDeath(npc)
if npc.Variant <= 3 and npc.SubType == 85 then
EterepEnemyChasePlayer(0.47, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
npc:GetSprite():PlayOverlay("Walk", false)
if npc.FrameCount % 7 == 4 then
Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
end
if npc.State < 3 then
npc.State = 9
end
if npc:IsDead() then
local eternalmeat = Isaac.Spawn(310, 1, 77, Game():GetRoom():FindFreePickupSpawnPosition(npc.Position, 12, true), Vector(0,0), npc)
eternalmeat:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
if npc.Variant == 0 then
local newspawn = Isaac.Spawn(310, 1, 85, npc.Position, Vector(0,0), npc)
newspawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 1 then
local newspawn = Isaac.Spawn(310, 2, 85, npc.Position, Vector(0,0), npc)
newspawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 2 then
local newspawn = Isaac.Spawn(310, 3, 85, npc.Position, Vector(0,0), npc)
newspawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 3 then
local newspawn = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
newspawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
return true
end
if npc.Variant == 0 and npc.SubType == 1 and npc.FrameCount <= 1 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4)) then
npc:Morph(310, 1, 0, -1)
npc.HitPoints = npc.MaxHitPoints
npc.State = 0
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 0 and npc.SubType == 2 and npc.FrameCount <= 1 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4)) then
npc:Morph(310, 2, 0, -1)
npc.HitPoints = npc.MaxHitPoints
npc.State = 0
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 0 and npc.SubType == 3 and npc.FrameCount <= 1 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4)) then
npc:Morph(310, 3, 0, -1)
npc.HitPoints = npc.MaxHitPoints
npc.State = 0
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 77 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+22*i+316):Resized(9.5), 0, params)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFleshDeath, 310)

function mod:EterepMrMine(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 4 and npc.V2.X ~= 0 then
npc.V2 = Vector(0,npc.V2.Y)
end
if npc.State == 8 and npc.V2.X ~= 1 then
npc.V2 = Vector(1,npc.V2.Y)
local params = ProjectileParams()
params.HeightModifier = -7
for i = 1,8 do
npc:FireProjectiles(npc.Position+Vector.FromAngle(45*i):Resized(20), Vector.FromAngle(45*i):Resized(8.5), 0, params)
end
end
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(9), 0, ProjectileParams())
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMrMine, 311)

function mod:EterepMrMineDeath(npc)
if npc:IsDead() and npc.Variant == 0 and ((npc.SubType == 0 and EterepClassicEnemiesPatterns == 1) or npc.SubType == 85) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(10), 0, params)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMrMineDeath, 311)

function mod:EterepTheStain(npc)
if npc.Variant == 0 and npc.SubType == 84 then
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
for i = 1, 12 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(109)+32) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(61)+150):Resized((Eterepernalrng:RandomInt(91)+30)*0.1), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(61)+330):Resized((Eterepernalrng:RandomInt(91)+30)*0.1), 0, params)
end
end
if npc.FrameCount <= 30 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_Stain.png")
npc:GetSprite():LoadGraphics()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheStain, 401)

function mod:EterepBrownie(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 16 and npc:GetSprite():IsEventTriggered("Shoot") and npc:Exists() then
local dangle = Isaac.Spawn(261, 1, 89, npc.Position, Vector(0,0), npc)
dangle:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
dangle.HitPoints = 100
dangle.MaxHitPoints = 100
npc:Remove()
npc:PlaySound(28, 1, 0, false, 1)
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 10 then
local params = ProjectileParams()
params.Variant = 5
params.Scale = 1.5
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(10), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBrownie, 402)

function mod:EterepForsaken(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 8 and ((npc.FrameCount % 50 == 48 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 24 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
for i = 1,7 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+51.4285714286*i):Resized(7.5), 0, params)
end
end
if npc.State == 13 and npc.StateFrame == 13 then
Isaac.Spawn(227, 0, 85, npc.Position, Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepForsaken, 403)

function mod:EterepLittleHorn(npc)
if npc.Variant == 1 and (npc.SubType == 77 or npc.SubType == 78) then
if npc.FrameCount >= 10 then
npc.Velocity = npc.Velocity * 0.9125 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1)
end
if npc.FrameCount <= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_ball.png")
npc:GetSprite():LoadGraphics()
end
if npc:IsDead() then
Isaac.Spawn(4, npc.SubType - 74, 0, npc.Position, Vector(0,0), npc)
end
if npc.SpawnerType == 411 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.6
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLittleHorn, 404)

function mod:EterepRagMan(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 4 and npc.HitPoints <= npc.MaxHitPoints * 0.5 and npc.V1.X == 0 and npc.MaxHitPoints <= 8000 then
npc.State = 50
npc:GetSprite():Play("Rebirth", true)
npc.V1 = Vector(1,0)
end
if npc.State == 50 then
npc.Velocity = npc.Velocity * 0.4
end
if npc:GetSprite():IsPlaying("Rebirth") and npc:GetSprite():GetFrame() == 35 and npc.State == 50 and npc.V1.X == 1 and npc.Mass ~= 54 then
local angle = Eterepernalrng:RandomInt(120)
for i = 1,3 do
local fly = Isaac.Spawn(927, 4000, angle+120*i, npc.Position, Vector(0,0), npc)
fly.Mass = 580
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
fly:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
fly:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
fly.Parent = npc
end
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.BulletFlags = ProjectileFlags.SMART
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(7), 0, params)
end
npc:PlaySound(393, 1, 0, false, 1)
npc:PlaySound(265, 1, 0, false, 1)
npc.HitPoints = npc.HitPoints + 20
npc.Mass = 54
end
if npc:GetSprite():IsFinished("Rebirth") and npc.State == 50 then
npc.State = 4
npc:GetSprite():Play("Idle", true)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRagMan, 405)

function mod:EterepUltraGreed(npc)
if npc.Variant == 0 and npc.SubType == 84 and npc.State == 510 and npc.StateFrame % 5 == 3 then
local params = ProjectileParams()
params.Variant = 7
params.Scale = 1.5
params.HeightModifier = -30
params.FallingAccelModifier = 0.2
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(51)+100)*0.1), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(51)+100)*0.1), 0, params)
end
if npc.Variant == 1 and (npc:GetSprite():IsPlaying("BreakFreeShort") or npc:GetSprite():IsPlaying("BreakFreeLong")) and EterepUltraGreed == true then
npc:GetSprite():Load("gfx/e_ultra greedier.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("BreakFreeShort", true)
npc.SubType = 84
EterepUltraGreed = false
end
if npc.Variant == 1 and npc.SubType == 84 then
if npc:GetSprite():IsEventTriggered("Stomp1") or npc:GetSprite():IsEventTriggered("Stomp2") then
local bombcoin = Isaac.Spawn(293, 2, 0, Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false), Vector(0,0), npc)
bombcoin:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
bombcoin:GetSprite().Scale = Vector(0,0)
end
if npc:GetSprite():IsEventTriggered("Smash") then
for i = 1,3 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position-Vector(0,-40), Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = EterepCustomAngle+120*i
end
end
end
if npc.Variant == 1 and npc.SubType == 84 and npc:GetSprite():IsEventTriggered("BreakGibs") then
for i = 1,3 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position-Vector(0,-40), Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = EterepCustomAngle+120*i
end
end
if npc:GetSprite():IsPlaying("Death") and npc:GetSprite():GetFrame() == 62 then
Isaac.Spawn(5, 20, 0, npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(81)+40)*0.1), npc)
Isaac.Spawn(5, 20, 0, npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(81)+40)*0.1), npc)
Isaac.Spawn(5, 20, 0, npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(81)+40)*0.1), npc)
Isaac.Spawn(5, 20, 0, npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(81)+40)*0.1), npc)
Isaac.Spawn(5, 20, 0, npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(81)+40)*0.1), npc)
end
if npc.Variant == 0 and npc.SubType == 84 and npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepUltraGreed, 406)

function mod:EterepHush(npc)
if npc.SubType == 83 then
if npc.State == 300 and npc.Mass ~= 1022 then
npc.Mass = 1022
end
if npc.State ~= 300 and npc.Mass ~= 1000 then
npc.Mass = 1000
end
if npc.State == 710 and npc.StateFrame % 200 == 1 then
Eterepchoosehushattack1 = Eterepernalrng:RandomInt(5)+1
Eterepchoosehushattack2 = Eterepernalrng:RandomInt(5)+1
Eterephushattack1 = Eterepernalrng:RandomInt(5)+1
Eterephushattack2 = Eterepernalrng:RandomInt(5)+1
Eterephushattack3 =Eterepernalrng:RandomInt(5)+1
if Eterepchoosehushattack1 > 2 then
Eterephushlocation2 = ignore
end
if Eterepchoosehushattack2 > 3 then
Eterephushlocation3 = ignore
end
end
if npc.State == 710 and npc.StateFrame % 5 == 1 then
Eterephushlocation1 = npc.Position + Vector(46,0)
Eterephushlocation2 = npc.Position + Vector(-56,0)
Eterephushlocation3 = npc.Position + Vector(0,25)
end
if npc:GetSprite():IsEventTriggered("ChooseAttack") then
Eterepchoosehushattack1 = Eterepernalrng:RandomInt(5)+1
Eterepchoosehushattack2 = Eterepernalrng:RandomInt(5)+1
Eterephushattack1 = Eterepernalrng:RandomInt(5)+1
Eterephushattack2 = Eterepernalrng:RandomInt(5)+1
Eterephushattack3 = Eterepernalrng:RandomInt(5)+1
if npc.I1 == 1 then
Eterephushlocation1 = npc.Position + Vector(-55,-45)
end
if npc.I1 == 1 and Eterepchoosehushattack1 <= 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(51,-46)
end
if npc.I1 == 1 and Eterepchoosehushattack1 <= 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(51,-46)
end
if npc.I1 == 1 and Eterepchoosehushattack2 <= 3 then
Eterephushlocation3 = npc.Position + Vector(0,-70)
end
if npc.I1 == 3 then
Eterephushlocation1 = npc.Position + Vector(46,-60)
end
if npc.I1 == 3 and Eterepchoosehushattack1 <= 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(-56,-59)
end
if npc.I1 == 3 and Eterepchoosehushattack1 <= 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(-56,-59)
end
if npc.I1 == 3 and Eterepchoosehushattack2 <= 3 then
Eterephushlocation3 = npc.Position + Vector(0,-35)
end
if npc.I1 == 0 then
Eterephushlocation1 = npc.Position + Vector(-24,9)
end
if npc.I1 == 0 and Eterepchoosehushattack1 <= 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(-55,-72)
end
if npc.I1 == 0 and Eterepchoosehushattack1 <= 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(-55,-72)
end
if npc.I1 == 0 and Eterepchoosehushattack2 <= 3 then
Eterephushlocation3 = npc.Position + Vector(-78,-20)
end
if npc.I1 == 2 then
Eterephushlocation1 = npc.Position + Vector(52,-76)
end
if npc.I1 == 2 and Eterepchoosehushattack1 <= 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(28,7)
end
if npc.I1 == 2 and Eterepchoosehushattack1 <= 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints then
Eterephushlocation2 = npc.Position + Vector(28,7)
end
if npc.I1 == 2 and Eterepchoosehushattack2 <= 3 then
Eterephushlocation3 = npc.Position + Vector(80,-31)
end
if Eterepchoosehushattack1 > 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints then
Eterephushlocation2 = ignore
end
if Eterepchoosehushattack1 > 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints then
Eterephushlocation2 = ignore
end
if Eterepchoosehushattack2 > 3 then
Eterephushlocation3 = ignore
end
end
if npc.State == 300 and npc.StateFrame <= 40 and npc.StateFrame > 0 then
npc.StateFrame = 0
end
if npc.State == 300 and npc.StateFrame > 100 then
npc.StateFrame = 100
end
if (npc.State == 600 and npc.StateFrame >= 5) or (npc.State == 710 and npc.StateFrame >= 5) then
if Eterephushattack1 == 1 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 6 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 0 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(npc.StateFrame*8.5):Resized(11), 0, params)
end
if Eterephushattack2 == 1 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 6 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(120+npc.StateFrame*8.5):Resized(11), 0, params)
end
if Eterephushattack3 == 1 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 6 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 2 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(240+npc.StateFrame*8.5):Resized(11), 0, params)
end
if Eterephushattack1 == 1 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 4 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 0 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(npc.StateFrame*11):Resized(11), 0, params)
end
if Eterephushattack2 == 1 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 4 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 1 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(120+npc.StateFrame*11):Resized(11), 0, params)
end
if Eterephushattack3 == 1 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 4 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 0 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(240+npc.StateFrame*11):Resized(11), 0, params)
end
if Eterephushattack1 == 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 52 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+i*24):Resized(9), 0, params)
end
end
if Eterephushattack2 == 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 52 == 28 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 14 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(120+EterepCustomAngle+i*24):Resized(9), 0, params)
end
end
if Eterephushattack3 == 2 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 52 == 46 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 23 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(240+EterepCustomAngle+i*24):Resized(9), 0, params)
end
end
if Eterephushattack1 == 2 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 52 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
for i = 1,20 do
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+i*18):Resized(9), 0, params)
end
end
if Eterephushattack2 == 2 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 52 == 28 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 14 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
for i = 1,20 do
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(120+EterepCustomAngle+i*18):Resized(9), 0, params)
end
end
if Eterephushattack3 == 2 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 52 == 46 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 23 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
for i = 1,20 do
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(240+EterepCustomAngle+i*18):Resized(9), 0, params)
end
end
if Eterephushattack1 == 3 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 60 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 30 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
for i = 1,9 do
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+3.5*i+15):Resized(8.5), 0, params)
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+3.5*i+135):Resized(8.5), 0, params)
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+3.5*i+255):Resized(8.5), 0, params)
end
end
if Eterephushattack2 == 3 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 60 == 26 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 30 == 13 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
for i = 1,9 do
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(EterepCustomAngle+3.5*i+55):Resized(8.5), 0, params)
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(EterepCustomAngle+3.5*i+175):Resized(8.5), 0, params)
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(EterepCustomAngle+3.5*i+295):Resized(8.5), 0, params)
end
end
if Eterephushattack3 == 3 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 60 == 42 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 30 == 21 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
for i = 1,9 do
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(EterepCustomAngle+3.5*i+75):Resized(8.5), 0, params)
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(EterepCustomAngle+3.5*i+195):Resized(8.5), 0, params)
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(EterepCustomAngle+3.5*i+315):Resized(8.5), 0, params)
end
end
if Eterephushattack1 == 3 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 90 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 45 == 5 and not npc:HasEntityFlags(1<<7))) then
local hushangle = Eterepernalrng:RandomInt(81)-40
local params = ProjectileParams()
params.Variant = 1
for i = 1,42 do
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(10+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+i*8):Resized(8.5), 0, params)
end
end
if Eterephushattack2 == 3 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 90 == 40 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 45 == 20 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local hushangle = Eterepernalrng:RandomInt(81)-40
local params = ProjectileParams()
params.Variant = 1
for i = 1,42 do
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(10+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+i*8):Resized(8.5), 0, params)
end
end
if Eterephushattack3 == 3 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 90 == 70 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 45 == 35 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local hushangle = Eterepernalrng:RandomInt(81)-40
local params = ProjectileParams()
params.Variant = 1
for i = 1,42 do
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(10+(npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+i*8):Resized(8.5), 0, params)
end
end
if Eterephushattack1 == 4 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 12 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 6 == 0 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized(10), 0, params)
end
if Eterephushattack2 == 4 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 12 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 6 == 2 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized(10), 0, params)
end
if Eterephushattack3 == 4 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 12 == 8 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 6 == 4 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized(10), 0, params)
end
if Eterephushattack1 == 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 10 == 0 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 5 == 0 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized(10), 0, params)
end
if Eterephushattack2 == 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 10 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 5 == 2 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized(10), 0, params)
end
if Eterephushattack3 == 4 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 10 == 8 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 5 == 4 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 1
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(61)-30):Resized(10), 0, params)
end
if Eterephushattack1 == 5 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 52 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 2
params.CurvingStrength = -0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+i*24):Resized(6), 0, params)
end
end
if Eterephushattack2 == 5 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 52 == 28 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 14 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 2
params.CurvingStrength = 0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(120+EterepCustomAngle+i*24):Resized(6), 0, params)
end
end
if Eterephushattack3 == 5 and npc.MaxHitPoints * 0.8 <= npc.HitPoints and ((npc.FrameCount % 52 == 46 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 26 == 23 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 2
params.CurvingStrength = -0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(240+EterepCustomAngle+i*24):Resized(6), 0, params)
end
end
if Eterephushattack1 == 5 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 66 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 33 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 3
params.CurvingStrength = 0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation1, Vector.FromAngle(EterepCustomAngle+i*24):Resized(6), 0, params)
end
end
if Eterephushattack2 == 5 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 66 == 32 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 33 == 16 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation2 ~= ignore then
local params = ProjectileParams()
params.Variant = 3
params.CurvingStrength = -0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation2, Vector.FromAngle(120+EterepCustomAngle+i*24):Resized(6), 0, params)
end
end
if Eterephushattack3 == 5 and npc.MaxHitPoints * 0.8 > npc.HitPoints and ((npc.FrameCount % 66 == 54 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 33 == 27 and not npc:HasEntityFlags(1<<7))) and Eterephushlocation3 ~= ignore then
local params = ProjectileParams()
params.Variant = 3
params.CurvingStrength = 0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,15 do
npc:FireProjectiles(Eterephushlocation3, Vector.FromAngle(240+EterepCustomAngle+i*24):Resized(6), 0, params)
end
end
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHush, 407)

function mod:EterepRagMega(npc)
if npc.Variant == 0 and npc.SubType == 89 then
if npc.State == 8 and npc.StateFrame >= 31 then
npc.StateFrame = 30
end
if npc:GetSprite():IsPlaying("Cover") and npc:GetSprite():GetFrame() == 18 and npc.Size == 36 then
npc.Size = 37
npc:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
end
if npc:GetSprite():IsPlaying("Uncover") and npc:GetSprite():GetFrame() == 20 and npc.Size == 37 then
npc.Size = 35
npc:ClearEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
end
if npc:GetSprite():IsPlaying("Uncover") and npc:GetSprite():GetFrame() == 1 and npc.Size == 38 then
npc.Size = 36
npc:ClearEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
end
if npc.Size == 35 then
local angle = Eterepernalrng:RandomInt(120)
for i = 1,4 do
local fly = Isaac.Spawn(927, 4000, angle+90*i, npc.Position, Vector(0,0), npc)
fly.Mass = 580
fly.HitPoints = 25
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
fly.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
fly:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
fly:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
fly.Parent = npc
end
npc.Size = 36
end
end
if npc.Variant == 1 and npc.SubType == 0 and npc.Parent ~= nil and npc.Parent.Type == 409 and npc.Parent.Variant == 0 and npc.Parent.SubType == 89 then
npc:Remove()
end
if npc.Variant == 1 and npc.SubType == 0 and npc.FrameCount >= 30 and npc.Parent ~= nil and npc.Parent.Type == 885 and npc.Parent.Variant == 0 and npc.Parent.SubType == 85 and npc.Parent.Mass == 11 then
npc.Velocity = npc.Velocity * 0.9125 + (npc.Parent.Position - npc.Position):Resized(1)
npc.State = 50
end
if npc.Variant == 1 and npc.SubType == 0 and npc.Parent ~= nil and npc.Parent.Type == 885 and (npc.Parent.Mass == 11 or npc.Parent.Mass == 12) then
npc:Kill()
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRagMega, 409)

function mod:EterepSistersVisBoss(npc)
if npc:GetSprite():IsPlaying("RollLoop") and npc:CollidesWithGrid() then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if math.abs((npc.Position - grid.Position):Length()) < 75 and (grid:GetType() == GridEntityType.GRID_ROCK or grid:GetType() == GridEntityType.GRID_ROCKB or grid:GetType() == GridEntityType.GRID_ROCKT or grid:GetType() == GridEntityType.GRID_ROCK_BOMB or grid:GetType() == GridEntityType.GRID_ROCK_ALT) then
grid:Destroy(true)
end
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSistersVisBoss, 410)

function mod:EterepBigHorn(npc)
if npc.SpawnerType == 411 and npc.Parent ~= nil and npc.Parent.SubType == 83 then
if npc.FrameCount <= 3 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_big horn.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_big horn.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_big horn.png")
npc:GetSprite():ReplaceSpritesheet(3, "gfx/Sprites/e_big horn.png")
npc:GetSprite():ReplaceSpritesheet(4, "gfx/Sprites/e_big horn.png")
npc:GetSprite():LoadGraphics()
end
if npc:GetSprite():IsPlaying("HandBigBomb") or npc:GetSprite():IsPlaying("HandThrow") then
npc:GetSprite():Play("HandBombs",true)
npc.State = 9
end
if npc.State == 8 and npc.StateFrame == 2 then
npc.Velocity = npc.Velocity * 1.8
end
if npc.State == 9 and npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,Eterepernalrng:RandomInt(3)+1 do
local bomb = Isaac.Spawn(4, 3, 5555, npc.Position+Vector(Eterepernalrng:RandomInt(31)-15,Eterepernalrng:RandomInt(31)-15), Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(Eterepernalrng:RandomInt(17)+16), npc)
bomb.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBigHorn, 411)

function mod:EterepDeliriumBoss(npc)
if npc.FrameCount <= 2 and Game():GetRoom():GetFrameCount() <= 2 and EterepFinalacementernal == true then
npc.MaxHitPoints = 11111
npc.HitPoints = 11111
local projectilenewcolor = Color(3,3,3,1,0,0,0)
projectilenewcolor:SetColorize(3,3,3,1)
npc:SetColor(projectilenewcolor,1,1,false,false)
EterepDelirium = 1
end
if npc.FrameCount % 30 == 14 and npc.MaxHitPoints == 11111 and EterepRegenBoss >= 1 then
npc.HitPoints = npc.HitPoints + 10 * EterepRegenBoss
end
if npc.FrameCount % 30 == 14 and npc.MaxHitPoints == 11111 and EterepRegenBoss == 0 then
npc.HitPoints = npc.HitPoints + 10
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDeliriumBoss, 412)

function mod:EterepDeliriumBoss2(npc)
if EterepDelirium == 1 then
local projectilenewcolor = Color(3,3,3,1,0,0,0)
projectilenewcolor:SetColorize(3,3,3,1)
npc:SetColor(projectilenewcolor,2,2,false,false)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepDeliriumBoss2, 412)

function mod:EterepMatriarch(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 10 and npc:GetSprite():IsEventTriggered("Shoot") and npc:GetSprite().FlipX then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.ACID_RED
params.Variant = 4
params.Scale = 2
npc:FireProjectiles(npc.Position+Vector(35,25), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
end
if npc.State == 10 and npc:GetSprite():IsEventTriggered("Shoot") and not npc:GetSprite().FlipX then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.ACID_RED
params.Variant = 4
params.Scale = 2
npc:FireProjectiles(npc.Position+Vector(-35,25), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
end
if npc.State == 16 and npc:GetSprite():IsEventTriggered("Shoot") and npc:Exists() then
local fistula1 = Isaac.Spawn(72, 0, 144, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
fistula1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fistula2 = Isaac.Spawn(73, 0, 144, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
fistula2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local fistula3 = Isaac.Spawn(73, 0, 144, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
fistula3:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
for i = 1,3 do
local chub = Isaac.Spawn(28, 0, 89, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
chub:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
chub.MaxHitPoints = 120
chub.HitPoints = 120
end
Isaac.Spawn(1000, 77, 0, npc.Position, Vector(0,0), npc)
npc:PlaySound(28, 1, 0, false, 1)
npc:Remove()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMatriarch, 413)

function mod:EterepBishop(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc.StateFrame = npc.StateFrame + 1
if npc.StateFrame >= 120 and not npc:GetSprite():IsPlaying("Shoot") then
npc:GetSprite():Play("Shoot", true)
npc.State = 8
end
if npc:GetSprite():IsPlaying("Shoot") and npc.StateFrame >= 21 then
npc.StateFrame = Eterepernalrng:RandomInt(40)-20
end
if npc:GetSprite():IsEventTriggered("Teleport") then
Isaac.Spawn(1000, 15, 0, npc.Position, Vector(0,0), npc)
npc.Position = Game():GetRoom():FindFreePickupSpawnPosition(Isaac.GetRandomPosition(0), 2, false)
npc.TargetPosition = npc.Position
npc:PlaySound(215, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBishop, 805)

function mod:EterepBubbles(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.I2 >= 5 then
npc.I2 = 4
end
if npc.State == 8 and npc.I1 >= 1 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.1
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(31)+60)*0.1), 0, params)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 300 and npc.StateFrame <= 90 and npc.State == 4 then
npc.StateFrame = 100
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBubbles, 806)

function mod:EterepWraithGusher(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(807, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(807, 2, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
if npc.Variant == 1 and npc.SubType == 85 then
npc:GetSprite():PlayOverlay("Blood", false)
EterepEnemyChasePlayer(0.42, npc, 0.86, 75)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
if ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(9.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
return true
end
if npc.Variant == 2 and npc.SubType == 85 then
npc.Velocity = npc.Velocity * 0.4
if ((npc.FrameCount % 6 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) and npc.ProjectileCooldown > 0 and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.ProjectileCooldown = npc.ProjectileCooldown - 1
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and npc.ProjectileCooldown <= 0 and npc:GetSprite():IsPlaying("Shake") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) then
npc.ProjectileCooldown = 9
npc:GetSprite():Play("Attack", true)
end
if not npc:GetSprite():IsPlaying("Appear") and not npc:GetSprite():IsPlaying("Shake") and not npc:GetSprite():IsPlaying("Attack") then
npc:GetSprite():Play("Shake", true)
end
if npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Shake", true)
end
if npc:GetSprite():IsFinished("Attack") then
npc:GetSprite():Play("Shake", true)
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+35*i+255):Resized(9), 0, ProjectileParams())
end
npc:PlaySound(146, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepWraithGusher, 807)

function mod:EterepWilo(npc)
if npc.Parent ~= nil and npc.Parent.Type == 913 and npc.Parent.SubType == 89 and npc.MaxHitPoints ~= 2 then
if npc.State == 7 then
npc:GetSprite():Load("gfx/e_willo.anm2",true)
npc:GetSprite():LoadGraphics()
end
if npc.State ~= 7 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_willo.png")
npc:GetSprite():LoadGraphics()
end
npc.MaxHitPoints = 2
npc.HitPoints = 2
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepWilo, 808)

function mod:EterepSmallLeech(npc)
if npc.FrameCount <= 1 and #Isaac.FindByType(901, 0, 89, false, true) >= 1 then
npc.MaxHitPoints = 2
npc.HitPoints = 2
end
if npc.FrameCount == 8 and npc.SpawnerType == 817 and npc.EntityCollisionClass == EntityCollisionClass.ENTCOLL_PLAYEROBJECTS then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSmallLeech, 810)

function mod:EterepCorpseGaperDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType >= 100 and npc.SubType <= 106 then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(11, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(12, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCorpseGaperDeath, 811)

function mod:EterepSubHorf(npc)
if npc.Variant == 1 and npc.SubType == 0 and npc.FrameCount <= 1 and ((#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster0) or (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster1) or (EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1) or (npc.SpawnerType <= 1 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4)))) then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_tainted sub horf.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.25
npc.Mass = 7
npc.MaxHitPoints = 75
npc.HitPoints = npc.MaxHitPoints
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 1 and npc.Mass == 7 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSubHorf, 812)

function mod:EterepBlurb(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
npc.State = 4
end
if npc.State == 4 then
npc.Velocity = npc.Velocity * 1.15
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 140 and npc.FrameCount >= 20 then
npc:GetSprite():PlayOverlay("HeadAttack", true)
npc.State = 8
end
end
if npc.State == 8 and npc.StateFrame ~= 0 then
npc.StateFrame = 0
end
if npc.State == 16 then
npc.StateFrame = npc.StateFrame + 1
if npc.StateFrame >= 40 then
npc.State = 20
EterepEnemyChasePlayer(0.65, npc, 0.86, 75)
npc:GetSprite():PlayOverlay("FillingMouth", false)
npc.StateFrame = 0
end
end
if npc.State == 20 then
EterepEnemyChasePlayer(0.7, npc, 0.86, 75)
npc.StateFrame = npc.StateFrame + 1
if npc.StateFrame >= 16 then
npc:GetSprite():PlayOverlay("HeadFull", false)
npc.State = 4
npc.StateFrame = 0
end
end
if npc.State == 14 then
npc.State = 8
end
if (npc:IsDead() and npc.State == 4) or (npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 2) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.26
for i = 1, 15 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(71)+12) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+(Eterepernalrng:RandomInt(51)+335)):Resized((Eterepernalrng:RandomInt(61)+60)*0.1), 0, params)
end
npc.State = 14
npc:PlaySound(226, 1, 0, false, 1)
if npc:IsDead() then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(12, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
if npc:IsDead() and npc.State ~= 4 then
local deathspawn = Eterepernalrng:RandomInt(7)+1
if deathspawn <= 3 or deathspawn >= 5 then
local gusher = Isaac.Spawn(11, 1, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if deathspawn == 4 then
local gusher = Isaac.Spawn(12, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
return true
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepBlurb, 813)

function mod:EterepPolty(npc)
if npc.SubType == 85 then
if npc.Variant == 0 and (npc:GetSprite():IsPlaying("PickupFirst") or npc:GetSprite():IsPlaying("Pickup")) and npc:GetSprite():GetFrame() == 11 and npc.V2.X ~= 1 then
npc.V2 = Vector(1,0)
end
if npc.Variant == 1 and (npc:GetSprite():IsPlaying("PickupFirst") or npc:GetSprite():IsPlaying("Pickup")) and npc.V2.X ~= 1 then
npc.V2 = Vector(1,0)
npc.Mass = 15
end
if (npc:GetSprite():IsPlaying("Throw")) and npc:GetSprite():GetFrame() == 5 and npc.V2.X ~= 0 then
npc.V2 = Vector(0,0)
local projectile = Isaac.Spawn(9, 8, 151, npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(12), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8)+Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(3), npc)
projectile:GetSprite():Load("gfx/e_special rocks.anm2",true)
projectile:GetSprite():LoadGraphics()
projectile:GetSprite():Play("Bomb",true)
projectile:ToProjectile().FallingAccel = 0.45
projectile:ToProjectile().FallingSpeed = -3
projectile:ToProjectile().Height = -35
projectile:ToProjectile():AddProjectileFlags(ProjectileFlags.NO_WALL_COLLIDE)
projectile:ToProjectile():AddProjectileFlags(ProjectileFlags.CHANGE_FLAGS_AFTER_TIMEOUT)
projectile:ToProjectile().ChangeTimeout = 8
end
if (npc:GetSprite():IsPlaying("Throw")) and npc:GetSprite():GetFrame() == 10 then
npc.Mass = 16
end
if npc:IsDead() and npc.V2.X ~= 0 then
npc.V2 = Vector(0,0)
local projectile = Isaac.Spawn(9, 8, 151, npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(2), npc)
projectile:GetSprite():Load("gfx/e_special rocks.anm2",true)
projectile:GetSprite():LoadGraphics()
projectile:GetSprite():Play("Bomb",true)
projectile:ToProjectile().FallingAccel = 0.45
projectile:ToProjectile().FallingSpeed = -3
projectile:ToProjectile().Height = -35
projectile:ToProjectile():AddProjectileFlags(ProjectileFlags.NO_WALL_COLLIDE)
projectile:ToProjectile():AddProjectileFlags(ProjectileFlags.CHANGE_FLAGS_AFTER_TIMEOUT)
projectile:ToProjectile().ChangeTimeout = 8
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPolty, 816)

function mod:EterepPrey(npc)
if npc.Variant == 0 and (npc.SubType == 0 or npc.SubType == 85) and npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 4 and npc.Mass ~= 6 then
local spider = EntityNPC.ThrowSpider(npc.Position, npc, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(70)+30):Resized(0), false, 0.0)
spider.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
spider:ToNPC():Morph(810, 0, 0, -1)
if npc.SubType == 85 then
local spider = EntityNPC.ThrowSpider(npc.Position, npc, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(70)+30):Resized(0), false, 0.0)
spider.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
spider:ToNPC():Morph(810, 0, 0, -1)
end
npc.Mass = 6
end
if npc.Variant == 0 and (npc.SubType == 0 or npc.SubType == 85) and npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 5 and npc.Mass ~= 7 then
npc.Mass = 7
end
if npc.Variant == 0 and npc.SubType == 85 and npc:IsDead() then
for i = 1,5 do
local spider = EntityNPC.ThrowSpider(npc.Position, npc, Vector(npc.Position.X+Eterepernalrng:RandomInt(281)-140, npc.Position.Y+Eterepernalrng:RandomInt(281)-140), false, 0.0)
spider:ToNPC():Morph(810, 0, 0, -1)
end
end
if npc.Variant == 1 and npc.SubType == 85 and npc:IsDead() then
for i = 1,3 do
local smalllech = Isaac.Spawn(808, 0, 0, npc.Position, Vector(0,0), npc)
smalllech:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPrey, 817)

function mod:EterepFlyBombCollideWithPlayer(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and (npc2.Type == 1 or npc2:ToPlayer()) then
for i = 1,12 do
Isaac.Spawn(9, 0, 0, npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepFlyBombCollideWithPlayer, 819)

function mod:EterepDanny(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.StateFrame >= 20 then
npc.StateFrame = 19
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 24 and npc.I1 ~= 1 then
npc:GetSprite():Play("Attack", true)
npc.I1 = 1
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 28 and npc.I1 ~= 0 then
npc.I1 = 0
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.StateFrame >= 50 then
npc.StateFrame = 49
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 24 and npc.I1 ~= 1 and #Isaac.FindByType(33, 11, -1, false, true) <= 12 then
npc:GetSprite():Play("Attack", true)
npc.I1 = 1
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 28 and npc.I1 ~= 0 then
npc.I1 = 0
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
if npc.State ~= 8 and npc.FrameCount == 40 and #Isaac.FindByType(906, -1, -1, false, true) >= 1 then
npc.State = 8
npc:GetSprite():Play("Attack", true)
if npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
if npc.Position.X < npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDanny, 820)

function mod:EterepBlaster(npc)
if npc.State ~= 8 and npc.FrameCount == 40 and #Isaac.FindByType(906, -1, -1, false, true) >= 1 then
npc.State = 8
npc.StateFrame = 1
npc:GetSprite():Play("Attack", true)
if npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
if npc.Position.X < npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBlaster, 821)

function mod:EterepBouncer(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount >= 20 and npc.State ~= 16 then
npc.State = 16
npc:GetSprite():PlayOverlay("HeadInflate", true)
npc:PlaySound(484, 1, 0, false, 1)
end
if npc.FrameCount >= 60 and ((npc.FrameCount % 16 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 8 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.05
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(16)+15) * 0.1
params.BulletFlags = ProjectileFlags.ACCELERATE
params.Acceleration = 0.975
params.Scale = (Eterepernalrng:RandomInt(23)+14) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(51)+70)*0.1), 0, params)
end
if npc:IsDead() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
for i = 1,12 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(61)+40)*0.1), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBouncer, 822)

function mod:EterepQuakey(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 4  and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 200 and npc.FrameCount % 16 == 9 and Eterepernalrng:RandomInt(3)+1 == 3 then
npc.State = 8
npc:GetSprite():Play("Jump", true)
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 24 and npc.I1 <= 1 then
npc:GetSprite():Play("Jump", true)
npc.I1 = npc.I1 + 1
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 7 and npc.I1 <= 2 then
npc.Velocity = Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):Normalized():GetAngleDegrees()):Resized(15)
end
if npc.State == 8 and npc:GetSprite():GetFrame() == 28 and npc.I1 ~= 0 then
npc.I1 = 0
end
end
if npc.State ~= 8 and npc.FrameCount == 40 and #Isaac.FindByType(906, -1, -1, false, true) >= 1 then
npc.State = 8
npc:GetSprite():Play("Jump", true)
if npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
if npc.Position.X < npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepQuakey, 823)

function mod:EterepGyro(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.State == 8 and npc.I2 >= 5 and npc.I2 <= 10 and npc.Mass <= 19 then
npc.I2 = 25
npc.Mass = npc.Mass + 1
end
if npc.State == 8 and npc.I2 == 3 and npc.Mass == 20 then
npc.Mass = 10
end
if npc:CollidesWithGrid() and npc.Velocity:Length() >= 5 and npc.State == 8 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.025
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(8.5), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGyro, 824)

function mod:EterepGyroCollision(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc2.Type == 33 then
local spawn = Isaac.Spawn(824, 1, 85, npc.Position, Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepGyroCollision, 824)

function mod:EterepGyroTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 1 and npc.SubType == 85 and flags == DamageFlag.DAMAGE_FIRE and damageSource.SpawnerType ~= 1 and damageSource.SpawnerType ~= 3 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepGyroTakeDamage, 824)

function mod:EterepFireWorm(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") then
Isaac.Spawn(33, 10, 1, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-25):Resized(13.75), npc)
Isaac.Spawn(33, 10, 1, npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+25):Resized(13.75), npc)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFireWorm, 825)

function mod:EterepHardy(npc)
if npc.Variant == 0 and npc.SubType == 0 and npc.Mass ~= 101 and npc.FrameCount <= 1 and ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4))then
npc:Morph(826, 0, 0, -1)
npc:GetSprite():Load("gfx/e_hardy.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear", true)
npc.Mass = 101
npc.Scale = 1.25
npc.MaxHitPoints = 78
npc.HitPoints = 78
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Mass == 101 then
if npc:GetData().Etereternaliseternal ~= 1 then
npc:GetData().Etereternaliseternal = 1
end
if npc:GetSprite():IsPlaying("Hit2") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 2
params.Variant = 9
for i = 1,Eterepernalrng:RandomInt(3)+4 do
params.HeightModifier = -Eterepernalrng:RandomInt(591)-350
npc:FireProjectiles(Isaac.GetRandomPosition(0), Vector(0,0), 0, params)
end
end
if npc:GetSprite():IsPlaying("Hit3") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 2
params.Variant = 9
for i = 1,Eterepernalrng:RandomInt(5)+12 do
params.HeightModifier = -Eterepernalrng:RandomInt(591)-350
npc:FireProjectiles(Isaac.GetRandomPosition(0), Vector(0,0), 0, params)
end
end
if npc:IsDead() and npc.HitPoints >= 1 then
local params = ProjectileParams()
params.FallingAccelModifier = 2
params.Variant = 9
for i = 1,Eterepernalrng:RandomInt(10)+21 do
params.HeightModifier = -Eterepernalrng:RandomInt(591)-350
npc:FireProjectiles(Isaac.GetRandomPosition(0), Vector(0,0), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHardy, 826)

function mod:EterepFaceless(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.State == 3 and npc.StateFrame == 1 then
npc.State = 8
end
if npc:GetSprite():IsOverlayPlaying("Attack") and npc:GetSprite():GetOverlayFrame() == 9 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.03
for i = 1,10 do
npc:FireProjectiles(npc.Position+Vector(0,npc.Variant*-30), Vector.FromAngle(EterepCustomAngle+36*i):Resized(8.5), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc.FrameCount <= 1 and #Isaac.FindByType(906, 0, -1, false, true) >= 1 then
npc:Morph(821, 0, 0, -1)
npc:GetSprite():Play("WalkVert", true)
npc.HitPoints = npc.MaxHitPoints
if (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster0) or (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster1) then
npc:Morph(821, 0, 85, -1)
npc:GetSprite():Play("WalkVert", true)
npc.HitPoints = npc.MaxHitPoints
npc.Scale = 1.25
end
end
if npc.FrameCount <= 1 and #Isaac.FindByType(906, 0, 0, false, true) >= 1 then
npc:Morph(821, 0, 0, -1)
npc:GetSprite():Play("WalkVert", true)
npc.HitPoints = npc.MaxHitPoints
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFaceless, 827)

function mod:EterepFacelessDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local gusher = Isaac.Spawn(11, 0, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
if npc:IsDead() and npc.Variant == 1 and npc.SubType == 85 then
local blubber = Isaac.Spawn(210, 0, 85, npc.Position, Vector(0,0), npc)
blubber:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFacelessDeath, 827)

function mod:EterepMole(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
if npc.Variant == 0 then
params.FallingAccelModifier = -0.02
end
if npc.Variant == 1 then
params.FallingAccelModifier = -0.06
end
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+5*i+335):Resized(9.5), 0, params)
end
end
if npc.Variant == 1 and npc.Velocity:Length() <= 8 then
npc.Velocity = npc.Velocity * 1.2
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMole, 829)

function mod:EterepBigBony(npc)
if npc.Variant == 10 and npc.SubType == 85 then
if npc.FrameCount >= 4 then
npc.Velocity = npc.Velocity * 0.9125 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBigBony, 830)

function mod:EterepGuttedFatty(npc)
if npc.Variant == 10 and npc.FrameCount <= 1 and npc.Parent ~= nil and npc.Parent.Type == 831 and npc.Parent.SubType == 85 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_gutted fatty.png")
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 0 and npc.SubType == 85 then
if npc.HitPoints <= npc.MaxHitPoints * 0.8333 and npc.Mass == 40 then
Isaac.Spawn(1000, 2, 0, npc.Position+Vector(-15,-85), Vector(0,0), npc)
local eye = Isaac.Spawn(927, 8899, 0, npc.Position, Vector(0,0), npc)
eye.Mass = 180
eye:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
eye.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
eye.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
eye:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
eye:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
eye.Parent = npc
npc.Mass = 41
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_gutted fatty2.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_gutted fatty2.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_gutted fatty2.png")
npc:GetSprite():LoadGraphics()
npc:PlaySound(237, 1, 0, false, 1)
end
if npc.HitPoints <= npc.MaxHitPoints * 0.5000 and npc.Mass == 41 then
Isaac.Spawn(1000, 2, 0, npc.Position+Vector(25,-70), Vector(0,0), npc)
local eye = Isaac.Spawn(927, 8899, 0, npc.Position, Vector(0,0), npc)
eye.Mass = 360
eye:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
eye.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
eye.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
eye:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
eye:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
eye.Parent = npc
npc.Mass = 42
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_gutted fatty.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_gutted fatty.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_gutted fatty.png")
npc:GetSprite():LoadGraphics()
npc:PlaySound(237, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGuttedFatty, 831)

function mod:EterepFanatic(npc)
if npc.Variant == 1 and npc.Mass ~= 13 and #Isaac.FindByType(905, 0, 88, false, true) >= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_exorcist body.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_fanatic.png")
npc:GetSprite():LoadGraphics()
npc.Size = 17
npc.Scale = 1.25
npc.HitPoints = 50
npc.Mass = 13
if npc:GetData().Etereternaliseternal ~= 1 then
npc:GetData().Etereternaliseternal = 1
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFanatic, 832)

function mod:EterepCandler(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 33 and Eterepernalrng:RandomInt(2)+1 == 1 then
npc.State = 8
npc:GetSprite():Play("Attack", true)
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("Shoot") then
Isaac.Spawn(33, 10, 1, npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+180):Resized(7), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCandler, 833)

function mod:EterepWhipper(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("AttackUp") and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot")) then
npc:FireProjectiles(npc.Position+Vector.FromAngle(40*npc:GetSprite():GetFrame()+60):Resized(40), Vector.FromAngle(40*npc:GetSprite():GetFrame()+60):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector.FromAngle(40*npc:GetSprite():GetFrame()+120):Resized(40), Vector.FromAngle(40*npc:GetSprite():GetFrame()+120):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackDown") and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot")) then
npc:FireProjectiles(npc.Position+Vector.FromAngle(40*npc:GetSprite():GetFrame()-60):Resized(40), Vector.FromAngle(40*npc:GetSprite():GetFrame()-60):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector.FromAngle(40*npc:GetSprite():GetFrame()-120):Resized(40), Vector.FromAngle(40*npc:GetSprite():GetFrame()-120):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackHori") and not npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot")) then
npc:FireProjectiles(npc.Position+Vector.FromAngle(40*npc:GetSprite():GetFrame()+150):Resized(40), Vector.FromAngle(40*npc:GetSprite():GetFrame()+150):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector.FromAngle(40*npc:GetSprite():GetFrame()+210):Resized(40), Vector.FromAngle(40*npc:GetSprite():GetFrame()+210):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackHori") and npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot")) then
npc:FireProjectiles(npc.Position+Vector.FromAngle(-30-40*npc:GetSprite():GetFrame()):Resized(40), Vector.FromAngle(-30-40*npc:GetSprite():GetFrame()):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector.FromAngle(30+-40*npc:GetSprite():GetFrame()):Resized(40), Vector.FromAngle(30+-40*npc:GetSprite():GetFrame()):Resized(9), 0, ProjectileParams())
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("AttackUp") and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(0,444+npc:GetSprite():GetFrame()*-60), Vector.FromAngle(0):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,444+npc:GetSprite():GetFrame()*-60), Vector.FromAngle(180):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackDown") and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(0,-444+npc:GetSprite():GetFrame()*60), Vector.FromAngle(0):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,-444+npc:GetSprite():GetFrame()*60), Vector.FromAngle(180):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackHori") and not npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(-444+npc:GetSprite():GetFrame()*60,0), Vector.FromAngle(90):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(-444+npc:GetSprite():GetFrame()*60,0), Vector.FromAngle(270):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackHori") and npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(444+npc:GetSprite():GetFrame()*-60,0), Vector.FromAngle(90):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(444+npc:GetSprite():GetFrame()*-60,0), Vector.FromAngle(270):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("Attac kUp") and npc:GetSprite():IsEventTriggered("NewShoot2") then
npc:FireProjectiles(npc.Position+Vector(0,-230), Vector.FromAngle(180):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,-230), Vector.FromAngle(225):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,-230), Vector.FromAngle(270):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,-230), Vector.FromAngle(315):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,-230), Vector.FromAngle(0):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackDown") and npc:GetSprite():IsEventTriggered("NewShoot2") then
npc:FireProjectiles(npc.Position+Vector(0,230), Vector.FromAngle(0):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,230), Vector.FromAngle(45):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,230), Vector.FromAngle(90):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,230), Vector.FromAngle(135):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(0,230), Vector.FromAngle(180):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackHori") and npc:GetSprite().FlipX == true and npc:GetSprite():IsEventTriggered("NewShoot2") then
npc:FireProjectiles(npc.Position+Vector(-230,0), Vector.FromAngle(90):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(-230,0), Vector.FromAngle(135):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(-230,0), Vector.FromAngle(180):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(-230,0), Vector.FromAngle(225):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(-230,0), Vector.FromAngle(270):Resized(9), 0, ProjectileParams())
end
if npc:GetSprite():IsPlaying("AttackHori") and not npc:GetSprite().FlipX == true and npc:GetSprite():IsEventTriggered("NewShoot2") then
npc:FireProjectiles(npc.Position+Vector(230,0), Vector.FromAngle(270):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(230,0), Vector.FromAngle(315):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(230,0), Vector.FromAngle(0):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(230,0), Vector.FromAngle(45):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position+Vector(230,0), Vector.FromAngle(90):Resized(9), 0, ProjectileParams())
end
end
if npc.Variant == 2 and npc.SubType == 85 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.15
if npc:GetSprite():IsPlaying("WalkAttackUp") and npc:GetSprite():GetFrame() <= 5 and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(0,-50), Vector.FromAngle(60*npc:GetSprite():GetFrame()+210):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackDown") and npc:GetSprite():GetFrame() <= 5 and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(0,50), Vector.FromAngle(60*npc:GetSprite():GetFrame()+30):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackHori") and npc:GetSprite():GetFrame() <= 5 and not npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(50,0), Vector.FromAngle(60*npc:GetSprite():GetFrame()+-60):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackHori") and npc:GetSprite():GetFrame() <= 5 and npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot1")) then
npc:FireProjectiles(npc.Position+Vector(-50,0), Vector.FromAngle(-120-60*npc:GetSprite():GetFrame()):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackUp") and npc:GetSprite():GetFrame() >= 5 and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot2")) then
npc:FireProjectiles(npc.Position+Vector(0,-50), Vector.FromAngle(-60*npc:GetSprite():GetFrame()):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackDown") and npc:GetSprite():GetFrame() >= 5 and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot2")) then
npc:FireProjectiles(npc.Position+Vector(0,50), Vector.FromAngle(-60*npc:GetSprite():GetFrame()+180):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackHori") and npc:GetSprite():GetFrame() >= 5 and not npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot2")) then
npc:FireProjectiles(npc.Position+Vector(50,0), Vector.FromAngle(-60*npc:GetSprite():GetFrame()+90):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("WalkAttackHori") and npc:GetSprite():GetFrame() >= 5 and npc:GetSprite().FlipX == true and (npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot2")) then
npc:FireProjectiles(npc.Position+Vector(-50,0), Vector.FromAngle(90+60*npc:GetSprite():GetFrame()):Resized(9), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepWhipper, 834)

function mod:EterepPeepingFatty(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.06
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), 0, params)
end
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 300 and npc.StateFrame <= 90 and npc.State == 4 then
npc.StateFrame = 100
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPeepingFatty, 835)

function mod:EterepVisVersa(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 4 and npc.FrameCount % 20 == 18 and Eterepernalrng:RandomInt(3)+1 == 2 then
npc.State = 6
npc:GetSprite():Play("FatAttack", true)
end
if npc.State == 6 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.BulletFlags = ProjectileFlags.SMART
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(9), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsFinished("FatAttack") then
npc.State = 4
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepVisVersa, 836)

function mod:EterepPon(npc)
if npc.Variant == 0 and npc.SubType == 84 and npc.SpawnerType == 41 then
npc:Morph(840, 0, 85, -1)
npc.HitPoints = npc.HitPoints
end
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
if npc.Parent ~= nil then
npc:Morph(840, 0, 0, -1)
end
end
if npc:GetSprite():IsFinished("Appear") then
npc:GetSprite():Play("Idle", true)
end
if (npc.FrameCount >= 50 or npc.SpawnerType == 41) and not npc:GetSprite():IsPlaying("Hop") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Hop", true)
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() == 4 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/13 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/13
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/13)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
local creep = Isaac.Spawn(1000, 22, 0, npc.Position, Vector(0,0), npc)
creep:GetSprite().Scale = Vector(2,2)
npc:PlaySound(69, 1, 0, false, 1)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
end
if npc:GetSprite():IsPlaying("Hop") and npc:GetSprite():GetFrame() >= 17 and npc:GetSprite():GetFrame() <= 26 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.GridCollisionClass == EntityGridCollisionClass.GRIDCOLL_GROUND then
npc.Velocity = npc.Velocity * 0.5
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepPon, 840)

function mod:EterepRevenant(npc)
if npc.Variant <= 1 and npc.SubType == 85 then
if npc.State == 4 and npc.StateFrame < -12 then
npc.StateFrame = -12
end
if npc.State == 8 and npc.StateFrame == 50 and npc.I1 ~= 1 then
npc.StateFrame = 120
npc.I1 = 1
end
if npc.State == 8 and npc.StateFrame == 1 and npc.I1 ~= 0 then
npc.I1 = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRevenant, 841)

function mod:EterepLvl2Gaper(npc)
if npc.Variant == 1 and npc.SubType == 85 then
if npc.ProjectileCooldown >= 7 then
npc.ProjectileCooldown = 6
end
end
if npc.Variant == 2 and npc.SubType == 85 then
npc:GetSprite():PlayOverlay("Blood", false)
npc:AnimWalkFrame("WalkHori","WalkVert",1)
EterepEnemyChasePlayer(0.65, npc, 0.86, 75)
if ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+-20):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+-10):Resized(12), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(13), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+10):Resized(12), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+20):Resized(11), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if ((npc.FrameCount % 86 == 82 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 43 == 41 and not npc:HasEntityFlags(1<<7))) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.BulletFlags = ProjectileFlags.BOUNCE
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(70)+1)*0.1), 0, params)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepLvl2Gaper, 850)

function mod:EterepLvl2GaperDeath(npc)
if npc:IsDead() and npc.Variant == 0 and npc.SubType == 85 then
local Head = Isaac.Spawn(850, 1, 85, npc.Position, Vector(0,0), npc)
Head:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local gusher = Isaac.Spawn(850, 2, 85, npc.Position, Vector(0,0), npc)
gusher:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepLvl2GaperDeath, 850)

function mod:EterepTwitchy(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 17 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(9), 0, params)
end
end
if npc.I1 == 1 and npc.I2 == 0 and npc.Mass ~= 16 then
npc.I1 = Eterepernalrng:RandomInt(5)+4
npc.Mass = 16
end
if npc.I1 == 0 and npc.Mass ~= 14 then
npc.Mass = 14
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTwitchy, 851)

function mod:EterepAdultLeech(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Burrow again") then
npc.Velocity = Vector(0,0)
end
if npc:GetSprite():IsFinished("Burrow again") and npc.I1 <= 3 then
npc:GetSprite():Play("Burrow again", true)
npc.Position = npc:GetPlayerTarget().Position
npc.I1 = npc.I1 + 1
end
if npc:GetSprite():IsFinished("Burrow again") and npc.I1 >= 4 then
npc:GetSprite():Play("ChargeDown", true)
npc.Position = npc:GetPlayerTarget().Position
npc.State = 7
end
if npc:GetSprite():IsPlaying("ChargeDown") and npc:GetSprite():GetFrame() == 1 and npc.I1 == 0 then
npc.I1 = Eterepernalrng:RandomInt(3)
npc.State = 15
npc:GetSprite():Play("Burrow again", true)
end
if npc:GetSprite():IsPlaying("ChargeDown") and npc:GetSprite():GetFrame() == 2 then
npc.I1 = 0
end
if npc.State == 3 and ((npc.FrameCount % 20 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 10 == 3 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if npc.State == 3 and npc.I1 == 12 then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.1
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), 0, params)
end
end
if npc.State == 7 and npc:GetSprite():IsEventTriggered("Hit") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.1
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(10), 0, params)
end
end
if npc.State == 8 and ((npc.FrameCount % 6 == 4 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 2 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-125):Resized(7.4), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+125):Resized(7.4), 0, params)
end
if npc.State == 15 and npc:GetSprite():IsEventTriggered("Sound") then
local params = ProjectileParams()
params.Variant = 4
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, params)
end
npc:PlaySound(72, 1, 0, false, 1)
npc:PlaySound(66, 1, 0, false, 1)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc.State == 15 and npc:GetSprite():GetFrame() == 20 then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc.EntityCollisionClass == EntityCollisionClass.ENTCOLL_ALL and npc:HasEntityFlags(EntityFlag.FLAG_NO_TARGET) then
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepAdultLeech, 854)

function mod:EterepLv2Charger(npc)
if npc.Variant <= 1 and npc.SubType == 85 and npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 23, 0, npc.Position, Vector(0,0), npc)
if npc.Variant == 0 then
creep:ToEffect().Timeout = 120
end
if npc.Variant == 1 then
creep:SetColor(Color(1,1,1,1,0.19,2.08,2.55), 99999, 0, false, false)
creep:ToEffect().Timeout = 75
end
end
if npc.Variant == 0 and npc.SubType == 85 and npc:IsDead() then
local sickfly1 = Isaac.Spawn(23, 0, 85, npc.Position+Vector(-10,0), Vector(0,0), npc)
sickfly1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local sickfly2 = Isaac.Spawn(23, 0, 85, npc.Position+Vector(10,0), Vector(0,0), npc)
sickfly2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Variant == 1 and npc.SubType == 85 and npc.Velocity:Length() <= 12 and npc.State == 8 then
npc.Velocity = npc.Velocity * 1.12
end
if npc.Variant == 1 and npc.SubType == 85 and npc:IsDead() then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.04
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(22.5+45*i):Resized(10), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLv2Charger, 855)

function mod:EterepLv2ChargerCollideWithPlayer(npc, npc2)
if npc.Variant == 1 and npc.SubType == 85 and npc2.Type == 1 and npc2:ToPlayer():GetDamageCooldown() == 0 then
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position, Vector(0,0), npc)
npc.HitPoints = npc.HitPoints + 30
npc.ProjectileCooldown = 0
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepLv2ChargerCollideWithPlayer, 855)

function mod:EterepGasBag(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(25, 5, 87, false, true) >= 2 then
local params = ProjectileParams()
params.Variant = 0
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9), 0, params)
end
end
if npc.Variant == 0 and npc.SubType == 85 and npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(25, 5, 87, false, true) <= 1 then
local fly = Isaac.Spawn(25, 5, 87, npc.Position, Vector(0,0), npc)
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGasBag, 856)

function mod:EterepCohort(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 8 and npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = false
end
if npc.State == 8 and npc.Position.X < npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
if npc.StateFrame >= 1 and npc.StateFrame <= 8 then
npc.StateFrame = 9
end
if npc.State == 9 and (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("NewShoot1") or npc:GetSprite():IsEventTriggered("NewShoot2")) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.36
params.Variant = 5
for i = 1,Eterepernalrng:RandomInt(2)+1 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(210)+1) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+15) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(49)+336):Resized(9.25), 0, params)
end
end
if npc.State == 9 and Isaac.CountEnemies() <= 3 and npc:GetSprite():IsEventTriggered("NewShoot1") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(110)+1) * 0.1
params.FallingAccelModifier = 0.56
params.Variant = 11
params.Scale = (Eterepernalrng:RandomInt(23)+15) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(49)+336):Resized(9.25), 0, params)
end
if npc:IsDead() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.56
params.Variant = 11
for i = 1,Eterepernalrng:RandomInt(4)+1 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(110)+1) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+15) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(49)+336):Resized(9.25), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCohort, 857)

function mod:EterepFloatingHost(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() < -90 then
npc.Velocity = Vector.FromAngle(-135) * 8
npc:GetSprite():Play("Move Up",false)
npc:GetSprite():LoadGraphics()
elseif npc.Velocity:GetAngleDegrees() >= -90 and npc.Velocity:GetAngleDegrees() < 0 then
npc.Velocity = Vector.FromAngle(-45) * 8
npc:GetSprite():Play("Move Up",false)
npc:GetSprite():LoadGraphics()
elseif npc.Velocity:GetAngleDegrees() >= 0 and npc.Velocity:GetAngleDegrees() < 90 then
npc.Velocity = Vector.FromAngle(45) * 8
npc:GetSprite():Play("Move Down",false)
npc:GetSprite():LoadGraphics()
elseif npc.Velocity:GetAngleDegrees() >= 90 and npc.Velocity:GetAngleDegrees() < 180 then
npc.Velocity = Vector.FromAngle(135) * 8
npc:GetSprite():Play("Move Down",false)
npc:GetSprite():LoadGraphics()
end
if not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and not npc:GetSprite():IsPlaying("Idle") then
npc:GetSprite():Play("Idle", false)
end
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc:GetSprite():Play("Idle", true)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc.StateFrame = npc.StateFrame + 1
end
if npc.StateFrame >= 20 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("Shoot", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)
end
if npc.StateFrame == 10 and not npc:GetSprite():IsPlaying("Shoot") and not npc:GetSprite():IsPlaying("FastShoot") then
npc:GetSprite():Play("FastShoot", true)
npc.StateFrame = 11
if Eterepernalrng:RandomInt(4)+1 == 2 then
npc.StateFrame = 5
end
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 10) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 10)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 33
npc:ClearEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if ((npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 52) or (npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():GetFrame() == 18)) and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
npc.Mass = 32
npc:AddEntityFlags(EntityFlag.FLAG_NO_TARGET)
end
if npc:GetSprite():IsPlaying("FastShoot") and npc:GetSprite():IsEventTriggered("canshoot2") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.HeightModifier = 5
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("canshoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.HeightModifier = 5
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+10):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(7.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-10):Resized(8.0), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-20):Resized(7.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepFloatingHost, 859)

function mod:EterepFloatingHostTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 0 and npc.SubType == 85 and npc.Mass == 32 and flags ~= DamageFlag.DAMAGE_POISON_BURN then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepFloatingHostTakeDamage, 859)

function mod:EterepFloatingHostCollision(npc, npc2)
if npc.Variant == 0 and npc.SubType == 85 and npc.Mass == 32 and npc.FrameCount >= 20 and npc2.Type == 2 and not npc2:ToTear():HasTearFlags(1<<1) then
local tear = Isaac.Spawn(9, 0, 0, npc2.Position, Vector.FromAngle((npc2.Velocity):GetAngleDegrees()+180):Resized(npc2.Velocity:Length()), npc)
npc2:Remove()
npc:PlaySound(171, 1, 0, false, 1)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_COLLISION, mod.EterepFloatingHostCollision, 859)

function mod:EterepUnborn(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc.I1 = 60
if npc.State == 6 and npc:GetSprite():IsEventTriggered("Effect") then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(8.5), 0, ProjectileParams())
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepUnborn, 860)

function mod:EterepCyst(npc)
if npc.Variant == 0 and npc.SubType == 85 then
npc:GetSprite().FlipX = false
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCyst, 862)

function mod:EterepMorningStar(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
local morph = Eterepernalrng:RandomInt(4)+1
if morph == 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_morningstar1.png")
npc:GetSprite():LoadGraphics()
end
if morph == 2 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_morningstar2.png")
npc:GetSprite():LoadGraphics()
end
if morph == 3 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_morningstar3.png")
npc:GetSprite():LoadGraphics()
end
end
if npc:GetSprite():IsPlaying("Move") and ((npc.FrameCount % 40 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 20 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
end
if npc:GetSprite():IsPlaying("Move") and ((npc.FrameCount % 40 == 30 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 20 == 15 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
end
if npc:IsDead() then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30*i):Resized(14), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMorningStar, 863)

function mod:EterepMockulus(npc)
if npc.Variant == 0 and npc.SubType == 0 and npc.Mass ~= 43 and npc.FrameCount <= 1 and ((EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1) or ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4))) then
npc:Morph(864, 0, npc.SubType, -1)
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mockulus.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 43
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 0 and npc.Mass == 43 then
if npc:GetSprite():IsPlaying("Idle") and ((npc.FrameCount % 40 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 20 == 5 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
end
if npc:GetSprite():IsPlaying("Idle") and ((npc.FrameCount % 40 == 30 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 20 == 15 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMockulus, 864)

function mod:EterepEvis(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 3 and npc.FrameCount % 20 == 18 and Eterepernalrng:RandomInt(3)+1 == 2 then
npc.State = 6
npc:GetSprite():Play("FatAttack", true)
end
if npc.State == 6 and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.15
params.BulletFlags = ProjectileFlags.BOUNCE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(8), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsFinished("FatAttack") then
npc.State = 3
end
end
if npc.Variant == 10 and npc.SpawnerEntity ~= nil and npc.SpawnerEntity.SubType == 85 then
if npc.FrameCount >= 10 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 10 and npc.I1 ~= 1 then
npc.I1 = 1
end
if npc.I1 == 1 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 10 then
npc.StateFrame = npc.StateFrame + 1
end
if npc.I1 == 1 and npc.StateFrame % 28 == 14 then
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.SpawnerEntity.Position, Vector(0,0), npc)
npc.SpawnerEntity.HitPoints = npc.SpawnerEntity.HitPoints + 8 - npc.I2 * 0.2
if npc.I2 < 15 then
npc.I2 = npc.I2 + 1
end
end
if npc.I1 == 1 and npc.StateFrame % 112 == 98 then
npc:GetPlayerTarget():TakeDamage(1, 0, EntityRef(npc), 0)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepEvis, 865)

function mod:EterepMotherShadow(npc)
if npc.Variant == 0 and npc.SubType == 0 and npc.FrameCount <= 1 and EterepFinalacementernal == true then
npc:GetSprite():Load("gfx/e_mothers shadow.anm2",true)
npc:GetSprite():LoadGraphics()
npc.SubType = 83
if npc.State == 3 then
npc:GetSprite():Play("Idle", true)
end
end
if npc.Variant == 0 and npc.SubType == 83 then
if npc.State == 8 and npc.StateFrame == 1 then
local teleportattack = Eterepernalrng:RandomInt(10)+1
if teleportattack <= 3 then
npc:GetSprite():Play("Teleport", true)
npc.Velocity = Vector(0,0)
end
end
if npc.State == 8 and npc.StateFrame == 22 and not npc:GetSprite():IsPlaying("Teleport") then
local newattack = Eterepernalrng:RandomInt(5)+1
if newattack == 1 then
npc:GetSprite():Play("Absorb", true)
npc.Velocity = Vector(0,0)
end
if newattack == 2 and #Isaac.FindByType(927, 3001, -1, false, true) == 0 then
npc:GetSprite():Play("Curse", true)
npc.Velocity = Vector(0,0)
end
if newattack == 2 and #Isaac.FindByType(927, 3001, -1, false, true) >= 1 then
npc:GetSprite():Play("Absorb", true)
npc.Velocity = Vector(0,0)
end
end
if npc:GetSprite():IsPlaying("Absorb") and npc:GetSprite():GetFrame() >= 5 and npc:GetSprite():GetFrame() <= 75 then
if npc:GetSprite():GetFrame() % 4 == 3 and npc:GetSprite():GetFrame() <= 72 then
Isaac.Spawn(1000, 151, 1, npc.Position+Vector(0,-40), Vector(0,0), npc)
end
if #Isaac.FindByType(927, 3001, -1, false, true) == 0 then
for i = 1, Game():GetNumPlayers() do
Isaac.GetPlayer(i-1):AddVelocity((npc.Position - Isaac.GetPlayer(i-1).Position):Normalized()*0.8)
end
end
if #Isaac.FindByType(927, 3001, -1, false, true) >= 1 then
for i = 1, Game():GetNumPlayers() do
Isaac.GetPlayer(i-1):AddVelocity((npc.Position - Isaac.GetPlayer(i-1).Position):Normalized()*0.5)
end
end
npc.Velocity = Vector(0,0)
if npc:GetSprite():GetFrame() == 5 then
SFXManager():Play(640)
end
if npc:GetSprite():GetFrame() == 75 then
SFXManager():Stop(640)
end
end
if npc:GetSprite():IsPlaying("Absorb") and npc:GetSprite():GetFrame() == 81 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,16 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(22.5*i+EterepCustomAngle):Resized(11), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc:GetSprite():IsPlaying("Teleport") then
npc.Velocity = Vector(0,0)
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() == 10 then
npc.State = 58
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() == 20 then
npc.Visible = false
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() == 28 then
npc.Visible = true
npc.Position = npc:GetPlayerTarget().Position
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() == 38 then
npc.State = 8
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() >= 1 and npc:GetSprite():GetFrame() <= 20 then
local teleporttransparence = Color(1,1,1,(20-npc:GetSprite():GetFrame())*0.05,0,0,0)
npc.Color = teleporttransparence
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() >= 21 and npc:GetSprite():GetFrame() <= 28 then
local teleporttransparence = Color(1,1,1,0,0,0,0)
npc.Color = teleporttransparence
end
if npc:GetSprite():IsPlaying("Teleport") and npc:GetSprite():GetFrame() >= 29 and npc:GetSprite():GetFrame() <= 48 then
local teleporttransparence = Color(1,1,1,(npc:GetSprite():GetFrame()-28)*0.05,0,0,0)
npc.Color = teleporttransparence
end
if npc:GetSprite():IsPlaying("Curse") and npc:GetSprite():GetFrame() == 5 then
npc:PlaySound(714, 1, 0, false, 1)
for i = 1,Game():GetNumPlayers() do
local player = Isaac.GetPlayer(i-1)
local spawn = Isaac.Spawn(927, 3001, 0, Vector(0,0), Vector(0,0), npc)
spawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
spawn:AddEntityFlags(EntityFlag.FLAG_PERSISTENT)
spawn.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
spawn.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ENEMIES
spawn.Parent = player
end
end
if npc:GetSprite():IsFinished("Absorb") or npc:GetSprite():IsFinished("Teleport") or npc:GetSprite():IsFinished("Curse") then
npc:GetSprite():Play("Idle", true)
npc.State = 3
npc.StateFrame = 0
npc.I1 = Eterepernalrng:RandomInt(20)+71
end
if npc:GetSprite():IsPlaying("Idle") and npc.I1 == 70 and Eterepernalrng:RandomInt(5)+1 <= 2 then
npc.I1 = 10
end
if npc.State == 5 then
npc.Mass = 33733
if npc.StateFrame >= 1 then
npc:Remove()
Game():ShakeScreen(15,30)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMotherShadow, 867)

function mod:EterepMigraine(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsPlaying("Walk") then
EterepEnemyChasePlayer(1.25, npc, 0.86, 75)
end
if npc.FrameCount <= 40 then
npc.Velocity = npc.Velocity * 0.5
end
if npc.FrameCount >= 41 and npc.StateFrame <= 8 and not npc:GetSprite():IsPlaying("Jump") and not npc:GetSprite():IsPlaying("Walk") then
npc:GetSprite():Play("Walk", true)
npc.StateFrame = npc.StateFrame + 1
end
if npc.FrameCount >= 41 and npc.StateFrame >= 9 and not npc:GetSprite():IsPlaying("Jump") and not npc:GetSprite():IsPlaying("Walk") and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Jump", true)
npc.StateFrame = 0
end
if npc:GetData().EterepJumperSpeed ~= nil and npc:GetData().EterepJumperSpeed >= 1 then
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc:GetData().EterepJumperSpeed)
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 7 then
npc.TargetPosition = npc.Position+Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(npc:GetPlayerTarget().Position:Distance(npc.Position)*(Eterepernalrng:RandomInt(50)+40)*0.01)
npc.TargetPosition = Game():GetRoom():FindFreePickupSpawnPosition(npc.TargetPosition, 2, false)
if npc:GetData().EterepJumperSpeed ~= npc.TargetPosition:Distance(npc.Position)/10 then
npc:GetData().EterepJumperSpeed = npc.TargetPosition:Distance(npc.Position)/10
end
npc.Velocity = Vector.FromAngle((npc.TargetPosition - npc.Position):GetAngleDegrees()):Resized(npc.TargetPosition:Distance(npc.Position)/10)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
if npc.Mass <= 60 then
npc.Mass = npc.Mass * 3
end
end
if npc:GetSprite():IsPlaying("Jump") and (npc:GetSprite():GetFrame() <= 6 or npc:GetSprite():GetFrame() >= 17) then
npc.Velocity = npc.Velocity * 0.5
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.02
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(10), 0, params)
end
npc:PlaySound(69, 1, 0, false, 1)
if npc.Mass >= 60 then
npc.Mass = npc.Mass / 3
end
if npc:GetData().EterepJumperSpeed ~= 0 then
npc:GetData().EterepJumperSpeed = 0
end
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_GROUND
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc.Velocity = npc.Velocity * 0
end
if npc:IsDead() then
for i = 1,5 do
Isaac.Spawn(4, 3, 0, npc.Position-Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(Eterepernalrng:RandomInt(7)+6), npc)
end
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepMigraine, 869)

function mod:EterepDrip(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc.FrameCount % 7 == 0 then
local creep = Isaac.Spawn(1000, 94, 0, npc.Position, Vector(0,0), npc)
creep:GetSprite().Scale = Vector(0,0)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDrip, 870)

function mod:EterepSplurt(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 5 == 0 then
local creep = Isaac.Spawn(1000, 94, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 220
creep:GetSprite().Scale = Vector(0,0)
end
if npc.Velocity:Length() >= 4 and npc:CollidesWithGrid() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.Variant = 3
for i = 1,Eterepernalrng:RandomInt(7)+8 do
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(221)+10) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(66)+10)*0.1), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSplurt, 871)

function mod:EterepCloggy(npc)
if npc.Variant <= 4 and npc.SubType == 87 then
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("NewShoot") and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetSprite():IsFinished("Attack") then
npc.StateFrame = Eterepernalrng:RandomInt(25)+1
end
if not npc:GetSprite():IsPlaying("Attack") then
EterepEnemyChasePlayer(0.52, npc, 0.86, 75)
npc:AnimWalkFrame("Hop","Hop",1)
end
if npc.FrameCount <= 1 then
npc.StateFrame = Eterepernalrng:RandomInt(25)+1
end
if npc.Variant == 3 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and npc.StateFrame >= 20 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Attack", true)
npc.StateFrame = 0
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 and npc.StateFrame >= 40 and Game():GetRoom():CheckLine(npc.Position, npc:GetPlayerTarget().Position, 3, 0, false, false) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) and not npc:HasEntityFlags(1<<24) then
npc:GetSprite():Play("Attack", true)
npc.StateFrame = 0
end
if not npc:GetSprite():IsPlaying("Attack") and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 230 then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsPlaying("Attack") then
npc.Velocity = npc.Velocity * 0.7
end
if npc:GetSprite():IsPlaying("Attack") and  npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.HeightModifier = 10
params.Variant = 3
if Eterepernalrng:RandomInt(2)+1 == 1 then
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.CurvingStrength = 0.0055
end
if Eterepernalrng:RandomInt(3)+1 == 1 then
params.BulletFlags = ProjectileFlags.CURVE_RIGHT
params.CurvingStrength = 0.0055
end
local palvrams = ProjectileParams()
palvrams.FallingAccelModifier = 0.65
palvrams.Variant = 3
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(8.5), 0, params)
end
for i = 1,4 do
palvrams.FallingSpeedModifier = -(Eterepernalrng:RandomInt(49)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, palvrams)
end
npc:PlaySound(SoundEffect.SOUND_ANIMAL_SQUISH, 1, 0, false, 1)
end
return true
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepCloggy, 872)

function mod:EterepFlyTrap(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount >= 2 and npc.Mass ~= 7 then
for i = 1,2 do
local fly = Isaac.Spawn(927, 8899, 0, npc.Position, Vector(0,0), npc)
fly.Mass = 180*i
fly:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
fly.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
fly.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
fly:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
fly:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
fly.Parent = npc
end
npc.Mass = 7
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFlyTrap, 873)

function mod:EterepFartigan(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount % 15 == 1 then
local creep = Isaac.Spawn(1000, 141, 1, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 150
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 4 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 3
params.FallingAccelModifier = -0.03
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+12*i+336):Resized(9), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFartigan, 874)

function mod:EterepPootMine(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:GetSprite():IsOverlayPlaying("PootOverlay") and npc:GetSprite():GetOverlayFrame() == 4 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 3
params.FallingAccelModifier = -0.03
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+12*i+144):Resized(9), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPootMine, 875)

function mod:EterepDump(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 20 then
npc.Velocity = Vector(0,0)
end
if npc:GetSprite():IsPlaying("Spout0") and ((npc.FrameCount % 4 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(9), 0, params)
end
if npc:GetSprite():IsPlaying("Spout1") and ((npc.FrameCount % 4 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 2 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(90)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
if npc:GetSprite():IsPlaying("Spout2") and ((npc.FrameCount % 6 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(75)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7), 0, params)
end
if npc:GetSprite():IsPlaying("Spout3") and ((npc.FrameCount % 6 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(60)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(6), 0, params)
end
if npc:GetSprite():IsPlaying("Spout4") and ((npc.FrameCount % 8 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(45)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(5), 0, params)
end
if npc:GetSprite():IsPlaying("Spout5") and ((npc.FrameCount % 10 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 5 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = 0.3
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(30)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(4), 0, params)
end
end
if npc.Variant == 1 and npc.SubType == 85 and npc.State == 8 then
if npc.StateFrame <= 18 then
npc.StateFrame = npc.StateFrame + 1
end
local params = ProjectileParams()
params.Variant = 3
if npc:CollidesWithGrid() and npc.Velocity:Length() <= 5 and npc.StateFrame >= 18 then
params.FallingAccelModifier = -0.01*npc.Velocity:Length()
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(60*i):Resized(npc.Velocity:Length()*0.8), 0, params)
end
npc.StateFrame = 0
end
if npc:CollidesWithGrid() and npc.Velocity:Length() <= 9 and npc.Velocity:Length() > 5 and npc.StateFrame >= 18 then
params.FallingAccelModifier = -0.01*npc.Velocity:Length()
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(npc.Velocity:Length()*0.8), 0, params)
end
npc.StateFrame = 0
end
if npc:CollidesWithGrid() and npc.Velocity:Length() > 9 and npc.StateFrame >= 18 then
params.FallingAccelModifier = -0.1
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(36*i):Resized(7.2), 0, params)
end
npc.StateFrame = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDump, 876)

function mod:EterepButtSlicker(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.I2 ~= 1 then
npc.I2 = 1
end
if npc.StateFrame ~= 14 and npc.FrameCount % 5 == 1 then
local creep = Isaac.Spawn(1000, 26, 0, npc.Position, Vector(0,0), npc)
creep:ToEffect().Timeout = 66
end
if npc.StateFrame ~= 14 and npc.FrameCount % 65 == 50 then
Isaac.Spawn(85, 0, 0, npc.Position, Vector(0,0), npc)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepButtSlicker, 878)

function mod:EterepBloaty(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.ProjectileCooldown >= 10 and npc.ProjectileCooldown <= 100 then
npc.ProjectileCooldown = 9
end
if npc.State == 4 and npc.Mass ~= 10 then
npc.Mass = 10
end
if npc.State == 8 and npc:GetSprite():GetFrame() >= 21 and npc:GetSprite():GetFrame() <= 46 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.FallingAccelModifier = 0.5
params.FallingSpeedModifier = -10
params.HeightModifier = -15
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.5,1.75,0.5,1)
params.Color = projectilenewcolor
if npc.I2 == 0 then
npc:FireProjectiles(npc.Position+Vector(40,0), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 1 then
npc:FireProjectiles(npc.Position+Vector(25,10), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+45):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 2 then
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+90):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 3 then
npc:FireProjectiles(npc.Position+Vector(-25,10), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+135):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 4 then
npc:FireProjectiles(npc.Position+Vector(-40,0), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+180):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 5 then
npc:FireProjectiles(npc.Position+Vector(-25,-10), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+225):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 6 then
npc:FireProjectiles(npc.Position+Vector(0,-10), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+270):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
if npc.I2 == 7 then
npc:FireProjectiles(npc.Position+Vector(25,-10), Vector.FromAngle(Eterepernalrng:RandomInt(51)-25+315):Resized((Eterepernalrng:RandomInt(150)+1)*0.1), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBloaty, 879)

function mod:EterepFleshMaiden(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc:IsDead() then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(12), 0, params)
end
end
if npc.State == 4 and ((npc.FrameCount % 16 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 8 == 3 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
params.BulletFlags = ProjectileFlags.CURVE_RIGHT
params.CurvingStrength = 0.0015
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()-130):Resized(7.4), 0, params)
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.CurvingStrength = 0.0015
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+130):Resized(7.4), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepFleshMaiden, 880)

function mod:EterepNeedleReworkedFoes(npc)
if npc.Variant == 1 and npc.SubType == 80 and ReworkedFoes then
npc:GetSprite():Load("gfx/e_needle reworked foes.anm2",true)
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 1 and npc.SubType == 85 and ReworkedFoes then
npc:GetSprite():Load("gfx/e_pasty reworked foes.anm2",true)
npc:GetSprite():LoadGraphics()
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_INIT, mod.EterepNeedleReworkedFoes, 881)

function mod:EterepBabyBegotten(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 4 and npc:GetPlayerTarget().Position:Distance(npc.Position) >= 100 then
npc.Velocity = npc.Velocity * 0.975 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1)
end
if npc.State == 8 then
npc.Velocity = npc.Velocity * 1.04
end
if npc.State == 8 and npc.I1 == 18 and npc.StateFrame == 0 then
npc.I1 = Eterepernalrng:RandomInt(41)+18
npc.StateFrame = 1
end
if npc.State == 8 and npc.I1 == 1 and npc.StateFrame == 1 then
npc.StateFrame = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBabyBegotten, 883)

function mod:EterepCultist(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.HitPoints < npc.MaxHitPoints * 0.5 then
if npc.I1 == 2 then
npc.I1 = 1
end
if npc.Mass == 10 then
npc.Mass = 11
end
if npc.Mass == 11 then
npc.StateFrame = npc.StateFrame + 1
if not npc:GetSprite():IsPlaying("Idle") then
npc:GetSprite():Play("Idle", true)
end
npc.State = 12
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position, Vector(0,0), npc)
npc.HitPoints = npc.HitPoints + 50
npc.Mass = 12
npc.StateFrame = 0
end
end
if npc.Mass == 12 and npc.State == 3 then
npc.State = 12
end
if npc.Mass == 12 and npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.BulletFlags = ProjectileFlags.SMART
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(10), 0, params)
end
end
if npc.Mass == 12 and npc.State == 8 then
npc.Velocity = Vector(0,0)
end
if npc.Mass == 12 and npc.State == 12 then
npc.Velocity = npc.Velocity * 0.9125 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1)
npc.StateFrame = npc.StateFrame + 1
if not npc:GetSprite():IsPlaying("Idle") then
npc:GetSprite():Play("Idle", true)
end
if npc.StateFrame >= 40 then
npc.State = 8
npc:GetSprite():Play("Attack", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc.Velocity = Vector(0,0)
end
end
if npc.Mass == 12 and npc.State == 8 then
npc.Velocity = npc.Velocity * 0.7
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.HitPoints < npc.MaxHitPoints * 0.5 and npc.Mass == 10 then
npc.Mass = 11
npc:PlaySound(28, 1, 0, false, 1)
Isaac.Spawn(1000, 2, 0, npc.Position, Vector(0,0), npc)
Isaac.Spawn(1000, 7, 0, npc.Position, Vector(0,0), npc)
npc:GetSprite():Stop("Attack", true)
npc:GetSprite():Stop("Respawn", true)
end
if npc.Mass == 11 then
npc.StateFrame = npc.StateFrame + 1
if not npc:GetSprite():IsPlaying("Idle") then
npc:GetSprite():Play("Idle", true)
end
if npc.StateFrame >= 1 then
npc.State = 12
npc:PlaySound(157, 1, 0, false, 1)
Isaac.Spawn(1000, 49, 0, npc.Position, Vector(0,0), npc)
npc.HitPoints = npc.HitPoints + 50
npc.Mass = 12
npc.StateFrame = 0
end
end
if npc.Mass == 11 then
npc.Velocity = Vector(0,0)
end
if npc.Mass == 12 and npc.State == 12 then
npc.Velocity = npc.Velocity * 0.9125 + (npc:GetPlayerTarget().Position - npc.Position):Resized(1)
npc.StateFrame = npc.StateFrame + 1
if not npc:GetSprite():IsPlaying("Idle") then
npc:GetSprite():Play("Idle", true)
end
if npc.StateFrame >= 40 then
npc.State = 14
npc:GetSprite():Play("Attack", true)
npc.StateFrame = Eterepernalrng:RandomInt(20)+1
npc.Velocity = Vector(0,0)
npc.TargetPosition = npc.Position
if npc.Position.X >= npc:GetPlayerTarget().Position.X then
npc:GetSprite().FlipX = true
end
end
end
if (npc.Mass == 11 or npc.Mass == 12) and npc.State == 3 then
npc.State = 12
end
if npc:GetSprite():IsFinished("Attack") and npc.State == 14 then
npc:GetSprite():Play("Idle", true)
npc.State = 12
npc:GetSprite().FlipX = false
end
if npc.State == 14 and npc:GetSprite():IsEventTriggered("Shoot") then
npc:PlaySound(13, 1, 0, false, 1)
if npc:GetSprite().FlipX then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(67.5+22.5*i):Resized(10), 0, params)
end
end
if not npc:GetSprite().FlipX then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(247.5+22.5*i):Resized(10), 0, params)
end
end
end
if npc.State == 14 then
npc.Velocity = npc.Velocity * 0.7
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCultist, 885)

function mod:EterepVisFatty(npc)
if npc.Variant == 0 and npc.SubType <= 10 and npc.FrameCount <= 1 and not npc:IsChampion() and ((EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1) or ((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4))) then
npc.I2 = 50
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_vis fatty.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_vis fatty.png")
npc:GetSprite():LoadGraphics()
npc.MaxHitPoints = 95
npc.HitPoints = npc.MaxHitPoints
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 1 and npc.Parent ~= nil and npc.Parent.MaxHitPoints == 95 and not npc:IsChampion() and npc.I2 ~= 60 then
npc.I2 = 60
npc.MaxHitPoints = 55
npc.HitPoints = npc.MaxHitPoints
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_vis fatty.png")
npc:GetSprite():LoadGraphics()
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
end
if npc.Variant == 0 and npc.I2 == 50 then
if npc:GetData().Etereternaliseternal ~= 1 then
npc:GetData().Etereternaliseternal = 1
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.Mass ~= 11 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.025
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(10), 0, params)
end
npc.Mass = 11
end
if npc.Mass ~= 10 and not npc:GetSprite():IsEventTriggered("Shoot") then
npc.Mass = 10
end
if npc.State == 16 and npc.I1 ~= 3 and npc.Parent == nil then
local newspawn = Isaac.Spawn(927, 8901, 0, npc.Position, Vector(0,0), npc)
newspawn:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
newspawn.Parent = npc
newspawn:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
npc.Parent = newspawn
npc.I1 = 3
end
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
end
if npc.Variant == 1 and npc.I2 == 60 then
if npc:GetData().Etereternaliseternal ~= 1 then
npc:GetData().Etereternaliseternal = 1
end
if npc.State == 4 and npc.ProjectileCooldown >= 30 then
npc.ProjectileCooldown = 25
end
if npc.Velocity:GetAngleDegrees() >= -90 and npc.Velocity:GetAngleDegrees() <= 90 then
npc:GetSprite().FlipX = false
end
if ((npc.Velocity:GetAngleDegrees() >= -180 and npc.Velocity:GetAngleDegrees() < -90) or (npc.Velocity:GetAngleDegrees() <= 180 and npc.Velocity:GetAngleDegrees() > 90)) then
npc:GetSprite().FlipX = true
end
if (npc.State == 7 or npc.State == 8) and ((npc.FrameCount % 50 == 34 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 17 and not npc:HasEntityFlags(1<<7))) then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+-12):Resized(9), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(10), 0, ProjectileParams())
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+12):Resized(9), 0, ProjectileParams())
end
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepVisFatty, 886)

function mod:EterepShady(npc)
if npc.Variant == 0 and npc.SubType == 85 and npc.State == 9 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 2
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(9), 0, params)
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepShady, 888)

function mod:EterepClicketyClack(npc)
if (npc.SubType == 85 or npc.SubType == 86) and npc:IsChampion() and #Isaac.FindByType(921, -1, -1, false, true) <= 0 then
Isaac.Spawn(889, 0, 0, npc.Position, Vector(0,0), npc)
npc.SubType = 0
npc:Remove()
end
if npc.Variant == 0 and npc.SubType == 85 and #Isaac.FindByType(921, -1, -1, false, true) >= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/monsters/repentance/clickety_clack_body.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/monsters/repentance/clickety_clack.png")
npc:GetSprite():LoadGraphics()
npc.SubType = 0
npc.Scale = 1
end
if npc.Variant == 0 and (npc.SubType == 85 or #Isaac.FindByType(921, 0, 88, false, true) >= 1) and npc.FrameCount <= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_clickety clack body.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_clickety clack.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.25
end
if npc.Variant == 0 and npc.SubType == 86 and npc:GetSprite():IsPlaying("Collapse") and npc.StateFrame == 148 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
params.Variant = 1
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9.25), 0, params)
end
npc.StateFrame = npc.StateFrame - 1
npc.SubType = npc.SubType - 1
end
if npc.Variant == 0 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 and npc:GetSprite():IsPlaying("Transition") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
params.Variant = 4
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(9.25), 0, params)
end
end
if npc.Variant == 0 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 and npc.State == 3 and npc.Mass ~= 17 then
npc.Mass = 17
end
if npc.Variant == 0 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 and npc.State == 5 and npc.Mass ~= 19 then
npc.Mass = 19
end
if npc.Variant == 0 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 and npc.State ~= 3 and npc.State ~= 5 and npc.Mass ~= 14 then
npc.Mass = 14
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepClicketyClack, 889)

function mod:EterepMazeRoamer(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.State == 4 and npc.FrameCount >= 5 then
npc.State = 16
npc:GetSprite():Play("Transition", true)
end
if npc.State == 9 and npc:GetSprite():GetFrame() == 4 and ((npc.FrameCount % 2 == 1 and npc:HasEntityFlags(1<<7)) or not npc:HasEntityFlags(1<<7)) then
local params = ProjectileParams()
params.Variant = 16
params.FallingAccelModifier = -0.03
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(10*i+150+(npc.I1*90)):Resized(9), 0, params)
end
npc:PlaySound(237, 1, 0, false, 1)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMazeRoamer, 890)

function mod:EterepGoat(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.I1 ~= 2 then
npc.I1 = 2
end
if npc.State == 4 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 175 and npc.FrameCount % 20 == 10 and Eterepernalrng:RandomInt(3)+1 == 1 then
npc.State = 8
npc:GetSprite():Play("AttackHori", true)
end
if npc.State == 6 and npc.StateFrame == 1 then
npc.State = 8
npc:GetSprite():Play("AttackHori", true)
end
if npc.State == 8 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.Variant = 4
if npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20*i+320):Resized(10), 0, params)
end
npc:PlaySound(146, 1, 0, false, 1)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
if npc:GetSprite():IsEventTriggered("Shoot2") then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20*i+310):Resized(10), 0, params)
end
npc:PlaySound(146, 1, 0, false, 1)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = false
end
end
end
end
if npc.Variant == 1 and npc.SubType == 85 then
if npc.I1 ~= 2 then
npc.I1 = 2
end
if npc.State == 6 then
npc.State = 9
npc:GetSprite():Play("Attack2", true)
SFXManager():Stop(112)
end
if npc.State == 9 and (npc:GetSprite():IsEventTriggered("Shoot2") or npc:GetSprite():IsEventTriggered("NewShoot")) and not npc:HasEntityFlags(1<<9) and not npc:HasEntityFlags(1<<11) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
npc:FireProjectiles(npc.Position, Vector.FromAngle(28*npc.FrameCount):Resized(9), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(28*npc.FrameCount+180):Resized(9), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGoat, 891)

function mod:EterepPoofer(npc)
if npc.Variant == 0 and npc.SubType == 85 then
if npc.FrameCount <= 1 then
EterepPoofer = 1
npc.ProjectileCooldown = 120
end
if npc.FrameCount >= 20 and npc.ProjectileCooldown >= 0 then
npc.ProjectileCooldown = npc.ProjectileCooldown - 1
end
if npc.Mass == 41 and npc.ProjectileCooldown <= 100 then
npc.Mass = 40
npc.ProjectileCooldown = 100
end
if npc.ProjectileCooldown <= 0 and npc.State == 3 then
npc.State = 50
if npc.V2.X >= 4 and npc.V2.X < 5 then
npc.I1 = 40
npc.I2 = 40
end
if npc.V2.X >= 3 and npc.V2.X < 4 then
npc.I1 = 30
npc.I2 = 30
end
if npc.V2.X >= 2 and npc.V2.X < 3 then
npc.I1 = 20
npc.I2 = 20
end
if npc.V2.X >= 1 and npc.V2.X < 2 then
npc.I1 = 10
npc.I2 = 10
end
if npc.V2.X < 1 then
npc.I1 = 0
npc.I2 = 0
end
end
if npc.State == 50 then
npc.State = 50
if npc.I1 <= 50 then
npc.I1 = npc.I1 + 1
npc.I2 = npc.I1
end
if npc:GetSprite():IsEventTriggered("Bip") then
npc:PlaySound(171, 1, 0, false, 1)
end
if npc:GetSprite():IsFinished("SelfDestruction") and npc.HitPoints >= 0 then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.1
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(8), 0, params)
end
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(15+EterepCustomAngle+30*i):Resized(10), 0, params)
end
npc.HitPoints = -100
npc:TakeDamage(1, 0, EntityRef(nil), 0)
local spawn1 = Isaac.Spawn(61, 0, 0, npc.Position+Vector(-10,0), Vector(0,0), npc)
spawn1:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local spawn2 = Isaac.Spawn(61, 0, 0, npc.Position+Vector(0,-10), Vector(0,0), npc)
spawn2:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local spawn3 = Isaac.Spawn(61, 0, 0, npc.Position+Vector(10,0), Vector(0,0), npc)
spawn3:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
local spawn4 = Isaac.Spawn(61, 0, 0, npc.Position+Vector(0,10), Vector(0,0), npc)
spawn4:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
Etereppoofersuperheal = 2
end
if npc.I1 >= 50 and not npc:GetSprite():IsPlaying("SelfDestruction") then
npc:GetSprite():Play("SelfDestruction", false)
npc.HitPoints = npc.HitPoints + 20
end
if npc.V2.X >= 4 and npc.V2.X < 5 and not npc:GetSprite():IsPlaying("Idle4") then
npc:GetSprite():Play("Idle4", false)
end
if npc.V2.X >= 3 and npc.V2.X < 4 and not npc:GetSprite():IsPlaying("Idle3") then
npc:GetSprite():Play("Idle3", false)
end
if npc.V2.X >= 2 and npc.V2.X < 3 and not npc:GetSprite():IsPlaying("Idle2") then
npc:GetSprite():Play("Idle2", false)
end
if npc.V2.X >= 1 and npc.V2.X < 2 and not npc:GetSprite():IsPlaying("Idle1") then
npc:GetSprite():Play("Idle1", false)
end
if npc.V2.X < 6 then
npc.V2 = Vector(npc.I1*0.1,npc.I2*0.1)
end
end
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.03
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(10), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepPoofer, 892)

function mod:EterepPooferTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.SubType == 85 and npc.Mass == 40 then
npc.Mass = 41
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepPooferTakeDamage, 892)

function mod:EterepReapcreep(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("Attack1Fire") and ((npc.FrameCount % 8 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.HeightModifier = -10
params.DepthOffset = 12
npc:FireProjectiles(npc.Position+Vector(-2,-10), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(14), 0, params)
end
if npc:GetSprite():IsPlaying("Attack1Fire") and ((npc.FrameCount % 8 == 6 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 3 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.Variant = 4
params.HeightModifier = -10
params.DepthOffset = 12
npc:FireProjectiles(npc.Position+Vector(2,-10), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(14), 0, params)
end
if npc:GetSprite():IsPlaying("Attack2") and (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("EndShoot") or npc:GetSprite():IsEventTriggered("NewShoot")) and npc:GetSprite():GetFrame() % 2 == 0 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
params.HeightModifier = -10
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc:GetSprite():GetFrame()*7.25-30+36*i):Resized(11), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack3BeamStart") and npc:GetSprite():GetFrame() == 22 then
npc.I2 = 0
end
if ((npc:GetSprite():IsPlaying("Attack3BeamStart") and npc:GetSprite():GetFrame() >= 26) or (npc:GetSprite():IsPlaying("Attack3BeamLoop"))) and npc.FrameCount % 14 == 1 then
local params = ProjectileParams()
params.Variant = 4
params.HeightModifier = -10
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position+Vector(npc:GetPlayerTarget().Velocity.X*(25-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.1),npc:GetPlayerTarget().Velocity.Y*(25-npc:GetPlayerTarget().Position:Distance(npc.Position)*0.1)) - npc.Position):GetAngleDegrees()):Resized(10), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepReapcreep, 900)

function mod:EterepLilBlub(npc)
if npc.Variant == 0 and npc.SubType == 89 then
if npc:GetSprite():IsPlaying("Attack03") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
for i = 1, 11 do
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+45):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+90):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+135):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+180):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+225):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+270):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+315):Resized(4+0.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(21)-10,Eterepernalrng:RandomInt(21)-10), Vector.FromAngle(EterepCustomAngle+360):Resized(4+0.8*i), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack04") and npc:GetSprite():IsEventTriggered("Land") and npc.HitPoints > npc.MaxHitPoints * 0.3 then
local params = ProjectileParams()
params.FallingAccelModifier = 0.2
for i = 1, 30 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(75)+16)*0.1), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack04") and npc:GetSprite():IsEventTriggered("Land") and npc.HitPoints <= npc.MaxHitPoints * 0.3 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
for i = 1, 10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(8), 0, ProjectileParams())
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepLilBlub, 901)

function mod:EterepRainMaker(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsEventTriggered("Shooot") then
npc.Mass = 20
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.Variant = 4
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+36*i):Resized(9), 0, params)
end
npc:PlaySound(SoundEffect.SOUND_CUTE_GRUNT, 1, 0, false, 1)
end
if (npc:GetSprite():IsPlaying("Attack1") or npc:GetSprite():IsPlaying("Attack2Begin")) and npc.Mass ~= 19 then
npc.Mass = 19
end
if npc:GetSprite():IsPlaying("Attack3") and npc.Mass ~= 20 then
npc.Mass = 20
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRainMaker, 902)

function mod:EterepVisageBoss(npc)
if npc.Variant == 1 and Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and #Isaac.FindByType(903, 0, -1, false, true) == 0 and Game():GetRoom():IsAmbushActive() then
npc:Kill()
end
if npc.Variant == 1 and npc.SubType <= 2 and npc.Parent ~= nil and npc.Parent.SubType == 88 then
npc:Morph(903, 1, 88, -1)
end
if npc.Variant == 10 and npc.FrameCount <= 5 and #Isaac.FindByType(903, 0, 88, false, true) >= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_visage.png")
npc:GetSprite():LoadGraphics()
end
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 105 and EterepVisage == false and npc.FrameCount % 25 == 15 and Eterepernalrng:RandomInt(4)+1 == 2 then
npc.State = 106
npc:GetSprite():Play("Unwind2", true)
end
if npc.State == 105 and EterepVisage == true and npc.FrameCount % 18 == 15 and Eterepernalrng:RandomInt(3)+1 == 2 then
npc.State = 106
npc:GetSprite():Play("Unwind2", true)
end
if npc.State == 114 and #Isaac.FindByType(903, 20, -1, false, true) <= 2 and npc.FrameCount % 15 == 12 and Eterepernalrng:RandomInt(3)+1 == 2 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 170 then
npc.State = 115
npc:GetSprite():Play("Attack", true)
end
if npc.State == 114 and #Isaac.FindByType(903, 20, -1, false, true) >= 1 and npc.FrameCount % 20 == 12 and Eterepernalrng:RandomInt(3)+1 == 2 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 170 then
npc.State = 116
npc:GetSprite():Play("Attack3", true)
end
if npc.State == 114 and npc.Mass ~= 30 then
npc.Mass = 30
end
if ((npc:GetSprite():IsPlaying("Attack3") and npc:GetSprite():IsEventTriggered("NewShoot")) or (npc:GetSprite():IsPlaying("Attack3End") and npc:GetSprite():GetFrame() == 2 and npc.Mass ~= 33)) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 3
params.BulletFlags = ProjectileFlags.SMART | ProjectileFlags.NO_WALL_COLLIDE
params.HomingStrength = 0
for i = 1,16 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(22.5*i):Resized(12), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
if npc:GetSprite():IsPlaying("Attack3") then
npc.Mass = 33
end
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("NewShoot") then
npc:PlaySound(52, 1, 0, false, 1)
local params = ProjectileParams()
params.FallingAccelModifier = 0.15
params.Variant = 9
for i = 1,Eterepernalrng:RandomInt(7)+12 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
params.Variant = 4
params.BulletFlags = ProjectileFlags.SMART
params.HomingStrength = 0
for i = 1,Eterepernalrng:RandomInt(4)+5 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
for i = 1,4 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position, Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = 45+90*i
end
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
Game():ShakeScreen(15)
end
end
if npc.Variant == 1 and npc.SubType == 88 then
if (npc.State == 107 or npc.State == 109) and npc.Velocity:Length() >= 5 and npc:CollidesWithGrid() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.15
params.Variant = 9
for i = 1, 15 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
end
if npc.State == 109 and EterepVisage == false then
EterepVisage = true
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepVisageBoss, 903)

function mod:EterepSiren(npc)
if npc.Variant == 1 and Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Game():GetRoom():IsAmbushActive() then
npc:Kill()
end
if npc.Variant == 0 and npc.SubType == 88 then
if ((npc.FrameCount % 30 == 22 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 15 == 11 and not npc:HasEntityFlags(1<<7))) and npc.Mass == 76 and npc.State == 8 then
local params = ProjectileParams()
params.Variant = 1
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
for i = 1,7 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+22.5*i):Resized(6.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(180+EterepCustomAngle+22.5*i):Resized(6.5), 0, params)
end
local parsams = ProjectileParams()
parsams.FallingAccelModifier = -0.1
parsams.Variant = 2
parsams.BulletFlags = ProjectileFlags.SINE_VELOCITY
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle):Resized(6.5), 0, parsams)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+180):Resized(6.5), 0, parsams)
end
if npc.State == 11 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 1
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+4*i+340):Resized(15), 0, params)
end
end
if npc:GetSprite():IsPlaying("Attack1Start") and npc:GetSprite():IsEventTriggered("Shoot") then
npc.Mass = 76
end
if npc.State == 12 and npc.Mass ~= 77 then
npc.Mass = 77
end
if (npc.State == 5 or npc.State == 3) and npc.Mass ~= 75 then
npc.Mass = 75
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSiren, 904)

function mod:EterepTheHeretic(npc)
if npc.State == 12 or npc.State == 13 then
npc.I1 = npc.I1 + 1
end
if npc.State ~= 12 and npc.State ~= 13 and npc.I1 > 0 then
npc.I1 = 0
end
if npc.I1 >= 100 then
npc:Remove()
end
if npc.Variant == 0 and npc.SubType == 1 and Eterepheretic == 1 and npc.FrameCount <= 1 and #Isaac.FindByType(905, 0, 88, false, true) >= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_heretic.png")
npc:GetSprite():LoadGraphics()
npc.Scale = 1.15
end
if npc.Variant == 0 and npc.SubType == 1 and Eterepheretic == 1 and #Isaac.FindByType(905, 0, 77, false, true) == 0 then
npc:Remove()
npc.SubType = 84
local heretic = Isaac.Spawn(905, 0, 77, npc.Position, Vector(0,0), npc)
heretic:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
heretic.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
heretic:GetSprite():Play("ChargeFinishLeft", true)
end
if npc.Variant == 0 and npc.SubType == 77 then
if npc.Scale ~= 0.92 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 0.92
end
if npc.EntityCollisionClass ~= EntityCollisionClass.ENTCOLL_PLAYEROBJECTS then
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
if npc.State == 7 or npc.State == 9 then
npc.State = 14
end
if #Isaac.FindByType(905, 0, 88, false, true) == 0 then
npc:Kill()
end
if npc:GetSprite():IsPlaying("Attack2") and npc:GetSprite():GetFrame() <= 3 and Eterephereticiscreatingfires == true then
npc.State = 3
npc.StateFrame = 0
npc:GetSprite():Stop("Attack2", true)
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsPlaying("Divebomb") and npc:GetSprite():GetFrame() >= 27 and npc:GetSprite():GetFrame() <= 45 then
npc.Velocity = npc.Velocity * 0.99 + (Isaac.GetPlayer(0).Position - npc.Position):Resized(1.2)
end
end
if npc.Variant == 0 and npc.SubType == 88 then
if Eterepheretic == 0 and not npc:IsDead() then
Eterepheretic = 1
end
if npc.State == 10 and #Isaac.FindByType(905, 0, 77, false, true) == 1 then
npc.Velocity = npc.Velocity * 0.98
end
if npc.State == 7 or npc.State == 8 or npc.State == 9 or npc.State == 10 or npc.State == 12 then
Eterephereticiscreatingfires = true
end
if npc.State ~= 7 and npc.State ~= 8 and npc.State ~= 9 and npc.State ~= 10 and npc.State ~= 12 then
Eterephereticiscreatingfires = false
end
if (npc.State == 7 or npc.State == 14) and #Isaac.FindByType(905, 0, 77, false, true) == 0 and npc.Size ~= 33 then
npc.State = 9
npc.Size = 33
end
if (npc.State == 7 or npc.State == 14) and npc.Size ~= 33 then
npc.Size = 33
end
if npc.State ~= 7 and npc.State ~= 14 and npc.Size ~= 32 then
npc.Size = 32
end
if npc.State == 3 and npc.FrameCount % 15 == 10 and Eterepernalrng:RandomInt(4)+1 == 2 then
npc.StateFrame = npc.StateFrame * 2
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheHeretic, 905)

function mod:EterepHornfel(npc)
if npc.Mass ~= 23 and npc.Variant == 1 and #Isaac.FindByType(906, 0, 84, false, true) >= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_hornfel.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_hornfel.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_hornfel.png")
npc:GetSprite():ReplaceSpritesheet(3, "gfx/Sprites/e_hornfel minecart.png")
npc:GetSprite():ReplaceSpritesheet(4, "gfx/Sprites/e_hornfel minecart.png")
npc:GetSprite():ReplaceSpritesheet(5, "gfx/Sprites/e_hornfel.png")
npc:GetSprite():ReplaceSpritesheet(6, "gfx/Sprites/e_hornfel.png")
npc:GetSprite():ReplaceSpritesheet(7, "gfx/Sprites/e_hornfel.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 23
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHornfel, 906)

function mod:EterepGreatGideon(npc)
if npc.Variant == 0 and npc.SubType <= 2 and ((npc.FrameCount <= 1 and Etereplacementernal == true and not Game():GetRoom():IsClear()) or EterepGideonCorpse == true) then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_great gideon.png")
npc:GetSprite():LoadGraphics()
EterepGideon = true
EterepGideonCorpse = true
npc.Size = 49
end
if npc.Variant == 0 and npc.Size == 49 then
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Scale = 1.75
params.Variant = 3
for i = 1,3 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+290+35*i):Resized(10), 0, params)
end
end
if npc.State == 8 then
npc.Mass = 101
end
if npc.State ~= 8 then
npc.Mass = 100
end
if npc:GetSprite():IsPlaying("CloseEyes") and npc:GetSprite():GetFrame() == 32 and npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepGreatGideon, 907)

function mod:EterepBabyPlum(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("Attack3") and npc:GetSprite():GetFrame() == 21 then
npc.Mass = 21
end
if npc:GetSprite():IsPlaying("Attack3End") and npc.Mass ~= 20 then
npc.Mass = 20
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("Attack1") and (npc:GetSprite():IsEventTriggered("Shoot") or npc:GetSprite():IsEventTriggered("Sound") or npc:GetSprite():IsEventTriggered("NewShoot")) then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.16
npc:FireProjectiles(npc.Position, Vector.FromAngle(30*npc:GetSprite():GetFrame()-30):Resized(8), 0, params)
end
if npc:GetSprite():IsPlaying("Attack2") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.16
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30*i):Resized(9), 0, params)
end
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(15+30*i):Resized(5), 0, params)
end
end
if npc.Mass == 21 and (npc:GetSprite():IsPlaying("Attack3") or npc:GetSprite():IsPlaying("Attack3Loop")) and ((Eterepernalrng:RandomInt(6)+1 <= 2 and npc:HasEntityFlags(1<<7)) or (Eterepernalrng:RandomInt(3)+1 ~= 3 and not npc:HasEntityFlags(1<<7))) and npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.16
params.DepthOffset = 26
npc:FireProjectiles(npc.Position+Vector(0,-25), Vector.FromAngle(Eterepernalrng:RandomInt(91)):Resized(7), 0, params)
end
if npc.Mass == 21 and (npc:GetSprite():IsPlaying("Attack3") or npc:GetSprite():IsPlaying("Attack3Loop")) and ((Eterepernalrng:RandomInt(6)+1 <= 2 and npc:HasEntityFlags(1<<7)) or (Eterepernalrng:RandomInt(3)+1 ~= 3 and not npc:HasEntityFlags(1<<7))) and not npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.16
params.DepthOffset = 26
npc:FireProjectiles(npc.Position+Vector(0,-25), Vector.FromAngle(Eterepernalrng:RandomInt(91)+90):Resized(7), 0, params)
end
if npc.Mass == 21 and npc:GetSprite():IsPlaying("Attack3BackLoop") and ((Eterepernalrng:RandomInt(6)+1 <= 2 and npc:HasEntityFlags(1<<7)) or (Eterepernalrng:RandomInt(3)+1 ~= 3 and not npc:HasEntityFlags(1<<7))) and npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.16
npc:FireProjectiles(npc.Position+Vector(0,-15), Vector.FromAngle(Eterepernalrng:RandomInt(91)+270):Resized(7), 0, params)
end
if npc.Mass == 21 and npc:GetSprite():IsPlaying("Attack3BackLoop") and ((Eterepernalrng:RandomInt(6)+1 <= 2 and npc:HasEntityFlags(1<<7)) or (Eterepernalrng:RandomInt(3)+1 ~= 3 and not npc:HasEntityFlags(1<<7))) and not npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.16
npc:FireProjectiles(npc.Position+Vector(0,-15), Vector.FromAngle(Eterepernalrng:RandomInt(91)+180):Resized(7), 0, params)
end
if npc.Mass == 21 and npc.ProjectileCooldown == 100 and npc.I1 <= 6 then
npc.ProjectileCooldown = 90
npc.I1 = npc.I1 + 1
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBabyPlum, 908)

function mod:EterepBabyPlumRender(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc:GetSprite():IsPlaying("Death") and npc:GetSprite():GetFrame() == 50 and npc:GetData().babyplumdeath ~= npc:GetSprite():GetFrame() then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
for i = 1,16 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+22.5*i):Resized(8), 0, params)
end
npc:GetData().babyplumdeath = npc:GetSprite():GetFrame()
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_RENDER, mod.EterepBabyPlumRender, 908)

function mod:EterepTheScourge(npc)
if npc.Variant == 0 and npc.SubType == 88 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.12
params.Variant = 4
if npc.State == 6 then
for i = 1, Game():GetNumPlayers() do
Isaac.GetPlayer(i-1):AddVelocity((npc.Position - Isaac.GetPlayer(i-1).Position):Normalized()*0.275)
end
end
if (npc:GetSprite():IsPlaying("SliceLeft") or npc:GetSprite():IsPlaying("SliceRight")) and npc.StateFrame ~= 100 then
npc.StateFrame = 100
end
if npc:GetSprite():IsPlaying("TrapDown") and npc.StateFrame ~= 0 then
npc.StateFrame = 0
end
if (npc.State == 9 or npc.State == 10) and npc.StateFrame >= 100 then
npc.StateFrame = npc.StateFrame + 1
if npc.StateFrame % 12 == 9 and npc.StateFrame >= 120 then
npc.ProjectileCooldown = npc.ProjectileCooldown - 11
if npc:HasEntityFlags(1<<7) then
npc.ProjectileCooldown = npc.ProjectileCooldown + 5
end
end
if npc.StateFrame >= 250 then
npc.StateFrame = 0
npc.ProjectileCooldown = npc.ProjectileCooldown + 100
end
end
if npc:GetSprite():IsPlaying("TrapDown") and npc:GetSprite():IsEventTriggered("Shoot") then
npc.I1 = Eterepernalrng:RandomInt(2)+1
end
if npc:GetSprite():IsPlaying("TrapEndDown") and npc.I1 ~= 0 then
npc.State = 9
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("BroccoliAttack") and npc:GetSprite():GetFrame() == 1 and npc.MaxHitPoints * 0.5 <= npc.HitPoints then
npc.I1 = 1
end
if npc:GetSprite():IsPlaying("BroccoliAttack") and npc:GetSprite():GetFrame() == 1 and npc.MaxHitPoints * 0.5 > npc.HitPoints then
npc.I1 = 5
end
if npc:GetSprite():IsPlaying("BroccoliAttack") and npc:GetSprite():IsEventTriggered("Shoot") and npc.MaxHitPoints * 0.5 > npc.HitPoints then
params.Variant = 6
params.Scale = 2.25
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
params.CurvingStrength = 0.0000001
npc:FireProjectiles(npc.Position, Vector.FromAngle(90):Resized(12), 0, params)
npc.State = npc.State + 50
npc:PlaySound(213, 2, 0, false, 1)
end
if npc:GetSprite():IsPlaying("BroccoliAttack") and npc:GetSprite():IsEventTriggered("Shoot") and npc.MaxHitPoints * 0.5 <= npc.HitPoints then
params.Variant = 3
params.Scale = 3.5
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
params.CurvingStrength = 0.0000002
npc:FireProjectiles(npc.Position, Vector.FromAngle(90):Resized(12), 0, params)
npc.State = npc.State + 50
npc:PlaySound(213, 2, 0, false, 1)
end
if npc:GetSprite():IsPlaying("BroccoliAttack") and npc:GetSprite():GetFrame() == 47 and npc.State >= 30 then
npc.State = npc.State - 50
npc.I1 = npc.I1 - 1
npc:PlaySound(212, 2, 0, false, 1)
end
if npc:GetSprite():IsPlaying("TrapLoopDown") and (npc.StateFrame >= 590 or #Isaac.FindByType(909, 10, -1, false, true) <= 1) then
npc.State = 9
npc.StateFrame = 0
npc:GetSprite():Play("TrapEndDown", true)
npc:ClearEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
npc:ClearEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
end
if npc:GetSprite():IsPlaying("TrapLoopDown") and npc.I1 == 1 then
npc.State = 57
npc:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
npc:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
npc.Velocity = Vector(0,0)
npc.StateFrame = npc.StateFrame + 2
if npc:HasEntityFlags(1<<7) then
npc.StateFrame = npc.StateFrame - 1
end
if npc.StateFrame % 68 == 10 then
params.Variant = 1
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90+7.5*i):Resized(7), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame % 68 == 44 then
params.Variant = 1
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(37.5+7.5*i):Resized(7), 0, params)
end
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame % 68 == 26 or npc.StateFrame % 68 == 60 then
params.Variant = 1
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+-5):Resized(7), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(7), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+5):Resized(7), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc:GetSprite():IsPlaying("TrapLoopDown") and npc.I1 == 2 then
npc.State = 57
npc:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
npc:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
npc.Velocity = Vector(0,0)
npc.StateFrame = npc.StateFrame + 2
if npc:HasEntityFlags(1<<7) then
npc.StateFrame = npc.StateFrame - 1
end
if npc.StateFrame % 32 == 2 then
params.FallingAccelModifier = -0.14
params.BulletFlags = ProjectileFlags.CURVE_LEFT | ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.006
params.Variant = 1
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(71)+110):Resized(7.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
if npc.StateFrame % 32 == 18 then
params.FallingAccelModifier = -0.14
params.BulletFlags = ProjectileFlags.CURVE_RIGHT | ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.006
params.Variant = 1
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(71)):Resized(7.5), 0, params)
npc:PlaySound(178, 1, 0, false, 1)
end
end
if npc:GetSprite():IsPlaying("TrapLoopDown") and npc.Position.Y >= Game():GetRoom():GetBottomRightPos().Y - 190 then
npc.Velocity = Vector(0,-5)
end
if npc.State == 10 and npc.Mass ~= 77 then
npc.Mass = 77
end
if npc.State == 6 and npc.Mass ~= 76 then
npc.Mass = 76
end
if npc.State ~= 6 and npc.State ~= 10 and npc.Mass ~= 75 then
npc.Mass = 75
end
end
if npc.State ~= 7 and npc.Variant == 10 and (npc.FrameCount >= 300 or (npc.Parent ~= nil and npc.Parent.State == 9)) then
npc.State = 7
npc:PlaySound(72, 1, 0, false, 1)
end
if npc.Variant == 10 and npc.Parent ~= nil and npc.Parent.Type == 909 and npc.Parent.Variant == 0 and npc.Parent.SubType == 88 and npc.FrameCount <= 1 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_scourge whip.png")
npc:GetSprite():LoadGraphics()
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTheScourge, 909)

function mod:EterepChimera(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("FallBack") and npc:GetSprite():GetFrame() == 23 and npc.Mass ~= 76 then
npc:PlaySound(308, 1, 0, false, 1)
npc:PlaySound(48, 1, 0, false, 1)
npc.Mass = 76
end
if npc:GetSprite():IsPlaying("FallBack") and npc:GetSprite():IsEventTriggered("NewShoot1") and npc:GetSprite():GetFrame() % 4 == 0 then
local params = ProjectileParams()
params.Scale = 1.5
params.Variant = 2
params.FallingSpeedModifier = -npc:GetSprite():GetFrame() * 1.5 + 10
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
params.BulletFlags = ProjectileFlags.EXPLODE
params.FallingAccelModifier = 0.9
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
npc.Mass = 75
end
if npc:GetSprite():IsPlaying("Leap") and npc:GetSprite():GetFrame() == 28 and npc.StateFrame == 0 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.05
params.Variant = 4
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+EterepCustomAngle+60*i):Resized(8), 0, params)
end
npc.Velocity = Vector(0,0)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:PlaySound(48, 1, 0, false, 1)
npc.StateFrame = 1
Game():ShakeScreen(8)
end
if npc:GetSprite():IsPlaying("Leap") and npc:GetSprite():GetFrame() == 54 and npc.StateFrame == 1 then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.05
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9), 0, params)
end
params.FallingAccelModifier = 0.225
for i = 1,Eterepernalrng:RandomInt(10)+5 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(106)+15) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(41)+50)*0.1), 0, params)
end
npc.StateFrame = 2
end
if npc:GetSprite():IsPlaying("Leap") and npc:GetSprite():GetFrame() == 80 and npc.StateFrame == 2 then
for i = 1,4 do
local shockwave = Isaac.Spawn(1000, 72, 0, npc.Position, Vector(0,0), npc):ToEffect()
shockwave.Parent = npc
shockwave.Rotation = 90*i
end
npc.Velocity = Vector(0,0)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
npc:PlaySound(48, 1, 0, false, 1)
npc.StateFrame = 3
Game():ShakeScreen(15)
end
if npc:GetSprite():IsPlaying("Leap") and npc:GetSprite():GetFrame() == 81 then
npc.StateFrame = 0
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() == 56 then
npc.Mass = (npc:GetPlayerTarget().Position - npc.Position):Normalized():GetAngleDegrees() + 360
npc:PlaySound(11, 1, 0, false, 1)
end
if npc:GetSprite():IsOverlayPlaying("HeadAttack") and npc:GetSprite():GetOverlayFrame() >= 57 and npc:GetSprite():GetOverlayFrame() <= 66 and npc:GetSprite():GetOverlayFrame() % 2 == 1 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
params.HeightModifier = -17
params.DepthOffset = 10
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.Mass+306+18*i):Resized(11), 0, params)
end
end
if (npc:GetSprite():IsPlaying("TripHori") or npc:GetSprite():IsPlaying("TripVert")) and npc:GetSprite():GetFrame() == 7 then
npc.HitPoints = 525
end
end
if npc.Variant == 2 and npc.SubType <= 2 and npc.Parent ~= nil and npc.Parent.SubType == 88 then
npc:Morph(910, 2, 88, -1)
end
if npc.Variant == 2 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 1 then
Eterepchimeraattack = Eterepernalrng:RandomInt(2)+1
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():GetFrame() == 23 then
npc.Mass = (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("NewShoot1") and Eterepchimeraattack == 1 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.CurvingStrength = 0.02
params.FallingAccelModifier = -0.1
params.Variant = 3
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.Mass+339+18*i):Resized(11), 0, params)
end
end
if npc:GetSprite():IsPlaying("Shoot") and npc:GetSprite():IsEventTriggered("NewShoot1") and Eterepchimeraattack == 2 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.CURVE_LEFT
params.CurvingStrength = -0.02
params.FallingAccelModifier = -0.1
params.Variant = 3
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.Mass+278+18*i):Resized(11), 0, params)
end
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 1 and Eterepernalrng:RandomInt(3)+1 == 2 then
npc.State = 8
npc:GetSprite():Play("Shoot", true)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
end
if npc:GetSprite():IsPlaying("Jump") and npc:GetSprite():GetFrame() == 1 and Eterepernalrng:RandomInt(3)+1 == 1 then
npc.State = 9
npc:GetSprite():Play("ChargeAnnounce", true)
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
end
if npc.I1 == 256 and npc.Mass ~= 76 then
npc.Mass = 76
end
if npc.Mass == 76 and npc:CollidesWithGrid() then
local params = ProjectileParams()
params.FallingAccelModifier = 0.3
params.Variant = 4
for i = 1,Eterepernalrng:RandomInt(7)+18 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(106)+15) * 0.1
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(51)+60)*0.1), 0, params)
end
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(22.5+EterepCustomAngle+45*i):Resized(8), 0, params)
end
npc.Mass = 75
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepChimera, 910)

function mod:EterepRotgutBoss(npc)
if npc.Variant == 0 and npc.SubType == 0 and not npc:GetSprite():IsPlaying("Transition") and not npc:GetSprite():IsPlaying("TransitionLoop") and EterepRotgut == true then
EterepRotgut = false
end
if npc.Variant == 1 and npc.SubType == 84 and EterepRotgut == false then
EterepRotgut = true
end
if npc.Variant == 0 and npc.SubType == 84 and npc:GetSprite():IsPlaying("Transition") and Game():GetRoom():GetType() ~= RoomType.ROOM_CHALLENGE then
npc.SubType = 0
end
if npc.Variant == 0 and npc.SubType == 84 and not npc:GetSprite():IsPlaying("Transition") and not npc:GetSprite():IsPlaying("TransitionLoop") then
if npc.State == 9 and npc.Size ~= 59 then
npc.Size = 59
end
if npc.State == 3 and npc.Size ~= 58 then
npc.Size = 58
end
if npc.State == 3 and npc.Mass ~= 80 then
npc.Mass = 80
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
npc.Size = 60
end
if npc.Size == 60 and ((npc.FrameCount % 6 == 1 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) and npc.I1 == 0 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 6
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,4 do
params.Scale = 1+(i*0.25)
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(npc.FrameCount*23):Resized(4.5+1.8*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(180+npc.FrameCount*23):Resized(4.5+1.8*i), 0, params)
end
end
if npc.Size == 60 and ((npc.FrameCount % 72 == 24 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 36 == 12 and not npc:HasEntityFlags(1<<7))) and npc.I1 == 1 then
local params = ProjectileParams()
params.Variant = 5
params.FallingAccelModifier = -0.15
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = 0.02
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,12 do
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(EterepCustomAngle+30*i):Resized(6.5), 0, params)
end
end
if npc.Size == 60 and ((npc.FrameCount % 72 == 60 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 36 == 30 and not npc:HasEntityFlags(1<<7))) and npc.I1 == 1 then
local params = ProjectileParams()
params.Variant = 5
params.FallingAccelModifier = -0.15
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.CurvingStrength = -0.02
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,12 do
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(EterepCustomAngle+30*i):Resized(6.5), 0, params)
end
end
if npc.Size == 60 and npc.I1 == 2 and ((npc.FrameCount % 18 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 9 == 1 and not npc:HasEntityFlags(1<<7))) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
params.Variant = 6
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(6.5*npc.FrameCount+72*i):Resized(5), 0, params)
end
end
if npc.Size == 60 and ((npc.FrameCount % 18 == 8 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 9 == 4 and not npc:HasEntityFlags(1<<7))) and npc.I1 == 2 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
params.Variant = 6
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(-6.5*npc.FrameCount+72*i):Resized(5), 0, params)
end
end
if npc.Size == 60 and ((npc.FrameCount % 18 == 14 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 9 == 7 and not npc:HasEntityFlags(1<<7))) and npc.I1 == 2 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.08
params.BulletFlags = ProjectileFlags.SINE_VELOCITY
params.Variant = 6
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,5 do
npc:FireProjectiles(npc.Position+Vector(0,20), Vector.FromAngle(npc.FrameCount+72*i):Resized(5), 0, params)
end
end
if npc:GetSprite():IsPlaying("Munch") and npc:GetSprite():IsEventTriggered("Shoot") then
if npc.I1 == 1 then
local rotgutattack = Eterepernalrng:RandomInt(2)+1
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.125
params.BulletFlags = ProjectileFlags.BOUNCE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
if rotgutattack == 1 then
for i = 1,2 do
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(30+20*i):Resized(7.75), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(90+20*i):Resized(7.75), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(210+20*i):Resized(7.75), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(270+20*i):Resized(7.75), 0, params)
end
end
if rotgutattack == 2 then
for i = 1,2 do
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(10+20*i):Resized(7.75), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(110+20*i):Resized(7.75), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(190+20*i):Resized(7.75), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(290+20*i):Resized(7.75), 0, params)
end
end
end
if npc.I1 == 0 then
if npc.Mass == 80 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,15 do
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(EterepCustomAngle+24*i):Resized(9), 0, params)
end
end
if npc.Mass == 81 then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.125
params.BulletFlags = ProjectileFlags.BOUNCE
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,8 do
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(22.5+45*i):Resized(7.5), 0, params)
end
end
if npc.Mass == 82 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.1
params.Variant = 4
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,44 do
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(51)-25,Eterepernalrng:RandomInt(51)-15), Vector.FromAngle(Eterepernalrng:RandomInt(11)-5+90*i):Resized((Eterepernalrng:RandomInt(101)+100)*0.1), 0, params)
end
end
npc.Mass = npc.Mass + 1
end
end
end
if npc.Variant == 1 and npc.SubType == 84 then
if npc.State == 3 and npc.StateFrame >= 15 and npc.FrameCount % 20 == 10 and Eterepernalrng:RandomInt(10)+1 == 1 then
npc.State = 12
npc:GetSprite():Play("HeadAttack2", true)
end
if npc.State == 3 and npc.StateFrame >= 15 and npc.FrameCount % 20 == 10 and Eterepernalrng:RandomInt(6)+1 == 1 then
npc.State = 9
npc:GetSprite():Play("ButtAttack2", true)
end
end
if npc.Variant == 2 and npc.SubType == 0 and npc:IsDead() then
EterepNotRotgut = true
end
if npc.Variant == 2 and npc.SubType == 84 then
if npc.State == 3 and npc.FrameCount % 20 == 10 and Eterepernalrng:RandomInt(12)+1 == 1 then
npc.State = 8
npc:GetSprite():Play("SpitDown", true)
end
if npc.State == 3 and npc.FrameCount % 20 == 10 and Eterepernalrng:RandomInt(8)+1 == 1 then
npc.State = 13
npc:GetSprite():Play("Summon", true)
npc.I1 = -80
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepRotgutBoss, 911)

function mod:EterepRotgutDeath(npc)
if npc.Type == 911 and npc.Variant == 0 and npc.SubType == 84 and npc:GetSprite():IsPlaying("Death") and EterepRotgut == true then
EterepRotgut = false
end
end
mod:AddCallback(ModCallbacks.MC_PRE_NPC_UPDATE, mod.EterepRotgutDeath, 911)

function mod:EterepMotherBoss(npc)
if npc.Variant == 0 and npc.SubType == 0 and npc.FrameCount <= 1 and EterepFinalacementernal == true then
npc:GetSprite():Load("gfx/e_witness.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear",true)
EterepMother = true
npc.Mass = 1010
Eterepmothermaggotattack = 4
end
if npc.Variant == 0 and npc.SubType == 0 and npc.Mass >= 1010 and npc.Mass <= 1020 then
if npc.State == 9 and npc:GetSprite():IsPlaying("GroundPound") and npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(912, 100, -1, false, true) == 0 then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.5
params.FallingAccelModifier = -0.1
for i = 1,12 do
npc:FireProjectiles(Vector(495,225), Vector.FromAngle(60+12*i):Resized(13), 0, params)
end
for i = 1,8 do
npc:FireProjectiles(Vector(495,225), Vector.FromAngle(60+18*i):Resized(10), 0, params)
end
local paramsa = ProjectileParams()
paramsa.FallingAccelModifier = 0.3
paramsa.BulletFlags = ProjectileFlags.BOUNCE
paramsa.Variant = 6
for i = 1, Eterepernalrng:RandomInt(6)+6 do
paramsa.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(Vector(495,225), Vector.FromAngle(Eterepernalrng:RandomInt(100)+80):Resized((Eterepernalrng:RandomInt(140)+1)*0.1), 0, paramsa)
end
end
if npc.State == 9 and npc:GetSprite():IsPlaying("GroundPound2") and npc:GetSprite():IsEventTriggered("Shoot") and #Isaac.FindByType(912, 100, -1, false, true) == 0 then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.5
params.FallingAccelModifier = -0.1
for i = 1,12 do
npc:FireProjectiles(Vector(145,225), Vector.FromAngle(-30+12*i):Resized(13), 0, params)
end
for i = 1,8 do
npc:FireProjectiles(Vector(145,225), Vector.FromAngle(-30+18*i):Resized(10), 0, params)
end
local paramsa = ProjectileParams()
paramsa.FallingAccelModifier = 0.3
paramsa.BulletFlags = ProjectileFlags.BOUNCE
paramsa.Variant = 6
for i = 1, Eterepernalrng:RandomInt(6)+6 do
paramsa.FallingSpeedModifier = -(Eterepernalrng:RandomInt(105)+8) * 0.1
npc:FireProjectiles(Vector(145,225), Vector.FromAngle(Eterepernalrng:RandomInt(100)-10):Resized((Eterepernalrng:RandomInt(140)+1)*0.1), 0, paramsa)
end
end
if npc.State == 3 and npc.Mass ~= 1010 then
npc.Mass = 1010
end
if npc.State == 9 and npc.Mass ~= 1011 then
npc.Mass = 1011
end
end
if npc.Variant == 10 and npc.SubType == 0 and EterepMother == true and npc.Mass ~= 1010 then
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_witness head2.png")
npc:GetSprite():LoadGraphics()
npc.Mass = 1010
end
if npc.Variant == 10 and npc.Mass >= 1010 and npc.Mass <= 1020 then
if npc.FrameCount <= 1 then
Eterepmothermaggotattack = 4
end
if npc.State == 3 and Eterepmothermaggotattack ~= 4 then
Eterepmothermaggotattack = 4
npc.Mass = 1010
npc.I2 = 0
end
if npc.State == 9 and npc.I1 == 0 and npc.I1 + npc.Mass ~= 1011 then
Eterepmothermaggotattack = npc.I2
npc.Mass = 1011
end
if npc.State == 9 and npc.I1 == 1 and Eterepmothermaggotattack >= 2 and npc.Mass ~= 1012 then
Eterepmothermaggotattack = Eterepmothermaggotattack - 2
npc.Mass = 1012
end
if npc.State == 9 and npc.I1 == 1 and Eterepmothermaggotattack <= 1 and npc.Mass ~= 1012 then
Eterepmothermaggotattack = Eterepmothermaggotattack + 2
npc.Mass = 1012
end
if npc.State == 9 and npc.I1 == 2 and Eterepmothermaggotattack >= 2 and npc.Mass ~= 1013 then
Eterepmothermaggotattack = Eterepmothermaggotattack - 2
npc.Mass = 1013
end
if npc.State == 9 and npc.I1 == 2 and Eterepmothermaggotattack <= 1 and npc.Mass ~= 1013 then
Eterepmothermaggotattack = Eterepmothermaggotattack + 2
npc.Mass = 1013
end
if npc.State == 9 and npc.I1 == 3 and Eterepmothermaggotattack >= 2 and npc.Mass ~= 1014 then
Eterepmothermaggotattack = Eterepmothermaggotattack - 2
npc.Mass = 1014
end
if npc.State == 9 and npc.I1 == 3 and Eterepmothermaggotattack <= 1 and npc.Mass ~= 1014 then
Eterepmothermaggotattack = Eterepmothermaggotattack + 2
npc.Mass = 1014
end
if npc.State == 9 and npc.I1 == 4 and Eterepmothermaggotattack <= 3 and npc.Mass ~= 1010 then
Eterepmothermaggotattack = 22
npc.Mass = 1010
end
if npc.State == 9 and Eterepmothermaggotattack <= 3 then
npc.I2 = Eterepmothermaggotattack
end
if npc.State == 8 and npc.Size ~= 113 then
npc.Size = 113
end
if npc.State ~= 8 and npc.Size ~= 110 then
npc.Size = 110
end
if npc.State == 8 and npc.StateFrame >= 1 and npc.StateFrame <= 200 and npc.StateFrame % 11 == 2 and npc.I1 ~= 0 then
npc.I1 = 0
end
if npc:GetSprite():IsPlaying("JumpUp") and npc:GetSprite():IsEventTriggered("Shoot") then
motherlanded = 1
end
if npc:GetSprite():IsPlaying("JumpDown") and npc:GetSprite():IsEventTriggered("Shoot") then
motherlanded = 0
end
if npc.State == 6 and ((npc.FrameCount % 8 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 4 == 1 and not npc:HasEntityFlags(1<<7))) and Eterepernalrng:RandomInt(3)+1 == 1 then
local params = ProjectileParams()
params.Variant = 4
params.Scale = 1.75
params.CurvingStrength = 0.0000001
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
npc:FireProjectiles(npc.Position+Vector(Eterepernalrng:RandomInt(201)-100,0), Vector(0,0), 0, params)
end
if npc:IsDead() then
EterepMother = false
end
end
if npc.Variant == 100 and npc.SubType == 0 and EterepMother == true then
npc.StateFrame = npc.StateFrame + 1
if npc:CollidesWithGrid() and npc.StateFrame >= 10 then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.05
params.CurvingStrength = 0.0000001
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
params.Color = projectilenewcolor
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30*i):Resized(9), 0, params)
end
npc.StateFrame = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepMotherBoss, 912)

function mod:EterepClog(npc)
if npc.Variant == 0 and npc.SubType == 84 then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.05
if npc:GetSprite():IsPlaying("BulletHellBegin") and ((npc.FrameCount % 16 == 1 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 8 == 1 and not npc:HasEntityFlags(1<<7))) then
npc.Mass = 119 + Eterepernalrng:RandomInt(2)+1
end
if npc:GetSprite():IsPlaying("BulletHellLoop") and npc.Mass == 120 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(8), 0, params)
end
if npc:GetSprite():IsPlaying("BulletHellLoop") and ((npc.FrameCount % 30 == 10 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 15 == 10 and not npc:HasEntityFlags(1<<7))) and npc.Mass == 121 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(8), 0, params)
end
if npc:GetSprite():IsPlaying("BulletHellLoop") and ((npc.FrameCount % 6 == 1 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 3 == 1 and not npc:HasEntityFlags(1<<7))) and npc.Mass == 121 then
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()-20):Resized(10), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+20):Resized(10), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepClog, 914)

function mod:EterepSinge(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc.Mass ~= 23 then
local effect = Isaac.Spawn(927, 8900, 0, npc.Position+Vector(0,-2000), Vector(0,0), npc)
effect.Parent = npc
effect.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
effect.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
npc.Mass = 23
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepSinge, 915)

function mod:EterepBumbino(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc:GetSprite():IsPlaying("Walk") and npc:GetSprite():GetFrame() == 12 and npc.Velocity:Length() <= 1 then
npc.State = 8
npc.StateFrame = 0
npc:GetSprite():Play("Swipe",true)
end
if npc:GetSprite():IsPlaying("Swipe") and npc:GetSprite():GetFrame() == 1 and Eterepernalrng:RandomInt(3)+1 == 1 then
npc.State = 9
npc.StateFrame = 0
npc:GetSprite():Play("GroundSlam",true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) <= 200 and npc.State == 4 and npc.FrameCount % 30 == 1 and Eterepernalrng:RandomInt(3)+1 == 1 then
npc.State = 9
npc.StateFrame = 0
npc:GetSprite():Play("GroundSlam",true)
end
if npc:GetPlayerTarget().Position:Distance(npc.Position) > 200 and npc:GetSprite():IsPlaying("ButtBomb") and npc:GetSprite():GetFrame() == 1 then
npc.State = 9
npc.StateFrame = 0
npc:GetSprite():Play("GroundSlam",true)
end
if npc:GetSprite():IsPlaying("GroundSlam") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = 2
params.Variant = 9
for i = 1,Eterepernalrng:RandomInt(5)+8 do
params.Scale = (Eterepernalrng:RandomInt(23)+16)*0.05
params.HeightModifier = -Eterepernalrng:RandomInt(461)-380
npc:FireProjectiles(Isaac.GetRandomPosition(0), Vector(0,0), 0, params)
end
end
if npc:GetSprite():IsPlaying("Swipe") and npc:GetSprite():IsEventTriggered("Shoot") and not npc:GetSprite().FlipX then
local params = ProjectileParams()
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(-120,0), Vector.FromAngle(150+7.5*i):Resized(13), 0, params)
end
end
if npc:GetSprite():IsPlaying("Swipe") and npc:GetSprite():IsEventTriggered("Shoot") and npc:GetSprite().FlipX then
local params = ProjectileParams()
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(120,0), Vector.FromAngle(-30+7.5*i):Resized(13), 0, params)
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepBumbino, 916)


function mod:EterepColostomia(npc)
if npc.Variant == 0 and npc.SubType == 84 then
if npc.State == 8 and #Isaac.FindByType(1000, 141, -1, false, true) >= 10 and npc.StateFrame == 0 then
npc.State = 9
npc:GetSprite():Play("Attack",true)
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
npc.StateFrame = npc.StateFrame + 1
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 2 and npc.StateFrame ~= 0 then
npc.StateFrame = 0
end
if npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():GetFrame() == 1 and npc.StateFrame < 10 and npc.StateFrame >= 4 and #Isaac.FindByType(1000, 141, -1, false, true) <= 17 then
npc.State = 8
if (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() < -155 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= -180 then
npc:GetSprite():Play("ChargeStartHori",true)
npc.I1 = 0
end
if (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() < -25 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= -155 then
npc:GetSprite():Play("ChargeStartUp",true)
npc.I1 = 1
end
if (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() < 25 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= -25 then
npc:GetSprite():Play("ChargeStartHori",true)
npc.I1 = 2
end
if (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() < 155 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= 25 then
npc:GetSprite():Play("ChargeStartDown",true)
npc.I1 = 3
end
if (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() <= 180 and (npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees() >= 155 then
npc:GetSprite():Play("ChargeStartHori",true)
npc.I1 = 0
end
end
if npc:GetSprite():IsPlaying("Dive") and npc:GetSprite():GetFrame() == 1 then
npc.Mass = (npc:GetPlayerTarget().Position - npc.Position):Normalized():GetAngleDegrees() * 0.1 + 40
npc.I1 = npc.I1 + 1
end
if npc:GetSprite():IsPlaying("Dive") and npc:GetSprite():GetFrame() >= 2 and npc:GetSprite():GetFrame() <= 20 then
npc.Velocity = Vector.FromAngle((npc.Mass-40)*10):Resized(20)
end
if npc:GetSprite():IsPlaying("Dive") and npc:GetSprite():GetFrame() == 26 and Eterepernalrng:RandomInt(3)+3 >= npc.I1 then
npc.State = 6
npc:GetSprite():Play("Dive",true)
local creep = Isaac.Spawn(1000, 168, 0, npc.Position, Vector(0,0), npc)
creep.Parent = npc
creep:ToEffect().Timeout = 120
end
if (npc:GetSprite():IsPlaying("Idle2") or npc:GetSprite():IsPlaying("Attack2") or npc:GetSprite():IsPlaying("Attack3")) and npc.FrameCount % 20 == 10 then
local creep = Isaac.Spawn(1000, 168, 0, npc.Position, Vector(0,0), npc)
creep.Parent = npc
creep:ToEffect().Timeout = 120
end
if npc:GetSprite():IsPlaying("Dive") and npc:GetSprite():GetFrame() == 27 then
npc.I1 = 0
local creep = Isaac.Spawn(1000, 168, 0, npc.Position, Vector(0,0), npc)
creep.Parent = npc
creep:ToEffect().Timeout = 120
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepColostomia, 917)

function mod:EterepTurdlet(npc)
if npc.Variant == 0 and npc.SubType == 89 and npc.Parent == nil then
if npc.StateFrame <= 18 then
npc.StateFrame = npc.StateFrame + 1
end
local params = ProjectileParams()
params.Variant = 3
if npc:CollidesWithGrid() and npc.Velocity:Length() <= 5 and npc.StateFrame >= 19 then
params.FallingAccelModifier = -0.01*npc.Velocity:Length()
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(60*i):Resized(npc.Velocity:Length()*0.8), 0, params)
end
npc.StateFrame = 0
end
if npc:CollidesWithGrid() and npc.Velocity:Length() <= 9 and npc.Velocity:Length() > 5 and npc.StateFrame >= 19 then
params.FallingAccelModifier = -0.01*npc.Velocity:Length()
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(npc.Velocity:Length()*0.8), 0, params)
end
npc.StateFrame = 0
end
if npc:CollidesWithGrid() and npc.Velocity:Length() > 9 and npc.StateFrame >= 19 then
params.FallingAccelModifier = -0.1
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(36*i):Resized(7.2), 0, params)
end
npc.StateFrame = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepTurdlet, 918)

function mod:EterepHorniboys(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if npc.State == 3 and npc.StateFrame == 10 then
npc.I2 = Eterepernalrng:RandomInt(4)
npc.StateFrame = 30
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 9 then
local params = ProjectileParams()
params.Variant = 4
params.BulletFlags = ProjectileFlags.CHANGE_FLAGS_AFTER_TIMEOUT
params.ChangeTimeout = 0
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(22.5+45*i):Resized(10), 0, params)
end
end
if npc:GetSprite():IsEventTriggered("Shoot") and npc.State == 11 and npc.Size ~= 36 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.Variant = 4
if npc.StateFrame == 1 then
npc.Mass = 31
end
if npc.StateFrame == 2 or npc.StateFrame == 18 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45+90*i):Resized(9.5), 0, params)
end
end
if npc.StateFrame == 3 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(9.5), 0, params)
end
end
if npc.StateFrame == 4 or npc.StateFrame == 17 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(45*i):Resized(9.5), 0, params)
end
end
if npc.StateFrame == 5 or npc.StateFrame == 15 then
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(30*i):Resized(9.5), 0, params)
end
end
if npc.StateFrame == 6 then
for i = 1,16 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+22.5*i):Resized(9.2), 0, params)
end
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+11.25+45*i):Resized(7.2), 0, params)
end
end
if npc.StateFrame == 7 or npc.StateFrame == 13 then
for i = 1,5 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15*i+315):Resized(9), 0, params)
end
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15*i+322.5):Resized(7), 0, params)
end
end
if npc.StateFrame == 8 then
params.FallingAccelModifier = 0.3
for i = 1,18 do
params.FallingSpeedModifier = -(Eterepernalrng:RandomInt(200)+1) * 0.1
params.Scale = (Eterepernalrng:RandomInt(23)+16) * 0.05
npc:FireProjectiles(npc.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized(7.5), 0, params)
end
end
if npc.StateFrame == 9 or npc.StateFrame == 12 then
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+15+30*i):Resized(9), 0, params)
end
end
if npc.StateFrame == 10 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+-15):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+-5):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+5):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+15):Resized(9.5), 0, params)
end
end
if npc.StateFrame == 11 or npc.StateFrame == 16 then
for i = 1,8 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+22.5+45*i):Resized(7), 0, params)
end
end
if npc.StateFrame == 14 then
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+60):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+50):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+40):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i+30):Resized(9.5), 0, params)
end
end
if npc.StateFrame == 19 then
npc.Mass = 30
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(9.5), 0, params)
end
end
npc.Size = 36
end
if npc:GetSprite():IsEventTriggered("NormalSize") and npc.State == 11 and npc.Size ~= 35 then
npc.Size = 35
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHorniboys, 920)

function mod:EterepClutch(npc)
if npc.Variant == 0 and npc.SubType == 88 and npc.FrameCount <= 1 then
local clutchnewcolor = Color(2,2,2,1,0,0,0)
npc.Color = clutchnewcolor
end
if npc.Variant == 0 and npc.SubType == 88 and npc:GetSprite():IsPlaying("Attack") and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.Variant = 4
params.FallingAccelModifier = -0.05
for i = 1,6 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(10), 0, params)
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepClutch, 921)

function mod:EterepCustomScythes(npc)
if npc.Variant == 354 then
if npc.FrameCount <= 1 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
npc.Scale = 1.2
end
if npc.FrameCount + npc.Mass < 225 then
npc.Velocity = Vector(0,0)
end
if npc.FrameCount + npc.Mass >= 225 and npc.I1 ~= 1 then
npc.I1 = 1
npc.Velocity = Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()):Resized(4)
end
if npc.FrameCount + npc.Mass >= 225 and npc.Velocity:Length() <= 14 then
npc.Velocity = npc.Velocity * 1.1
npc:GetSprite():Play("Throw",false)
if npc.Velocity:Length() <= 3 then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(npc.Velocity:Length()+0.5)
end 
end
if Game():GetRoom():GetCenterPos():Distance(npc.Position) >= 2000 then
npc:Remove()
end
end
if npc.Variant == 355 then
if npc.FrameCount <= 1 then
npc:GetSprite():Play("Throw",false)
npc:GetSprite():LoadGraphics()
end
if Game():GetRoom():GetCenterPos():Distance(npc.Position) >= 2000 then
npc:Remove()
end
if npc.FrameCount >= 5 and npc.Velocity:Length() <= 14 then
npc.Velocity = npc.Velocity * 1.07
if npc.Velocity:Length() <= 3 then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(npc.Velocity:Length()+0.5)
end 
end
end
if npc.Variant == 356 and npc.SpawnerType == 951 then
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.25
end
if npc.Velocity:Length() <= 12 then
npc.Velocity = npc.Velocity * 1.07
if npc.Velocity:Length() <= 3 and ((npc.FrameCount + npc.Mass >= 550 and npc.FrameCount + npc.Mass <= 800) or (npc.FrameCount + npc.Mass >= 850)) then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(npc.Velocity:Length()+0.4)
end 
end
if not npc:GetSprite():IsPlaying("Throw") then
npc.Velocity = Vector(0,0)
end
if npc.FrameCount + npc.Mass == 550 then
npc.Velocity = Vector(3,0)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
npc:GetSprite():Play("Throw",false)
npc:GetSprite():LoadGraphics()
end
if npc.FrameCount + npc.Mass == 850 then
npc.Velocity = Vector(-3,0)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
npc:GetSprite():Play("Throw",false)
npc:GetSprite():LoadGraphics()
end
if Game():GetRoom():GetCenterPos():Distance(npc.Position) >= 2000 then
npc:Remove()
end
end
if npc.Variant == 357 then
npc:GetSprite():Play("Throw",false)
if npc.Velocity:Length() < 10 then
npc.Velocity = npc.Velocity * 1.1
if npc.Velocity:Length() <= 3 then
npc.Velocity = Vector.FromAngle((npc.Velocity):GetAngleDegrees()):Resized(npc.Velocity:Length()+0.3)
end 
end
if not EterepDetectWallCollision(npc.Position+npc.Velocity) then
if EterepDetectWallCollision(npc.Position+Vector(npc.Velocity.X*-1,npc.Velocity.Y)) then
local lilhaunt = Isaac.Spawn(260, 10, 0, npc.Position, Vector(0,0), npc)
lilhaunt.HitPoints = 15
npc:PlaySound(265, 1, 0, false, 1)
npc:Remove()
elseif EterepDetectWallCollision(npc.Position+Vector(npc.Velocity.X,npc.Velocity.Y*-1)) then
local lilhaunt = Isaac.Spawn(260, 10, 0, npc.Position, Vector(0,0), npc)
lilhaunt.HitPoints = 15
npc:PlaySound(265, 1, 0, false, 1)
npc:Remove()
else
local lilhaunt = Isaac.Spawn(260, 10, 0, npc.Position, Vector(0,0), npc)
lilhaunt.HitPoints = 15
npc:PlaySound(265, 1, 0, false, 1)
npc:Remove()
end
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCustomScythes, 922)

function mod:EterepCustomScythesTakeDamage(npc, damage, flags, damageSource, cooldown)
if npc.Variant == 355 then
return false
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepCustomScythesTakeDamage, 922)

function mod:EterepCustomEntities(npc)
if npc.Variant == 3000 then
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.5
end
if npc.Parent ~= nil then
npc.Position = npc.Parent.Parent.Position + Vector.FromAngle((npc.Parent.Position-npc.Parent.Parent.Position):GetAngleDegrees()):Resized(npc.Parent.Position:Distance(npc.Parent.Parent.Position)*npc.Size*0.095994)
end
if npc.Parent ~= nil and (npc.Parent:IsDead() or npc.Parent.Parent:IsDead()) then
npc:Remove()
end
end
if npc.Variant == 3001 then
if npc.Parent == nil or npc.SpawnerEntity == nil or npc.FrameCount >= 830 or (npc.SpawnerEntity ~= nil and npc.SpawnerEntity.Mass == 33733) then
npc:Remove()
end
if npc.Parent ~= nil and  npc.SpawnerEntity ~= nil then
if npc.FrameCount <= 1 then
npc:GetSprite():Play("Real appear", true)
end
if npc:GetSprite():IsPlaying("Real appear") then
npc.Parent:AddVelocity((npc.SpawnerEntity.Position - npc.Parent.Position):Normalized()*(npc:GetSprite():GetFrame()*0.01872))
end
if npc:GetSprite():IsFinished("Real appear") then
npc:GetSprite():Play("Idle", true)
end
if npc:GetSprite():IsPlaying("Idle") then
npc.Parent:AddVelocity((npc.SpawnerEntity.Position - npc.Parent.Position):Normalized()*0.3)
Isaac.Spawn(1000, 88, 0, npc.Position+Vector(Eterepernalrng:RandomInt(61)-30,-30), Vector(0,-10), npc)
end
if npc.FrameCount >= 800 and npc:GetSprite():IsPlaying("Idle") then
npc:GetSprite():Play("Disappear", true)
end
if npc:GetSprite():IsPlaying("Disappear") then
npc.Parent:AddVelocity((npc.SpawnerEntity.Position - npc.Parent.Position):Normalized()*(0.25-(npc:GetSprite():GetFrame()*0.01872)))
end
if npc:GetSprite():IsFinished("Disappear") then
npc:Remove()
end
npc.Position = npc.Parent.Position+Vector(0,-20)
npc.Scale = 0.9
end
end
if npc.Variant >= 3002 and npc.Variant <= 3012 then
if npc.Variant >= 3002 and npc.Variant <= 3005 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.SMART
params.Variant = 982
params.HomingStrength = 0
if npc.Variant == 3002 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(158):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(180):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(202):Resized(9.5), 0, params)
end
if npc.Variant == 3003 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(338):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(0):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(22):Resized(9.5), 0, params)
end
if npc.Variant == 3004 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(248):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(270):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(292):Resized(9.5), 0, params)
end
if npc.Variant == 3005 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(68):Resized(9.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(90):Resized(10.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(112):Resized(9.5), 0, params)
end
end
if npc.Variant >= 3006 and npc.Variant <= 3009 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.1
params.BulletFlags = ProjectileFlags.SMART
params.HomingStrength = 0
params.Variant = 982
if npc.Variant == 3006 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(135):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(165):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(195):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(225):Resized(11.5), 0, params)
end
if npc.Variant == 3007 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(315):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(345):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(15):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(45):Resized(11.5), 0, params)
end
if npc.Variant == 3008 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(225):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(255):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(285):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(315):Resized(11.5), 0, params)
end
if npc.Variant == 3009 then
npc:FireProjectiles(npc.Position, Vector.FromAngle(45):Resized(11.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(75):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(105):Resized(11), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(135):Resized(11.5), 0, params)
end
end
if npc.Variant == 3010 then
local params = ProjectileParams()
params.HeightModifier = 10
params.FallingAccelModifier = -0.005
params.Variant = 981
for i = 1,4 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(90*i):Resized(10), 0, params)
end
end
if npc.Variant == 3011 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.02
params.Variant = 981
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+338):Resized(7.8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+382):Resized(7.8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+360):Resized(8.5), 0, params)
end
if npc.Variant == 3012 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.13
params.BulletFlags = ProjectileFlags.SMART
params.Variant = 980
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+342):Resized(7.8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+360):Resized(8.5), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+378):Resized(7.8), 0, params)
end
npc:Remove()
end
if npc.Variant == 4000 then
if npc.Parent ~= nil and npc.Parent.Size ~= 37 and npc.SpawnerType == 405 and npc.Parent ~= nil then
npc.Velocity = ((npc.Parent.Position+Vector(0,-10)+Vector(math.sin(math.rad(npc.FrameCount*-4+npc.SubType))*35,math.cos(math.rad(npc.FrameCount*-4+npc.SubType))*35))-npc.Position)
end
if npc.Parent ~= nil and npc.Parent.Size ~= 37 and npc.SpawnerType == 409 and npc.Parent ~= nil then
npc.Velocity = ((npc.Parent.Position+Vector(0,-10)+Vector(math.sin(math.rad(npc.FrameCount*-4+npc.SubType))*55,math.cos(math.rad(npc.FrameCount*-4+npc.SubType))*55))-npc.Position)
end
if (npc.Parent ~= nil and npc.Parent.Size == 37) or npc.Parent == nil then
if npc.V1.X == 0 and npc.Parent ~= nil then
npc.V1 = Vector((npc.Parent.Position - npc.Position):GetAngleDegrees(),0)
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.Parent = nil
end
npc.Velocity = Vector.FromAngle(npc.V1.X+180):Resized(11)
end
local smoke = Isaac.Spawn(1000, 88, 0, npc.Position, Vector(0,0), npc)
smoke.Color = Color(2,0,2,1,0,0,0)
if npc.FrameCount <= 1 then
npc.Scale = 0
npc.Color = Color(2,0,2,1,0,0,0)
npc:GetSprite():Play("Idle", true)
end
if npc.SpawnerEntity == nil then
npc:Remove()
end
if npc.FrameCount >= 2 and npc.Scale ~= 1 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
if npc.FrameCount <= 24 then
npc.State = 34
npc.StateFrame = 55
npc:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
end
if npc:IsDead() and npc.SpawnerType == 405 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(2,0,2,1,0,0,0)
params.Color = projectilenewcolor
local angle = Eterepernalrng:RandomInt(60)
for i = 1,6 do
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(EterepCustomAngle+60*i+angle):Resized(8), 0, params)
end
npc:Remove()
npc:PlaySound(30, 1, 0, false, 1)
end
if npc.Parent == nil and npc:CollidesWithGrid() and npc.SpawnerType == 409 then
local params = ProjectileParams()
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(2,0,2,1,0,0,0)
params.Color = projectilenewcolor
local angle = Eterepernalrng:RandomInt(60)
for i = 1,6 do
npc:FireProjectiles(npc.Position+Vector(0,10), Vector.FromAngle(EterepCustomAngle+60*i+angle):Resized(8), 0, params)
end
npc:Remove()
npc:PlaySound(30, 1, 0, false, 1)
end
end
if npc.Variant == 8899 and npc.Parent ~= nil then
if npc.SpawnerType == 67 then
npc.Velocity = ((npc.Parent.Position+Vector(math.sin(math.rad(npc.FrameCount*4+npc.Mass))*55,math.cos(math.rad(npc.FrameCount*4+npc.Mass))*55))-npc.Position)
end
if (npc.SpawnerType == 831 and npc.Mass == 180) or npc.SpawnerType == 873 then
npc.Velocity = ((npc.Parent.Position+Vector(math.sin(math.rad(npc.FrameCount*-4+npc.Mass))*40,math.cos(math.rad(npc.FrameCount*-4+npc.Mass))*40))-npc.Position)
end
if npc.SpawnerType == 831 and npc.Mass == 360 then
npc.Velocity = ((npc.Parent.Position+Vector(math.sin(math.rad(180+npc.FrameCount*4+npc.Mass))*60,math.cos(math.rad(180+npc.FrameCount*4+npc.Mass))*60))-npc.Position)
end
if npc.FrameCount <= 1 then
npc.Scale = 0
end
if npc.FrameCount >= 2 and npc.Scale ~= 1 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 1
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
if npc.FrameCount <= 31 and (npc.Parent.Type == 67 or npc.Parent.Type == 873) then
npc:GetSprite():PlayOverlay("Fly", false)
end
if npc.FrameCount <= 1 and npc.Parent.Type == 831 then
npc:GetSprite():Load("gfx/e_gutted fatty eye.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():PlayOverlay("Walk", false)
end
end
if npc.Variant == 8899 and npc.Parent == nil and npc.SpawnerType == 831 then
npc:Remove()
end
if npc.Variant == 8899 and npc.Parent == nil and npc.SpawnerType ~= 831 then
npc:Morph(18, 0, 83, -1)
npc.HitPoints = npc.MaxHitPoints
npc.Mass = 7
end
if npc.Variant == 8900 then
if npc.Parent == nil then
npc:Remove()
end
if npc.Parent ~= nil then
npc.Position = npc.Parent.Position + Vector(0,-60)
if npc.FrameCount <= 1 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if npc.Scale ~= 0 and npc.Size == 12 then
npc.Scale = 0
end
if npc.Scale ~= 0.75 and npc.Size == 13 and not npc:HasEntityFlags(1<<24) then
npc.Scale = 0.75
end
if npc.Mass == 500 and not npc:GetSprite():IsPlaying("Item1") then
npc:GetSprite():Play("Item1",true)
end
if npc.Mass == 501 and not npc:GetSprite():IsPlaying("Item2") then
npc:GetSprite():Play("Item2",true)
end
if npc.Mass == 502 and not npc:GetSprite():IsPlaying("Item3") then
npc:GetSprite():Play("Item3",true)
end
if npc.Parent ~= nil and (npc.Parent:GetSprite():IsPlaying("Blast") or npc.Parent:GetSprite():IsPlaying("JumpBlast") or npc.Parent:GetSprite():IsPlaying("SuperBlast")) and npc.Parent:GetSprite():IsEventTriggered("Shoot") then
if npc.Mass == 500 then
for i = 1,12 do
npc:FireProjectiles(npc.Parent.Position, Vector.FromAngle(30*i):Resized(9.25), 0, ProjectileParams())
end
end
if npc.Mass == 501 then
for i = 1,4 do
local creep = Isaac.Spawn(1000, 22, 0, npc.Parent.Position+Vector(Eterepernalrng:RandomInt(81)-40,Eterepernalrng:RandomInt(81)-40), Vector(0,0), npc)
creep:GetSprite().Scale = Vector(3,3)
end
end
if npc.Mass == 502 then
for i = 1,4 do
local brimstone = EntityLaser.ShootAngle(1, npc.Position+Vector(0,-31), 90*i, 15, Vector(0,-1), npc)
brimstone.Parent = npc.Parent
end
end
if npc.Parent ~= nil and npc.Parent:GetSprite():IsPlaying("SuperBlast") and npc.Parent:GetSprite():IsEventTriggered("Shoot") then
npc.Size = 12
end
npc.Mass = Eterepernalrng:RandomInt(3)+500
end
if npc.Parent ~= nil and npc.Parent:GetSprite():IsPlaying("SuperBlastLand") and npc.Parent:GetSprite():IsEventTriggered("Sound") then
npc.Size = 13
end
end
end
if npc.Variant == 8901 then
if npc.Parent ~= nil then
npc.Velocity = npc.Parent.Velocity
if npc.Parent.Position:Distance(npc.Position) >= 25 then
npc.Position = npc.Parent.Position
end
if ((npc.FrameCount % 50 == 48 and npc.Parent:HasEntityFlags(1<<7)) or (npc.FrameCount % 25 == 24 and not npc.Parent:HasEntityFlags(1<<7))) and (npc.Parent:GetSprite():IsPlaying("RageUp") or npc.Parent:GetSprite():IsPlaying("RageDown")) and not npc.Parent:HasEntityFlags(1<<9) and not npc.Parent:HasEntityFlags(1<<11) and not npc.Parent:HasEntityFlags(1<<24) then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc.Velocity):GetAngleDegrees()+130+10*i):Resized(9), 0, params)
end
end
end
if npc.Parent == nil then
npc:Remove()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepCustomEntities, 927)

function mod:EterepDogmaBoss(npc)
if npc.Variant == 0 and npc.SubType == 88 then
if Eterepdogma == false then
Eterepdogma = true
end
if npc.State == 9 and npc.StateFrame == 2 and npc:GetSprite():IsEventTriggered("Shoot") and npc.Mass == 51 then
npc.StateFrame = 0
npc.Mass = 52
end
if npc.State == 9 and npc.StateFrame == 2 and npc:GetSprite():IsEventTriggered("Shoot") and npc.Mass == 50 then
npc.StateFrame = 0
npc.Mass = 51
end
if npc.State == 11 and npc.StateFrame == 2 and npc:GetSprite():IsEventTriggered("Shoot") and npc.Mass == 51 then
npc.StateFrame = 0
npc.Mass = 52
end
if npc.State == 11 and npc.StateFrame == 2 and npc:GetSprite():IsEventTriggered("Shoot") and npc.Mass == 50 then
npc.StateFrame = 0
npc.Mass = 51
end
if npc.State ~= 9 and npc.State ~= 10 and npc.State ~= 11 and npc.Mass ~= 50 then
npc.Mass = 50
end
if npc.State ~= 10 and Eterepdogmaattack ~= 0 then
Eterepdogmaattack = 0
end
if npc.State == 10 and Eterepdogmaattack == 0 then
Eterepdogmaattack = Eterepernalrng:RandomInt(2)+1
npc.Mass = 53
end
if ((npc.StateFrame % 6 == 2 and npc:HasEntityFlags(1<<7)) or (npc.StateFrame % 3 == 1 and not npc:HasEntityFlags(1<<7))) and npc.State == 10 and npc.Mass ~= 54 then
local params = ProjectileParams()
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.Variant = 4
params.FallingAccelModifier = -0.12
if Eterepdogmaattack == 1 then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.StateFrame*0.9+36*i):Resized(3+(npc.StateFrame*0.75)), 0, params)
end
end
if Eterepdogmaattack == 2 then
for i = 1,10 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(-npc.StateFrame*0.9+36*i):Resized(3+(npc.StateFrame*0.75)), 0, params)
end
end
npc.Mass = 54
end
if ((npc.StateFrame % 6 == 4 and npc:HasEntityFlags(1<<7)) or (npc.StateFrame % 3 == 2 and not npc:HasEntityFlags(1<<7))) and npc.State == 10 and npc.Mass ~= 53 then
npc.Mass = 53
end
if npc.State == 13 and npc:GetSprite():IsEventTriggered("Shoot") then
Eterepdogmascreamed = 1
end
if (npc.State == 13 and npc:GetSprite():IsEventTriggered("Splat")) or npc:IsDead() then
Eterepdogmascreamed = 0
end
if npc.State == 3 and npc.Size ~= 26 then
npc.Size = 26
end
end
if npc.Variant == 1 and npc.SubType <= 2 and npc.MaxHitPoints <= 1200 and npc.MaxHitPoints ~= 1500 and Eterepdogma == true then
npc.MaxHitPoints = 1500
npc.HitPoints = 1500
end
if npc.Variant == 2 and npc.SubType <= 2 and Eterepdogma == true then
npc:GetSprite():Load("gfx/e_dogma angel.anm2",true)
npc:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_dogma angel.png")
npc:GetSprite():ReplaceSpritesheet(1, "gfx/Sprites/e_dogma angel.png")
npc:GetSprite():ReplaceSpritesheet(2, "gfx/Sprites/e_dogma angel.png")
npc:GetSprite():ReplaceSpritesheet(3, "gfx/Sprites/e_dogma angel.png")
npc:GetSprite():ReplaceSpritesheet(4, "gfx/Sprites/e_dogma angel.png")
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Appear",true)
npc.SubType = 88
npc.MaxHitPoints = 1500
npc.HitPoints = 1500
npc.StateFrame = 0
npc.Scale = 1.15
Eterepdogma = false
end
if npc.Variant == 2 and npc.SubType == 88 then
if npc.State == 9 and npc.Size ~= 44 then
npc.Size = 44
end
if npc.State ~= 9 and npc.Size ~= 43 then
npc.Size = 43
end
if npc.State == 10 and npc.Mass ~= 124 then
npc.Mass = 124
end
if npc.State ~= 10 and npc.Mass ~= 123 then
npc.Mass = 123
end
if npc.State == 8 and npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.18
params.Variant = 13
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(101)-50):Resized((Eterepernalrng:RandomInt(31)+80)*0.1), 0, params)
end
end
if npc.State == 8 and npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc.State == 8 and npc:GetPlayerTarget().Position.X > npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc:IsDead() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
Eterepdogmaangeldied = true
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepDogmaBoss, 950)

function mod:EterepUltraHorsemen(npc)
if npc.Variant == 0 and npc.SubType == 84 then
local beastangle = Eterepernalrng:RandomInt(31)-15
if npc.State == 4 and npc.StateFrame >= 60 and npc.I2 == 2 and npc.StateFrame % 6 == 2 and npc.Size ~= 167 and not npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 2
params.FallingAccelModifier = -0.2
npc:FireProjectiles(npc.Position+Vector(-60,30), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(101)-50):Resized(12), 0, params)
npc.Size = 167
end
if npc.State == 4 and npc.StateFrame >= 60 and npc.I2 == 2 and npc.StateFrame % 6 == 2 and npc.Size ~= 167 and npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 2
params.FallingAccelModifier = -0.2
npc:FireProjectiles(npc.Position+Vector(60,30), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(101)-50):Resized(12), 0, params)
npc.Size = 167
end
if npc.State == 4 and npc.StateFrame >= 60 and npc.I2 == 2 and npc.StateFrame % 6 == 3 and npc.Size ~= 166 then
npc.Size = 166
end
if npc.State == 4 and npc.StateFrame >= 60 and npc.StateFrame <= 350 and npc.I2 == 0 and npc.HitPoints < npc.MaxHitPoints * 0.825 then
npc.StateFrame = 351
end
if npc.State == 8 and (npc.StateFrame == 119 or npc.StateFrame == 149 or npc.StateFrame == 179 or npc.StateFrame == 209 or npc.StateFrame == 239) and npc.HitPoints < npc.MaxHitPoints * 0.675 and (npc.Mass <= 1007 or npc.Mass == 1009) then
npc.Mass = 1010
npc.StateFrame = 240+30*(Eterepernalrng:RandomInt(4))
end
if npc.State == 8 and npc.StateFrame == 179 and npc.HitPoints >= npc.MaxHitPoints * 0.675 and (npc.Mass <= 1007 or npc.Mass == 1009) then
npc.Mass = 1010
npc.StateFrame = 30*(Eterepernalrng:RandomInt(9)+2)
end
if npc.State == 8 and npc.StateFrame == 355 and npc.Mass == 1010 then
npc.Mass = 1009
end
if npc.State == 10 and npc.StateFrame >= 1000 and npc.StateFrame <= 1030 and npc.Size ~= 167 and npc.StateFrame % 5 == 2 and not npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(20,8,0,1,0,0,0)
params.Scale = 2
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(-60,30), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15*i+290+beastangle):Resized(12), 0, params)
end
npc.Size = 167
end
if npc.State == 10 and npc.StateFrame >= 1000 and npc.StateFrame <= 1030 and npc.Size ~= 167 and npc.StateFrame % 5 == 2 and npc:GetSprite().FlipX then
local params = ProjectileParams()
params.Variant = 4
params.Color = Color(20,8,0,1,0,0,0)
params.Scale = 2
for i = 1,7 do
npc:FireProjectiles(npc.Position+Vector(60,30), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+15*i+290+beastangle):Resized(12), 0, params)
end
npc.Size = 167
end
if npc.State == 10 and npc.StateFrame >= 1000 and npc.StateFrame <= 1030 and npc.Size ~= 166 and npc.StateFrame % 5 == 3 then
npc.Size = 166
end
if npc:GetSprite():IsFinished("DoubleShot") then
npc.Mass = 1009
end
if npc.Mass == 1009 and npc.I2 < 1 then
npc.I2 = 1
end
if npc.State == 3 and npc.StateFrame == 40 and npc.Mass == 1009 then
local thebeastchooseattack = Eterepernalrng:RandomInt(5)+1
if thebeastchooseattack == 1 and Eterepbeastdived >= 1 then
npc.State = 10
npc.I1 = 0
npc:GetSprite():Play("DoubleShot",true)
end
if thebeastchooseattack == 1 and Eterepbeastdived <= 1 then
npc.State = 6
npc.I1 = 0
npc:GetSprite():Play("Dive",true)
Eterepbeastdived = Eterepbeastdived + 1
end
if thebeastchooseattack == 2 then
npc.State = 8
npc.I1 = 2
npc:GetSprite():Play("SuckStart",true)
end
if thebeastchooseattack == 3 then
npc.State = 10
npc.I1 = 2
npc.Mass = 1015
npc:GetSprite():Play("DoubleShot",true)
end
if thebeastchooseattack == 4 then
npc.State = 11
npc.I1 = 2
npc:GetSprite():Play("MoveStart",true)
npc:PlaySound(713, 1, 0, false, 1)
end
if thebeastchooseattack == 5 then
npc.State = 13
npc.I1 = 0
npc:GetSprite():Play("SoulCall",true)
end
npc.StateFrame = 0
end
end
if npc.Variant == 3 and npc.SpawnerType == 251 then
npc.Velocity = npc.Velocity * 0.95
end
if npc.Variant == 3 and npc.FrameCount % 2 == 1 and npc.SpawnerType == 251 then
npc.StateFrame = npc.StateFrame + 1
end
if npc.Variant == 10 and npc.SubType == 83 then
if npc.State == 3 and npc.StateFrame == 10 then
npc.StateFrame = 70
end
if npc:GetSprite():IsPlaying("Reverse") and npc:GetSprite():GetFrame() == 1 and npc.Mass ~= 500 then
npc.Mass = 500
end
if npc:GetSprite():IsPlaying("Reverse") and npc:GetSprite():IsEventTriggered("Shoot") and npc.Mass ~= 501 then
local ultrafamineattack = Eterepernalrng:RandomInt(31)-15
local params = ProjectileParams()
params.Variant = 4
params.DepthOffset = 30
for i = 1,6 do
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()-50+ultrafamineattack):Resized(0.5+2*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()-30+ultrafamineattack):Resized(0.5+2*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()-10+ultrafamineattack):Resized(0.5+2*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+10+ultrafamineattack):Resized(0.5+2*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+30+ultrafamineattack):Resized(0.5+2*i), 0, params)
npc:FireProjectiles(npc.Position+Vector(0,-20), Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+50+ultrafamineattack):Resized(0.5+2*i), 0, params)
end
npc.Mass = 501
end
if npc:GetSprite():IsPlaying("HeadLoop") and npc.StateFrame % 64 == 60 and npc.Mass ~= 501 then
local params = ProjectileParams()
params.Variant = 4
params.BulletFlags = ProjectileFlags.CURVE_LEFT
for i = 1,6 do
params.CurvingStrength = -0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)-72):Resized(6+1*i), 0, params)
params.CurvingStrength = 0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)-48):Resized(6+1*i), 0, params)
params.CurvingStrength = -0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)-24):Resized(6+1*i), 0, params)
params.CurvingStrength = 0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)+12):Resized(6+1*i), 0, params)
params.CurvingStrength = -0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)+36):Resized(6+1*i), 0, params)
params.CurvingStrength = 0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)+60):Resized(6+1*i), 0, params)
end
npc.Mass = 501
end
if npc:GetSprite():IsPlaying("HeadLoop") and npc.StateFrame % 64 == 28 and npc.Mass ~= 501 then
local params = ProjectileParams()
params.Variant = 4
params.BulletFlags = ProjectileFlags.CURVE_LEFT
for i = 1,6 do
params.CurvingStrength = -0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)-36):Resized(6+1*i), 0, params)
params.CurvingStrength = 0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)-12):Resized(6+1*i), 0, params)
params.CurvingStrength = -0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)+12):Resized(6+1*i), 0, params)
params.CurvingStrength = 0.0025
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(13)+36):Resized(6+1*i), 0, params)
end
npc.Mass = 501
end
if npc:GetSprite():IsPlaying("HeadLoop") and npc.StateFrame == 27 and npc.Mass ~= 500 then
npc.Mass = 500
end
if npc:GetSprite():IsPlaying("HeadLoop") and (npc.StateFrame % 64 == 29 or npc.StateFrame % 64 == 61) and npc.Mass ~= 500 then
npc.Mass = 500
end
if npc:GetSprite():IsPlaying("HeadLoop") and ((npc.FrameCount % 12 == 2 and npc:HasEntityFlags(1<<7)) or (npc.FrameCount % 6 == 1 and not npc:HasEntityFlags(1<<7))) and npc.Size ~= 71 then
local params = ProjectileParams()
params.Variant = 4
npc:FireProjectiles(npc.Position, Vector.FromAngle(npc.FrameCount*7):Resized(8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(30+npc.FrameCount*7):Resized(8), 0, params)
npc:FireProjectiles(npc.Position, Vector.FromAngle(60+npc.FrameCount*7):Resized(8), 0, params)
npc.Size = 71
end
if npc:GetSprite():IsPlaying("HeadLoop") and npc.FrameCount % 6 == 2 and npc.Size ~= 70 then
npc.Size = 70
end
end
if npc.Variant == 20 and npc.SubType == 83 then
if npc.State == 3 and npc.StateFrame == 85 and npc.I1 == 1 then
npc.State = 9
npc:GetSprite():Play("MaggotAttack",true)
npc.I1 = 0
end
if npc.State == 3 and npc.StateFrame == 89 and npc.I1 == 0 then
npc.I1 = 1
end
if npc.HitPoints < npc.MaxHitPoints * 0.4 and npc.Mass ~= 501 then
local ultrahead = Isaac.Spawn(83, 0, 83, npc.Position+Vector(0,-30), Vector(0,0), npc)
ultrahead.Parent = npc
ultrahead:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.Mass = 501
end
if npc:GetSprite():IsPlaying("Death") and npc.Parent ~= nil then
npc:Kill()
end
end
if npc.Variant == 30 and npc.SubType == 83 then
if npc.State == 3 and npc.StateFrame == 10 then
npc.StateFrame = 40
npc.I1 = Eterepernalrng:RandomInt(3)+1
end
if npc.State == 6 and npc.StateFrame == 9 then
npc.I1 = Eterepernalrng:RandomInt(3)
end
if npc.State == 6 and npc.StateFrame >= 10 and npc.I1 <= 1 and npc:GetPlayerTarget().Position.Y >= npc.Position.Y + 30 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 250 then
npc.State = 7
npc.StateFrame = 0
npc:GetSprite():Play("LungeShort",true)
end
if npc.State == 6 and npc.StateFrame >= 10 and npc.I1 == 2 and npc:GetPlayerTarget().Position.Y >= npc.Position.Y + 30 and npc:GetPlayerTarget().Position:Distance(npc.Position) <= 250 then
npc.State = 10
npc.StateFrame = 0
npc:GetSprite():Play("LungeBomb",true)
end
if npc:GetSprite():IsPlaying("LungeBomb") and npc:GetSprite():IsEventTriggered("NewShoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.12
params.CurvingStrength = 0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
params.CurvingStrength = -0.02
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
end
end
if npc.Variant == 31 and #Isaac.FindByType(951, 30, 83, false, true) >= 1 then
if npc.StateFrame == 0 and npc.FrameCount >= 5 then
local params = ProjectileParams()
params.FallingAccelModifier = -0.12
params.CurvingStrength = 0.02
params.BulletFlags = ProjectileFlags.NO_WALL_COLLIDE
params.Variant = 4
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
params.CurvingStrength = -0.02
for i = 1,12 do
npc:FireProjectiles(npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(7), 0, params)
end
end
end
if npc.Variant == 40 and npc.SubType == 83 then
if npc.State == 16 and npc.StateFrame == 29 then
local ultradeathangleattack = Eterepernalrng:RandomInt(2)+1
if ultradeathangleattack == 1 then
npc.Position = npc:GetPlayerTarget().Position + Vector(280,0)
npc:GetSprite().FlipX = false
end
if ultradeathangleattack == 2 then
npc.Position = npc:GetPlayerTarget().Position + Vector(-280,0)
npc:GetSprite().FlipX = true
end
end
if npc.State == 3 and npc.StateFrame == 5 then
npc.StateFrame = 25
end
if npc.State == 3 and npc.StateFrame == 58 and npc.HitPoints > npc.MaxHitPoints * 0.6 then
npc.I1 = 0
end
if npc.State == 3 and npc.StateFrame == 58 and npc.HitPoints <= npc.MaxHitPoints * 0.6 then
npc.I1 = 3
end
if npc.State == 9 and npc.Mass ~= 502 then
npc.Mass = 502
end
if npc.State == 10 and npc.Mass ~= 503 then
npc.Mass = 503
end
if npc.State ~= 9 and npc.State ~= 10 and npc.Mass ~= 500 then
npc.Mass = 500
end
if npc.State == 16 and npc.StateFrame == 1 then
npc.I1 = 0
end
if npc.State == 16 and npc.StateFrame == 1 then
npc:SetColor(Color(1,1,1,0,0,0,0),62,4,false,false)
end
if npc.State == 8 and npc.StateFrame == 3 and npc.Size ~= 71 and npc:GetSprite().FlipX then
for i = 1,10 do
local scythe = Isaac.Spawn(922, 356, 0, Vector(npc.Position.X+Eterepernalrng:RandomInt(201)-200,i*34+Eterepernalrng:RandomInt(31)+66), Vector(0,0), npc)
scythe.Mass = 500 + Eterepernalrng:RandomInt(45)
scythe:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
scythe.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
npc.Size = 71
end
if npc.State == 8 and npc.StateFrame == 3 and npc.Size ~= 71 and not npc:GetSprite().FlipX then
for i = 1,10 do
local scythe = Isaac.Spawn(922, 356, 0, Vector(npc.Position.X+Eterepernalrng:RandomInt(201),i*34+Eterepernalrng:RandomInt(31)+66), Vector(0,0), npc)
scythe.Mass = 800 + Eterepernalrng:RandomInt(45)
scythe:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
scythe.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
npc.Size = 71
end
if npc.State == 8 and npc.StateFrame == 4 and npc.Size ~= 70 then
npc.Size = 70
end
if npc:GetSprite():IsPlaying("Swing") and npc.StateFrame == 68 then
for i = 1,12 do
local scythe = Isaac.Spawn(922, 355, 0, npc.Position, Vector.FromAngle(EterepCustomAngle+30*i):Resized(11), npc)
scythe:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
scythe.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
scythe:AddEntityFlags(EntityFlag.FLAG_NO_KNOCKBACK)
scythe:AddEntityFlags(EntityFlag.FLAG_NO_PHYSICS_KNOCKBACK)
scythe.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
npc.StateFrame = 69
end
end
if npc.Variant == 41 and npc.FrameCount <= 1 and #Isaac.FindByType(951, 40, 83, false, true) >= 1 then
npc:GetSprite():Load("gfx/e_ultra death scythe.anm2",true)
npc:GetSprite():LoadGraphics()
npc:GetSprite():Play("Spin",false)
npc.Scale = 0.4
end
if npc.Variant == 41 and npc.FrameCount >= 30 and npc.FrameCount <= 75 and #Isaac.FindByType(951, 40, 83, false, true) >= 1 then
npc.Scale = npc.FrameCount * 0.0133
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepUltraHorsemen, 951)

function mod:EterepUltraHorsemenTakeDamage(npc, damage, damageFlag, damageSource, DamageCountdownFrames)
if npc.Variant == 40 and npc.SubType == 83 and npc.Mass == 502 then
npc.HitPoints = npc.HitPoints + damage * 0.1
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepUltraHorsemenTakeDamage, 951)

function mod:EterepHollowOneSegment(npc)
if npc.Variant == 89 and npc.SubType == 0 then
if npc:GetPlayerTarget().Position.X <= npc.Position.X then
npc:GetSprite().FlipX = false
end
if npc:GetPlayerTarget().Position.X >= npc.Position.X then
npc:GetSprite().FlipX = true
end
if npc.State == 3 then
EterepEnemyChasePlayer(0.45, npc, 0.86, 75)
if npc:GetPlayerTarget().Position:Distance(npc.Position) < 200 then
npc.StateFrame = npc.StateFrame + 1
end
end
if npc.State == 8 then
npc.Velocity = npc.Velocity * 0.7
end
if npc.FrameCount <= 3 then
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.Size = 19
npc.State = 3
npc.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
npc.StateFrame = Eterepernalrng:RandomInt(61)
end
if not npc:HasEntityFlags(1<<24) then
npc.Scale = 1.15
end
if npc.StateFrame >= 63 and npc.State == 3 then
npc:GetSprite():Play("GutsAttack",true)
npc.State = 8
npc.StateFrame = 500
end
if npc.StateFrame < 63 and npc:GetSprite():IsFinished("GutsIdle") then
npc:GetSprite():Play("GutsIdle",true)
end
if npc:GetSprite():IsFinished("GutsAttack") then
npc:GetSprite():Play("GutsIdle",true)
npc.State = 3
npc.StateFrame = Eterepernalrng:RandomInt(61)
end
if npc:GetSprite():IsEventTriggered("Shoot") then
local params = ProjectileParams()
params.FallingAccelModifier = -0.03
for i = 1,9 do
npc:FireProjectiles(npc.Position, Vector.FromAngle((npc:GetPlayerTarget().Position - npc.Position):GetAngleDegrees()+5*i+335):Resized(8.5), 0, params)
end
npc:PlaySound(318, 1, 0, false, 1)
end
end
if npc.Variant == 90 and npc.SpawnerType == 61 then
npc.Velocity = Vector(0,0)
if npc.FrameCount <= 1 and npc.Mass ~= 777 then
npc.Mass = 777
local brimangle = Eterepernalrng:RandomInt(30)
npc.I1 = brimangle
npc:GetSprite():Play("Idle",true)
for i = 1,12 do
local pointing = Isaac.Spawn(979, 91, 0, npc.Position, Vector(0,0), npc)
pointing.SpriteRotation = brimangle+30*i
pointing.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
end
end
if npc:GetSprite():IsEventTriggered("Shoot") then
for i = 1,12 do
EntityLaser.ShootAngle(1, npc.Position, 30*i+npc.I1, 20, Vector(0,0), npc)
end
end
if npc:GetSprite():IsFinished("Idle") then
npc:Remove()
end
end
if npc.Variant == 90 and npc.SpawnerType == 274 then
npc.Velocity = Vector(0,0)
if npc.FrameCount <= 1 then
npc:GetSprite():Play("IdleQuick",true)
end
if npc.FrameCount == 19 and npc.Mass ~= 720 then
npc.Velocity = Vector(0,0)
npc.Mass = 810
local pointing = Isaac.Spawn(979, 91, 0, npc.Position, Vector(0,0), npc)
pointing.GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_NONE
pointing.SpriteRotation = 90
pointing.Parent = npc
end
if npc:GetSprite():IsEventTriggered("Shoot") then
EntityLaser.ShootAngle(1, npc.Position, npc.Mass, 17, Vector(0,0), npc)
end
if npc:GetSprite():IsFinished("IdleQuick") then
npc:Remove()
end
end
if npc.Variant == 91 then
npc.Velocity = Vector(0,0)
if npc.FrameCount <= 1 then
npc.TargetPosition = npc.Position
npc:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
npc.EntityCollisionClass = EntityCollisionClass.ENTCOLL_NONE
npc:AddEntityFlags(EntityFlag.FLAG_NO_STATUS_EFFECTS)
npc:GetSprite():Play("Spot",true)
end
if npc.Parent ~= nil then
npc.Position = npc.SpawnerEntity.Position
end
if npc.Parent == nil then
npc.Position = npc.TargetPosition
end
if npc:GetSprite():IsFinished("Spot") then
npc:Remove()
end
end
end
mod:AddCallback(ModCallbacks.MC_NPC_UPDATE, mod.EterepHollowOneSegment, 979)

function mod:EterepArmoredBossesTakeDamage(npc, damage, flags, damageSource, cooldown)
if EterepReducedArmor == 1 then
if npc.Type == 274 and npc.Variant == 0 then
npc.HitPoints = npc.HitPoints - damage * 0.15
end
if npc.Type == 275 and npc.Variant == 0 then
npc.HitPoints = npc.HitPoints - damage * 0.15
end
if npc.Type == 406 and npc.Variant <= 1 then
npc.HitPoints = npc.HitPoints - damage * 0.135
end
if npc.Type == 407 and npc.Variant == 0 then
npc.HitPoints = npc.HitPoints - damage * 0.2
end
if npc.Type == 912 and npc.Variant == 0 then
npc.HitPoints = npc.HitPoints - damage * 0.15
end
if npc.Type == 912 and npc.Variant == 10 then
npc.HitPoints = npc.HitPoints - damage * 0.15
end
end
end
mod:AddCallback(ModCallbacks.MC_ENTITY_TAKE_DMG, mod.EterepArmoredBossesTakeDamage)

function mod:EterepSpawnReplacements(type, variant, subtype, position, velocity, spawner, seed, size)
if EterepStarterValue == 1 then
if Game():GetRoom():GetFrameCount() <= 10 and Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalarenacanappear == 1 then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if grid:GetType() ~= 15 and grid:GetType() ~= 16 then
Game():GetRoom():RemoveGridEntity(i, 0, true)
end
end
end
end
if EterepLessPickupDrops >= 1 and type == 5 and variant ~= 100 and (Eterepickupsdisappear >= 1 or Eterepoptions2pickups >= 1) then
Eterepickupsdisappear = Eterepickupsdisappear - 1
return {15, 0, 170, seed}
end
if EterepDelirium == 0 and Game():GetRoom():GetType() ~= RoomType.ROOM_CHALLENGE then
if type == 19 and variant == 0 and subtype <= 3 and Etereplacementernal == true then
return {19, 0, 89, seed}
end
if type == 19 and variant == 1 and subtype <= 3 and (Etereplacementernal == true or #Isaac.FindByType(274, 0, 84, false, true) >= 1) then
return {19, 1, 83, seed}
end
if type == 19 and (variant == 2 or variant == 3) and subtype <= 3 and Etereplacementernal == true then
return {19, variant, 89, seed}
end
if type == 20 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {20, 0, 88, seed}
end
if type == 28 and variant <= 2 and subtype <= 2 and Etereplacementernal == true then
return {28, variant, 89, seed}
end
if type == 36 and variant == 0 and subtype <= 1 and Etereplacementernal == true then
return {36, 0, 83, seed}
end
if type == 38 and variant == 2 and subtype == 0 and (not spawner and Eterepernalrng:RandomInt(100)+1 <= EtereplaceChanceSin) then
return {38, 2, 90, seed}
end
if type == 43 and variant <= 1 and subtype <= 1 and Etereplacementernal == true then
return {43, variant, 88, seed}
end
if type == 45 and variant == 10 and EterepFinalacementernal == true and not (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) then
return {45, 10, 83, seed}
end
if type == 45 and variant == 0 and EterepFinalacementernal == true and (subtype == 0 or subtype == 3) and not (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) then
return {45, 0, 83, seed}
end
if type >= 46 and type <= 52 and variant <= 2 and subtype == 0 and ((#Isaac.FindByType(274, 0, 84, false, true) >= 1) or (not spawner and Eterepernalrng:RandomInt(100)+1 <= EtereplaceChanceSin)) then
if variant == 0 then
if Game():GetRoom():GetType() ~= RoomType.ROOM_DEFAULT then
return {type, variant, 90, seed}
end
if Game():GetRoom():GetType() == RoomType.ROOM_DEFAULT and variant == 0 then
local eternalsinchance = Eterepernalrng:RandomInt(5)+1
if eternalsinchance == 1 then
return {type, variant+1, 90, seed}
end
if eternalsinchance > 1 then
return {type, variant, 90, seed}
end
end
end
if variant >= 1 then
return {type, variant, 90, seed}
end
end
if type == 62 and variant <= 2 and subtype <= 1 and Etereplacementernal == true then
return {62, variant, 88, seed}
end
if type >= 63 and type <= 66 and variant == 0 and subtype <= 1 and (Etereplacementernal == true or #Isaac.FindByType(274, 0, 84, false, true) >= 1) then
return {type, variant, 88, seed}
end
if type == 65 and variant == 1 and subtype <= 1 and Etereplacementernal == true and not spawner then
return {65, 1, 88, seed}
end
if type == 67 and variant <= 1 and subtype <= 2 and Etereplacementernal == true then
return {67, variant, 89, seed}
end
if type == 68 and variant <= 1 and subtype <= 2 and Etereplacementernal == true then
return {68, variant, 88, seed}
end
if type == 69 and variant <= 1 and subtype == 0 and Etereplacementernal == true then
return {69, variant, 88, seed}
end
if type == 71 and variant <= 1 and subtype == 0 and Etereplacementernal == true and not spawner then
return {71, variant, 88, seed}
end
if type == 72 and variant <= 1 and subtype == 0 and Etereplacementernal == true and not spawner then
return {72, variant, 83, seed}
end
if type == 73 and variant <= 1 and subtype == 0 and Etereplacementernal == true and not spawner then
return {73, variant, 83, seed}
end
if type == 74 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {74, 0, 90, seed}
end
if type == 75 and variant == 0 and subtype == 0 and Etereplacementernal == true and not spawner then
return {75, 0, 89, seed}
end
if type == 76 and variant == 0 and subtype == 0 and Etereplacementernal == true and not spawner then
return {76, 0, 83, seed}
end
if type == 78 and variant == 1 and subtype == 0 and EterepFinalacementernal == true then
return {78, 1, 84, seed}
end
if type == 78 and variant == 10 and subtype == 0 and EterepFinalacementernal == true then
return {78, 10, 83, seed}
end
if type == 79 and variant <= 2 and subtype <= 2 and Etereplacementernal == true then
return {79, variant, 88, seed}
end
if type == 81 and variant == 0 and subtype == 0 and Etereplacementernal == true and not spawner then
return {81, 0, 88, seed}
end
if type == 81 and variant == 1 and subtype == 0 and (not spawner and Eterepernalrng:RandomInt(100)+1 <= EtereplaceChanceSin) then
return {81, 1, 88, seed}
end
if type == 82 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {82, 0, 88, seed}
end
if type == 83 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {83, 0, 88, seed}
end
if type == 84 and variant == 0 and subtype == 0 and EterepFinalacementernal == true then
return {84, 0, 88, seed}
end
if type == 97 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {97, 0, 88, seed}
end
if type == 98 and variant == 0 and subtype <= 1 and Etereplacementernal == true then
return {98, 0, 88, seed}
end
if type == 99 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {99, 0, 90, seed}
end
if type == 100 and variant <= 1 and subtype <= 2 and Etereplacementernal == true then
return {100, variant, 88, seed}
end
if type == 101 and variant <= 1 and subtype == 0 and Etereplacementernal == true and not spawner then
return {101, variant, 88, seed}
end
if type == 102 and variant <= 2 and subtype == 0 and EterepFinalacementernal == true then
return {102, variant, 88, seed}
end
if type == 237 and variant == 1 and subtype <= 2 and Etereplacementernal == true then
return {237, 1, 88, seed}
end
if type == 237 and variant == 2 and subtype == 0 and Etereplacementernal == true then
return {237, 2, 88, seed}
end
if type == 260 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {260, 0, 88, seed}
end
if type == 261 and variant <= 1 and subtype <= 2 and Etereplacementernal == true then
return {261, variant, 89, seed}
end
if type >= 262 and type <= 268 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {type, 0, 88, seed}
end
if type == 269 and variant <= 1 and subtype <= 2 and Etereplacementernal == true then
return {269, variant, 84, seed}
end
if type == 270 and variant == 0 and subtype <= 5 and Etereplacementernal == true then
return {270, 0, 88, seed}
end
if type == 271 and variant <= 1 and subtype == 0 and (Etereplacementernal == true or #Isaac.FindByType(274, 0, 84, false, true) >= 1) then
return {271, variant, 88, seed}
end
if type == 272 and variant <= 1 and subtype == 0 and (Etereplacementernal == true or #Isaac.FindByType(274, 0, 84, false, true) >= 1) then
return {272, variant, 88, seed}
end
if type == 273 and variant == 0 and subtype == 0 and EterepFinalacementernal == true then
EterepLamb = 1
return {273, 0, 88, seed}
end
if type == 274 and variant == 1 and subtype == 0 and (EterepMegaSatan == true or EterepFinalacementernal == true) then
EterepMegaSatan = true
return {274, 1, 84, seed}
end
if type == 274 and variant == 0 and subtype == 0 and EterepMegaSatan == true then
return {274, 0, 84, seed}
end
if type == 274 and variant == 2 and subtype == 0 and EterepMegaSatan == true then
return {274, 2, 84, seed}
end
if type == 401 and variant == 0 and subtype <= 1 and Etereplacementernal == true then
return {401, 0, 84, seed}
end
if type >= 402 and type <= 405 and variant == 0 and subtype <= 1 and Etereplacementernal == true then
return {type, 0, 88, seed}
end
if type == 406 and variant == 0 and subtype == 0 and EterepFinalacementernal == true then
EterepUltraGreed = true
return {406, 0, 84, seed}
end
if type == 409 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {409, 0, 89, seed}
end
if type == 410 and variant == 0 and subtype == 0 and not spawner and Etereplacementernal == true then
EterepSistersVis = true
return {410, 0, 88, seed}
end
if type == 410 and variant == 0 and subtype == 0 and EterepSistersVis == true then
return {410, 0, 88, seed}
end
if type == 411 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {411, 0, 83, seed}
end
if type == 413 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {413, 0, 88, seed}
end
if type == 900 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {900, 0, 88, seed}
end
if type == 901 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {901, 0, 89, seed}
end
if type >= 902 and type <= 904 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {type, 0, 88, seed}
end
if type == 905 and variant == 0 and subtype == 0 and Etereplacementernal == true then
return {type, 0, 88, seed}
end
if type == 906 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {906, 0, 84, seed}
end
if type >= 908 and type <= 910 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {type, 0, 88, seed}
end
if type == 911 and variant == 0 and subtype <= 2 and (Etereplacementernal == true or EterepRotgut == true) and EterepNotRotgut == false then
EterepRotgut = true
return {911, 0, 84, seed}
end
if type == 911 and (variant == 1 or variant == 2) and subtype <= 2 and EterepRotgut == true then
return {911, variant, 84, seed}
end
if type == 913 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {913, 0, 89, seed}
end
if type == 914 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {914, 0, 84, seed}
end
if type == 915 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {915, 0, 88, seed}
end
if type == 916 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {916, 0, 88, seed}
end
if type == 917 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {917, 0, 84, seed}
end
if type == 918 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {918, 0, 89, seed}
end
if type == 920 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {920, 0, 88, seed}
end
if type == 921 and variant == 0 and subtype <= 2 and Etereplacementernal == true then
return {921, 0, 88, seed}
end
if type == 950 and variant == 0 and subtype <= 2 and EterepFinalacementernal == true then
Eterepdogma = true
return {950, 0, 88, seed}
end
if type == 951 and variant == 0 and subtype <= 2 and EterepFinalacementernal == true then
return {951, 0, 84, seed}
end
if type == 951 and variant > 0 and variant <= 90 and variant % 10 == 0 and subtype <= 2 and EterepFinalacementernal == true then
return {951, variant, 83, seed}
end
end
if type >= 46 and type <= 52 and variant == 0 and subtype == 0 and not spawner and Eterepernalrng:RandomInt(5)+1 == 2 and Game():GetRoom():GetType() == RoomType.ROOM_DEFAULT then
return {type, 1, 0, seed}
end
if type == 299 and variant == 0 and EterepUltraGreed == true and Eterepernalrng:RandomInt(4)+1 == 2 then
return {299, 0, 85, seed}
end
if subtype <= 5 and ((not spawner and ((#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster0) or (#Isaac.FindByType(906, 0, 84, false, true) >= 1 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(30)+1 <= EterepReplaceMonster1) or (((EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster0) or (EterepCountEternalMonsters == 0 and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster1) or (EterepCountEternalMonsters == 1 and EterepMonstersLimit >= 2 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster2) or (EterepCountEternalMonsters == 2 and EterepMonstersLimit >= 3 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster3) or (EterepCountEternalMonsters == 3 and EterepMonstersLimit >= 4 and Eterepernalrng:RandomInt(100)+1 <= EterepReplaceMonster4))))) or (EterepGideon == true and EterepMonstersLimit == 0 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster0) or (EterepGideon == true and EterepMonstersLimit >= 1 and Eterepernalrng:RandomInt(50)+1 <= EterepReplaceMonster1)) then
if (type == 10 or type == 14 or type == 16 or type == 23 or type == 26 or type == 40 or type == 53 or type == 57 or type == 60 or type == 88 or type == 816 or type == 850) and variant <= 2 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, variant, 85, seed}
end
if (type == 34 or type == 87) and variant <= 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, variant, 85, seed}
end
if (type == 22 or type == 24 or (type == 217 and variant == 3) or (type == 31 and variant == 1) or (type == 27 and variant ~= 2) or type == 29 or (type == 38 and variant ~= 2) or type == 39 or (type == 244 and variant ~= 2)) and variant <= 3 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, variant, 85, seed}
end
if (type == 12 or type == 21 or type == 31 or type == 32 or type == 54 or type == 56 or type == 59 or type == 80 or type == 86 or type == 234 or type == 237 or type == 238 or type == 243 or type == 813 or type == 851 or type == 883 or type == 885 or type == 888 or type == 890 or type == 891) and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 89 and type <= 92 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if (type == 212 or type == 220 or type == 226 or type == 227 or type == 229 or type == 231 or type == 257 or type == 306 or type == 820 or type == 824 or type == 827 or type == 829 or type == 832 or type == 834 or type == 841 or (type >= 206 and type <= 208) or type == 855 or type == 876 or type == 881 or type == 885 or type == 891) and variant == 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 1, 85, seed}
end
if (type == 208 or type == 226 or type == 834) and variant == 2 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 2, 85, seed}
end
if type >= 854 and type <= 865 and type ~= 864 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 869 and type <= 880 and type ~= 870 and type ~= 872 and type ~= 877 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 204 and type <= 211 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 213 and type <= 231 and type ~= 217 and type ~= 218 and type ~= 222 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 246 and type <= 259 and type ~= 256 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 276 and type <= 290 and type ~= 281 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 299 and type <= 311 and type ~= 302 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 805 and type <= 807 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type >= 819 and type <= 841 and type ~= 826 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {type, 0, 85, seed}
end
if type == 10 and variant == 3 and subtype == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {10, 3, Eterepernalrng:RandomInt(6)+100, seed}
end
if type == 10 and variant == 3 and subtype >= 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {10, 3, subtype+100, seed}
end
if type == 11 and variant <= 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {11, 1, 85, seed}
end
if type == 15 and variant <= 3 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {15, variant, 87, seed}
end
if type == 23 and variant == 3 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {23, 3, 87, seed}
end
if type == 25 and variant <= 6 and variant ~= 3 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {25, variant, 87, seed}
end
if type == 25 and variant == 3 and subtype == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {25, variant, 87, seed}
end
if type == 30 and variant <= 2 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {30, variant, 87, seed}
end
if type == 35 and (variant == 0 or variant == 2) then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {35, variant, 85, seed}
end
if type == 41 and variant ~= 3 and variant <= 4 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {41, variant, 85, seed}
end
if type == 55 and variant <= 2 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {55, variant, 87, seed}
end
if type == 57 and variant <= 2 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {57, variant, 87, seed}
end
if type == 58 and variant <= 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {58, variant, 87, seed}
end
if type == 61 and variant ~= 6 and variant <= 7 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {61, variant, 85, seed}
end
if type == 94 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {94, 0, 87, seed}
end
if type == 212 and variant ~= 1 and variant <= 4 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {212, variant, 86, seed}
end
if type == 240 and variant ~= 2 and variant <= 3 and #Isaac.FindByType(900, -1, -1, false, true) == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {240, variant, 85, seed}
end
if type == 241 and variant == 0 and #Isaac.FindByType(900, -1, -1, false, true) == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {241, 0, 85, seed}
end
if type == 242 and variant == 0 and #Isaac.FindByType(900, -1, -1, false, true) == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {242, 0, 85, seed}
end
if type == 260 and variant == 10 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {260, 10, 85, seed}
end
if type == 297 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {297, variant, 85, seed}
end
if type == 298 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {298, variant, 87, seed}
end
if type == 811 and variant == 0 and subtype == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {811, 0, Eterepernalrng:RandomInt(6)+100, seed}
end
if type == 811 and variant == 0 and subtype >= 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {811, 0, subtype+100, seed}
end
if type == 812 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {812, 1, 85, seed}
end
if type == 817 and variant <= 1 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {817, variant, 85, seed}
end
if type == 844 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {844, 0, 84, seed}
end
if type == 872 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {872, 0, 87, seed}
end
if type == 881 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {881, 1, 80, seed}
end
if type == 889 and variant == 0 and #Isaac.FindByType(921, -1, -1, false, true) == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
return {889, 0, 85, seed}
end
if type == 892 and variant == 0 then
EterepCountEternalMonsters = EterepCountEternalMonsters + 1
EterepPoofer = 1
return {892, 0, 85, seed}
end
end
if type == 5 and Game():GetRoom():GetFrameCount() <= 1 and Eterepangelicitemappeared == 0 and Eterepeternalarenacanappear == 1 and Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE then
return {5, 40, 99799, seed}
elseif type == 5 and variant == 100 and subtype == 105 and EterepD6Nerf == 1 then
return {5, 100, 609, seed}
elseif type == 29 and variant == 1 and subtype == 0 and #Isaac.FindByType(900, 0, 88, false, true) >= 1 then
return {29, 1, 80, seed}
elseif type == 240 and variant == 0 and subtype == 0 and #Isaac.FindByType(900, 0, 88, false, true) >= 1 then
return {240, 0, 85, seed}
elseif type == 241 and variant == 0 and subtype == 0 and #Isaac.FindByType(900, 0, 88, false, true) >= 1 then
return {241, 0, 85, seed}
elseif type == 242 and variant == 0 and subtype == 0 and #Isaac.FindByType(900, 0, 88, false, true) >= 1 then
return {242, 0, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 4 and spawner.Variant == 17 and spawner.SubType == 77 then
return {9, 9, 678, seed}
elseif type == 9 and spawner and spawner.Type == 12 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 4, 678, seed}
elseif type == 9 and spawner and spawner.Type == 12 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 678, seed}
elseif type == 9 and spawner and spawner.Type == 14 and spawner.Variant == 2 and spawner.SubType == 85 then
return {9, 0, 690, seed}
elseif type == 9 and variant == 0 and spawner and spawner.Type == 20 and spawner.Variant == 0 and spawner.SubType == 78 and Eterepernalrng:RandomInt(2)+1 == 1 then
return {9, 0, 660, seed}
elseif type == 13 and spawner and spawner.Type == 22 and spawner.Variant == 0 and spawner.SubType == 85 then
return {18, 0, 0, seed}
elseif (type == 13 or type == 14 or type == 80) and spawner and spawner.Type == 22 and spawner.Variant == 1 and spawner.SubType == 85 then
return {15, 0, 170, seed}
elseif type == 18 and spawner and spawner.Type == 22 and spawner.Variant == 1 and spawner.SubType == 85 then
return {15, 0, 170, seed}
elseif type == 23 and spawner and spawner.Type == 22 and spawner.Variant == 1 and spawner.SubType == 85 then
return {23, 1, 77, seed}
elseif type == 38 and subtype ~= 85 and spawner and spawner.Type == 22 and spawner.Variant == 2 and spawner.SubType == 85 then
return {38, 1, 77, seed}
elseif type == 77 and spawner and spawner.Type == 22 and spawner.Variant == 2 and spawner.SubType == 85 then
return {77, 0, 77, seed}
elseif type == 222 and spawner and spawner.Type == 22 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and spawner and spawner.Type == 24 and spawner.Variant == 0 and spawner.SubType >= 100 and spawner.SubType <= 102 then
return {9, 0, spawner.SubType+631, seed}
elseif type == 9 and spawner and spawner.Type == 24 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 730, seed}
elseif type == 23 and spawner and spawner.Type == 25 and spawner.variant == 2 and spawner.SubType == 87 then
return {23, 1, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 25 and spawner.Variant == 3 and spawner.SubType == 87 and spawner.Mass == 7 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 25 and spawner.Variant == 3 and spawner.SubType == 87 and spawner.Mass == 8 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 25 and spawner.Variant == 4 and spawner.SubType == 87 then
return {9, 1, 678, seed}
elseif type == 23 and spawner and spawner.Type == 28 and spawner.Variant == 0 and spawner.SubType == 89 then
return {23, 0, 80, seed}
elseif type == 28 and variant == 0 and subtype <= 2 and spawner and spawner.Type == 28 and spawner.Variant == 0 and spawner.SubType == 89 then
return {28, 0, 89, seed}
elseif type == 28 and variant == 1 and subtype <= 2 and spawner and spawner.Type == 28 and spawner.Variant == 1 and spawner.SubType == 89 then
return {28, 1, 89, seed}
elseif type == 28 and variant == 2 and subtype <= 2 and spawner and spawner.Type == 28 and spawner.Variant == 2 and spawner.SubType == 89 then
return {28, 2, 89, seed}
elseif type == 92 and spawner and spawner.Type == 28 and spawner.Variant == 2 and spawner.SubType == 89 then
return {92, 0, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 31 and spawner.Variant == 0 and (spawner.SubType == 77 or spawner.SubType == 85) then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 31 and spawner.Variant == 0 and (spawner.SubType == 77 or spawner.SubType == 85) then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and spawner and spawner.Type == 31 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and spawner and spawner.Type == 31 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 5 and spawner and spawner.Type == 31 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 717, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 36 and spawner.Variant == 0 and spawner.SubType == 83 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 36 and spawner.Variant == 0 and spawner.SubType == 83 then
return {9, 0, 678, seed}
elseif type == 30 and spawner and spawner.Type == 36 and spawner.Variant == 0 and spawner.SubType == 83 then
return {30, 0, 87, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 38 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 38 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 38 and spawner.Variant == 1 and spawner.SubType == 77 and (spawner.SpawnerType == 272 or spawner.SpawnerType == 927) then
return {9, 4, 0, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 38 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 38 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 39 and variant == 22 and spawner and spawner.Type == 39 and spawner.Variant == 2 and spawner.SubType == 85 then
return {39, 22, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 41 and spawner.Variant == 4 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 43 and spawner.Variant == 0 and spawner.SubType == 1 and EterepClassicEnemiesPatterns == 1 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 43 and spawner.Variant == 0 and spawner.SubType == 1 and EterepClassicEnemiesPatterns == 1 then
return {9, 0, 678, seed}
elseif type == 11 and spawner and spawner.Type == 45 and spawner.Variant == 0 and spawner.SubType == 83 then
return {55, 0, 0, seed}
elseif type == 18 and spawner and spawner.Type == 45 and spawner.Variant == 0 and spawner.SubType == 83 then
return {208, 0, 0, seed}
elseif type == 16 and spawner and spawner.Type == 45 and spawner.Variant == 0 and spawner.SubType == 83 then
return {20, 0, 78, seed}
elseif type == 18 and spawner and spawner.Type == 45 and spawner.Variant == 0 and spawner.Mass == 73 then
return {20, 0, 78, seed}
elseif type == 61 and spawner and spawner.Type == 45 and spawner.Variant == 0 and spawner.Mass == 73 then
return {834, 0, 0, seed}
elseif type == 23 and spawner and spawner.Type == 46 and spawner.Variant == 0 and spawner.SubType == 90 then
return {23, 0, 80, seed}
elseif type == 4 and variant == 0 and subtype == 0 and spawner and spawner.Type == 48 and spawner.Variant == 0 and spawner.SubType == 90 then
return {4, 0, 19431, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 52 and spawner.Variant == 1 and spawner.SubType == 90 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 52 and spawner.Variant == 1 and spawner.SubType == 90 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 57 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 57 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 666, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 57 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 57 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 57 and spawner.Variant == 2 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 57 and spawner.Variant == 2 and spawner.SubType == 85 then
return {9, 0, 684, seed}
elseif type == 862 and spawner and spawner.Type == 57 and spawner.Variant == 2 and spawner.SubType == 85 then
return {862, 0, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 59 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 59 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 680, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 59 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 61 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 686, seed}
elseif type == 9 and spawner and spawner.Type == 61 and spawner.Variant == 4 and spawner.SubType == 85 then
return {9, 0, 729, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 62 and (spawner.Variant == 0 or spawner.Variant == 2) and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 62 and (spawner.Variant == 0 or spawner.Variant == 2) and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 1 and spawner.SubType == 88 then
return {9, 0, 661, seed}
elseif type == 9 and (variant == 3 or variant == 5 or variant == 6) and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 2 and spawner.SubType == 88 then
return {9, 0, variant+664, seed}
elseif type == 9 and (variant == 3 or variant == 4) and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 3 and spawner.Parent == nil and spawner.Size == 15 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 3 and spawner.Parent == nil and Game():GetLevel():GetStageType() ~= 5 then
return {9, 4, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 3 and spawner.Parent == nil and Game():GetLevel():GetStageType() == 5 then
return {9, 3, 678, seed}
elseif type == 14 and variant == 0 and subtype == 0 and spawner and spawner.Type == 63 and spawner.Variant == 0 and spawner.SubType == 88 then
return {15, 0, 170, seed}
elseif type == 1000 and variant == 25 and spawner and spawner.Type == 64 and spawner.Variant == 0 and spawner.SubType == 88 then
return {1000, 23, 0, seed}
elseif type == 4 and variant == 4 and subtype == 0 and spawner and spawner.Type == 65 and spawner.Variant == 0 and spawner.SubType == 88 then
return {15, 0, 170, seed}
elseif type == 65 and spawner and spawner.Type == 65 and spawner.Variant == 0 and spawner.SubType == 88 then
return {65, 10, 88, seed}
elseif type == 65 and spawner and spawner.Type == 65 and spawner.Variant == 1 and spawner.SubType == 88 then
return {65, 1, 89, seed}
elseif type == 66 and variant == 10 and subtype == 0 and spawner and spawner.Type == 66 and spawner.Variant == 0 and spawner.SubType == 88 then
return {15, 0, 170, seed}
elseif type == 66 and variant == 30 and subtype == 0 and spawner and spawner.Type == 66 and spawner.Variant == 0 and spawner.SubType == 88 then
return {66, 30, 88, seed}
elseif type == 41 and variant == 0 and subtype == 0 and spawner and spawner.Type == 66 and spawner.Variant == 30 and spawner.SubType == 88 then
return {15, 0, 170, seed}
elseif type == 66 and variant == 20 and subtype == 0 and spawner and spawner.Type == 66 and spawner.Variant == 30 and spawner.SubType == 88 then
return {66, 20, 88, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 67 and spawner.Variant == 1 and spawner.SubType == 89 then
return {9, 0, 693, seed}
elseif type == 68 and spawner and spawner.Type == 68 and spawner.Variant == 0 and spawner.SubType == 88 then
return {229, 0, 78, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 68 and spawner.Variant == 1 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 68 and spawner.Variant == 1 and spawner.SubType == 88 then
return {9, 0, 661, seed}
elseif type == 68 and spawner and spawner.Type == 68 and spawner.Variant == 1 and spawner.SubType == 88 then
return {229, 0, 79, seed}
elseif type == 25 and spawner and spawner.Type == 69 and spawner.Variant == 0 and spawner.SubType == 88 then
return {38, 0, 80, seed}
elseif type == 69 and variant == 1 and spawner and spawner.Type == 69 and spawner.Variant == 1 and spawner.FrameCount <= 1 then
return {15, 0, 170, seed}
elseif type == 69 and variant == 1 and spawner and spawner.Type == 69 and spawner.Variant == 2 and spawner.FrameCount <= 1 then
return {15, 0, 170, seed}
elseif type == 25 and spawner and spawner.Type == 69 and spawner.Variant == 1 and spawner.SubType == 88 then
return {38, 0, 81+Eterepernalrng:RandomInt(2), seed}
elseif type == 69 and spawner and spawner.Type == 69 and spawner.Variant == 1 and spawner.SubType == 88 then
return {69, 2, 88, seed}
elseif type == 25 and spawner and spawner.Type == 69 and spawner.Variant == 2 and spawner.SubType == 88 then
return {38, 0, 81+Eterepernalrng:RandomInt(2), seed}
elseif type == 69 and variant == 1 and subtype == 0 and spawner and spawner.Type == 69 and spawner.Variant == 2 and spawner.SubType == 88 and spawner.FrameCount <= 1 then
return {15, 0, 170, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 69 and spawner.Variant <= 2 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 69 and spawner.Variant <= 2 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 72 and variant == 0 and spawner and spawner.Type == 71 and spawner.Variant == 0 and spawner.SubType == 88 then
return {72, 0, 83, seed}
elseif type == 72 and variant == 1 and spawner and spawner.Type == 71 and spawner.Variant == 1 and spawner.SubType == 88 then
return {72, 1, 83, seed}
elseif type == 73 and variant == 0 and spawner and spawner.Type == 72 and spawner.Variant == 0 and spawner.SubType == 83 then
return {73, 0, 83, seed}
elseif type == 73 and variant == 1 and spawner and spawner.Type == 72 and spawner.Variant == 1 and spawner.SubType == 83 then
return {73, 1, 83, seed}
elseif type == 23 and variant == 0 and subtype == 0 and spawner and spawner.Type == 73 and spawner.Variant == 0 and spawner.SubType == 83 then
return {31, 0, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 74 and spawner.Variant == 0 and spawner.SubType == 90 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 74 and spawner.Variant == 0 and spawner.SubType == 90 then
return {9, 0, 678, seed}
elseif type == 75 and variant == 0 and subtype == 0 and spawner and spawner.Type == 74 and spawner.Variant == 0 and spawner.SubType == 90 then
return {75, 0, 89, seed}
elseif type == 76 and variant == 0 and subtype == 0 and spawner and spawner.Type == 75 and spawner.Variant == 0 and spawner.SubType == 89 then
return {76, 0, 83, seed}
elseif type == 77 and variant == 0 and subtype == 0 and spawner and spawner.Type == 76 and spawner.Variant == 0 and spawner.SubType == 83 and Eterepernalrng:RandomInt(3)+1 == 1 then
return {38, 1, 77, seed}
elseif type == 77 and variant == 0 and subtype == 0 and spawner and spawner.Type == 76 and spawner.Variant == 0 and spawner.SubType == 83 then
return {77, 0, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 0 and (spawner.SubType == 84 or spawner.Size == 37) then
return {9, 0, 660, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 0 and (spawner.SubType == 84 or spawner.Size == 37) then
return {9, 0, 687, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 0 and (spawner.SubType == 84 or spawner.Size == 37) then
return {9, 0, 685, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 0 and (spawner.SubType == 84 or spawner.Size == 37) then
return {9, 0, 678, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 0 and (spawner.SubType == 84 or spawner.Size == 37) then
return {9, 0, 683, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 0 and (spawner.SubType == 84 or spawner.Size == 37) then
return {9, 0, 202, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 1 and spawner.SubType == 84 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 1 and spawner.SubType == 84 then
return {9, 0, 687, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 1 and spawner.SubType == 84 then
return {9, 0, 685, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 1 and spawner.SubType == 84 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 1 and spawner.SubType == 84 then
return {9, 0, 683, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 78 and spawner.Variant == 1 and spawner.SubType == 84 then
return {9, 0, 202, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 10 and (spawner.SubType == 80 or spawner.SubType == 81) then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 10 and (spawner.SubType == 80 or spawner.SubType == 81) then
return {9, 0, 678, seed}
elseif type == 9 and variant == 12 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 1 and spawner.SubType == 88 and spawner.FrameCount <= 1 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 12 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 1 and spawner.SubType == 88 and spawner.FrameCount >= 2 then
return {9, 12, 679, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 2 and spawner.SubType == 88 and spawner.FrameCount <= 1 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 12 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 11 and spawner.SubType == 80 then
return {9, 12, 679, seed}
elseif type == 9 and variant == 0 and spawner and spawner.HitPoints > 0 and spawner.Type == 79 and ((spawner.Variant == 10 and spawner.SubType == 82) or (spawner.Variant == 11 and spawner.SubType == 80)) then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and spawner and spawner.HitPoints > 0 and spawner.Type == 79 and ((spawner.Variant == 10 and spawner.SubType == 82) or (spawner.Variant == 11 and spawner.SubType == 80)) then
return {9, 12, 678, seed}
elseif type == 84 and variant == 10 and subtype == 0 and spawner and spawner.Type == 84 and spawner.Variant == 0 and spawner.SubType == 88 then
return {84, 10, 88, seed}
elseif type == 81 and spawner and spawner.Type == 84 and spawner.Variant == 0 and spawner.SubType == 88 then
return {81, 0, 88, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 87 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 87 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 680, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 87 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 87 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 680, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 90 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 18 and spawner and spawner.Type == 91 and spawner.Variant == 0 and (spawner.SubType == 77 or spawner.SubType == 85) then
return {18, 0, 80, seed}
elseif type == 9 and spawner and spawner.Type == 92 and spawner.Variant == 1 and spawner.SubType <= 1 and spawner.Mass == 50 and Eterepernalrng:RandomInt(2)+1 == 1 then
return {9, 0, 654, seed}
elseif type == 85 and spawner and spawner.Type == 94 and spawner.Variant == 0 and spawner.SubType == 87 then
return {85, 0, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 98 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 98 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 99 and spawner.Variant == 0 and spawner.SubType == 90 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 99 and spawner.Variant == 0 and spawner.SubType == 90 then
return {9, 0, 678, seed}
elseif type == 14 and variant == 0 and subtype == 0 and spawner and spawner.Type == 99 and spawner.Variant == 0 and spawner.SubType == 90 then
return {15, 0, 170, seed}
elseif type == 85 and spawner and spawner.Type == 100 and spawner.Variant <= 1 and spawner.SubType == 88 then
return {85, 0, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 101 and spawner and spawner.Type == 101 and spawner.Variant == 0 and spawner.SubType == 88 then
return {101, 0, 80, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 1 and spawner.SubType == 80 then
return {9, 0, 665, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 1 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 1 and spawner.SubType == 88 then
return {9, 0, 665, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 1 and spawner.SubType == 88 then
return {9, 0, 663, seed}
elseif type == 29 and variant == 1 and subtype == 0 and spawner and spawner.Type == 101 and spawner.Variant == 1 and spawner.SubType == 88 then
return {29, 1, 80, seed}
elseif type == 101 and spawner and spawner.Type == 101 and spawner.Variant == 1 and spawner.SubType == 88 then
return {101, 1, 80, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 102 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 1013 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 102 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 1013 then
return {9, 4, 1, seed}
elseif type == 1000 and variant == 19 and spawner and spawner.Type == 102 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 1013 then
return {1000, 19, 78, seed}
elseif type == 1000 and variant == 19 and spawner and spawner.Type == 102 and spawner.Variant <= 2 and spawner.SubType == 88 and spawner.Mass ~= 1013 then
return {1000, 19, 76, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 102 and spawner.Variant == 2 and spawner.SubType == 88 then
return {9, 6, 202, seed}
elseif type == 94 and spawner and spawner.Type == 205 and spawner.Variant == 0 and spawner.SubType == 85 then
return {29, 1, 85, seed}
elseif type == 79 and spawner and spawner.Type == 205 and spawner.Variant == 0 and spawner.SubType == 85 then
return {29, 1, 85, seed}
elseif type == 30 and spawner and spawner.Type == 206 and spawner.Variant == 1 and spawner.SubType == 85 and Eterepernalrng:RandomInt(3) == 1 then
return {30, 2, 87, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 208 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 208 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 209 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 209 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 216 and variant == 1 and subtype <= 2 and spawner and spawner.Type == 216 and spawner.Variant == 0 and spawner.SubType == 85 then
return {216, 1, 85, seed}
elseif type == 24 and variant == 0 and subtype == 0 and spawner and spawner.Type == 216 and spawner.Variant == 0 and spawner.SubType == 85 then
return {15, 0, 170, seed}
elseif type == 217 and spawner and spawner.Type == 220 and spawner.Variant == 0 and spawner.SubType == 85 then
return {217, 0, 85, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 220 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 3, 683, seed}
elseif type == 15 and spawner and spawner.Type == 220 and spawner.Variant == 1 and spawner.SubType == 85 then
return {15, 1, 87, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 220 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 682, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 223 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 223 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 3, 678, seed}
elseif type == 217 and variant == 0 and subtype == 0 and spawner and spawner.Type == 223 and spawner.Variant == 0 and spawner.SubType == 85 then
return {15, 0, 170, seed}
elseif type == 220 and spawner and spawner.Type == 223 and spawner.Variant == 0 and spawner.SubType == 85 then
return {220, 0, 85, seed}
elseif type == 32 and spawner and spawner.Type == 224 and spawner.Variant == 0 and spawner.SubType == 85 then
return {32, 0, 85, seed}
elseif type == 55 and spawner and spawner.Type == 225 and spawner.Variant == 0 and spawner.SubType == 85 then
return {55, 1, 87, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 227 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 1, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 237 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 237 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 217 and spawner and spawner.Type == 237 and spawner.Variant == 2 and spawner.SubType == 88 then
return {217, 2, 80, seed}
elseif type == 18 and variant == 0 and subtype == 0 and spawner and spawner.Type == 237 and spawner.Variant == 1 and spawner.SubType == 88 then
return {15, 0, 170, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 240 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 240 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 4 and spawner and spawner.Type == 240 and (spawner.Variant == 1 or spawner.Variant == 3) and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 242 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 242 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 243 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 243 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 244 and spawner.Variant == 2 and spawner.SubType == 1 and spawner.Mass == 111 then
return {9, 0, 716, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 244 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 244 and spawner.Variant == 3 and spawner.SubType == 85 then
return {9, 0, 680, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 257 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 257 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 260 and spawner.Variant == 10 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 260 and spawner.Variant == 10 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 262 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 2, 202, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 262 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 2, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 263 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 263 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 263 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 202, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 264 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 3, 685, seed}
elseif type == 217 and spawner and spawner.Type == 264 and spawner.Variant == 0 and spawner.SubType == 88 then
return {217, 0, 85, seed}
elseif type == 9 and spawner and spawner.Type == 265 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 266 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 266 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 677, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 266 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 267 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 692, seed}
elseif type == 1000 and variant == 61 and spawner and spawner.Type == 268 and spawner.Variant == 0 and spawner.SubType == 88 then
return {1000, 2, 0, seed}
elseif type == 244 and spawner and spawner.Type == 269 and spawner.Variant == 0 and spawner.SubType == 84 then
return {244, 0, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 269 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 269 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 678, seed}
elseif type == 227 and spawner and spawner.Type == 269 and spawner.Variant == 1 and spawner.SubType == 84 then
return {227, 0, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and (spawner.Type == 271 or spawner.Type == 272) and spawner.Variant <= 1 and spawner.SubType == 88 then
return {9, 0, 693, seed}
elseif type == 38 and spawner and spawner.Type == 272 and spawner.Variant == 0 and spawner.SubType == 88 then
return {38, 1, 77, seed}
elseif type == 38 and spawner and spawner.Type == 272 and spawner.Variant == 1 and spawner.SubType == 88 then
return {259, 0, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 273 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 273 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 273 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 202, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 273 and spawner.Variant == 0 and spawner.SubType == 88 and EterepDelirium == 0 then
return {9, 0, 674, seed}
elseif type == 273 and spawner and spawner.Type == 273 and spawner.Variant == 0 and spawner.SubType == 88 then
return {273, 10, 88, seed}
elseif type == 1000 and variant == 61 and spawner and spawner.Type == 274 and spawner.Variant <= 2 and spawner.SubType == 84 then
return {1000, 7, 0, seed}
elseif type == 9 and variant <= 4 and spawner and (spawner.Type == 274 or spawner.Type == 275) and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and (spawner.Type == 274 or spawner.Type == 275) and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and (spawner.Type == 274 or spawner.Type == 275) and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 681, seed}
elseif type == 9 and variant == 7 and subtype == 0 and spawner and (spawner.Type == 274 or spawner.Type == 275) and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 2, 678, seed}
elseif type == 1000 and variant == 61 and subtype == 0 and spawner and spawner.Type == 276 and spawner.Variant == 0 and spawner.SubType == 85 then
return {15, 0, 170, seed}
elseif type == 9 and spawner and spawner.Type == 284 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 695, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 286 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 286 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 27 and spawner and spawner.Type == 290 and spawner.Variant == 0 and spawner.SubType == 85 then
return {27, 0, 85, seed}
elseif (type == 61 or type == 80 or type == 207 or type == 214 or type == 215 or type == 249) and spawner and Eterepernalrng:RandomInt(2)+1 == 1 and spawner.Type == 306 and spawner.Variant == 1 and spawner.SubType == 85 then
return {type, variant, 85, seed}
elseif type == 94 and spawner and spawner.Type == 306 and spawner.Variant == 0 and spawner.SubType == 85 then
return {94, 0, 87, seed}
elseif type == 9 and spawner and spawner.Type == 307 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 309 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 679, seed}
elseif type == 23 and spawner and spawner.Type == 401 and spawner.Variant == 0 and spawner.SubType == 84 then
return {23, 0, 80, seed}
elseif type == 217 and spawner and spawner.Type == 402 and spawner.Variant == 0 and spawner.SubType == 88 then
return {217, 2, 80, seed}
elseif type == 9 and spawner and spawner.Type == 402 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 5, 33333, seed}
elseif type == 295 and spawner and spawner.Type == 402 and spawner.Variant == 0 and spawner.SubType == 88 then
return {295, 0, 33333, seed}
elseif type == 227 and spawner and spawner.Type == 403 and spawner.Variant == 0 and spawner.SubType == 88 then
return {227, 0, 85, seed}
elseif type == 4 and spawner and spawner.Type == 404 and spawner.Variant == 0 and spawner.SubType == 88 then
return {4, 4, 77, seed}
elseif type == 404 and variant == 1 and spawner and spawner.Type == 404 and spawner.Variant == 0 and spawner.SubType == 88 then
return {404, 1, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 405 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 694, seed}
elseif type == 405 and variant == 1 and spawner and spawner.Type == 405 and spawner.Variant == 0 and spawner.SubType == 88 then
return {405, 1, 88, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 407 and spawner.Variant == 0 and spawner.SubType == 83 then
return {9, 6, 178, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 407 and spawner.Variant == 0 and spawner.SubType == 83 then
return {9, 6, 203, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 407 and spawner.Variant == 0 and spawner.SubType == 83 then
return {9, 6, 204, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 407 and spawner.Variant == 0 and spawner.SubType == 83 then
return {9, 6, 202, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 407 and spawner.Variant == 0 and spawner.SubType == 83 and spawner.Mass ~= 1022 then
return {9, 0, 660, seed}
elseif type == 4 and variant == 4 and spawner and spawner.Type == 411 and spawner.Variant == 0 and spawner.SubType == 83 then
return {15, 0, 170, seed}
elseif type == 404 and variant == 0 and spawner and spawner.Type == 411 and spawner.Variant == 0 and spawner.SubType == 83 then
return {404, 0, 83, seed}
elseif type == 404 and variant == 1 and spawner and spawner.Type == 411 and spawner.Variant == 0 and spawner.SubType == 83 then
return {404, 1, 78, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 413 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 413 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 684, seed}
elseif type == 72 and spawner and spawner.Type == 413 and spawner.Variant == 0 and spawner.SubType == 88 then
return {72, 0, 83, seed}
elseif type == 73 and spawner and spawner.Type == 413 and spawner.Variant == 0 and spawner.SubType == 88 then
return {73, 0, 83, seed}
elseif type == 308 and spawner and spawner.Type == 413 and spawner.Variant == 0 and spawner.SubType == 88 then
return {308, 0, 85, seed}
elseif type == 9 and spawner and spawner.Type == 806 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 4, 678, seed}
elseif type == 9 and spawner and spawner.Type == 806 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 678, seed}
elseif type == 9 and spawner and spawner.Type == 807 and spawner.Variant <= 2 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 0, 720, seed}
elseif type == 9 and spawner and spawner.Type == 807 and spawner.Variant <= 2 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 720, seed}
elseif type == 9 and spawner and spawner.Type == 812 and spawner.Variant == 1 and spawner.SubType == 85 and Game():GetLevel():GetStageType() <= 3 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 0, 678, seed}
elseif type == 9 and spawner and spawner.Type == 812 and spawner.Variant == 1 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 4, 678, seed}
elseif type == 9 and spawner and spawner.Type == 812 and spawner.Variant == 1 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 678, seed}
elseif type == 9 and spawner and spawner.Type == 812 and spawner.Variant == 1 and spawner.SubType == 0 and spawner.Mass == 7 then
return {9, variant, 718, seed}
elseif type == 9 and variant == 8 and subtype ~= 150 and subtype ~= 151 and spawner and spawner.Type == 816 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 8 and subtype ~= 150 and subtype ~= 151 and spawner and spawner.Type == 816 and spawner.Variant == 1 and spawner.SubType == 85 and spawner.Mass ~= 16 then
return {9, 0, 660, seed}
elseif type == 810 and subtype == 0 and spawner and spawner.Type == 817 and spawner.Variant == 0 and (spawner.SubType == 0 or spawner.SubType == 85) then
return {15, 0, 170, seed}
elseif type == 4 and spawner and spawner.Type == 819 and spawner.Variant == 0 and spawner.SubType == 85 then
return {4, 16, 27, seed}
elseif type == 819 and spawner and spawner.Type == 821 and spawner.Variant == 0 and spawner.SubType == 85 then
return {819, 0, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 827 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 827 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 1 and spawner and spawner.Type == 828 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 1, 684, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 829 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 829 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 830 and variant == 10 and spawner and spawner.Type == 830 and spawner.Variant == 0 and spawner.SubType == 85 then
return {830, 10, 85, seed}
elseif type == 831 and variant == 20 and spawner and spawner.Type == 831 and spawner.Variant == 0 and spawner.SubType == 85 then
return {831, 20, 85, seed}
elseif type == 260 and variant == 10 and spawner and spawner.Type == 832 and spawner.Variant == 0 and spawner.SubType == 85 then
return {260, 10, 85, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 834 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 835 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 835 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 835 and spawner and spawner.Type == 835 and spawner.Variant == 0 and spawner.SubType == 85 then
SFXManager():Stop(30)
return {229, 0, 80, seed}
elseif type == 9 and spawner and spawner.Type == 838 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 2 and spawner and spawner.Type == 841 and spawner.Variant <= 1 and spawner.SubType == 85 then
return {9, 2, 678, seed}
elseif type == 4 and spawner and spawner.Type == 844 and spawner.Variant == 0 and spawner.SubType == 84 then
return {4, 17, 27, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 854 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 854 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 868 and spawner and spawner.Type == 856 and spawner.Variant == 0 and spawner.SubType == 85 then
return {15, 0, 170, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 857 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 681, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 857 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 61 and spawner and spawner.Type == 861 and spawner.Variant == 0 and spawner.SubType == 85 then
return {61, 6, 85, seed}
elseif type == 9 and spawner and spawner.Type == 862 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 684, seed}
elseif type == 9 and spawner and (spawner.Type == 863 or spawner.Type == 880) and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 659, seed}
elseif type == 9 and spawner and spawner.Type == 865 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 871 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 3, 683, seed}
elseif type == 870 and spawner and spawner.Type == 871 and spawner.Variant == 0 and spawner.SubType == 85 then
return {870, 0, 85, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 876 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 876 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 3, 678, seed}
elseif type == 876 and variant == 1 and spawner and spawner.Type == 876 and spawner.Variant == 0 and spawner.SubType == 85 then
return {876, 1, 85, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 878 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 879 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 658, seed}
elseif type == 409 and spawner and spawner.Type == 885 and spawner.Variant == 0 and spawner.SubType == 85 and spawner.Mass == 12 then
return {15, 0, 170, seed}
elseif type == 9 and variant == 0 and subtype == 0 and Eterepernalrng:RandomInt(2)+1 == 1 and spawner and spawner.Type == 881 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 669, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 881 and spawner.Variant == 1 and spawner.SubType == 85 then
return {9, 0, 670, seed}
elseif type == 9 and variant == 0 and spawner and spawner.Type == 888 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and spawner and spawner.Type == 888 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 688, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 889 and spawner.Mass == 14 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 then
return {9, 1, 684, seed}
elseif type == 9 and variant == 1 and spawner and spawner.Type == 889 and spawner.Mass == 17 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 then
return {9, 1, 679, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 889 and spawner.Mass == 19 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and spawner and spawner.Type == 889 and spawner.Mass == 19 and #Isaac.FindByType(921, 0, 88, false, true) >= 1 then
return {9, 1, 678, seed}
elseif type == 9 and variant == 0 and spawner and spawner.Type == 892 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and spawner and spawner.Type == 892 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 891 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 891 and spawner.Variant == 0 and spawner.SubType == 85 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 900 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 900 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 901 and spawner.Variant == 0 and spawner.SubType == 89 and Game():GetLevel():GetStageType() ~= 5 then
return {9, 4, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 901 and spawner.Variant == 0 and spawner.SubType == 89 and Game():GetLevel():GetStageType() == 5 then
return {9, 3, 678, seed}
elseif type == 9 and (variant == 3 or variant == 4) and subtype == 0 and spawner and spawner.Type == 901 and spawner.Variant == 0 and spawner.SubType == 89 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 902 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 19 and Eterepernalrng:RandomInt(4)+1 == 1 then
return {9, 4, 707, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 903 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 4, 713, seed}
elseif type == 3 and variant == 220 and #Isaac.FindByType(904, 0, 88, false, true) >= 1 then
return {3, 220, 86, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 904 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass ~= 77 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 904 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 77 then
return {9, 0, 708, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 904 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 904 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 703, seed}
elseif type == 904 and variant == 10 and subtype == 0 and spawner and spawner.Type == 904 and spawner.Variant == 0 and spawner.SubType == 88 then
return {904, 10, 88, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 904 and spawner.Variant == 10 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and spawner and spawner.Type == 905 and spawner.Variant == 0 and spawner.SubType == 77 then
return {9, 983, 0, seed}
elseif type == 4 and variant ~= 8 and variant ~= 15 and variant ~= 16 and subtype == 0 and spawner and spawner.Type == 906 and spawner.Variant == 0 and spawner.SubType == 84 then
return {4, 16, 1, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 907 and spawner.Variant == 0 and spawner.Size == 49 and spawner.Mass == 101 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 907 and spawner.Variant == 0 and spawner.Size == 49 then
return {9, 0, 681, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 908 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 908 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 75 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 77 then
return {9, 0, 202, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 909 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 721, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 680, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 2 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 2 and spawner.SubType == 88 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 910 and spawner.Variant == 2 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 911 and spawner.Variant == 0 and spawner.SubType == 84 and spawner.Size ~= 59 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 911 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 5 and subtype == 0 and spawner and spawner.Type == 911 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 202, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 911 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 912 and spawner.Variant == 0 and spawner.SubType == 0 and spawner.Mass == 1011 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 912 and spawner.Variant == 0 and spawner.SubType == 0 and spawner.Mass == 1011 then
return {9, 0, 678, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and spawner.Type == 912 and spawner.Variant == 0 and spawner.SubType == 0 and spawner.Mass == 1011 then
return {9, 0, 729, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 912 and spawner.Variant == 10 and spawner.Mass == 1010 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 912 and spawner.Variant == 100 and spawner.SubType == 0 and EterepMother == true then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 912 and spawner.Variant == 100 and spawner.SubType == 0 and EterepMother == true then
return {9, 0, 678, seed}
elseif type == 9 and variant == 3 and subtype == 0 and spawner and spawner.Type == 914 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 914 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 3, 678, seed}
elseif type == 870 and variant == 0 and spawner and spawner.Type == 914 and spawner.Variant == 0 and spawner.SubType == 84 then
return {870, 0, 85, seed}
elseif type == 4 and variant ~= 8 and variant ~= 15 and variant ~= 16 and subtype == 0 and spawner and spawner.Type == 920 and spawner.Variant == 0 and spawner.SubType == 88 then
return {4, 16, 1, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 920 and spawner.Variant == 0 and spawner.SubType == 88 and spawner.Mass == 31 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 920 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 678, seed}
elseif type == 25 and spawner and spawner.Type == 920 and spawner.Variant == 0 and spawner.SubType == 88 then
return {25, 1, 87, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 921 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 921 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 2, 678, seed}
elseif type == 9 and variant == 0 and variant == 0 and subtype == 0 and spawner and spawner.Type == 850 and spawner.Variant == 2 and spawner.SubType == 85 then
return {9, 0, 719, seed}
elseif type == 9 and variant == 4 and spawner and spawner.Type == 850 and spawner.Variant == 2 and spawner.SubType == 85 then
return {9, 0, 729, seed}
elseif type == 9 and spawner and spawner.Type == 813 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 4, 678, seed}
elseif type == 9 and spawner and spawner.Type == 813 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 678, seed}
elseif type == 9 and variant == 1 and subtype == 0 and spawner and spawner.Type == 270 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 664, seed}
elseif type == 9 and variant == 2 and subtype == 0 and spawner and spawner.Type == 270 and spawner.Variant == 0 and spawner.SubType == 88 then
return {9, 0, 662, seed}
elseif type == 9 and spawner and spawner.Type == 11 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 4, 678, seed}
elseif type == 9 and spawner and spawner.Type == 11 and spawner.Variant == 0 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 678, seed}
elseif type == 9 and spawner and spawner.Type == 11 and spawner.Variant == 1 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 4 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 4, 678, seed}
elseif type == 9 and spawner and spawner.Type == 11 and spawner.Variant == 1 and spawner.SubType == 85 and Game():GetLevel():GetStageType() == 5 and Game():GetLevel():GetStage() <= LevelStage.STAGE1_2 then
return {9, 3, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 950 and spawner.Variant == 0 and spawner.SubType == 88 and (spawner.Mass == 53 or spawner.Mass == 54) then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 950 and spawner.Variant == 0 and spawner.SubType == 88 and (spawner.Mass == 53 or spawner.Mass == 54) then
return {9, 0, 678, seed}
elseif type == 9 and variant == 13 and subtype == 0 and spawner and Eterepernalrng:RandomInt(2)+1 == 1 and spawner.Type == 950 and spawner.Variant == 2 and spawner.SubType == 88 and spawner.Mass == 124 then
return {9, 13, 714, seed}
elseif type == 1000 and variant == 172 and subtype == 0 and spawner and spawner.Type == 950 and spawner.Variant == 2 and spawner.SubType == 88 and spawner.Size == 44 then
return {1000, 172, 77, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 0 and spawner.SubType == 84  then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 0, 704, seed}
elseif Eterepernalrng:RandomInt(5)+1 == 3 and type == 9 and variant == 14 and spawner and spawner.Type == 951 and spawner.Variant == 0 and spawner.SubType == 84 then
return {9, 14, 678, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 10 and spawner.SubType == 83 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 10 and spawner.SubType == 83 then
return {9, 0, 704, seed}
elseif type == 951 and variant == 22 and spawner and spawner.Type == 951 and spawner.Variant == 20 and spawner.SubType == 83 then
return {951, 22, 83, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 30 and spawner.SubType == 83 then
return {9, 0, 202, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 31 and #Isaac.FindByType(951, 30, 83, false, true) >= 1 then
return {9, 0, 660, seed}
elseif type == 9 and variant == 4 and subtype == 0 and spawner and spawner.Type == 951 and spawner.Variant == 31 and #Isaac.FindByType(951, 30, 83, false, true) >= 1 then
return {9, 0, 202, seed}
elseif type == 951 and variant == 41 and spawner and spawner.Type == 951 and spawner.Variant == 40 and spawner.SubType == 83 and spawner.Mass == 500 then
return {15, 0, 170, seed}
elseif type == 951 and variant == 42 and spawner and spawner.Type == 951 and spawner.Variant == 40 and spawner.SubType == 83 then
return {951, 42, 10, seed}
elseif type == 9 and spawner and spawner.Type == 912 and Eterepmothermaggotattack <= 3 then
return {9, 0, 678, seed}
elseif type == 1000 and variant == 199 and #Isaac.FindByType(951, 40, 83, false, true) >= 1 then
return {1000, 199, 83, seed}
elseif type == 4 and variant ~= 16 and subtype == 0 and spawner and spawner.Type == 965 then
return {4, 16, 1, seed}
elseif type == 9 and variant == 6 and subtype == 0 and spawner and EterepDelirium == 1 then
return {9, 0, 672, seed}
elseif (type == 20 or type == 69 or type == 99 or type == 237 or type == 269) and spawner and EterepDelirium == 1 then
return {9, 0, 660, seed}
end
if EterepLessKeys >= 1 and type == 5 and variant == 30 and Game():GetRoom():GetFrameCount() >= 3 and Game():GetLevel():GetStage() >= LevelStage.STAGE2_1 then
local pickupchance1 = Eterepernalrng:RandomInt(100)+1
local pickupchance2 = Eterepernalrng:RandomInt(4)+1
if EterepLessKeys >= pickupchance1 and pickupchance2 <= 3 then
return {5, 20, 0, seed}
end
if EterepLessKeys >= pickupchance1 and pickupchance2 == 4 then
return {5, 10, 0, seed}
end
end
if EterepClassicShotSpeed == 1 then
if type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 26 and spawner.Variant == 1 and spawner.SubType == 0 then
return {9, 0, 693, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 35 and spawner.Variant == 3 and spawner.SubType == 0 then
return {9, 0, 693, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 46 and spawner.Variant <= 1 and spawner.SubType == 0 then
return {9, 0, 693, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 52 and spawner.Variant == 1 and spawner.SubType == 0 then
return {9, 0, 694, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 59 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 694, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 696, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 62 and spawner.Variant == 0 and spawner.SubType == 1 then
return {9, 0, 691, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 63 and spawner.Variant == 0 and spawner.SubType == 1 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 64 and spawner.Variant == 0 and spawner.SubType == 1 then
return {9, 0, 694, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 67 and spawner.Variant == 0 and spawner.SubType == 1 then
return {9, 0, 696, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 67 and spawner.Variant == 1 and spawner.SubType == 2 then
return {9, 0, 694, seed}
elseif type == 9 and variant == 12 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 1 and spawner.SubType == 0 then
return {9, 12, 679, seed}
elseif type == 9 and variant == 12 and subtype == 0 and spawner and spawner.Type == 79 and spawner.Variant == 11 and spawner.SubType == 0 and spawner.HitPoints <= 0 then
return {9, 12, 679, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 86 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 87 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 694, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 98 and spawner.Variant == 0 and spawner.SubType == 1 then
return {9, 0, 698, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 207 and spawner.Variant == 1 and spawner.SubType == 0 then
return {9, 0, 693, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 237 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 694, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 240 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 693, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 249 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 267 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 270 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 698, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 271 and spawner.Variant <= 1 and spawner.SubType == 0 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 272 and spawner.Variant <= 1 and spawner.SubType == 0 then
return {9, 0, 692, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 284 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 693, seed}
elseif type == 9 and variant == 0 and subtype == 0 and spawner and spawner.Type == 300 and spawner.Variant == 0 and spawner.SubType == 0 then
return {9, 0, 692, seed}
end
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_ENTITY_SPAWN, mod.EterepSpawnReplacements)

local EterepArenaEternal = {}
EterepTheArenaEternal = EterepArenaEternal

local function EterepChangeBackdrop(backdrop)
local roomType = Game():GetRoom():GetType()
for i = 1, 2 do
local npc = Isaac.Spawn(EntityType.ENTITY_EFFECT, 82, 0, Vector(0, 0), Vector(0, 0), nil)
local sprite = npc:GetSprite()
sprite:Load("newbackdrop.anm2", true)
for num=0, 15 do
local wall_to_use = backdrop.WALLS[EterepTheArenaEternal.Random(1, #backdrop.WALLS)]
sprite:ReplaceSpritesheet(num, wall_to_use)
end
local nfloor_to_use = backdrop.NFLOORS[EterepTheArenaEternal.Random(1, #backdrop.NFLOORS)]
local lfloor_to_use = backdrop.LFLOORS[EterepTheArenaEternal.Random(1, #backdrop.LFLOORS)]
local corner_to_use = backdrop.CORNERS[EterepTheArenaEternal.Random(1, #backdrop.CORNERS)]
sprite:ReplaceSpritesheet(16, nfloor_to_use)
sprite:ReplaceSpritesheet(17, nfloor_to_use)
sprite:ReplaceSpritesheet(18, lfloor_to_use)
sprite:ReplaceSpritesheet(19, lfloor_to_use)
sprite:ReplaceSpritesheet(20, lfloor_to_use)
sprite:ReplaceSpritesheet(21, lfloor_to_use)
sprite:ReplaceSpritesheet(22, lfloor_to_use)
sprite:ReplaceSpritesheet(23, corner_to_use)
npc.Position = Game():GetRoom():GetTopLeftPos()+Vector(260,0)
if Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_1x1 then sprite:Play("1x1_room", true)
elseif Game():GetRoom():GetRoomShape() ==  RoomShape.ROOMSHAPE_IH then sprite:Play("IH_room", true)
elseif Game():GetRoom():GetRoomShape() ==  RoomShape.ROOMSHAPE_IV then
sprite:Play("IV_room", true)
npc.Position = Game():GetRoom():GetTopLeftPos()+Vector(113,0)
elseif Game():GetRoom():GetRoomShape() ==  RoomShape.ROOMSHAPE_1x2 then sprite:Play("1x2_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_IIV then
sprite:Play("IIV_room", true)
npc.Position = Game():GetRoom():GetTopLeftPos()+Vector(113,0)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_2x1 then sprite:Play("2x1_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_IIH then sprite:Play("IIH_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_2x2 then sprite:Play("2x2_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_LTL then sprite:Play("LTL_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_LTR then sprite:Play("LTR_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_LBL then sprite:Play("LBL_room", true)
elseif Game():GetRoom():GetRoomShape() == RoomShape.ROOMSHAPE_LBR then sprite:Play("LBR_room", true) end
sprite:LoadGraphics()
if i == 1 then
npc:ToEffect():AddEntityFlags(EntityFlag.FLAG_RENDER_WALL)
end
end
end

local EterepEternalArenaBackdrop = {
NFLOORS = {"gfx/backdrop/etereternalarena_nfloor.png"},
LFLOORS = {"gfx/backdrop/etereternalarena_LFloor.png"},
CORNERS = {"gfx/nothing.png"},
WALLS = {
"gfx/backdrop/etereternalarena.png"
}
}

function EterepArenaEternal.Random(min, max, rng)
rng = RNG()
if Eterepeternalarenacanappear == 1 and min ~= nil and max ~= nil then
return math.floor(rng:RandomFloat() * (max - min + 1) + min)
end
return
end

function mod:UpdatePits()
local size = Game():GetRoom():GetGridSize()
for i=0, size do
local gridEntity = Game():GetRoom():GetGridEntity(i)
if gridEntity then
if gridEntity.Desc.Type == GridEntityType.GRID_PIT then
gridEntity:PostInit()
end
end
end
end

function mod:EterepPickupsInit(pickup)
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalarenacanappear == 1 and pickup.Variant == 100 and pickup.FrameCount <= 1 and Eterepangelicitemappeared == 0 then
pickup:Remove()
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalarenacanappear == 1 and pickup.Variant ~= 10 and pickup.SubType ~= 4 and pickup.FrameCount <= 1 and pickup.SpawnerType >= 46 and pickup.SpawnerType <= 81 then
pickup:Remove()
end
if pickup.SpawnerType == 409 and pickup.SpawnerVariant == 1 then
pickup:Remove()
end
if pickup.SubType == 99799 and pickup.Variant == 40 then
pickup:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_POST_PICKUP_UPDATE, mod.EterepPickupsInit)

function mod:EterepSpecialChanges()
local player = Isaac.GetPlayer(0)
if Game():GetRoom():GetFrameCount() <= 2 and Eterepeternalarenacanappear == 1 and EterepCheckFloor == Game():GetLevel():GetStage() * 5 + Game():GetLevel():GetStageType() * 5 then
local room = Game():GetRoom()
local level = Game():GetLevel()
local stage = level:GetStage()
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE then
EterepChangeBackdrop(EterepEternalArenaBackdrop)
end
for i = 0, DoorSlot.NUM_DOOR_SLOTS - 1 do
local door = room:GetDoor(i)
if Eterepeternalarenacanappear == 1 and door ~= nil then
if (door.TargetRoomType == RoomType.ROOM_CHALLENGE and door.CurrentRoomType ~= RoomType.ROOM_SECRET and door.CurrentRoomType ~= RoomType.ROOM_SUPERSECRET ) or (door.CurrentRoomType == RoomType.ROOM_CHALLENGE and door.TargetRoomType ~= RoomType.ROOM_SECRET and door.TargetRoomType ~= RoomType.ROOM_SUPERSECRET ) then
local target_room_data = level:GetRoomByIdx(door.TargetRoomIndex).Data
if (door.TargetRoomType == RoomType.ROOM_CHALLENGE and target_room_data.Shape == RoomShape.ROOMSHAPE_1x1)
or (door.CurrentRoomType == RoomType.ROOM_CHALLENGE and room:GetRoomShape() == RoomShape.ROOMSHAPE_1x1) then
door.TargetRoomType = RoomType.ROOM_TREASURE
door.CurrentRoomType = RoomType.ROOM_TREASURE
local sprite = door:GetSprite()
sprite:Load("gfx/arena_door.anm2", false)
sprite:LoadGraphics()
if room:IsClear() then
sprite:Play("Opened", true)
else
sprite:Play("Closed", true)
end
end
end
end
end
end
if EterepStarterValue ~= 1 then
EterepStarterValue = 1
end
if Eterepoptions2pickups >= 0 then
Eterepoptions2pickups = Eterepoptions2pickups - 1
end
if Eterepismenuopen == true and Eterepmenuscreen <= 2 and Input.IsButtonPressed(Keyboard.KEY_DELETE, 0) then
Eterepsetvalues = 1
Isaac.ExecuteCommand("restart")
end
if Eterepismenuopen == true and Eterepmenuscreen <= 2 and Input.IsButtonPressed(Keyboard.KEY_R, 0) then
Eterepsetvalues = 2
Isaac.ExecuteCommand("restart")
end
if Eterepoptions2pickups == 0 then
Eterepickupsdisappear = 0
end
if Eterepdeliriumcooldown >= 0 then
Eterepdeliriumcooldown = Eterepdeliriumcooldown - 1
end
if Eterepisaaclightbeam1 >= 0 then
Eterepisaaclightbeam1 = Eterepisaaclightbeam1 - 1
end
if Eterepisaaclightbeam2 >= 0 then
Eterepisaaclightbeam2 = Eterepisaaclightbeam2 - 1
end
if Eterepisaaclightbeam3 >= 0 then
Eterepisaaclightbeam3 = Eterepisaaclightbeam3 - 1
end
if Eterepisaaclightbeam4 >= 0 then
Eterepisaaclightbeam4 = Eterepisaaclightbeam4 - 1
end
if Game():GetFrameCount() % 8 == 5 then
EterepCustomAngle = Eterepernalrng:RandomInt(360)+1
end
if Eterepheartsforeternaltransformation >= 10 and Eterepeternaltransformation == 0 then
local player = Isaac.GetPlayer(0)
SFXManager():Play(SoundEffect.SOUND_POWERUP_SPEWER, 1, 0, false, 1)
if player:GetPlayerType() ~= PlayerType.PLAYER_THEFORGOTTEN then
player:AddNullCostume(EterepCostume)
else
player:AddNullCostume(EterepCostume_Forgotten)
end
Eterepeternaltransformation = 1
end
if EterepCountEternalMonsters >= 1 and Game():GetRoom():GetFrameCount() >= 6 and (Game().Difficulty == 0 or Game().Difficulty == 1) then
EterepCountEternalMonsters = 0
end
if EterepCountEternalMonsters >= 1 and Isaac.CountEnemies() == 0 and (Game().Difficulty == 2 or Game().Difficulty == 3) then
EterepCountEternalMonsters = 0
end
if EterepRotgut == true and Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE then
EterepRotgut = false
end
if (Game():GetRoom():GetFrameCount() == 5 and Game().Difficulty <= 1) or (Isaac.CountBosses() == 0 and Game():GetFrameCount() % 10 == 5 and Game().Difficulty >= 2) or (Isaac.CountBosses() == 0 and Game():GetRoom():GetType() == RoomType.ROOM_BOSSRUSH) or (#Isaac.FindByType(951, -1, -1, false, true) >= 1 and Game():GetFrameCount() % 40 == 5) then
local bosschancetoeternal1 = Eterepernalrng:RandomInt(100)+1
local bosschancetoeternal2 = Eterepernalrng:RandomInt(100)+1
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) == 0 then
Etereplacementernal = true
end
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) >= 1 then
Etereplacementernal = false
end
if bosschancetoeternal1 > EtereplaceChanceBoss then
Etereplacementernal = false
end
if bosschancetoeternal1 <= EterepReplaceChanceFinalBoss then
EterepFinalacementernal = true
end
if bosschancetoeternal1 > EterepReplaceChanceFinalBoss then
EterepFinalacementernal = false
end
end
if EterepUltraGreed == true and #Isaac.FindByType(406, -1, -1, false, true) == 0 then
EterepUltraGreed = false
end
if EterepGideon == true and #Isaac.FindByType(907, -1, -1, false, true) == 0 then
EterepGideon = false
end
if EterepMother == true and #Isaac.FindByType(912, -1, -1, false, true) == 0 then
EterepMother = false
end
if EterepSistersVis == true and #Isaac.FindByType(410, 0, 0, false, true) == 0 and Game():GetRoom():GetFrameCount() >= 3 then
EterepSistersVis = false
end
if Eterepdogmaangeldied == true and #Isaac.FindByType(950, 2, -1, false, true) == 0 then
Eterepdogmaangeldied = false
end
if Etereppoofersuperheal >= 1 then
Etereppoofersuperheal = Etereppoofersuperheal - 1
end
if EterepPoofer == 1 and #Isaac.FindByType(892, 0, 85, false, true) == 0 then
EterepPoofer = 0
end
if Eterepisaacisdamagedwithlokis == 1 or Eterepisaacisdamagedwithlokis == 2 then
Eterepisaacisdamagedwithlokis = Eterepisaacisdamagedwithlokis + 1
end
if Eterepisaacisdamagedwithlokis >= 3 then
Eterepisaacisdamagedwithlokis = 0
end
if EterepDamageLimit == 1 or Eterepheartsforeternaltransformation >= 10 or (Game():GetRoom():GetFrameCount() <= 1 and EterepTranformation == 1 and Game():GetLevel():GetStage() == LevelStage.STAGE1_1) then
player:ToPlayer():AddCacheFlags(CacheFlag.CACHE_DAMAGE)
end
if Eterepheartsforeternaltransformation >= 10 or (Game():GetRoom():GetFrameCount() <= 1 and EterepTranformation == 1 and Game():GetLevel():GetStage() == LevelStage.STAGE1_1) then
player:ToPlayer():AddCacheFlags(CacheFlag.CACHE_FLYING)
end
if EterepDamageLimit == 1 or Eterepheartsforeternaltransformation >= 10 or (Game():GetRoom():GetFrameCount() <= 1 and EterepTranformation == 1 and Game():GetLevel():GetStage() == LevelStage.STAGE1_1) then
player:ToPlayer():EvaluateItems()
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalarenacanappear == 1 then
for i = 1, Game():GetNumPlayers() do
if Isaac.GetPlayer(i-1):HasCollectible(396) then
Isaac.GetPlayer(i-1):RemoveCollectible(396)
Eterepventricle = Eterepventricle + 1
end
end
if Eterepeternalenemiescanappear == 1 and Game():GetRoom():GetFrameCount() >= 50 and Eterepeternalarenawave == 2 then
Eterepeternalenemiescanappear = 2
Eterepeternalarenawave = Eterepeternalarenawave + 1
end
if Eterepeternalenemiescanappear == 1 and Isaac.CountEnemies() == 0 and Game():GetRoom():GetFrameCount() >= 50 and Eterepeternalarenawave <= 1 then
Eterepeternalenemiescanappear = 2
Eterepeternalarenawave = Eterepeternalarenawave + 1
end
if Eterepeternalenemiescanappear == 3 and Isaac.CountEnemies() == 0 and Etereptimingfornewwave < 25 then
Etereptimingfornewwave = Etereptimingfornewwave + 1
end
if Eterepeternalenemiescanappear == 3 and Isaac.CountEnemies() == 0 and Etereptimingfornewwave >= 25 then
Eterepeternalenemiescanappear = 0
Etereptimingfornewwave = 0
end
if Eterepeternalenemiescanappear == 5 and Isaac.CountEnemies() == 0 and Game():GetRoom():GetFrameCount() == 20 then
Eterepeternalenemiescanappear = 2
Eterepeternalarenawave = 3
end
if Game():GetRoom():IsAmbushActive() then
for i = 1, Game():GetNumPlayers() do
Isaac.GetPlayer(i-1):SetActiveCharge(0)
Isaac.GetPlayer(i-1):TryRemoveTrinket(43)
Isaac.GetPlayer(i-1):TryRemoveTrinket(4)
Isaac.GetPlayer(i-1):DropPocketItem(0, Vector(130,150))
Isaac.GetPlayer(i-1):DropPocketItem(1, Vector(130,150))
Isaac.GetPlayer(i-1):DropPocketItem(2, Vector(130,150))
if Isaac.GetPlayer(i-1):HasCollectible(316) then
Isaac.GetPlayer(i-1):RemoveCollectible(316)
Isaac.Spawn(5, 100, 316, Vector(90,150), Vector(0,0), nil)
end
if Isaac.GetPlayer(i-1):HasCollectible(127) then
Isaac.GetPlayer(i-1):RemoveCollectible(127)
Isaac.Spawn(5, 100, 127, Vector(90,410), Vector(0,0), nil)
end
end
end
if MusicManager():GetCurrentMusicID() == 92 then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if grid:GetType() ~= 15 and grid:GetType() ~= 16 then
Game():GetRoom():RemoveGridEntity(i, 0, true)
end
end
end
local repentancefloor = (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B)
if repentancefloor then
MusicManager():Play(42, 0.1)
MusicManager():UpdateVolume()
MusicManager():Queue(Music.MUSIC_BOSS_OVER)
end
if not repentancefloor then
MusicManager():Play(83, 0.1)
MusicManager():UpdateVolume()
MusicManager():Queue(Music.MUSIC_BOSS_OVER)
end
end
if Game():GetRoom():IsAmbushActive() and Eterepitemwascollected == 0 then
local repentancefloor = (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B)
if repentancefloor then
Isaac.Spawn(5, 10, 0, Vector(270,280), Vector(0,0), nil)
Isaac.Spawn(5, 10, 0, Vector(370,280), Vector(0,0), nil)
Eterepitemwascollected = 1
Eterepeternalarenawave = 0
MusicManager():Play(41, 0.1)
MusicManager():UpdateVolume()
end
if not repentancefloor then
Isaac.Spawn(5, 10, 0, Vector(270,280), Vector(0,0), nil)
Isaac.Spawn(5, 10, 0, Vector(370,280), Vector(0,0), nil)
Eterepitemwascollected = 1
Eterepeternalarenawave = 0
MusicManager():Play(9, 0.1)
MusicManager():UpdateVolume()
end
end
if Game():GetRoom():GetFrameCount() == 1 and Eterepangelicitemappeared == 0 then
Eterepangelicitemappeared = 1
Isaac.Spawn(5, 100, Game():GetItemPool():GetCollectible(4, true, RNG():GetSeed()*Eterepernalrng:RandomInt(100)+1), Vector(320,280), Vector(0,0), nil)
Eterepeternalarenawave = 0
end
if Game():GetRoom():GetFrameCount() <= 10 then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if grid:GetType() ~= 15 and grid:GetType() ~= 16 then
Game():GetRoom():RemoveGridEntity(i, 0, true)
end
end
end
end
if Game():GetRoom():IsAmbushActive() then
local repentancefloor = (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B)
if Eterepeternalenemiescanappear == 0 and Isaac.CountEnemies() >= 1 and Eterepeternalarenawave <= 1 then
Eterepeternalenemiescanappear = 1
end
if Eterepeternalenemiescanappear == 0 and Eterepeternalarenawave == 2 then
Eterepeternalenemiescanappear = 1
end
if Eterepeternalenemiescanappear == 1 and Isaac.CountEnemies() == 0 and Game():GetRoom():GetFrameCount() <= 49 then
Eterepeternalenemiescanappear = 2
end
if Eterepeternalenemiescanappear == 4 and Isaac.CountEnemies() == 0 then
Eterepeternalenemiescanappear = 5
end
if Eterepeternalarenawave == 3 and Eterepeternalenemiescanappear == 0 and Isaac.CountEnemies() == 0 and Game():GetRoom():GetFrameCount() <= 1 then
Eterepeternalenemiescanappear = 5
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 1 and Game():GetLevel():GetStage() == LevelStage.STAGE1_2 then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(806, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(806, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(806, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
Isaac.Spawn(226, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(226, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(226, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(902, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(902, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(63, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(63, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(874, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(874, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(16, 2, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(16, 2, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(16, 2, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 2 and Game():GetLevel():GetStage() == LevelStage.STAGE1_2 then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(15, 4, 87, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(15, 4, 87, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
Isaac.Spawn(15, 2, 87, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(15, 2, 87, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(914, 0, 84, Vector(320,280), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(914, 0, 84, Vector(320,280), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(62, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(62, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(873, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(873, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(276, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(276, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 3 and Game():GetLevel():GetStage() == LevelStage.STAGE1_2 then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(244, 1, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(244, 1, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
Isaac.Spawn(207, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(207, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(901, 0, 89, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(901, 0, 89, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(20, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(20, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(813, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(813, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(813, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(61, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(61, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(61, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 1 and (Game():GetLevel():GetStage() == LevelStage.STAGE2_1 or Game():GetLevel():GetStage() == LevelStage.STAGE2_2) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(823, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(823, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
Isaac.Spawn(31, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(31, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(31, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(31, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(31, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(916, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(916, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(64, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(64, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(829, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(829, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(829, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(829, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(27, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(27, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(27, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 2 and (Game():GetLevel():GetStage() == LevelStage.STAGE2_1 or Game():GetLevel():GetStage() == LevelStage.STAGE2_2) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(820, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(820, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
Isaac.Spawn(23, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(23, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(23, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(23, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 2 and repentancefloor then
Isaac.Spawn(915, 0, 88, Vector(320,180), Vector(0,0), nil)
local position = Eterepernalrng:RandomInt(3)+1
if position == 1 then
Isaac.Spawn(915, 1, 0, Vector(140,180), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(260,180), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(380,180), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(500,180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(915, 1, 0, Vector(140,180), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(500,180), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(140,380), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(500,380), Vector(0,0), nil)
end
if position == 3 then
Isaac.Spawn(915, 1, 0, Vector(140,380), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(260,380), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(380,380), Vector(0,0), nil)
Isaac.Spawn(915, 1, 0, Vector(500,380), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(68, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(68, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
for i = 0, Game():GetRoom():GetGridSize() do
local grid = Game():GetRoom():GetGridEntity(i)
if grid then
if grid:GetType() ~= 15 and grid:GetType() ~= 16 then
Game():GetRoom():RemoveGridEntity(i, 0, true)
end
end
end
Isaac.Spawn(87, 1, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(87, 1, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(26, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(26, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(26, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 3 and (Game():GetLevel():GetStage() == LevelStage.STAGE2_1 or Game():GetLevel():GetStage() == LevelStage.STAGE2_2) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(821, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(821, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
Isaac.Spawn(244, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(244, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(244, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 2 and repentancefloor then
local megamaw = Isaac.Spawn(900, 0, 88, Vector(320,280), Vector(0,0), nil)
megamaw:GetSprite().Scale = Vector(0,0)
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local megamaw = Isaac.Spawn(262, 0, 88, Vector(320,250), Vector(0,0), nil)
megamaw:GetSprite().Scale = Vector(0,0)
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(25, 4, 87, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(25, 4, 87, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(25, 4, 87, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(24, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(24, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(24, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 1 and (Game():GetLevel():GetStage() == LevelStage.STAGE3_1 or Game():GetLevel():GetStage() == LevelStage.STAGE3_2) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(890, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(890, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(890, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(48, 1, 90, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(48, 1, 90, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(920, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(920, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local gate = Isaac.Spawn(263, 0, 88, Vector(320,250), Vector(0,0), nil)
gate:GetSprite().Scale = Vector(0,0)
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(891, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(891, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(891, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(41, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(41, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(41, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(41, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
SFXManager():Stop(84)
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 2 and (Game():GetLevel():GetStage() == LevelStage.STAGE3_1 or Game():GetLevel():GetStage() == LevelStage.STAGE3_2) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(834, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(834, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(834, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
local membrain = Isaac.Spawn(57, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
membrain.MaxHitPoints = membrain.MaxHitPoints * 1.75
membrain.HitPoints = membrain.MaxHitPoints
end
if position == 2 then
local membrain = Isaac.Spawn(57, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
membrain.MaxHitPoints = membrain.MaxHitPoints * 1.75
membrain.HitPoints = membrain.MaxHitPoints
end
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(903, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(903, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(65, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(65, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(883, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(883, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(883, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(55, 0, 87, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(55, 0, 87, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
SFXManager():Stop(84)
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 3 and (Game():GetLevel():GetStage() == LevelStage.STAGE3_1 or Game():GetLevel():GetStage() == LevelStage.STAGE3_2) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
local holybony = Isaac.Spawn(227, 1, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
holybony.MaxHitPoints = holybony.MaxHitPoints * 1.75
holybony.HitPoints = holybony.MaxHitPoints
end
if position == 2 then
local holybony = Isaac.Spawn(227, 1, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
holybony.MaxHitPoints = holybony.MaxHitPoints * 1.75
holybony.HitPoints = holybony.MaxHitPoints
end
end
if Eterepeternalarenawave == 1 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(52, 1, 90, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(52, 1, 90, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(904, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(904, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(43, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(43, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(24, 3, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(24, 3, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(39, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(39, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(39, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(39, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(39, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
SFXManager():Stop(84)
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 1 and (Game():GetLevel():GetStage() == LevelStage.STAGE4_1 or Game():GetLevel():GetStage() == LevelStage.STAGE4_2 or Game():GetLevel():GetStage() == LevelStage.STAGE4_3 or Game():GetLevel():GetStage() == LevelStage.STAGE5) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
local deadmeat = Isaac.Spawn(57, 2, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
deadmeat.MaxHitPoints = deadmeat.MaxHitPoints * 1.75
deadmeat.HitPoints = deadmeat.MaxHitPoints
end
if position == 2 then
local deadmeat = Isaac.Spawn(57, 2, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
deadmeat.MaxHitPoints = deadmeat.MaxHitPoints * 1.75
deadmeat.HitPoints = deadmeat.MaxHitPoints
end
end
if Eterepeternalarenawave == 1 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(82, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(83, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(83, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(82, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and repentancefloor then
local rotgut = Isaac.Spawn(911, 0, 84, Vector(320,280), Vector(0,0), nil)
rotgut.MaxHitPoints = 1500
rotgut.HitPoints = 1500
rotgut:GetSprite().Scale = Vector(0,0)
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local sintype = Eterepernalrng:RandomInt(7)+1
Isaac.Spawn(45+sintype, 0, 90, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(45+sintype, 0, 90, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(38, 3, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(38, 3, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(38, 3, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
local mamagurdy = Isaac.Spawn(266, 0, 88, Vector(320,220), Vector(0,0), nil)
mamagurdy:GetSprite().Scale = Vector(0,0)
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 2 and (Game():GetLevel():GetStage() == LevelStage.STAGE4_1 or Game():GetLevel():GetStage() == LevelStage.STAGE4_2 or Game():GetLevel():GetStage() == LevelStage.STAGE4_3 or Game():GetLevel():GetStage() == LevelStage.STAGE5) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
Isaac.Spawn(860, 0, 85, Vector(Eterepernalrng:RandomInt(441)+100,Eterepernalrng:RandomInt(41)+180), Vector(0,0), nil)
Isaac.Spawn(860, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(860, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if Eterepeternalarenawave == 1 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(46, 2, 90, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(38, 2, 90, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(38, 2, 90, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(46, 2, 90, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(909, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(909, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(66, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(66, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(854, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(854, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(68, 1, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(68, 1, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
Eterepeternalenemiescanappear = 4
end
end
if Eterepeternalenemiescanappear == 2 and Isaac.CountEnemies() == 0 and Eterepeternalarenawave <= 3 and Eterepeternalwave == 3 and (Game():GetLevel():GetStage() == LevelStage.STAGE4_1 or Game():GetLevel():GetStage() == LevelStage.STAGE4_2 or Game():GetLevel():GetStage() == LevelStage.STAGE4_3 or Game():GetLevel():GetStage() == LevelStage.STAGE5) then
SFXManager():Play(265)
if Eterepeternalarenawave == 1 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
local guttedfatty = Isaac.Spawn(831, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
guttedfatty.MaxHitPoints = guttedfatty.MaxHitPoints * 1.75
guttedfatty.HitPoints = guttedfatty.MaxHitPoints
end
if position == 2 then
local guttedfatty = Isaac.Spawn(831, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
guttedfatty.MaxHitPoints = guttedfatty.MaxHitPoints * 1.75
guttedfatty.HitPoints = guttedfatty.MaxHitPoints
end
end
if Eterepeternalarenawave == 1 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(97, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(98, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(98, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(97, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(910, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(910, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
if Eterepeternalarenawave == 2 and not repentancefloor then
local position = Eterepernalrng:RandomInt(2)+1
if position == 1 then
Isaac.Spawn(101, 0, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
if position == 2 then
Isaac.Spawn(101, 0, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
end
end
Eterepeternalenemiescanappear = 3
if Eterepeternalarenawave == 3 and repentancefloor then
Isaac.Spawn(857, 0, 85, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(857, 0, 85, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
if Eterepeternalarenawave == 3 and not repentancefloor then
Isaac.Spawn(81, 1, 88, Vector(Eterepernalrng:RandomInt(61)+100,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Isaac.Spawn(81, 1, 88, Vector(Eterepernalrng:RandomInt(61)+480,Eterepernalrng:RandomInt(201)+180), Vector(0,0), nil)
Eterepeternalenemiescanappear = 4
end
end
end
end
if EterepDelirium == 1 and Etereplacementernal == true then
Etereplacementernal = false
end
local entities = Isaac.GetRoomEntities()
for i = 1, #entities do
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalenemiescanappear == 1 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type == 1000 and entities[i].Variant == 15 then
entities[i]:Remove()
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalenemiescanappear == 1 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type == 1000 and entities[i].Variant >= 22 and entities[i].Variant <= 26 then
entities[i]:Remove()
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalenemiescanappear == 1 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type >= 10 and entities[i].Type <= 999 and entities[i].Type ~= 866 then
entities[i]:Remove()
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalenemiescanappear == 5 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type >= 10 and entities[i].Type <= 999 and entities[i].Type ~= 866 then
entities[i]:Remove()
SFXManager():Stop(84)
SFXManager():Stop(265)
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalenemiescanappear == 5 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type == 1000 and entities[i].Variant == 15 then
entities[i]:Remove()
SFXManager():Stop(84)
SFXManager():Stop(265)
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Etereptimingfornewwave >= 1 and Etereptimingfornewwave <= 9 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type >= 10 and entities[i].Type <= 999 and entities[i].Type ~= 866 then
entities[i]:Remove()
SFXManager():Stop(84)
SFXManager():Stop(265)
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Etereptimingfornewwave >= 1 and Etereptimingfornewwave <= 9 and Eterepeternalarenacanappear == 1 and Isaac.CountEnemies() >= 1 and entities[i].Type == 1000 and entities[i].Variant == 15 then
entities[i]:Remove()
SFXManager():Stop(84)
SFXManager():Stop(265)
end
if EterepDelirium == 1 and entities[i].MaxHitPoints == 11111 then
local projectilenewcolor = Color(2,2,2,1,0,0,0)
projectilenewcolor:SetColorize(2,2,2,1)
entities[i]:SetColor(projectilenewcolor,1,1,false,false)
end
if entities[i].Type == 92 and entities[i].Variant == 1 and entities[i].SubType == 0 and entities[i].Parent ~= nil and entities[i].Parent.Size == 17 and entities[i].Size ~= 17 then
entities[i]:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mask and half heart.png")
entities[i]:GetSprite():LoadGraphics()
entities[i].MaxHitPoints = 80
entities[i].HitPoints = 80
entities[i].Mass = 50
entities[i].SpriteScale = Vector(1.25,1.25)
end
if entities[i].Type == 93 and entities[i].Variant == 0 and entities[i].Parent ~= nil and entities[i].Parent.Type == 92 and entities[i].Parent.SubType == 85 and entities[i].FrameCount <= 30 then
entities[i]:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_heart.png")
entities[i]:GetSprite():LoadGraphics()
entities[i].SpriteScale = Vector(1.25,1.25)
entities[i].GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
if entities[i].Type == 93 and entities[i].Variant == 1 and entities[i].Parent ~= nil and entities[i].Parent.Type == 92 and entities[i].Parent.Mass == 50 and entities[i].FrameCount <= 30 then
entities[i]:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_mask and half heart.png")
entities[i]:GetSprite():LoadGraphics()
entities[i].SpriteScale = Vector(1.25,1.25)
entities[i].GridCollisionClass = EntityGridCollisionClass.GRIDCOLL_WALLS
end
if entities[i].Type == 229 and entities[i].SubType >= 77 and entities[i].SubType <= 79 and not entities[i]:HasEntityFlags(1<<5) and not entities[i]:HasEntityFlags(1<<6) and not entities[i]:HasEntityFlags(1<<7) and not entities[i]:HasEntityFlags(1<<8) and not entities[i]:HasEntityFlags(1<<9) and not entities[i]:HasEntityFlags(1<<10) and not entities[i]:HasEntityFlags(1<<11) and not entities[i]:HasEntityFlags(1<<12) and not entities[i]:HasEntityFlags(1<<51) then
entities[i]:SetColor(Color(1,1,1,1,0,0,0),1,1,false,false)
end
if entities[i].Type == 244 and entities[i].Variant == 2 and entities[i].SubType == 1 and entities[i].Parent ~= nil and entities[i].Parent.Mass == 111 and entities[i].Mass ~= 111 then
entities[i]:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_tainted round worm.png")
entities[i]:GetSprite():LoadGraphics()
entities[i].SpriteScale = Vector(1.25,1.25)
entities[i].Size = entities[i].Size * 1.25
entities[i].MaxHitPoints = 140
entities[i].Mass = 111
end
if entities[i].Type == 246 and entities[i].Size == 18 and not entities[i]:HasEntityFlags(1<<5) and not entities[i]:HasEntityFlags(1<<6) and not entities[i]:HasEntityFlags(1<<7) and not entities[i]:HasEntityFlags(1<<8) and not entities[i]:HasEntityFlags(1<<9) and not entities[i]:HasEntityFlags(1<<10) and not entities[i]:HasEntityFlags(1<<11) and not entities[i]:HasEntityFlags(1<<12) and not entities[i]:HasEntityFlags(1<<51) then
entities[i]:SetColor(Color(1,1,1,1,0,0,0),1,1,false,false)
end
if entities[i].Type == 295 and entities[i].SubType == 33333 and entities[i].SpawnerType == 402 and not entities[i]:HasEntityFlags(1<<5) and not entities[i]:HasEntityFlags(1<<6) and not entities[i]:HasEntityFlags(1<<7) and not entities[i]:HasEntityFlags(1<<8) and not entities[i]:HasEntityFlags(1<<9) and not entities[i]:HasEntityFlags(1<<10) and not entities[i]:HasEntityFlags(1<<11) and not entities[i]:HasEntityFlags(1<<12) and not entities[i]:HasEntityFlags(1<<51) then
entities[i]:SetColor(Color(1,1,1,1,0,0,0),1,1,false,false)
end
if Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE and Eterepeternalarenacanappear == 1 and Game():GetRoom():GetFrameCount() >= 20 and entities[i].Type == 5 and entities[i].Variant == 100 and entities[i].SubType == 0 then
entities[i]:Remove()
end
end
if Eterepventricle >= 1 and Game():GetRoom():GetType() ~= RoomType.ROOM_CHALLENGE then
Isaac.Spawn(5, 100, 396, Isaac.GetPlayer(0).Position, Vector(0,0), nil)
Eterepventricle = Eterepventricle - 1
end
end
mod:AddCallback(ModCallbacks.MC_POST_UPDATE , mod.EterepSpecialChanges)

function mod:EterepCustomDeathTriggers(npc)
if (npc.SubType == 44 or (npc.SubType >= 77 and npc.SubType <= 90)) and Game():GetRoom():GetType() == RoomType.ROOM_DEFAULT and Eterepernalrng:RandomInt(100)+1 <= EterepMonstersreward and npc.SpawnerType <= 1 and not npc:IsBoss() then
local drop = Eterepernalrng:RandomInt(8)+1
if drop <= 2 then
Isaac.Spawn(5, 20, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
if drop == 3 then
Isaac.Spawn(5, 10, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
if drop == 4 then
Isaac.Spawn(5, 30, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
if drop == 5 then
Isaac.Spawn(5, 40, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
if drop == 6 then
Isaac.Spawn(5, 70, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
if drop == 7 then
Isaac.Spawn(5, 300, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
if drop == 8 then
Isaac.Spawn(5, 301, 0, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
end
if npc.SubType >= 83 and npc.SubType <= 93 and npc:IsDead() and npc:IsBoss() and EterepHeartSpawn == true then
if Eterepernalrng:RandomInt(100)+1 <= EterepBossesreward then
Isaac.Spawn(5, 10, 4, npc.Position, Vector.FromAngle(45):Resized(8.5), npc)
end
EterepHeartSpawn = false
end
end
mod:AddCallback(ModCallbacks.MC_POST_NPC_DEATH, mod.EterepCustomDeathTriggers)

function mod:EterepEffectRender(effect,offset)
if effect.Variant == 11 and effect.SubType == 83 and effect.SpawnerVariant == 0 and Game():GetRoom():GetRenderMode() == 5 then
local Eterepprojectilereflect = Sprite()
Eterepprojectilereflect:Load("gfx/1000.011_bullet poof.anm2",true)
Eterepprojectilereflect:SetFrame("Poof",effect:GetSprite():GetFrame())
Eterepprojectilereflect:ReplaceSpritesheet(0, "gfx/Sprites/e_wraith projectile.png")
Eterepprojectilereflect:LoadGraphics()
Eterepprojectilereflect.Scale = Vector(0.85,0.85)
Eterepprojectilereflect:Render(Isaac.WorldToRenderPosition(effect.Position)+Vector(-20,0))
end
if effect.Variant == 11 and effect.SubType == 83 and effect.SpawnerVariant == 3 and Game():GetRoom():GetRenderMode() == 5 then
local Eterepprojectilereflect = Sprite()
Eterepprojectilereflect:Load("gfx/1000.011_bullet poof.anm2",true)
Eterepprojectilereflect:SetFrame("Poof",effect:GetSprite():GetFrame())
Eterepprojectilereflect:ReplaceSpritesheet(0, "gfx/Sprites/e_wraith projectile_dross.png")
Eterepprojectilereflect:LoadGraphics()
Eterepprojectilereflect.Scale = Vector(0.85,0.85)
Eterepprojectilereflect:Render(Isaac.WorldToRenderPosition(effect.Position)+Vector(-20,0))
end
end
mod:AddCallback(ModCallbacks.MC_POST_EFFECT_RENDER,mod.EterepEffectRender)

function mod:EterepProjectileRender(projectile,offset)
if projectile.Variant == 3 and projectile.SubType == 720 and Game():GetRoom():GetRenderMode() == 5 then
local Eterepprojectilereflect=Sprite()
Eterepprojectilereflect:Load("gfx/009.003_puke projectile.anm2",true)
Eterepprojectilereflect:SetFrame("RegularTear6",projectile:GetSprite():GetFrame())
Eterepprojectilereflect:Render(Isaac.WorldToRenderPosition(projectile.Position)+Vector(-20,(-projectile.Height-15)*0.5))
end
if projectile.Variant == 0 and projectile.SubType == 720 and Game():GetRoom():GetRenderMode() == 5 then
local Eterepprojectilereflect=Sprite()
Eterepprojectilereflect:Load("gfx/009.004_tear projectile.anm2",true)
Eterepprojectilereflect:SetFrame("RegularTear6",projectile:GetSprite():GetFrame())
Eterepprojectilereflect:Render(Isaac.WorldToRenderPosition(projectile.Position)+Vector(-20,(-projectile.Height-15)*0.5))
end
end
mod:AddCallback(ModCallbacks.MC_POST_PROJECTILE_RENDER,mod.EterepProjectileRender)

function mod:EterepProjectilesInit(projectile)
if EterepLamb == 1 and projectile.SpawnerType == 273 and projectile.SpawnerVariant == 10 and #Isaac.FindByType(273, 10, 0, false, true) == 0 and #Isaac.FindByType(273, 10, 88, false, true) >= 1 then
projectile.Color = Color(0.11,1.5,2,1,0,0,0)
end
if projectile.SubType == 660 and projectile.Variant == 0 then
projectile:Remove()
end
if projectile.SubType == 678 and projectile.SpawnerType == 812 then
local projectile1 = Isaac.Spawn(9, projectile.Variant, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()):Resized(projectile.Velocity:Length()*0.8), projectile)
projectile1:ToProjectile().FallingAccel = -0.05
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.SubType >= 691 and projectile.SubType <= 700 and projectile.Variant == 0 then
projectile.Velocity = projectile.Velocity * (projectile.SubType-680) / 10
end
if projectile.SubType == 705 and projectile.Variant == 0 then
projectile.Velocity = projectile.Velocity * (Eterepernalrng:RandomInt(21)+20) * 0.1
end
if projectile.SubType == 678 and projectile.Variant == 1 and projectile.SpawnerType == 227 then
projectile.Velocity = projectile.Velocity * (Eterepernalrng:RandomInt(171)+30) * 0.01
end
if projectile.SubType == 202 and projectile.Variant == 2 then
projectile:GetSprite():Load("gfx/009.002_Fire Projectile.anm2",true)
projectile:GetSprite():LoadGraphics()
projectile:GetSprite():Play("RegularTear6",true)
if projectile.SpawnerType == 262 then
projectile:GetSprite():ReplaceSpritesheet(0, "gfx/effects/effect_005.1_megamawfire.png")
projectile:GetSprite():LoadGraphics()
end
end
if projectile.SubType == 678 and projectile.Variant == 2 then
projectile.Height = -30
projectile.FallingAccel = 0
if projectile.SpawnerType == 262 or projectile.SpawnerType == 921 then
projectile:GetSprite():ReplaceSpritesheet(0, "gfx/effects/effect_005.1_megamawfire.png")
projectile:GetSprite():LoadGraphics()
end
projectile.SpriteOffset = Vector(0,10)
end
if (projectile.Variant == 0 or projectile.Variant == 3) and projectile.SubType == 720 then
projectile:GetSprite():ReplaceSpritesheet(0, "gfx/theresnothinghere.png")
projectile:GetSprite():LoadGraphics()
end
if projectile.Variant == 6 and projectile.SubType == 201 then
projectile.Velocity = projectile.Velocity * 1.8
end
if projectile.Variant == 12 and projectile.SubType == 678 and projectile.SpawnerType == 79 then
projectile:AddProjectileFlags(ProjectileFlags.SMART)
end
if projectile.Variant == 12 and projectile.SubType == 679 and projectile.SpawnerType == 79 and projectile.SpawnerVariant == 1 then
projectile.Velocity = projectile.Velocity * 1.55
end
if projectile.Variant == 12 and projectile.SubType == 679 and projectile.SpawnerType == 79 and projectile.SpawnerVariant == 11 then
projectile.Velocity = projectile.Velocity * 1.3
end
end
mod:AddCallback(ModCallbacks.MC_POST_PROJECTILE_INIT, mod.EterepProjectilesInit)

function mod:EterepProjectilesUpdate(projectile)
if projectile.FrameCount <= 1 then
if projectile.SubType == 718 then
local projectile1 = Isaac.Spawn(9, projectile.Variant, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-15):Resized(projectile.Velocity:Length()), projectile)
projectile1:ToProjectile().FallingAccel = -0.05
local projectile2 = Isaac.Spawn(9, projectile.Variant, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+15):Resized(projectile.Velocity:Length()), projectile)
projectile2:ToProjectile().FallingAccel = -0.05
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.SubType == 679 and projectile.Variant == 1 and projectile.SpawnerType == 889 and Eterepernalrng:RandomInt(2)+1 == 1 then
local projectile1 = Isaac.Spawn(9, 1, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-12):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 1, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+12):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.SubType == 708 and projectile.Variant == 0 then
projectile:Remove()
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-12):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+12):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
if projectile.SubType == 716 and projectile.SpawnerType == 244 and Eterepernalrng:RandomInt(3)+1 <= 2 then
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-25):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+25):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.Variant ~= 14 and projectile.Scale > 1 and projectile.SpawnerEntity ~= nil and projectile.SpawnerEntity.SubType >= 80 and projectile.SpawnerEntity.SubType <= 106 and projectile.SpawnerEntity.SpriteScale.X > 1 and not projectile:HasProjectileFlags(ProjectileFlags.BURST8) then
projectile.Scale = projectile.Scale/projectile.SpawnerEntity.SpriteScale.X
projectile.Mass = 7+projectile.Scale
end
if projectile.Variant ~= 14 and projectile.Scale > 1 and projectile.SpawnerEntity ~= nil and projectile.SpawnerEntity:GetData().Etereternaliseternal ~= nil and projectile.SpawnerEntity:GetData().Etereternaliseternal == 1 and projectile.SpawnerEntity.SpriteScale.X > 1 and not projectile:HasProjectileFlags(ProjectileFlags.BURST8) then
projectile.Scale = projectile.Scale/projectile.SpawnerEntity.SpriteScale.X
projectile.Mass = 7+projectile.Scale
end
if projectile.SubType == 202 and projectile.SpawnerType == 9 then
projectile.CurvingStrength = -0.02
projectile:AddProjectileFlags(ProjectileFlags.NO_WALL_COLLIDE)
end
if projectile.SubType == 202 and projectile.SpawnerType == 909 then
projectile.CurvingStrength = 0.0075
projectile:AddProjectileFlags(ProjectileFlags.NO_WALL_COLLIDE)
end
if projectile.SubType == 654 and projectile.Variant == 0 then
projectile:AddScale(1.15)
end
if projectile.SubType == 659 then
projectile:GetSprite().Rotation = (projectile.Velocity):GetAngleDegrees()
end
if projectile.SubType == 675 and projectile.Variant == 0 then
projectile.SpriteScale = Vector(1.5, 1.5)
projectile:SetSize(10, Vector(1, 1), 10)
projectile.Color = Color(0.11,1.5,2,1,0,0,0)
end
if projectile.SubType == 678 and projectile.SpawnerType == 912 and Eterepmothermaggotattack <= 3 then
projectile.Velocity = projectile.Velocity * Eterepernalrng:RandomInt(101)*0.01
projectile.FallingAccel = -0.06
end
if projectile.SubType == 678 and projectile.Variant == 0 and projectile.SpawnerType == 838 then
for i = 1,5 do
local projectile1 = Isaac.Spawn(9, 0, 678, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-60+20*i):Resized(projectile.Velocity:Length()), projectile)
local projectilenewcolor = Color(1,1,1,1,0.44,0.38,0.1)
projectilenewcolor:SetColorize(2.37,2.14,0.43,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 684 and projectile.Variant == 0 and projectile.SpawnerType == 862 and projectile.FrameCount <= 1 then
projectile.Height = -15
end
if projectile.SubType == 703 and projectile.SpawnerType == 904 then
projectile.Color = Color(5,1,1,1,0,0,0)
end
if projectile.SubType == 714 and projectile.Variant == 0 then
projectile.SpriteScale = Vector(1.75, 1.75)
projectile:SetSize(10, Vector(1, 1), 10)
end
if projectile.SubType == 719 and projectile.Variant == 0 then
if projectile.SpawnerType ~= 865 and projectile.SpawnerType ~= 911 then
projectile.FallingAccel = -0.1
end
end
if projectile.SubType == 721 and projectile.Variant == 0 then
projectile.FallingAccel = -0.1
end
if projectile.SubType == 33333 and projectile.Variant == 0 and projectile.SpawnerType == 402 then
projectile.Color = Color(1,1,1,1,0,0,0)
end
if projectile.Variant == 1 and ((projectile.SpawnerType == 25 and projectile.SubType == 678) or projectile.SubType == 684) then
projectile.Color = Color(12,12,12,1,0,0,0)
projectile:GetSprite().Scale = Vector(1.35,1.35)
if projectile.SubType == 684 then
projectile.FallingAccel = -0.02
projectile:GetSprite().Scale = Vector(1.5,1.5)
end
end
if projectile.Variant >= 980 and projectile.Variant <= 983 then
projectile:GetSprite():Play("RegularTear6",true)
projectile:GetSprite():LoadGraphics()
end
end
if projectile:IsDead() then
if projectile.Variant ~= 14 and projectile.Scale > 1 and projectile.Mass > 8 and projectile.Mass <= 12 and not projectile:HasProjectileFlags(ProjectileFlags.BURST8) then
projectile.Scale = projectile.Mass-7
end
if projectile.SubType == 720 and (projectile.Variant == 0 or projectile.Variant == 3) then
local effect = Isaac.Spawn(1000, 11, 83, projectile.Position, Vector(0,0), projectile)
effect.SpriteOffset = Vector(0,-projectile.Height)
projectile:Remove()
end
if projectile.SubType == 678 and projectile.Variant == 1 and projectile.SpawnerType == 25 then
for i = 1,3 do
local projectile1 = Isaac.Spawn(9, 1, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+120*i):Resized(10), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 658 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 23, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 120
end
if projectile.SubType == 661 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 22, 0, projectile.Position, Vector(0,0), projectile)
creep:GetSprite().Scale = Vector(3,3)
creep:ToEffect().Timeout = 210
end
if projectile.SubType == 663 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 25, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 250
creep:GetSprite().Scale = Vector(3,3)
end
if projectile.SubType == 665 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 25, 0, projectile.Position, Vector(0,0), projectile)
creep:GetSprite().Scale = Vector(2,2)
end
if projectile.SubType == 667 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 25, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 200
creep:GetSprite().Scale = Vector(1.3,1.3)
end
if (projectile.SubType == 669 or projectile.SubType == 670) and projectile.Variant == 0 then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+(projectile.SubType-669)*45+90*i):Resized(6), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
if projectile.SubType == 674 and projectile.Variant == 0 then
for i = 1,6 do
local projectile1 = Isaac.Spawn(9, 0, 675, projectile.Position+Vector.FromAngle(EterepCustomAngle+60*i):Resized(20), Vector.FromAngle(EterepCustomAngle+60*i):Resized(5), projectile)
projectile1.HitPoints = Eterepernalrng:RandomInt(360)+1
projectile1:ToProjectile().FallingAccel = 0.05
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 675 and projectile.Variant == 0 then
for i = 1,6 do
local newprojectile = Isaac.Spawn(9, 0, 0, projectile.Position+Vector.FromAngle(EterepCustomAngle+projectile.HitPoints+60*i):Resized(20), Vector.FromAngle(EterepCustomAngle+projectile.HitPoints+60*i):Resized(10), projectile)
newprojectile.Color = Color(0.11,1.5,2,1,0,0,0)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
newprojectile:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 677 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 26, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 280
creep.HitPoints = 78
creep.Color = Color(0.5,0.5,0.5,1,0.6509,0.4078,0.1607)
end
if projectile.SubType == 679 and projectile.Variant == 0 then
Isaac.Spawn(1000, 15, 0, projectile.Position, Vector(0,0), projectile)
local gush = Isaac.Spawn(309, 0, 0, projectile.Position, Vector(0,0), projectile)
gush:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
projectile:Remove()
end
if projectile.SubType == 680 and projectile.Variant == 0 then
if projectile.SpawnerVariant == 1 then
Isaac.Spawn(33, 10, 0, projectile.Position, Vector(0,0), projectile)
end
if projectile.SpawnerType == 910 then
local creep = Isaac.Spawn(1000, 23, 0, projectile.Position, Vector(0,0), projectile)
creep:GetSprite().Scale = Vector(2,2)
end
end
if projectile.SubType == 681 and projectile.Variant == 0 then
for i = 1,8 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position+Vector.FromAngle(45*i):Resized(20), Vector.FromAngle(45*i):Resized(9), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
if projectile.SpawnerType == 274 or projectile.SpawnerType == 275 then
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.92,0.43,0,1)
projectile1.Color = projectilenewcolor
end
end
local projectile2 = Isaac.Spawn(1000, 11, 0, projectile.Position+Vector(0,-13), Vector(0,0), projectile)
projectile2.SpriteScale = Vector(1.2,1.2)
if projectile.SpawnerType == 274 or projectile.SpawnerType == 275 then
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(0.92,0.43,0,1)
projectile2.Color = projectilenewcolor
end
SFXManager():Play(30)
projectile:Remove()
end
if projectile.SubType == 682 and projectile.Variant == 0 then
local creeep = Isaac.Spawn(1000, 26, 0, projectile.Position, Vector(0,0), projectile)
creeep:GetSprite().Scale = Vector(0,0)
end
if projectile.SubType == 683 and projectile.Variant == 0 then
for i = 1,8 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(5.25), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Kill()
end
if projectile.SubType == 686 and projectile.Variant == 0 then
local creeep = Isaac.Spawn(1000, 26, 0, projectile.Position, Vector(0,0), projectile)
creeep:GetSprite().Scale = Vector(2,2)
end
if projectile.SubType == 688 and projectile.Variant == 0 and projectile.SpawnerType == 888 then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 688, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(projectile.Velocity:Length()), projectile)
projectile1:GetSprite().Scale = Vector(1.5,1.5)
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Kill()
end
if projectile.SubType == 688 and projectile.Variant == 0 and projectile.SpawnerType == 9 then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 689, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(projectile.Velocity:Length()), projectile)
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Kill()
end
if projectile.SubType == 690 and projectile.Variant == 0 then
local projectile1 = Isaac.Spawn(9, 0, 689, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+155):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+155):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 0, 689, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+205):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+205):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Kill()
end
if projectile.SubType == 714 and projectile.Variant == 0 then
for i = 1,6 do
local newprojectile = Isaac.Spawn(9, 0, 0, projectile.Position+Vector.FromAngle(EterepCustomAngle+projectile.HitPoints+60*i):Resized(20), Vector.FromAngle(EterepCustomAngle+projectile.HitPoints+60*i):Resized(10), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
newprojectile:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 717 and projectile.Variant == 0 then
for i = 1,8 do
local projectile1 = Isaac.Spawn(9, 0, 202, projectile.Position, Vector.FromAngle(45*i):Resized(7), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 719 and projectile.Variant == 0 and projectile.SpawnerType == 909 then
for i = 1,3 do
local projectile1 = Isaac.Spawn(9, 0, 721, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120+30*i):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120+30*i):Resized(projectile.Velocity:Length()), projectile)
projectile1:GetSprite().Scale = Vector(1.5,1.5)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
for i = 1,6 do
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position+Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
projectile.SubType = 0
projectile:Remove()
end
if projectile.SubType == 721 and projectile.Variant == 0 and (projectile.SpawnerType == 9 or projectile.SpawnerType == 909) then
for i = 1,15 do
local projectile1 = Isaac.Spawn(9, 0, 719, projectile.Position, Vector.FromAngle(EterepCustomAngle+24*i):Resized(10), projectile)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
for i = 1,2 do
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position+Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
projectile.SubType = 0
projectile:Remove()
end
if projectile.SubType == 729 and projectile.Variant == 0 then
projectile:Remove()
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position, Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if projectile.SubType >= 730 and projectile.SubType <= 733 and projectile.Variant == 0 then
projectile:Remove()
Isaac.Spawn(24, 0, projectile.SubType-630, projectile.Position, Vector(0,0), projectile)
end
if projectile.Variant == 1 and projectile.SubType == 684 then
local projectile1 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+160):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+160):Resized(projectile.Velocity:Length()), projectile)
local projectile3 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+200):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+200):Resized(projectile.Velocity:Length()), projectile)
local projectile4 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+240):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+240):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile3:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile4:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
if projectile.SubType == 683 and projectile.Variant == 3 then
local creeep = Isaac.Spawn(1000, 94, 0, projectile.Position, Vector(0,0), projectile)
creeep:GetSprite().Scale = Vector(0,0)
end
if projectile.SubType == 685 and projectile.Variant == 3 then
local creep = Isaac.Spawn(1000, 94, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 220
creep:GetSprite().Scale = Vector(0,0)
end
if projectile.Variant == 8 and (projectile.SubType == 150 or projectile.SubType == 151) then
for i = 1,8 do
Isaac.Spawn(9, 0, 0, projectile.Position+Vector.FromAngle(45*i):Resized(9)+Vector(0,8), Vector.FromAngle(45*i):Resized(9), projectile)
end
if projectile.SubType == 151 then
Isaac.Spawn(4, 16, 1, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()):Resized(projectile.Velocity:Length()*0.55), projectile)
end
SFXManager():Play(77)
projectile:Remove()
end
if projectile.Variant == 15 and EterepMother == true then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 684, projectile.Position, Vector.FromAngle(45+90*i):Resized(10), projectile)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
if projectile.Variant >= 980 and projectile.Variant <= 983 then
projectile.Variant = 0
end
end
if (projectile.SubType == 719 or projectile.SubType == 721) and projectile.Variant == 0 then
if projectile.FrameCount <= 50 and projectile.SpawnerType == 909 then
projectile.Velocity = projectile.Velocity * 0.93 + (Isaac.GetPlayer(0).Position - projectile.Position):Resized(1.2)
end
if projectile.FrameCount >= 50 and projectile.SpawnerType == 909 and projectile.Velocity:Length() <= 12 then
projectile.Velocity = projectile.Velocity * 1.2
end
if projectile.SpawnerType == 910 and projectile.FrameCount % 5 == 0 then
projectile.CurvingStrength = projectile.CurvingStrength * -1
end
if projectile.SpawnerType == 912 then
projectile.FallingSpeed = -0.05
projectile.FallingAccel = -0.05
if motherlanded == 0 or #Isaac.FindByType(912, 10, -1, false, true) == 0 then
for i = 1,4 do
local newprojectile = Isaac.Spawn(9, 0, 719, projectile.Position, Vector.FromAngle(45+90*i):Resized(11), projectile)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
newprojectile.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
newprojectile:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
end
end
if MusicManager():GetCurrentMusicID() == 45 and (projectile.Position.Y <= -200 or projectile.Position.X <= -200 or projectile.Position.X >= 850) then
projectile:Remove()
end
if (projectile.SubType == 678 or projectile.SubType == 703 or projectile.SubType == 708) and projectile.SpawnerType == 904 then
projectile.Height = -10
end
if Eterepdogmascreamed == 1 and projectile.SubType == 678 and projectile.SpawnerType == 950 and projectile.SpawnerVariant == 0 and projectile.HitPoints ~= 59 then
projectile.Height = -15
projectile.Velocity = Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-160+projectile.Velocity:Length()*1.5):Resized(projectile.Velocity:Length()*0.55)
projectile.FallingAccel = -0.096
projectile.HitPoints = 59
end
if projectile.SubType == 678 and projectile.SpawnerType == 904 and projectile.SpawnerVariant == 10 and projectile.FrameCount == 15 then
projectile:Remove()
local projectile1 = Isaac.Spawn(9, 0, 678, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-18):Resized(projectile.Velocity:Length()), projectile)
projectile1:ToProjectile().FallingAccel = -0.05
local projectile2 = Isaac.Spawn(9, 0, 678, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+18):Resized(projectile.Velocity:Length()), projectile)
projectile2:ToProjectile().FallingAccel = -0.05
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
if projectile.SubType == 654 and projectile.Variant == 0 and Eterepspecialhalfheartattack == true then
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+-90):Resized(10), projectile)
local projectile2 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+90):Resized(10), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.SubType == 662 then
projectile.FallingSpeed = -0.0325
projectile.FallingAccel = -0.0325
if #Isaac.FindByType(270, 0, 88, false, true) == 0 and projectile.SpawnerType == 927 then
projectile:Remove()
end
if projectile.SpawnerType ~= 9 then
projectile.Velocity = projectile.Velocity * 0.935 + (Isaac.GetPlayer(0).Position+Vector(Eterepernalrng:RandomInt(200)-100,Eterepernalrng:RandomInt(200)-100) - projectile.Position):Resized(0.65)
if ((projectile.FrameCount % 24 == 10 and projectile:HasEntityFlags(ProjectileFlags.SLOWED)) or (projectile.FrameCount % 12 == 5 and not projectile:HasEntityFlags(ProjectileFlags.SLOWED))) and Eterepernalrng:RandomInt(3) >= 2 then
local projectile1 = Isaac.Spawn(9, 0, 662, projectile.Position, Vector.FromAngle((Isaac.GetPlayer(0).Position - projectile.Position):GetAngleDegrees()):Resized(8.5), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
end
if projectile.SubType == 664 and projectile.Variant == 0 and projectile.MaxHitPoints <= 40 and projectile.FrameCount >= 14 and #Isaac.FindByType(270, 0, 88, false, true) >= 1 then
local projectile1 = Isaac.Spawn(9, 0, 664, projectile.Position, Vector.FromAngle((Isaac.GetPlayer(0).Position - projectile.Position):GetAngleDegrees()+Eterepernalrng:RandomInt(51)+330):Resized(9), projectile)
projectile1.MaxHitPoints = projectile.MaxHitPoints + 1
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.SubType == 664 and projectile.Variant == 0 and projectile.MaxHitPoints <= 40 then
projectile.Velocity = projectile.Velocity * 0.97
projectile.FallingSpeed = 0
projectile.FallingAccel = 0
end
if projectile.SubType == 666 and projectile.Variant == 0 then
projectile.Velocity = projectile.Velocity * 0.92 + (Isaac.GetPlayer(0).Position - projectile.Position):Resized(1.1)
end
if projectile.SubType == 672 and projectile.Variant == 0 then
projectile.Height = -15
end
if projectile.SubType == 678 and projectile.Variant == 0 and projectile.SpawnerType == 41 and projectile.SpawnerVariant == 4 then
projectile.FallingSpeed = -0.04
projectile.FallingAccel = -0.04
end
if projectile.SubType == 680 and projectile.Variant == 0 then
projectile.Velocity = projectile.Velocity * 0.9 + (Isaac.GetPlayer(0).Position - projectile.Position):Resized(0.9)
end
if projectile.SubType == 684 and projectile.Variant == 0 then
projectile.FallingSpeed = 0
projectile.FallingAccel = 0
if projectile.FrameCount % 3 == 1 and projectile.SpawnerType == 413 then
local creep = Isaac.Spawn(1000, 22, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 25
end
if projectile.SpawnerType ~= 9 and projectile.SpawnerType ~= 912 and not projectile:HasProjectileFlags(1<<42) then
projectile:AddProjectileFlags(1<<42)
end
end
if projectile.SubType == 685 and projectile.Variant == 0 then
projectile.FallingSpeed = 0
projectile.FallingAccel = 0
if projectile.FrameCount % 48 == 14 then
projectile.CurvingStrength = 0.0425
end
if projectile.FrameCount % 48 >= 21 and projectile.FrameCount % 48 <= 28 then
projectile.Velocity = projectile.Velocity * 1.1
end
if projectile.FrameCount % 48 == 23 then
projectile.CurvingStrength = 0.012
end
if projectile.FrameCount % 48 >= 29 and projectile.FrameCount % 48 <= 33 then
projectile.Velocity = projectile.Velocity * 0.87
end
if projectile.FrameCount == 79 then
projectile.CurvingStrength = 0
projectile.Velocity = projectile.Velocity * 1.2
end
end
if projectile.SubType >= 688 and projectile.Variant == 0 and projectile.SubType <= 690 and projectile.FrameCount % 10 == 5 then
projectile.FallingSpeed = -0.05
projectile.FallingAccel = -0.05
end
if projectile.SubType == 687 and projectile.Variant == 0 and projectile.FrameCount % 10 == 5 then
projectile.CurvingStrength = projectile.CurvingStrength * -1
end
if projectile.SubType == 688 and projectile.Variant == 0 and ((projectile.FrameCount % 8 == 2 and projectile:HasEntityFlags(ProjectileFlags.SLOWED)) or (projectile.FrameCount % 4 == 1 and not projectile:HasEntityFlags(ProjectileFlags.SLOWED))) and projectile.SpawnerType == 888 then
local projectile1 = Isaac.Spawn(9, 0, 689, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+Eterepernalrng:RandomInt(90)+45):Resized(projectile.Velocity:Length()*0.75), projectile)
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile1.Color = projectilenewcolor
local projectile2 = Isaac.Spawn(9, 0, 689, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+Eterepernalrng:RandomInt(90)+135):Resized(projectile.Velocity:Length()*0.75), projectile)
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile2.Color = projectilenewcolor
local projectile3 = Isaac.Spawn(9, 0, 689, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+Eterepernalrng:RandomInt(90)+225):Resized(projectile.Velocity:Length()*0.75), projectile)
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile3.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile3:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
if projectile.SubType == 703 and projectile.FrameCount == 14 and projectile.SpawnerType == 904 then
projectile.Velocity = Vector(0,0)
projectile:ClearProjectileFlags(ProjectileFlags.SINE_VELOCITY)
end
if projectile.SubType == 703 and projectile.FrameCount == 26 and projectile.SpawnerType == 904 then
projectile.Velocity = (Isaac.GetPlayer(0).Position - projectile.Position):Normalized() * 10
end
if projectile.SubType == 704 and projectile.Variant == 0 then
projectile.FallingSpeed = 0.004
projectile.FallingAccel = 0.004
if projectile.FrameCount <= 1 and projectile.MaxHitPoints ~= 136 and (projectile.Velocity):GetAngleDegrees() <= 135 and (projectile.Velocity):GetAngleDegrees() >= 90 then -- remove that when they fix the bug with angles in beast room
projectile.Velocity = Vector.FromAngle((projectile.Velocity):GetAngleDegrees() + (((projectile.Velocity):GetAngleDegrees() - 90) * 0.2)):Resized(0.9*projectile.Velocity:Length()+(projectile.Velocity:Length()-5.5)*0.09)
projectile.MaxHitPoints = 136
projectile.Position = projectile.Position + Vector(0,-12)
end
if projectile.FrameCount <= 1 and projectile.MaxHitPoints ~= 136 and (projectile.Velocity):GetAngleDegrees() >= 45 and (projectile.Velocity):GetAngleDegrees() <= 90 then -- remove that when they fix the bug with angles in beast room
projectile.Velocity = Vector.FromAngle((projectile.Velocity):GetAngleDegrees() + (((projectile.Velocity):GetAngleDegrees() - 90) * 0.2)):Resized(0.9*projectile.Velocity:Length()+(projectile.Velocity:Length()-5.5)*0.09)
projectile.MaxHitPoints = 136
projectile.Position = projectile.Position + Vector(0,-12)
end
end
if projectile.SubType == 704 and projectile.Variant == 0 and projectile.FrameCount == 15 then
projectile.CurvingStrength = 0
end
if projectile.SubType == 202 then
local projdata = projectile:GetData()
projectile.FallingSpeed = 0.065
projectile.FallingAccel = 0.065
if #Isaac.FindByType(951, 30, 83, false, true) >= 1 then
if projectile.MaxHitPoints <= 6 then
projectile.MaxHitPoints = projectile.MaxHitPoints + 1
end
if projectile.MaxHitPoints >= 6 and projectile.Position.Y >= 400 then
projectile.CurvingStrength = projectile.CurvingStrength * -1
projectile.MaxHitPoints = 1
end
end
if not projdata.projspin then
projdata.projspin = projectile.Velocity
end
if not projdata.inicstlth then
projdata.inicstlth = projectile.CurvingStrength
end
projectile.Velocity = Vector.FromAngle(projectile.Velocity:GetAngleDegrees()+((projectile.CurvingStrength*1000)*3.5/projectile.FrameCount)):Resized(projdata.projspin:Length()+((math.abs(projectile.CurvingStrength)*1000)*(projdata.projspin:Length()*0.022)))
end
if projectile.SubType == 203 or projectile.SubType == 204 then
local projdata = projectile:GetData()
if not projdata.projspin then
projdata.projspin = projectile.Velocity
end
if not projdata.inicstlth then
projdata.inicstlth = projectile.CurvingStrength
end
if projectile.FrameCount >= 202 then
projectile:Remove()
local tear = Isaac.Spawn(1000, 11, 0, projectile.Position, Vector(0,0), projectile)
if projectile.SpawnerType == 407 then
tear:GetSprite():ReplaceSpritesheet(0, "gfx/Sprites/e_wraith projectile.png")
tear:GetSprite():LoadGraphics()
end
end
projectile.Velocity = Vector.FromAngle(projectile.Velocity:GetAngleDegrees()+((projectile.CurvingStrength*1000)*(projectile.SubType/2-100.5)/projectile.FrameCount)):Resized(projdata.projspin:Length()+((math.abs(projectile.CurvingStrength)*1000)*(projdata.projspin:Length()*0.022)))
end
if projectile.SubType == 707 and projectile.Variant == 4 and projectile.Scale <= 2 then
projectile.Scale = projectile.Scale * 1.05
end
if projectile.SubType == 707 and projectile.Variant == 4 and projectile.Velocity:Length() > 0 then
projectile:Remove()
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 4, 0, projectile.Position+Vector(2,-18), Vector.FromAngle(45+90*i):Resized(10), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
if projectile.SubType == 713 and projectile.Variant == 4 then
if projectile.FrameCount >= 15 and projectile.FrameCount < 30 then
projectile.Velocity = projectile.Velocity*0.85
end
if projectile.FrameCount == 31 then
projectile.Velocity = projectile.Velocity*-1
end
if projectile.FrameCount >= 32 and projectile.Velocity:Length() <= 13 then
projectile.Velocity = projectile.Velocity*1.3
end
end
if projectile.Variant == 6 and (projectile.SubType == 178 or projectile.SubType == 202 or (projectile.SubType >= 202 and projectile.SubType <= 204) or projectile.SubType == 678) then
projectile.FallingSpeed = 0.065
projectile.FallingAccel = 0.065
end
if projectile.Variant == 13 and projectile.SubType == 714 then
projectile.FallingSpeed = 0.1
projectile.FallingAccel = 0.1
projectile:AddProjectileFlags(ProjectileFlags.NO_WALL_COLLIDE)
if projectile.SpawnerType == 950 and projectile.FrameCount == 10 then
projectile:Remove()
local projectile1 = Isaac.Spawn(9, 13, 714, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()-7):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 13, 714, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+7):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
if projectile.Variant == 14 and projectile.SubType == 678 and projectile.FrameCount <= 1 then
projectile.Size = 25
projectile:GetSprite().Scale = Vector(1.3,1.3)
end
if projectile.Variant == 14 and projectile.SubType == 678 and projectile.FrameCount >= 57 then
local projectile1 = Isaac.Spawn(9, 0, 678, projectile.Position, Vector.FromAngle(10):Resized(7), projectile)
projectile1.Color = Color(20,8,0,1,0,0,0)
projectile1:GetSprite().Scale = Vector(2,2)
projectile1:ToProjectile().FallingAccel = 0.45
projectile1.Size = 14
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
for i = 0,3 do
local projectile2 = Isaac.Spawn(9, 0, 678, projectile.Position, Vector.FromAngle(170+40*i):Resized(7), projectile)
projectile2.Color = Color(20,8,0,1,0,0,0)
projectile2:GetSprite().Scale = Vector(2,2)
projectile2:ToProjectile().FallingAccel = 0.45
projectile2.Size = 14
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
local projectile6 = Isaac.Spawn(9, 0, 678, projectile.Position, Vector.FromAngle(330):Resized(7), projectile)
projectile6.Color = Color(20,8,0,1,0,0,0)
projectile6:GetSprite().Scale = Vector(2,2)
projectile6:ToProjectile().FallingAccel = 0.45
projectile6.Size = 14
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile6:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Remove()
end
if projectile.Variant == 982 and projectile.SubType == 0 and projectile.FrameCount >= 4 and #Isaac.FindByType(274, -1, -1, false, true) <= 0 then
projectile.Velocity = projectile.Velocity * 0.9125 + (Isaac.GetPlayer(0).Position - projectile.Position):Resized(1)
projectile.FallingSpeed = 0.08
projectile.FallingAccel = 0.08
end
if projectile.Variant == 983 and projectile:IsDead() then
Isaac.Explode(projectile.Position, projectile, 30)
projectile:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_POST_PROJECTILE_UPDATE, mod.EterepProjectilesUpdate)

function mod:EterepProjectilesCollideWithSomething(projectile, familiar)
if projectile.Variant ~= 14 and familiar.Type ~= 3 and projectile.Scale > 1 and projectile.Mass > 8 and projectile.Mass <= 12 and not projectile:HasProjectileFlags(ProjectileFlags.BURST8) then
projectile.Scale = projectile.Mass-7
end
if projectile.SubType == 720 and (projectile.Variant == 0 or projectile.Variant == 3) then
local effect = Isaac.Spawn(1000, 11, 83, projectile.Position, Vector(0,0), projectile)
effect.SpriteOffset = Vector(0,-projectile.Height)
projectile:Remove()
end
if familiar.Type ~= 3 then
if projectile.SubType == 661 and projectile.SpawnerType == 68 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 22, 0, projectile.Position, Vector(0,0), projectile)
creep:GetSprite().Scale = Vector(3,3)
creep:ToEffect().Timeout = 210
end
if projectile.SubType == 663 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 25, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 250
creep:GetSprite().Scale = Vector(3,3)
end
if projectile.SubType == 665 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 25, 0, projectile.Position, Vector(0,0), projectile)
creep:GetSprite().Scale = Vector(2,2)
end
if projectile.SubType == 667 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 25, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 200
creep:GetSprite().Scale = Vector(1.3,1.3)
end
if (projectile.SubType == 669 or projectile.SubType == 670) and projectile.Variant == 0 then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+(projectile.SubType-669)*45+90*i):Resized(6), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
if projectile.SubType == 674 and projectile.Variant == 0 and projectile:Exists() then
for i = 1,6 do
local projectile1 = Isaac.Spawn(9, 0, 675, projectile.Position, Vector.FromAngle(EterepCustomAngle+60*i):Resized(5), projectile)
projectile1.HitPoints = Eterepernalrng:RandomInt(360)+1
projectile1:ToProjectile().FallingAccel = 0.05
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 675 and projectile.Variant == 0 and projectile:Exists() then
for i = 1,6 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+projectile.HitPoints+60*i):Resized(10), projectile)
projectile1.Color = Color(0.11,1.5,2,1,0,0,0)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 677 and projectile.Variant == 0 then
local creep = Isaac.Spawn(1000, 26, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 280
creep.HitPoints = 78
creep.Color = Color(0.5,0.5,0.5,1,0.6509,0.4078,0.1607)
end
if projectile.SubType == 679 and projectile.Variant == 0 then
Isaac.Spawn(1000, 15, 0, projectile.Position, Vector(0,0), projectile)
local gush = Isaac.Spawn(309, 0, 0, projectile.Position, Vector(0,0), projectile)
gush:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
projectile:Remove()
end
if projectile.SubType == 681 and projectile.Variant == 0 then
for i = 1,8 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position+Vector.FromAngle(45*i):Resized(20), Vector.FromAngle(45*i):Resized(9), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 682 and projectile.Variant == 0 then
local creeep = Isaac.Spawn(1000, 26, 0, projectile.Position, Vector(0,0), projectile)
creeep:GetSprite().Scale = Vector(0,0)
end
if projectile.SubType == 683 and projectile.Variant == 0 and projectile.FrameCount >= 15 then
for i = 1,8 do
local projectile1 = Isaac.Spawn(9, 0, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+45*i):Resized(5.25), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 686 and projectile.Variant == 0 then
local creeep = Isaac.Spawn(1000, 26, 0, projectile.Position, Vector(0,0), projectile)
creeep:GetSprite().Scale = Vector(2,2)
end
if projectile.SubType == 688 and projectile.Variant == 0 and projectile.SpawnerType == 888 then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 688, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(projectile.Velocity:Length()), projectile)
projectile1:GetSprite().Scale = Vector(1.5,1.5)
local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Kill()
end
if projectile.SubType == 688 and projectile.Variant == 0 and projectile.SpawnerType == 9 then
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 689, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+105+30*i):Resized(projectile.Velocity:Length()), projectile)local projectilenewcolor = Color(1,1,1,0.75,1,0,0)
projectilenewcolor:SetColorize(0,0,0,4)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Kill()
end
if projectile.SubType == 690 and projectile.Variant == 0 then
local projectile1 = Isaac.Spawn(9, 0, 689, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+155):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 0, 689, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+205):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
projectile:Kill()
end
if projectile.SubType == 717 and projectile.Variant == 0 then
for i = 1,8 do
local projectile1 = Isaac.Spawn(9, 0, 202, projectile.Position, Vector.FromAngle(45*i):Resized(7), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 719 and projectile.Variant == 0 then
if projectile:Exists() and projectile.SpawnerType == 909 then
for i = 1,3 do
local projectile1 = Isaac.Spawn(9, 0, 721, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120+30*i):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120+30*i):Resized(projectile.Velocity:Length()), projectile)
projectile1:GetSprite().Scale = Vector(1.5,1.5)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
for i = 1,6 do
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position+Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
projectile.SubType = 0
projectile:Remove()
end
if projectile:Exists() and projectile.SpawnerType == 909 then
for i = 1,15 do
local projectile1 = Isaac.Spawn(9, 0, 719, projectile.Position, Vector.FromAngle(EterepCustomAngle+24*i):Resized(10), projectile)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
for i = 1,2 do
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position+Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
projectile.SubType = 0
projectile:Remove()
end
end
if projectile.SubType == 721 and projectile.Variant == 0 then
if projectile:Exists() and (projectile.SpawnerType == 9 or projectile.SpawnerType == 909) then
for i = 1,15 do
local projectile1 = Isaac.Spawn(9, 0, 719, projectile.Position, Vector.FromAngle(EterepCustomAngle+24*i):Resized(10), projectile)
local projectilenewcolor = Color(1,1,1,1,0,0,0)
projectilenewcolor:SetColorize(1.2,1.8,0.8,1)
projectile1.Color = projectilenewcolor
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
for i = 1,2 do
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position+Vector(Eterepernalrng:RandomInt(61)-30,Eterepernalrng:RandomInt(61)-30), Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
projectile.SubType = 0
projectile:Remove()
end
end
if projectile.SubType == 729 and projectile.Variant == 0 then
local maggot = Isaac.Spawn(853, 0, 0, projectile.Position, Vector(0,0), projectile)
maggot:ClearEntityFlags(EntityFlag.FLAG_APPEAR)
end
if projectile.SubType >= 730 and projectile.Variant == 0 and projectile.SubType <= 733 then
projectile:Remove()
Isaac.Spawn(24, 0, projectile.SubType-630, projectile.Position, Vector(0,0), projectile)
end
if projectile.SubType == 678 and projectile.Variant == 1 and projectile.SpawnerType == 25 then
for i = 1,3 do
local projectile1 = Isaac.Spawn(9, 1, 0, projectile.Position, Vector.FromAngle(EterepCustomAngle+120*i):Resized(10), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
projectile:Remove()
end
if projectile.SubType == 684 and projectile.Variant == 1 then
projectile:Remove()
local projectile1 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+120):Resized(projectile.Velocity:Length()), projectile)
local projectile2 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+160):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+160):Resized(projectile.Velocity:Length()), projectile)
local projectile3 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+200):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+200):Resized(projectile.Velocity:Length()), projectile)
local projectile4 = Isaac.Spawn(9, 1, 0, projectile.Position+Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+240):Resized(20), Vector.FromAngle((projectile.Velocity):GetAngleDegrees()+240):Resized(projectile.Velocity:Length()), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile2:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile3:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
projectile4:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
if projectile.SubType == 683 and projectile.Variant == 3 then
local creeep = Isaac.Spawn(1000, 94, 0, projectile.Position, Vector(0,0), projectile)
creeep:GetSprite().Scale = Vector(0,0)
end
if projectile.SubType == 685 and projectile.Variant == 3 then
local creep = Isaac.Spawn(1000, 94, 0, projectile.Position, Vector(0,0), projectile)
creep:ToEffect().Timeout = 220
creep:GetSprite().Scale = Vector(0,0)
end
if projectile.Variant == 8 and (projectile.SubType == 150 or projectile.SubType == 151) then
for i = 1,8 do
Isaac.Spawn(9, 0, 0, projectile.Position+Vector.FromAngle(45*i):Resized(9)+Vector(0,8), Vector.FromAngle(45*i):Resized(9), projectile)
end
if projectile.SubType == 151 then
Isaac.Spawn(4, 16, 1, projectile.Position, Vector.FromAngle((projectile.Velocity):GetAngleDegrees()):Resized(0), projectile)
end
SFXManager():Play(77)
projectile:Remove()
end
if projectile.Variant == 15 and EterepMother == true then
projectile:Remove()
for i = 1,4 do
local projectile1 = Isaac.Spawn(9, 0, 684, projectile.Position, Vector.FromAngle(45+90*i):Resized(10), projectile)
if projectile:HasProjectileFlags(ProjectileFlags.SLOWED) then
projectile1:ToProjectile():AddProjectileFlags(ProjectileFlags.SLOWED)
end
end
end
if projectile.Variant >= 980 and projectile.Variant <= 983 then
projectile.Variant = 0
end
if projectile.Variant == 983 then
Isaac.Explode(projectile.Position, projectile, 30)
projectile:Remove()
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_PROJECTILE_COLLISION, mod.EterepProjectilesCollideWithSomething)

function mod:EterepBombs(bomb)
if bomb.SubType == 19431 and bomb.FrameCount <= 1 then
bomb:SetExplosionCountdown(114)
end
if bomb.SubType == 19431 and bomb.Variant == 0 and bomb.FrameCount >= 44 and bomb:Exists() then
Game():BombDamage(bomb.Position, 5, 75, false, bomb, 0, 0, false)
Isaac.Spawn(1000, 1, 200, bomb.Position, Vector(0,0), bomb)
Isaac.Spawn(1000, 18, 0, bomb.Position, Vector(0,0), bomb)
bomb:Remove()
end
if bomb.SubType == 19431 and bomb.Variant == 0 and bomb.FrameCount <= 2 then
bomb.EntityCollisionClass = EntityCollisionClass.ENTCOLL_PLAYEROBJECTS
end
if bomb.SubType == 5555 and bomb.Variant == 3 and bomb.FrameCount >= 4 then
bomb.EntityCollisionClass = EntityCollisionClass.ENTCOLL_ALL
end
if bomb.SubType == 77 and bomb.SpawnerType == 404 then
bomb.Velocity = bomb.Velocity * 0.9
end
if bomb.Variant == 16 and bomb.SubType == 1 and bomb.CollisionDamage > 0 then
bomb.CollisionDamage = 0
end
if bomb.Variant == 16 and bomb.SubType == 1 and bomb:GetSprite():IsPlaying("Pulse") and bomb:GetSprite():GetFrame() == 58 then
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(45):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(135):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(225):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(315):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(90):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(180):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(270):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(360):Resized(9), bomb)
Isaac.Explode(bomb.Position, bomb, 10)
bomb:Remove()
end
if bomb.SubType == 27 and bomb.Variant == 16 and bomb.Scale ~= 1.25 then
bomb.SpriteScale = Vector(1.25, 1.25)
end
if bomb.SubType == 27 and bomb.Variant == 16 and bomb:GetSprite():IsPlaying("Pulse") and bomb:GetSprite():GetFrame() == 58 then
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+30):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+60):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+90):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+120):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+150):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+180):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+210):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+240):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+270):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+300):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+330):Resized(9), bomb)
Isaac.Spawn(9, 0, 0, bomb.Position, Vector.FromAngle(EterepCustomAngle+360):Resized(9), bomb)
Isaac.Explode(bomb.Position, bomb, 30)
bomb:Remove()
end
if bomb.SubType == 27 and bomb.Variant == 17 and bomb:IsDead() then
for i = 1,25 do
Isaac.Spawn(9, 9, 0, bomb.Position, Vector.FromAngle(Eterepernalrng:RandomInt(360)+1):Resized((Eterepernalrng:RandomInt(41)+100)*0.1), bomb)
end
for i = 1,40 do
local projectile = Isaac.Spawn(9, 9, 0, Isaac.GetRandomPosition(0), Vector(0,0), bomb)
projectile:ToProjectile().Height = -Eterepernalrng:RandomInt(760)-580
projectile:ToProjectile().FallingAccel = 2
end
end
end
mod:AddCallback(ModCallbacks.MC_POST_BOMB_UPDATE, mod.EterepBombs)

function mod:EterepLasers(laser)
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 39 and laser.Parent.SubType == 85 then
laser.SpriteScale = Vector(math.max(3.5 / 2, 0.1), 1)
laser:SetSize(31, Vector(3, 3), 31)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 43 and laser.Parent.Variant == 0 and laser.Parent.SubType == 88 then
laser.SpriteScale = Vector(math.max(3.5 / 2, 0.1), 1)
laser:SetSize(31, Vector(3, 3), 31)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 62 and laser.Parent.Variant == 2 and laser.Parent.SubType == 88 then
laser.SpriteScale = Vector(math.max(2.62 / 2, 0.1), 1)
laser:SetSize(23, Vector(3, 3), 23)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and (laser.Parent.Type == 68 or laser.Parent.Type == 81 or laser.Parent.Type == 260) and laser.Parent.SubType == 88 then
laser.SpriteScale = Vector(math.max(2.62 / 2, 0.1), 1)
laser:SetSize(23, Vector(3, 3), 23)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 79 and laser.Parent.SubType == 12 then
laser.SpriteScale = Vector(math.max(2.62 / 2, 0.1), 1)
laser:SetSize(23, Vector(3, 3), 23)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 84 and laser.Parent.SubType == 88 then
laser.SpriteScale = Vector(math.max(3.475 / 2, 0.1), 1)
laser:SetSize(31, Vector(3, 3), 31)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 285 and laser.Parent.SubType == 85 then
laser.SpriteScale = Vector(math.max(3.475 / 2, 0.1), 1)
laser:SetSize(31, Vector(3, 3), 31)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and laser.Variant == 1 and laser.FrameCount <= 5 and laser.Parent.Type == 979 and laser.Parent.Variant == 90 and laser.Parent.SpawnerType == 274 then
laser.SpriteScale = Vector(math.max(2.475 / 1.66, 0.1), 1)
laser:SetSize(26, Vector(1.5, 1.5), 31)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.SpawnerType == 241 and laser.FrameCount <= 0 then
laser:GetSprite().Scale = Vector(0,0)
end
if laser.SpawnerType == 241 and laser.FrameCount == 1 then
laser:GetSprite().Scale = Vector(1,1)
end
if laser.Parent ~= nil and laser.Parent.Type == 49 and laser.Parent.Variant <= 1 and laser.Parent.SubType == 90 and laser.Variant == 1 and laser.FrameCount <= 5 then
laser.SpriteScale = Vector(math.max(3.5 / 2, 0.1), 1)
laser:SetSize(31, Vector(3, 3), 31)
laser.Color = Color(1.3,1,1,1,0,0,0)
end
if laser.Parent ~= nil and (laser.Parent.Size == 37 or laser.Parent.SubType == 88) and laser.Variant == 1 and laser.SpawnerType == 78 and laser.MaxHitPoints == 0 and laser.FrameCount <= 1 and (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) then
laser:Remove()
end
if laser.Parent ~= nil and (laser.Parent.Size == 37 or laser.Parent.SubType == 88) and laser.Variant == 1 and laser.SpawnerType == 78 and laser.FrameCount == 25 and (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) then
laser.MaxHitPoints = 20
end
if laser.Parent ~= nil and (laser.Parent.Size == 37 or laser.Parent.SubType == 88) and laser.Variant == 1 and laser.SpawnerType == 78 and laser.FrameCount >= 25 and (Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE or Game():GetLevel():GetStageType() == StageType.STAGETYPE_REPENTANCE_B) then
laser:SetActiveRotation(0, 99999, (laser.MaxHitPoints-20)*0.1)
if laser.MaxHitPoints <= Etereplaserrotation then
laser.MaxHitPoints = laser.MaxHitPoints + 2
end
if laser.MaxHitPoints >= Etereplaserrotation then
laser.MaxHitPoints = laser.MaxHitPoints - 2
end
end
end
mod:AddCallback(ModCallbacks.MC_POST_LASER_UPDATE, mod.EterepLasers)

function mod:EterepPickupDisappear(type, variant, subtype, position, velocity, spawner, seed, size)
if EterepLessPickupDrops >= 1 and Game():GetRoom():GetType() == RoomType.ROOM_DEFAULT then
local pickupchance = Eterepernalrng:RandomInt(100)+1
if EterepLessPickupDrops >= pickupchance then
Eterepickupsdisappear = 1
for i = 1, Game():GetNumPlayers() do
if Isaac.GetPlayer(i-1):HasCollectible(241) or Isaac.GetPlayer(i-1):HasCollectible(670) then
Eterepickupsdisappear = Eterepickupsdisappear + 1
Eterepoptions2pickups = 2
end
end
end
if EterepLessPickupDrops < pickupchance then
Eterepickupsdisappear = 0
end
end
end
mod:AddCallback(ModCallbacks.MC_PRE_SPAWN_CLEAN_AWARD, mod.EterepPickupDisappear)

function mod:EterepPickupsUpdate(pickup)
if pickup:IsDead() and Game():GetNumPlayers() == 1 and pickup.Variant == 10 and pickup.SubType == 4 and EterepTranformation == 1 and pickup.Size ~= 13.5 then
Eterepheartsforeternaltransformation = Eterepheartsforeternaltransformation + 1
pickup.Size = 13.5
end
end
mod:AddCallback(ModCallbacks.MC_POST_PICKUP_UPDATE, mod.EterepPickupsUpdate)

function mod:EterepEffectsInit(effect)
if effect.Variant == 11 and effect.SubType == 83 then
effect:GetSprite():ReplaceSpritesheet(0, "gfx/theresnothinghere.png")
effect:GetSprite():LoadGraphics()
end
end
mod:AddCallback(ModCallbacks.MC_POST_EFFECT_INIT, mod.EterepEffectsInit)

function mod:EterepEffects(effect)
if effect.SubType == 200 and effect.Variant == 1 then
effect.SpriteScale = Vector(1.3, 1.3)
end
if effect.SubType == 300 and effect.Variant == 1 and effect.FrameCount <= 1 then
effect.SpriteScale = Vector(2.3, 2.3)
end
if (effect.SubType == 77 or effect.SubType == 78) and effect.Variant == 19 then
if effect.SubType == 78 and effect.Position:Distance(Vector(80, 160)) <= 80 and effect.Position:Distance(Vector(80, 160)) >= 30 and Eterepisaaclightbeam1 <= 0 then
Isaac.Spawn(1000, 19, 0, Vector(80, 160), Vector(0, 0), effect)
Eterepisaaclightbeam1 = 30
end
if effect.SubType == 78 and effect.Position:Distance(Vector(80, 400)) <= 80 and effect.Position:Distance(Vector(80, 400)) >= 30 and Eterepisaaclightbeam2 <= 0 then
Isaac.Spawn(1000, 19, 0, Vector(80, 400), Vector(0, 0), effect)
Eterepisaaclightbeam2 = 30
end
if effect.SubType == 78 and effect.Position:Distance(Vector(560, 160)) <= 80 and effect.Position:Distance(Vector(560, 160)) >= 30 and Eterepisaaclightbeam3 <= 0 then
Isaac.Spawn(1000, 19, 0, Vector(560, 160), Vector(0, 0), effect)
Eterepisaaclightbeam3 = 30
end
if effect.SubType == 78 and effect.Position:Distance(Vector(560, 400)) <= 80 and effect.Position:Distance(Vector(560, 400)) >= 30 and Eterepisaaclightbeam4 <= 0 then
Isaac.Spawn(1000, 19, 0, Vector(560, 400), Vector(0, 0), effect)
Eterepisaaclightbeam4 = 30
end
effect:Remove()
local lightbeam = Isaac.Spawn(1000, 19, 0, effect.Position, Vector(0, 0), effect)
lightbeam.Size = 20
end
if effect.Variant == 19 and effect.SubType == 76 and effect.SpawnerType == 102 and effect.FrameCount <= 1 then
effect:GetSprite():Play("SpotlightDelayed", true)
end
if effect.SubType == 155 and effect.Variant == 22 then
effect:SetColor(Color(1.7,1,1,1,0,0,0),155,1,false,false)
end
if effect.HitPoints == 78 and effect.Variant == 26 then
effect:SetColor(Color(0.5,0.5,0.5,1,0.6509,0.4078,0.1607), 5, 0, false, false)
end
if effect.SpawnerType == 220 and effect.Variant == 94 and effect.FrameCount >= 2 then
effect:GetSprite().Scale = Vector(1.2,1.2)
end
if effect.SpawnerType == 223 and effect.Variant == 94 and effect.FrameCount >= 2 then
effect:GetSprite().Scale = Vector(1.42,1.42)
end
if effect.Parent ~= nil and effect.Parent.Type == 917 and effect.Parent.SubType == 84 and effect.Variant == 168 and effect.FrameCount >= 120 then
effect:Kill()
end
if effect.SubType == 77 and effect.Variant == 172 and effect.SpawnerType == 950 and effect.SpawnerVariant == 2 and effect:GetSprite():IsPlaying("Attack") and effect:GetSprite():GetFrame() == 1 then
for i = 1,16 do
local projectile = Isaac.Spawn(9, 0, 0, effect.Position+Vector(0,-80), Vector.FromAngle(22.5*i):Resized(11), effect)
projectile:ToProjectile().Color = Color(0.8,0.8,0.8,2,125,125,125)
projectile:ToProjectile().FallingAccel = -0.08
end
end
if effect.SubType == 77 and effect.Variant == 172 and effect.SpawnerType == 950 and effect.SpawnerVariant == 2 and effect:GetSprite():IsPlaying("Attack") and effect:GetSprite():GetFrame() == 6 then
for i = 1,16 do
local projectile = Isaac.Spawn(9, 0, 0, effect.Position+Vector(0,-80), Vector.FromAngle(11.25+22.5*i):Resized(11), effect)
projectile:ToProjectile().Color = Color(0.8,0.8,0.8,2,125,125,125)
projectile:ToProjectile().FallingAccel = -0.08
end
end
if effect.SubType == 77 and effect.Variant == 172 and effect.SpawnerType == 950 and effect.SpawnerVariant == 2 and effect:GetSprite():IsPlaying("Death") and effect:GetSprite():GetFrame() == 11 then
for i = 1,16 do
local projectile = Isaac.Spawn(9, 0, 0, effect.Position, Vector.FromAngle(22.5*i):Resized(11), effect)
projectile:ToProjectile().Color = Color(0.8,0.8,0.8,2,125,125,125)
projectile:ToProjectile().FallingAccel = -0.08
end
end
if effect.SubType == 77 and effect.Variant == 172 and effect.SpawnerType == 950 and effect.SpawnerVariant == 2 and effect:GetSprite():IsPlaying("Death") and effect:GetSprite():GetFrame() == 16 then
for i = 1,16 do
local projectile = Isaac.Spawn(9, 0, 0, effect.Position, Vector.FromAngle(11.25+22.5*i):Resized(11), effect)
projectile:ToProjectile().Color = Color(0.8,0.8,0.8,2,125,125,125)
projectile:ToProjectile().FallingAccel = -0.08
end
end
if effect.SubType == 77 and effect.Variant == 172 and Eterepdogmaangeldied == true then
effect:Remove()
end
if effect.Variant == 136 and effect.SubType == 0 and effect.Parent ~= nil and effect.Parent.Type == 816 and effect.Parent.SubType == 85 then
Isaac.Spawn(1000, 15, 0, effect.Position+Vector(0,-55), Vector(0,0), effect)
effect:GetSprite():Load("gfx/e_special rocks.anm2",true)
effect:GetSprite():LoadGraphics()
effect.SpriteOffset = Vector(0,-15)
effect.SubType = 55
SFXManager():Play(265)
effect:GetSprite():Play("Bomb",true)
end
if effect.Variant == 141 and effect.SubType == 0 and effect.FrameCount >= 400 then
effect:Remove()
end
end
mod:AddCallback(ModCallbacks.MC_POST_EFFECT_UPDATE, mod.EterepEffects)

function mod:EterepJokerCardNerf(card)
if EterepJokerNerf == 1 and Game().Difficulty <= 1 then
if Game():GetLevel():GetStage() == LevelStage.STAGE5 or Game():GetLevel():GetStage() == LevelStage.STAGE6 or Game():GetLevel():GetStage() == LevelStage.STAGE7 then
Isaac.GetPlayer(0):UseCard(1)
end
end
if EterepJokerNerf == 1 and Game().Difficulty >= 2 then
if Game():GetLevel():GetStage() == LevelStage.STAGE5_GREED or Game():GetLevel():GetStage() == LevelStage.STAGE6_GREED or Game():GetLevel():GetStage() == LevelStage.STAGE7_GREED then
Isaac.GetPlayer(0):UseCard(1)
end
end
end
mod:AddCallback(ModCallbacks.MC_USE_CARD, mod.EterepJokerCardNerf, 31)

function mod:EterepDamageChanger(player, cacheFlag)
if Eterepheartsforeternaltransformation >= 10 then
if cacheFlag == CacheFlag.CACHE_FLYING then
Isaac.GetPlayer(0).CanFly = true
end
if cacheFlag == CacheFlag.CACHE_DAMAGE then
Isaac.GetPlayer(0).Damage = Isaac.GetPlayer(0).Damage * 1.2 + 2
end
end
if EterepDamageLimit == 1 and player:ToPlayer().Damage >= 5.3 then
if cacheFlag == CacheFlag.CACHE_DAMAGE then
player:ToPlayer().Damage = (player:ToPlayer().Damage + 0.5618) / ( 0.9 + (player:ToPlayer().Damage*0.03886))
end
end
end
mod:AddCallback(ModCallbacks.MC_EVALUATE_CACHE, mod.EterepDamageChanger)

function mod:EterepEternalTransformationUseItem()
if Game():GetNumPlayers() == 1 and EterepTranformation == 1 then
Eterepheartsforeternaltransformation = Eterepheartsforeternaltransformation + 1
end
end
mod:AddCallback( ModCallbacks.MC_USE_ITEM, mod.EterepEternalTransformationUseItem, 146)

function mod:EterepPickups(pickup)
if EterepStarterValue == 1 and EterepBombtoTrollBomb >= 1 and pickup.Variant == 40 and pickup.SubType == 1 and pickup:ToPickup().Price == 0 and pickup.Size ~= 13 and (math.abs((pickup.Position - Isaac.GetPlayer(0).Position):Length()) < 40 or math.abs((pickup.Position - Isaac.GetPlayer(1).Position):Length()) < 40 or math.abs((pickup.Position - Isaac.GetPlayer(2).Position):Length()) < 40 or math.abs((pickup.Position - Isaac.GetPlayer(3).Position):Length()) < 40) then
local bombchange = Eterepernalrng:RandomInt(100)+1
if bombchange <= EterepBombtoTrollBomb then
Isaac.Spawn(4, 3, 0, pickup.Position, Vector(0,0), pickup)
pickup:Remove()
pickup.Size = 13
end
if bombchange > EterepBombtoTrollBomb then
pickup.Size = 13
end
end
if EterepStarterValue == 1 and EterepBombtoTrollBomb >= 1 and pickup.Variant == 40 and pickup.SubType == 2 and pickup:ToPickup().Price == 0 and pickup.Size == 12 and (math.abs((pickup.Position - Isaac.GetPlayer(0).Position):Length()) < 40 or math.abs((pickup.Position - Isaac.GetPlayer(1).Position):Length()) < 40 or math.abs((pickup.Position - Isaac.GetPlayer(2).Position):Length()) < 40 or math.abs((pickup.Position - Isaac.GetPlayer(3).Position):Length()) < 40) then
local bombchange = Eterepernalrng:RandomInt(100)+1
if bombchange <= EterepBombtoTrollBomb then
Isaac.Spawn(4, 3, 0, pickup.Position, Vector(0,0), pickup)
pickup:Remove()
pickup.Size = 13
Isaac.GetPlayer(0):AddBombs(1)
end
if bombchange > EterepBombtoTrollBomb then
pickup.Size = 13
end
end
end
mod:AddCallback(ModCallbacks.MC_POST_PICKUP_UPDATE, mod.EterepPickups)

function mod:EterepNewRoomConfigurations()
if EterepStarterValue == 1 then
local room = Game():GetRoom()
local level = Game():GetLevel()
local stage = level:GetStage()
if EterepDelirium == 1 and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
EterepDelirium = 0
end
if EterepLamb == 1 and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
EterepLamb = 0
end
if EterepMegaSatan == true and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
EterepMegaSatan = false
end
if Eterepheretic == 1 and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
Eterepheretic = 0
end
if EterepHeartSpawn == false then
EterepHeartSpawn = true
end
if Eterepdogma == true and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
Eterepdogma = false
end
if Eterepmrfredunleash == true then
Eterepmrfredunleash = false
end
if EterepNotRotgut == true and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
EterepNotRotgut = false
end
if EterepRotgut == true and Game():GetRoom():GetType() ~= RoomType.ROOM_BOSS then
EterepRotgut = false
end
if Eterepeternalarenacanappear == 1 and Game():GetRoom():GetType() == RoomType.ROOM_CHALLENGE then
EterepChangeBackdrop(EterepEternalArenaBackdrop)
end
if Eterepeternalarenawave > 0 and Game():GetRoom():GetType() ~= RoomType.ROOM_CHALLENGE then
Eterepeternalarenawave = 0
end
if EterepCheckFloor == Game():GetLevel():GetStage() * 5 + Game():GetLevel():GetStageType() * 5 and Game():GetLevel():GetCurrentRoomIndex() ~= 84 then
for i = 0, DoorSlot.NUM_DOOR_SLOTS - 1 do
local door = room:GetDoor(i)
if Eterepeternalarenacanappear == 1 and door ~= nil then
if (door.TargetRoomType == RoomType.ROOM_CHALLENGE and door.CurrentRoomType ~= RoomType.ROOM_SECRET and door.CurrentRoomType ~= RoomType.ROOM_SUPERSECRET ) or (door.CurrentRoomType == RoomType.ROOM_CHALLENGE and door.TargetRoomType ~= RoomType.ROOM_SECRET and door.TargetRoomType ~= RoomType.ROOM_SUPERSECRET ) then
local target_room_data = level:GetRoomByIdx(door.TargetRoomIndex).Data
if (door.TargetRoomType == RoomType.ROOM_CHALLENGE and target_room_data.Shape == RoomShape.ROOMSHAPE_1x1)
or (door.CurrentRoomType == RoomType.ROOM_CHALLENGE and room:GetRoomShape() == RoomShape.ROOMSHAPE_1x1) then
door.TargetRoomType = RoomType.ROOM_TREASURE
door.CurrentRoomType = RoomType.ROOM_TREASURE
local sprite = door:GetSprite()
sprite:Load("gfx/arena_door.anm2", false)
sprite:LoadGraphics()
if room:IsClear() then
sprite:Play("Opened", true)
else
sprite:Play("Closed", true)
end
end
end
end
end
end
if Eterepismenuopen == true then
local bosschancetoeternal1 = Eterepernalrng:RandomInt(100)+1
local bosschancetoeternal2 = Eterepernalrng:RandomInt(100)+1
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) == 0 then
Etereplacementernal = true
end
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) >= 1 then
Etereplacementernal = false
end
if bosschancetoeternal1 > EtereplaceChanceBoss then
Etereplacementernal = false
end
if bosschancetoeternal1 <= EterepReplaceChanceFinalBoss then
EterepFinalacementernal = true
end
if bosschancetoeternal1 > EterepReplaceChanceFinalBoss then
EterepFinalacementernal = false
end
Eterepismenuopen = false
Eterepmenuscreen = 0
Eterepmenudelay = 6
local modDataString = ""
modDataString = modDataString
.. tostring (EterepRegenMonster) .. "," .. "\r\n"
.. tostring (EterepRegenBoss) .. "," .. "\r\n"
.. tostring (EterepReplaceChanceFinalBoss) .. "," .. "\r\n"
.. tostring (EterepMonstersLimit) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster0) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster1) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster2) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster3) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster4) .. "," .. "\r\n"
.. tostring (EtereplaceChanceBoss) .. "," .. "\r\n"
.. tostring (EtereplaceChanceSin) .. "," .. "\r\n"
.. tostring (EterepClassicEnemiesPatterns) .. "," .. "\r\n"
.. tostring (EterepDamageLimit) .. "," .. "\r\n"
.. tostring (EterepChallengeRoom) .. "," .. "\r\n"
.. tostring (EterepTranformation) .. "," .. "\r\n"
.. tostring (EterepBombtoTrollBomb) .. "," .. "\r\n"
.. tostring (EterepReducedArmor) .. "," .. "\r\n"
.. tostring (EterepClassicShotSpeed) .. "," .. "\r\n"
.. tostring (EterepD6Nerf) .. "," .. "\r\n"
.. tostring (EterepJokerNerf) .. "," .. "\r\n"
.. tostring (EterepLessKeys) .. "," .. "\r\n"
.. tostring (EterepMonstersreward) .. "," .. "\r\n"
.. tostring (EterepBossesreward) .. "," .. "\r\n"
.. tostring (EterepLessPickupDrops) .. "," .. "\r\n"
.. tostring (Eterepeternalarenacanappear) .. "," .. "\r\n"
.. tostring (Eterepitemwascollected) .. "," .. "\r\n"
.. tostring (Eterepangelicitemappeared) .. "," .. "\r\n"
.. tostring (Eterepconfigsaver) .. "," .. "\r\n"
.. tostring (Eterepeternalarenawave) .. "," .. "\r\n"
.. tostring (Eterepeternalwave) .. "," .. "\r\n"
.. tostring (Eterepheartsforeternaltransformation) .. "," .. "\r\n"
.. tostring (Eterepeternaltransformation)
Isaac.SaveModData(mod,modDataString)
end
end
end
mod:AddCallback( ModCallbacks.MC_POST_NEW_ROOM, mod.EterepNewRoomConfigurations)

function mod:EterepEternalArenaSpawnRate()
if EterepStarterValue == 1 then
if EterepGideonCorpse == true then
EterepGideonCorpse = false
end
if Game():GetLevel():GetStage() >= LevelStage.STAGE1_2 then
local eternalchallengechance = Eterepernalrng:RandomInt(100)+1
if eternalchallengechance <= EterepChallengeRoom then
Eterepeternalarenacanappear = 1
Eterepeternalwave = Eterepernalrng:RandomInt(3)+1
Eterepeternalenemiescanappear = 0
Eterepeternalarenawave = 0
Eterepitemwascollected = 0
Eterepangelicitemappeared = 0
end
if eternalchallengechance > EterepChallengeRoom then
Eterepeternalarenacanappear = 0
end
end
if Eterepeternalarenacanappear == 1 then
local room = Game():GetRoom()
local level = Game():GetLevel()
local stage = level:GetStage()
for i = 0, DoorSlot.NUM_DOOR_SLOTS - 1 do
local door = room:GetDoor(i)
if Eterepeternalarenacanappear == 1 and door ~= nil then
if (door.TargetRoomType == RoomType.ROOM_CHALLENGE and door.CurrentRoomType ~= RoomType.ROOM_SECRET and door.CurrentRoomType ~= RoomType.ROOM_SUPERSECRET ) or (door.CurrentRoomType == RoomType.ROOM_CHALLENGE and door.TargetRoomType ~= RoomType.ROOM_SECRET and door.TargetRoomType ~= RoomType.ROOM_SUPERSECRET ) then
local target_room_data = level:GetRoomByIdx(door.TargetRoomIndex).Data
if (door.TargetRoomType == RoomType.ROOM_CHALLENGE and target_room_data.Shape == RoomShape.ROOMSHAPE_1x1)
or (door.CurrentRoomType == RoomType.ROOM_CHALLENGE and room:GetRoomShape() == RoomShape.ROOMSHAPE_1x1) then
door.TargetRoomType = RoomType.ROOM_TREASURE
door.CurrentRoomType = RoomType.ROOM_TREASURE
local sprite = door:GetSprite()
sprite:Load("gfx/arena_door.anm2", false)
sprite:LoadGraphics()
if room:IsClear() then
sprite:Play("Opened", true)
else
sprite:Play("Closed", true)
end
end
end
end
end
end
end
if EterepCheckFloor ~= Game():GetLevel():GetStage() * 5 + Game():GetLevel():GetStageType() * 5 then
EterepCheckFloor = Game():GetLevel():GetStage() * 5 + Game():GetLevel():GetStageType() * 5
end
if Game():GetNumPlayers() == 1 and (Isaac.GetPlayer(0):ToPlayer():HasTrinket(55, false) or Isaac.GetPlayer(0):ToPlayer():HasTrinket(55, true)) and EterepTranformation == 1 then
Eterepheartsforeternaltransformation = Eterepheartsforeternaltransformation + 1
end
end
mod:AddCallback( ModCallbacks.MC_POST_NEW_LEVEL , mod.EterepEternalArenaSpawnRate)

function mod:EterepConfigMenuText()
if EterepReplaceMonster1 == nil or EterepReplaceMonster1 > 100 then
Isaac.RenderText("Eternal Edition Mod is Broken", 110, 0, 1, 1, 1, 0.65)
Isaac.RenderText("Try to reset the values of this mod pressing delete on the menu", 110, 10, 1, 1, 1, 0.65)
Isaac.RenderText("If it doesn't work then Delete the Data of this mod to fix it", 110, 20, 1, 1, 1, 0.65)
end
if Eterepismenuopen == false and Game():GetFrameCount() <= 50 and Isaac.CountEnemies() == 0 then
Isaac.RenderText("Press", 110, 0, 1, 1, 1, 0.65)
Isaac.RenderText("F3", 145, 0, 0, 1, 0, 0.65)
Isaac.RenderText("To Open Eternal Mod Menu Config.", 160, 0, 1, 1, 1, 0.65)
end
if Eterepismenuopen == true and Eterepmenuscreen <= 2 then
Isaac.RenderText("Navigate in the menu by pressing", 80, 0, 255, 255, 0, 255)
Isaac.RenderText("Up", 280, 0, 0, 255, 0, 255)
Isaac.RenderText("or", 300, 0, 255, 255, 0, 255)
Isaac.RenderText("Down", 320, 0, 0, 255, 0, 255)
Isaac.RenderText("to move the arrow at the left of the options.", 80, 10, 255, 255, 0, 255)
Isaac.RenderText("Press", 45, 20, 255, 255, 0, 255)
Isaac.RenderText("Enter", 80, 20, 0, 255, 0, 255)
Isaac.RenderText("or", 115, 20, 255, 255, 0, 255)
Isaac.RenderText("Left Shift", 133, 20, 0, 255, 0, 255)
Isaac.RenderText("to Select the Option", 198, 20, 255, 255, 0, 255)
Isaac.RenderText("pointed by arrow.", 45, 30, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 224, 255, 255, 0, 255)
Isaac.RenderText("Delete", 110, 224, 0, 255, 0, 255)
Isaac.RenderText("To Reset The Values, It Also Reset The Run!", 150, 224, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 236, 255, 255, 0, 255)
Isaac.RenderText("R", 110, 236, 0, 255, 0, 255)
Isaac.RenderText("to", 118, 236, 255, 255, 0, 255)
Isaac.RenderText("R", 135, 236, math.sin(0+(Game():GetFrameCount()*0.4))+1, math.sin(0+(Game():GetFrameCount()*0.3))+1, math.sin(0+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("A", 143, 236, math.sin(-1.2+(Game():GetFrameCount()*0.4))+1, math.sin(-0.9+(Game():GetFrameCount()*0.3))+1, math.sin(-0.6+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("N", 151, 236, math.sin(-2.4+(Game():GetFrameCount()*0.4))+1, math.sin(-1.8+(Game():GetFrameCount()*0.3))+1, math.sin(-1.2+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("D", 159, 236, math.sin(-3.6+(Game():GetFrameCount()*0.4))+1, math.sin(-2.7+(Game():GetFrameCount()*0.3))+1, math.sin(-1.8+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("O", 167, 236, math.sin(-4.8+(Game():GetFrameCount()*0.4))+1, math.sin(-3.6+(Game():GetFrameCount()*0.3))+1, math.sin(-2.4+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("M", 175, 236, math.sin(-6+(Game():GetFrameCount()*0.4))+1, math.sin(-4.5+(Game():GetFrameCount()*0.3))+1, math.sin(-3+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("I", 183, 236, math.sin(-7.2+(Game():GetFrameCount()*0.4))+1, math.sin(-5.4+(Game():GetFrameCount()*0.3))+1, math.sin(-3.6+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("Z", 191, 236, math.sin(-8.4+(Game():GetFrameCount()*0.4))+1, math.sin(-6.3+(Game():GetFrameCount()*0.3))+1, math.sin(-4.2+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("E", 199, 236, math.sin(-9.6+(Game():GetFrameCount()*0.4))+1, math.sin(-7.2+(Game():GetFrameCount()*0.3))+1, math.sin(-4.8+(Game():GetFrameCount()*0.2))+1, 0.65)
Isaac.RenderText("your options, It Also Reset The Run!", 210, 236, 255, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 0 then
Isaac.RenderText("Page 1", 75, 45, 255, 255, 0, 255)
Isaac.RenderText("HP Regen to eternal monsters", 75, 65, 255, 255, 0, 255)
Isaac.RenderText("HP Regen to eternal bosses", 75, 75, 255, 255, 0, 255)
Isaac.RenderText("Max eternal monsters per room", 75, 85, 255, 255, 0, 255)
Isaac.RenderText("Chance to make ALL monsters eternal", 75, 95, 255, 255, 0, 255)
Isaac.RenderText("Chance for a single eternal monster", 75, 105, 255, 255, 0, 255)
Isaac.RenderText("Chance for a second eternal monster", 75, 115, 255, 255, 0, 255)
Isaac.RenderText("Chance for a third eternal monster", 75, 125, 255, 255, 0, 255)
Isaac.RenderText("Chance for a fourth eternal monster", 75, 135, 255, 255, 0, 255)
Isaac.RenderText("Chance for eternal bosses", 75, 145, 255, 255, 0, 255)
Isaac.RenderText("Chance for eternal major bosses", 75, 155, 255, 255, 0, 255)
Isaac.RenderText("Chance for eternal sins", 75, 165, 255, 255, 0, 255)
Isaac.RenderText("Chance for eternal arena", 75, 175, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 200, 255, 255, 0, 255)
Isaac.RenderText("Right", 110, 200, 0, 255, 0, 255)
Isaac.RenderText("To Access The Next Page Of Menu", 145, 200, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 212, 255, 255, 0, 255)
Isaac.RenderText("X", 110, 212, 0, 255, 0, 255)
Isaac.RenderText("To Close Menu", 120, 212, 255, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 1 then
Isaac.RenderText("Page 2", 75, 45, 255, 255, 0, 255)
Isaac.RenderText("Chance to eternal monsters drop rewards", 75, 65, 255, 255, 0, 255)
Isaac.RenderText("Chance to eternal bosses drop eternal heart", 75, 75, 255, 255, 0, 255)
Isaac.RenderText("Enable eternal transformation?", 75, 85, 255, 255, 0, 255)
Isaac.RenderText("Enable classic enemies AI?", 75, 95, 255, 255, 0, 255)
Isaac.RenderText("Enable classic shot speed?", 75, 105, 255, 255, 0, 255)
Isaac.RenderText("Enable classic D6?", 75, 115, 255, 255, 0, 255)
Isaac.RenderText("Enable scaling player damage?", 75, 125, 255, 255, 0, 255)
Isaac.RenderText("Enable bomb pickups turning troll?", 75, 135, 255, 255, 0, 255)
Isaac.RenderText("Enable joker card nerf?", 75, 145, 255, 255, 0, 255)
Isaac.RenderText("Enable reduced armor in final bosses?", 75, 155, 255, 255, 0, 255)
Isaac.RenderText("Chance for reduced keys drops", 75, 165, 255, 255, 0, 255)
Isaac.RenderText("Chance for reduced room clear rewards", 75, 175, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 200, 255, 255, 0, 255)
Isaac.RenderText("Left", 110, 200, 0, 255, 0, 255)
Isaac.RenderText("To Access The Previous Page Of Menu", 138, 200, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 212, 255, 255, 0, 255)
Isaac.RenderText("X", 110, 212, 0, 255, 0, 255)
Isaac.RenderText("To Close Menu", 120, 212, 255, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen <= 1 then
Isaac.RenderText("--->", 43+math.sin(Game():GetFrameCount()*0.3)*5, 65+10*Eterepmenuarrowposition, 255, 255, 0, 255)
end
if Eterepismenuopen == true and ((Eterepmenuscreen >= 25 and Eterepmenuscreen <= 34) or Eterepmenuscreen == 40 or Eterepmenuscreen == 43 or Eterepmenuscreen == 44) then
Isaac.RenderText("Press", 75, 30, 255, 255, 0, 255)
Isaac.RenderText("Up", 110, 30, 0, 255, 0, 255)
Isaac.RenderText("To Increase by 10", 128, 30, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 40, 255, 255, 0, 255)
Isaac.RenderText("Down", 110, 40, 0, 255, 0, 255)
Isaac.RenderText("To Decrease by 10", 138, 40, 255, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen >= 21 and Eterepmenuscreen <= 45 then
Isaac.RenderText("Press", 75, 50, 255, 255, 0, 255)
Isaac.RenderText("Left", 110, 50, 0, 255, 0, 255)
Isaac.RenderText("To Decrease by 1", 140, 50, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 60, 255, 255, 0, 255)
Isaac.RenderText("Right", 110, 60, 0, 255, 0, 255)
Isaac.RenderText("To Increase by 1", 145, 60, 255, 255, 0, 255)
Isaac.RenderText("Press", 75, 70, 255, 255, 0, 255)
Isaac.RenderText("X", 110, 70, 0, 255, 0, 255)
Isaac.RenderText("To Return to Menu", 120, 70, 255, 255, 0, 255)
if Eterepmenuscreen ~= 34 and Eterepmenuscreen ~= 44 then
Isaac.RenderText("Value:", 75, 140, 255, 255, 0, 255)
end
if Eterepmenuscreen == 34 or Eterepmenuscreen == 44 then
Isaac.RenderText("Value:", 75, 150, 255, 255, 0, 255)
end
end
if Eterepismenuopen == true and Eterepmenuscreen == 21 then
Isaac.RenderText("Enable HP regen for eternal monsters", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("0 = disable, 1 = low, 2 = medium, 3 = high", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 1", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepRegenMonster, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 22 then
Isaac.RenderText("Enable HP regen for eternal bosses", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("0 = disable, 1 = low, 2 = medium, 3 = high", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 1", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepRegenBoss, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 23 then
Isaac.RenderText("Max amount of eternal monsters per room", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 4, 0 disables the limit", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 3", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepMonstersLimit, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 24 then
Isaac.RenderText("Chance in % for 100% eternal monsters", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("ONLY IF Max eternal monsters per room = 0", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 15", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepReplaceMonster0, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 25 then
Isaac.RenderText("Chance in % for a single eternal monster", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 15", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepReplaceMonster1, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 26 then
Isaac.RenderText("Chance in % for a second eternal monster", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 2", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepReplaceMonster2, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 27 then
Isaac.RenderText("Chance in % for a third eternal monster", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 1", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepReplaceMonster3, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 28 then
Isaac.RenderText("Chance in % for a fourth eternal monster", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepReplaceMonster4, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 29 then
Isaac.RenderText("Chance in % that all bosses in the room will", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("turn eternal, doesn't affect major bosses", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 33", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EtereplaceChanceBoss, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 30 then
Isaac.RenderText("Chance in % that all final bosses in the", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("room will turn eternal", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 100", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepReplaceChanceFinalBoss, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 31 then
Isaac.RenderText("Chance in % that a sin in the room will", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("turn eternal", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 33", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EtereplaceChanceSin, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 32 then
Isaac.RenderText("Chance in % to Make an eternal arena", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("appear replacing the normal arena", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 12", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepChallengeRoom, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 33 then
Isaac.RenderText("Chance in % to Eternal Monsters", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("drop a pickup when killed", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 20", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepMonstersreward, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 34 then
Isaac.RenderText("Chance in % to Eternal bosses", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("drop an eternal heart when killed.", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("This chance triggers twice for major eternal bosses", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 120, 255, 255, 0, 255)
Isaac.RenderText("Default is 50", 75, 130, 255, 255, 0, 255)
Isaac.RenderText(EterepBossesreward, 115, 150, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 35 then
Isaac.RenderText("Adds the eternal transformation", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 1", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepTranformation, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 36 then
Isaac.RenderText("Classic AI to some monsters and bosses", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepClassicEnemiesPatterns, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 37 then
Isaac.RenderText("Adds the classic shot speed to monsters", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("that shoots slow projectiles", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepClassicShotSpeed, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 38 then
Isaac.RenderText("Transform the D6 into the Eternal D6", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 110, 255, 255, 0, 255)
Isaac.RenderText(EterepD6Nerf, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 39 then
Isaac.RenderText("Limit the player damage, decreasing the", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("damage of future damage up items", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepDamageLimit, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 40 then
Isaac.RenderText("Chance in % to change a bomb pickup", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("into a troll bomb when trying to pick it", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepBombtoTrollBomb, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 41 then
Isaac.RenderText("Joker card on chapter 5 and after will", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("trigger The Fool card instead", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepJokerNerf, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 42 then
Isaac.RenderText("Reduces the effectiveness of armor on", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("final bosses that has too much armor", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("0 = Disable, 1 = Enable", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepReducedArmor, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 43 then
Isaac.RenderText("Chance in % to make keys on chapter 2 and", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("after be replaced with hearts or coins", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepLessKeys, 115, 140, 0, 255, 0, 255)
end
if Eterepismenuopen == true and Eterepmenuscreen == 44 then
Isaac.RenderText("Chance in % for the room reward to be", 75, 90, 255, 255, 0, 255)
Isaac.RenderText("removed after clearing a room", 75, 100, 255, 255, 0, 255)
Isaac.RenderText("Value go from 0 to 100", 75, 110, 255, 255, 0, 255)
Isaac.RenderText("Default is 0", 75, 120, 255, 255, 0, 255)
Isaac.RenderText(EterepLessPickupDrops, 115, 150, 0, 255, 0, 255)
end
end
mod:AddCallback(ModCallbacks.MC_POST_RENDER , mod.EterepConfigMenuText)

function mod:EterepConfigMenuSettings()
if Input.IsButtonPressed(Keyboard.KEY_F3, 0) and Eterepismenuopen == false then
Eterepismenuopen = true
end
if Input.IsButtonPressed(Keyboard.KEY_X, 0) and Eterepmenuscreen <= 1 and Eterepismenuopen == true and Eterepmenudelay == 0 then
local bosschancetoeternal1 = Eterepernalrng:RandomInt(100)+1
local bosschancetoeternal2 = Eterepernalrng:RandomInt(100)+1
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) == 0 then
Etereplacementernal = true
end
if bosschancetoeternal1 <= EtereplaceChanceBoss and #Isaac.FindByType(274, -1, -1, false, true) >= 1 then
Etereplacementernal = false
end
if bosschancetoeternal1 > EtereplaceChanceBoss then
Etereplacementernal = false
end
if bosschancetoeternal1 <= EterepReplaceChanceFinalBoss then
EterepFinalacementernal = true
end
if bosschancetoeternal1 > EterepReplaceChanceFinalBoss then
EterepFinalacementernal = false
end
Eterepismenuopen = false
Eterepmenuscreen = 0
Eterepmenudelay = 6
Eterepmenuarrowposition = 0
local modDataString = ""
modDataString = modDataString
.. tostring (EterepRegenMonster) .. "," .. "\r\n"
.. tostring (EterepRegenBoss) .. "," .. "\r\n"
.. tostring (EterepReplaceChanceFinalBoss) .. "," .. "\r\n"
.. tostring (EterepMonstersLimit) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster0) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster1) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster2) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster3) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster4) .. "," .. "\r\n"
.. tostring (EtereplaceChanceBoss) .. "," .. "\r\n"
.. tostring (EtereplaceChanceSin) .. "," .. "\r\n"
.. tostring (EterepClassicEnemiesPatterns) .. "," .. "\r\n"
.. tostring (EterepDamageLimit) .. "," .. "\r\n"
.. tostring (EterepChallengeRoom) .. "," .. "\r\n"
.. tostring (EterepTranformation) .. "," .. "\r\n"
.. tostring (EterepBombtoTrollBomb) .. "," .. "\r\n"
.. tostring (EterepReducedArmor) .. "," .. "\r\n"
.. tostring (EterepClassicShotSpeed) .. "," .. "\r\n"
.. tostring (EterepD6Nerf) .. "," .. "\r\n"
.. tostring (EterepJokerNerf) .. "," .. "\r\n"
.. tostring (EterepLessKeys) .. "," .. "\r\n"
.. tostring (EterepMonstersreward) .. "," .. "\r\n"
.. tostring (EterepBossesreward) .. "," .. "\r\n"
.. tostring (EterepLessPickupDrops) .. "," .. "\r\n"
.. tostring (Eterepeternalarenacanappear) .. "," .. "\r\n"
.. tostring (Eterepitemwascollected) .. "," .. "\r\n"
.. tostring (Eterepangelicitemappeared) .. "," .. "\r\n"
.. tostring (Eterepconfigsaver) .. "," .. "\r\n"
.. tostring (Eterepeternalarenawave) .. "," .. "\r\n"
.. tostring (Eterepeternalwave) .. "," .. "\r\n"
.. tostring (Eterepheartsforeternaltransformation) .. "," .. "\r\n"
.. tostring (Eterepeternaltransformation)
Isaac.SaveModData(mod,modDataString)
end
if Eterepmenuscreen >= 21 and Eterepmenuscreen <= 44 and Input.IsButtonPressed(Keyboard.KEY_X, 0) and Eterepmenudelay == 0 and Eterepismenuopen == true then
Eterepmenuscreen = 0
Eterepmenudelay = 6
end
if Eterepmenudelay > 0 then
Eterepmenudelay = Eterepmenudelay - 1
end
if Eterepmenuarrowposition >= 1 and Eterepmenuscreen <= 1 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and Eterepmenudelay <= 1 and Eterepismenuopen == true then
Eterepmenuarrowposition = Eterepmenuarrowposition - 1
Eterepmenudelay = 4
end
if Eterepmenuarrowposition <= 10 and Eterepmenuscreen <= 1 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and Eterepmenudelay <= 1 and Eterepismenuopen == true then
Eterepmenuarrowposition = Eterepmenuarrowposition + 1
Eterepmenudelay = 4
end
if Eterepmenuscreen == 0 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and Eterepmenudelay == 0 and Eterepismenuopen == true then
Eterepmenuscreen = 1
Eterepmenudelay = 4
end
if Eterepmenuscreen == 1 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and Eterepmenudelay == 0 and Eterepismenuopen == true then
Eterepmenuscreen = 0
Eterepmenudelay = 4
end
if Eterepmenuscreen == 0 and (Input.IsButtonPressed(Keyboard.KEY_ENTER, 0) or Input.IsButtonPressed(Keyboard.KEY_LEFT_SHIFT, 0)) and Eterepmenudelay == 0 and Eterepismenuopen == true then
Eterepmenuscreen = Eterepmenuarrowposition + 21
Eterepmenudelay = 4
end
if Eterepmenuscreen == 1 and (Input.IsButtonPressed(Keyboard.KEY_ENTER, 0) or Input.IsButtonPressed(Keyboard.KEY_LEFT_SHIFT, 0)) and Eterepmenudelay == 0 and Eterepismenuopen == true then
Eterepmenuscreen = Eterepmenuarrowposition + 33
Eterepmenudelay = 4
end
if Eterepmenuscreen == 21 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepRegenMonster > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepRegenMonster = EterepRegenMonster - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 21 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepRegenMonster < 3 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepRegenMonster = EterepRegenMonster + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 22 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepRegenBoss > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepRegenBoss = EterepRegenBoss - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 22 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepRegenBoss < 3 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepRegenBoss = EterepRegenBoss + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 23 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepMonstersLimit > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepMonstersLimit = EterepMonstersLimit - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 23 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepMonstersLimit < 4 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepMonstersLimit = EterepMonstersLimit + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 24 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepReplaceMonster0 < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster0 = EterepReplaceMonster0 + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 24 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepReplaceMonster0 > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster0 = EterepReplaceMonster0 - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 24 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReplaceMonster0 > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster0 = EterepReplaceMonster0 - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 24 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReplaceMonster0 < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster0 = EterepReplaceMonster0 + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 25 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepReplaceMonster1 < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster1 = EterepReplaceMonster1 + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 25 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepReplaceMonster1 > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster1 = EterepReplaceMonster1 - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 25 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReplaceMonster1 > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster1 = EterepReplaceMonster1 - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 25 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReplaceMonster1 < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster1 = EterepReplaceMonster1 + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 26 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepReplaceMonster2 < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster2 = EterepReplaceMonster2 + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 26 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepReplaceMonster2 > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster2 = EterepReplaceMonster2 - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 26 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReplaceMonster2 > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster2 = EterepReplaceMonster2 - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 26 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReplaceMonster2 < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster2 = EterepReplaceMonster2 + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 27 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepReplaceMonster3 < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster3 = EterepReplaceMonster3 + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 27 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepReplaceMonster3 > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster3 = EterepReplaceMonster3 - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 27 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReplaceMonster3 > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster3 = EterepReplaceMonster3 - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 27 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReplaceMonster3 < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster3 = EterepReplaceMonster3 + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 28 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepReplaceMonster4 < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster4 = EterepReplaceMonster4 + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 28 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepReplaceMonster4 > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster4 = EterepReplaceMonster4 - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 28 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReplaceMonster4 > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster4 = EterepReplaceMonster4 - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 28 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReplaceMonster4 < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceMonster4 = EterepReplaceMonster4 + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 29 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EtereplaceChanceBoss < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceBoss = EtereplaceChanceBoss + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 29 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EtereplaceChanceBoss > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceBoss = EtereplaceChanceBoss - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 29 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EtereplaceChanceBoss > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceBoss = EtereplaceChanceBoss - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 29 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EtereplaceChanceBoss < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceBoss = EtereplaceChanceBoss + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 30 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepReplaceChanceFinalBoss < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceChanceFinalBoss = EterepReplaceChanceFinalBoss + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 30 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepReplaceChanceFinalBoss > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceChanceFinalBoss = EterepReplaceChanceFinalBoss - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 30 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReplaceChanceFinalBoss > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceChanceFinalBoss = EterepReplaceChanceFinalBoss - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 30 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReplaceChanceFinalBoss < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReplaceChanceFinalBoss = EterepReplaceChanceFinalBoss + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 31 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EtereplaceChanceSin < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceSin = EtereplaceChanceSin + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 31 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EtereplaceChanceSin > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceSin = EtereplaceChanceSin - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 31 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EtereplaceChanceSin > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceSin = EtereplaceChanceSin - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 31 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EtereplaceChanceSin < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EtereplaceChanceSin = EtereplaceChanceSin + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 32 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepChallengeRoom > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepChallengeRoom = EterepChallengeRoom - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 32 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepChallengeRoom < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepChallengeRoom = EterepChallengeRoom + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 32 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepChallengeRoom < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepChallengeRoom = EterepChallengeRoom + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 32 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepChallengeRoom > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepChallengeRoom = EterepChallengeRoom - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 33 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepMonstersreward < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepMonstersreward = EterepMonstersreward + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 33 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepMonstersreward > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepMonstersreward = EterepMonstersreward - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 33 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepMonstersreward > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepMonstersreward = EterepMonstersreward - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 33 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepMonstersreward < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepMonstersreward = EterepMonstersreward + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 34 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepBossesreward < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBossesreward = EterepBossesreward + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 34 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepBossesreward > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBossesreward = EterepBossesreward - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 34 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepBossesreward > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBossesreward = EterepBossesreward - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 34 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepBossesreward < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBossesreward = EterepBossesreward + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 35 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepTranformation == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepTranformation = EterepTranformation - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 35 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepTranformation == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepTranformation = EterepTranformation + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 36 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepClassicEnemiesPatterns == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepClassicEnemiesPatterns = EterepClassicEnemiesPatterns - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 36 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepClassicEnemiesPatterns == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepClassicEnemiesPatterns = EterepClassicEnemiesPatterns + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 37 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepClassicShotSpeed == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepClassicShotSpeed = EterepClassicShotSpeed - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 37 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepClassicShotSpeed == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepClassicShotSpeed = EterepClassicShotSpeed + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 38 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepD6Nerf == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepD6Nerf = EterepD6Nerf - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 38 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepD6Nerf == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepD6Nerf = EterepD6Nerf + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 39 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepDamageLimit == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepDamageLimit = EterepDamageLimit - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 39 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepDamageLimit == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepDamageLimit = EterepDamageLimit + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 40 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepBombtoTrollBomb > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBombtoTrollBomb = EterepBombtoTrollBomb - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 40 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepBombtoTrollBomb < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBombtoTrollBomb = EterepBombtoTrollBomb + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 40 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepBombtoTrollBomb < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBombtoTrollBomb = EterepBombtoTrollBomb + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 40 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepBombtoTrollBomb > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepBombtoTrollBomb = EterepBombtoTrollBomb - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 41 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepJokerNerf == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepJokerNerf = EterepJokerNerf - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 41 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepJokerNerf == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepJokerNerf = EterepJokerNerf + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 42 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepReducedArmor == 1 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReducedArmor = EterepReducedArmor - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 42 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepReducedArmor == 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepReducedArmor = EterepReducedArmor + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 43 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepLessKeys > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessKeys = EterepLessKeys - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 43 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepLessKeys < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessKeys = EterepLessKeys + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 43 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepLessKeys < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessKeys = EterepLessKeys + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 43 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepLessKeys > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessKeys = EterepLessKeys - 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 44 and Input.IsButtonPressed(Keyboard.KEY_LEFT, 0) and EterepLessPickupDrops > 0 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessPickupDrops = EterepLessPickupDrops - 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 44 and Input.IsButtonPressed(Keyboard.KEY_RIGHT, 0) and EterepLessPickupDrops < 100 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessPickupDrops = EterepLessPickupDrops + 1
Eterepmenudelay = 3
end
if Eterepmenuscreen == 44 and Input.IsButtonPressed(Keyboard.KEY_UP, 0) and EterepLessPickupDrops < 91 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessPickupDrops = EterepLessPickupDrops + 10
Eterepmenudelay = 3
end
if Eterepmenuscreen == 44 and Input.IsButtonPressed(Keyboard.KEY_DOWN, 0) and EterepLessPickupDrops > 9 and Eterepmenudelay == 0 and Eterepismenuopen == true then
EterepLessPickupDrops = EterepLessPickupDrops - 10
Eterepmenudelay = 3
end
end
mod:AddCallback(ModCallbacks.MC_POST_UPDATE , mod.EterepConfigMenuSettings)

function mod:EterepExit(SaveData)
if SaveData then
local modDataString = ""
modDataString = modDataString
.. tostring (EterepRegenMonster) .. "," .. "\r\n"
.. tostring (EterepRegenBoss) .. "," .. "\r\n"
.. tostring (EterepReplaceChanceFinalBoss) .. "," .. "\r\n"
.. tostring (EterepMonstersLimit) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster0) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster1) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster2) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster3) .. "," .. "\r\n"
.. tostring (EterepReplaceMonster4) .. "," .. "\r\n"
.. tostring (EtereplaceChanceBoss) .. "," .. "\r\n"
.. tostring (EtereplaceChanceSin) .. "," .. "\r\n"
.. tostring (EterepClassicEnemiesPatterns) .. "," .. "\r\n"
.. tostring (EterepDamageLimit) .. "," .. "\r\n"
.. tostring (EterepChallengeRoom) .. "," .. "\r\n"
.. tostring (EterepTranformation) .. "," .. "\r\n"
.. tostring (EterepBombtoTrollBomb) .. "," .. "\r\n"
.. tostring (EterepReducedArmor) .. "," .. "\r\n"
.. tostring (EterepClassicShotSpeed) .. "," .. "\r\n"
.. tostring (EterepD6Nerf) .. "," .. "\r\n"
.. tostring (EterepJokerNerf) .. "," .. "\r\n"
.. tostring (EterepLessKeys) .. "," .. "\r\n"
.. tostring (EterepMonstersreward) .. "," .. "\r\n"
.. tostring (EterepBossesreward) .. "," .. "\r\n"
.. tostring (EterepLessPickupDrops) .. "," .. "\r\n"
.. tostring (Eterepeternalarenacanappear) .. "," .. "\r\n"
.. tostring (Eterepitemwascollected) .. "," .. "\r\n"
.. tostring (Eterepangelicitemappeared) .. "," .. "\r\n"
.. tostring (Eterepconfigsaver) .. "," .. "\r\n"
.. tostring (Eterepeternalarenawave) .. "," .. "\r\n"
.. tostring (Eterepeternalwave) .. "," .. "\r\n"
.. tostring (Eterepheartsforeternaltransformation) .. "," .. "\r\n"
.. tostring (Eterepeternaltransformation)
Isaac.SaveModData(mod,modDataString)
end
end
mod:AddCallback(ModCallbacks.MC_PRE_GAME_EXIT, mod.EterepExit)
